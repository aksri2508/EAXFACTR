function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{TlXv:function(t,e,i){"use strict";i.d(e,"a",(function(){return U}));var o=i("fXoL"),n=i("3Pt+"),r=i("ey9i"),a=i("oARB"),c=i("ofXK"),s=i("eO1q");function l(t,e){1&t&&(o.Vb(0,"span",14),o.Lc(1,"*"),o.Ub())}function u(t,e){if(1&t&&(o.Vb(0,"div",15),o.Lc(1),o.Ub()),2&t){var i=o.hc(2).$implicit,n=o.hc(2);o.Cb(1),o.Nc(" ",n.myFormErrors1[i.controlName]," ")}}function b(t,e){if(1&t&&(o.Tb(0),o.Vb(1,"label",10),o.Lc(2),o.Jc(3,l,2,0,"span",11),o.Ub(),o.Qb(4,"input",12),o.Jc(5,u,2,1,"div",13),o.Sb()),2&t){var i=o.hc().$implicit,n=o.hc(2);o.Cb(2),o.Mc(i.fieldLabel),o.Cb(1),o.oc("ngIf","1"===i.requiredField),o.Cb(1),o.oc("formControlName",i.controlName),o.Cb(1),o.oc("ngIf",n.myFormErrors1[i.controlName])}}function m(t,e){1&t&&(o.Vb(0,"span",14),o.Lc(1,"*"),o.Ub())}function f(t,e){if(1&t&&(o.Vb(0,"option",19),o.Lc(1),o.Ub()),2&t){var i=e.$implicit;o.oc("value",i.optionsFieldLabel),o.Cb(1),o.Nc(" ",i.optionsFieldLabel,"")}}function d(t,e){if(1&t&&(o.Vb(0,"div",15),o.Lc(1),o.Ub()),2&t){var i=o.hc(2).$implicit,n=o.hc(2);o.Cb(1),o.Nc(" ",n.myFormErrors1[i.controlName]," ")}}function h(t,e){if(1&t&&(o.Tb(0),o.Vb(1,"label",10),o.Lc(2),o.Jc(3,m,2,0,"span",11),o.Ub(),o.Vb(4,"select",16),o.Vb(5,"option",17),o.Lc(6,"--SELECT--"),o.Ub(),o.Jc(7,f,2,2,"option",18),o.Ub(),o.Jc(8,d,2,1,"div",13),o.Sb()),2&t){var i=o.hc().$implicit,n=o.hc(2);o.Cb(2),o.Mc(i.fieldLabel),o.Cb(1),o.oc("ngIf","1"===i.requiredField),o.Cb(1),o.oc("formControlName",i.controlName),o.Cb(3),o.oc("ngForOf",i.selectOptionListArray),o.Cb(1),o.oc("ngIf",n.myFormErrors1[i.controlName])}}function v(t,e){1&t&&(o.Vb(0,"span",14),o.Lc(1,"*"),o.Ub())}function p(t,e){if(1&t&&(o.Vb(0,"div",15),o.Lc(1),o.Ub()),2&t){var i=o.hc(2).$implicit,n=o.hc(2);o.Cb(1),o.Nc(" ",n.myFormErrors1[i.controlName]," ")}}function g(t,e){if(1&t&&(o.Tb(0),o.Vb(1,"label",10),o.Lc(2),o.Jc(3,v,2,0,"span",11),o.Ub(),o.Qb(4,"p-calendar",20),o.Jc(5,p,2,1,"div",13),o.Sb()),2&t){var i=o.hc().$implicit,n=o.hc(2);o.Cb(2),o.Mc(i.fieldLabel),o.Cb(1),o.oc("ngIf","1"===i.requiredField),o.Cb(1),o.oc("formControlName",i.controlName)("monthNavigator",!0)("yearNavigator",!0)("yearRange",n.appConstants.PICKER_YEAR_RANGE)("dateFormat",n.appConstants.PICKER_DATE_FORMAT),o.Cb(1),o.oc("ngIf",n.myFormErrors1[i.controlName])}}function y(t,e){1&t&&(o.Vb(0,"span",14),o.Lc(1,"*"),o.Ub())}function C(t,e){if(1&t&&(o.Vb(0,"div",15),o.Lc(1),o.Ub()),2&t){var i=o.hc(2).$implicit,n=o.hc(2);o.Cb(1),o.Nc(" ",n.myFormErrors1[i.controlName]," ")}}function F(t,e){if(1&t&&(o.Tb(0),o.Vb(1,"label",10),o.Lc(2),o.Jc(3,y,2,0,"span",11),o.Ub(),o.Qb(4,"input",21),o.Jc(5,C,2,1,"div",13),o.Sb()),2&t){var i=o.hc().$implicit,n=o.hc(2);o.Cb(2),o.Mc(i.fieldLabel),o.Cb(1),o.oc("ngIf","1"===i.requiredField),o.Cb(1),o.oc("formControlName",i.controlName),o.Cb(1),o.oc("ngIf",n.myFormErrors1[i.controlName])}}function S(t,e){if(1&t&&(o.Vb(0,"div",7),o.Tb(1,8),o.Jc(2,b,6,4,"ng-container",9),o.Jc(3,h,9,5,"ng-container",9),o.Jc(4,g,6,8,"ng-container",9),o.Jc(5,F,6,4,"ng-container",9),o.Sb(),o.Ub()),2&t){var i=e.$implicit;o.Cb(1),o.oc("ngSwitch",i.fieldTypeId),o.Cb(1),o.oc("ngSwitchCase",1),o.Cb(1),o.oc("ngSwitchCase",2),o.Cb(1),o.oc("ngSwitchCase",3),o.Cb(1),o.oc("ngSwitchCase",4)}}function V(t,e){if(1&t&&(o.Vb(0,"div",1),o.Vb(1,"div",2),o.Qb(2,"i",3),o.Lc(3,"UDF Fields "),o.Ub(),o.Vb(4,"div",4),o.Vb(5,"div",5),o.Jc(6,S,6,5,"div",6),o.Ub(),o.Ub(),o.Ub()),2&t){var i=o.hc();o.Cb(5),o.oc("formGroup",i.myForm1),o.Cb(1),o.oc("ngForOf",i.fieldJson)}}var U=function(){var t=function(){function t(e,i,n){_classCallCheck(this,t),this.utilsService=e,this.udfViewerDataService=i,this.formBuilder=n,this.doSuccess=new o.n,this.doFailure=new o.n,this.fieldJson=[],this.appConstants=r.h,this.myForm1Data={},this.myFormErrors1={},this.myFormValidationMsgs1={}}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"getFields",value:function(t){var e=this;this.myForm1=this.formBuilder.group({}),this.udfViewerDataService.getFields(this.type,t).subscribe((function(t){"SUCCESS"===t.status?e.initializeJsonForm(t.results):e.utilsService.showFailureMsg(t)}))}},{key:"initializeJsonForm",value:function(t){var e=this;Array.isArray(t)?t.forEach((function(t){t.controlName="control"+t.id;var i;i="3"===t.fieldTypeId?t.value?e.utilsService.getPickerDateFormat(t.value):"":t.value,e.myForm1.addControl(t.controlName,new n.f(i)),"1"===t.requiredField&&e.generateValidators("required",t)})):t=[],this.myForm1.valueChanges.subscribe((function(t){e.utilsService.validation(e.myForm1,e.myFormErrors1,e.myFormValidationMsgs1),e.myForm1Data=e.myForm1.getRawValue()})),this.myForm1Data=this.myForm1.getRawValue(),this.fieldJson=t}},{key:"generateValidators",value:function(t,e){this.myFormValidationMsgs1[e.controlName]={},"required"===t&&this.myForm1.controls[e.controlName].setValidators(n.u.required),this.myFormErrors1[e.controlName]="",this.myFormValidationMsgs1[e.controlName].required=e.fieldLabel+" is required"}},{key:"valid",value:function(){return this.myForm1.valid}},{key:"getFormValues",value:function(){var t=this,e=[];return this.fieldJson.forEach((function(i){e.push({formControlId:i.id,value:t.myForm1Data[i.controlName]?t.myForm1Data[i.controlName]:""})})),e}},{key:"checkValidations",value:function(){this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1,!0)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Pb(r.g),o.Pb(a.mb),o.Pb(n.e))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-udf-viewer"]],inputs:{type:"type"},outputs:{doSuccess:"doSuccess",doFailure:"doFailure"},decls:1,vars:1,consts:[["class","box",4,"ngIf"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row",3,"formGroup"],["class","form-group col-sm-3",4,"ngFor","ngForOf"],[1,"form-group","col-sm-3"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"form-label"],["class","mandatory",4,"ngIf"],["type","text",1,"form-control","form-control-sm",3,"formControlName"],["class","validation-error",4,"ngIf"],[1,"mandatory"],[1,"validation-error"],[1,"form-control","form-control-sm",3,"formControlName"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["showButtonBar","true",3,"formControlName","monthNavigator","yearNavigator","yearRange","dateFormat"],["type","number",1,"form-control","form-control-sm",3,"formControlName"]],template:function(t,e){1&t&&o.Jc(0,V,7,2,"div",0),2&t&&o.oc("ngIf",e.fieldJson.length>0)},directives:[c.m,n.n,n.i,c.l,c.o,c.p,n.b,n.m,n.g,n.t,n.p,n.v,s.a,n.q],styles:[""]}),t}()},dJ0z:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var o=i("o+NB"),n=i("fXoL"),r=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=n.Nb({type:t}),t.\u0275inj=n.Mb({factory:function(e){return new(e||t)},imports:[[o.BranchModule]]}),t}()},w9rb:function(t,e,i){"use strict";i.d(e,"a",(function(){return m}));var o=i("fXoL"),n=i("ey9i"),r=i("oARB"),a=i("ofXK"),c=["fileUpload"];function s(t,e){1&t&&(o.Vb(0,"tr"),o.Vb(1,"th",12),o.Lc(2,"Action"),o.Ub(),o.Vb(3,"th",12),o.Lc(4,"Info"),o.Ub(),o.Vb(5,"th",12),o.Lc(6,"Download"),o.Ub(),o.Ub())}function l(t,e){if(1&t){var i=o.Wb();o.Vb(0,"a",16),o.dc("click",(function(){o.Dc(i);var t=o.hc().index;return o.hc().download(t)})),o.Lc(1,"Download"),o.Ub()}}function u(t,e){1&t&&(o.Vb(0,"span"),o.Lc(1,"-"),o.Ub())}function b(t,e){if(1&t){var i=o.Wb();o.Vb(0,"tr"),o.Vb(1,"td"),o.Vb(2,"a",13),o.dc("click",(function(){o.Dc(i);var t=e.index;return o.hc().delete(t)})),o.Qb(3,"i",14),o.Ub(),o.Ub(),o.Vb(4,"td"),o.Vb(5,"div"),o.Lc(6),o.Ub(),o.Vb(7,"div"),o.Lc(8),o.Ub(),o.Ub(),o.Vb(9,"td"),o.Jc(10,l,2,0,"a",15),o.Jc(11,u,2,0,"span",10),o.Ub(),o.Ub()}if(2&t){var n=e.$implicit;o.Cb(6),o.Nc("File Name: ",n.fileName,""),o.Cb(2),o.Nc("Attachment date: ",n.createdOn,""),o.Cb(2),o.oc("ngIf",n.downloadLink),o.Cb(1),o.oc("ngIf",!n.downloadLink)}}var m=function(){var t=function(){function t(e,i){_classCallCheck(this,t),this.utilsService=e,this.attachmentsDataService=i,this.doSuccess=new o.n,this.doFailure=new o.n,this.attachmentsList=[]}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"loadAttachments",value:function(t){var e=this;t&&this.attachmentsDataService.getAttachments(this.type,t).subscribe((function(t){"SUCCESS"===t.status?e.attachmentsList=t.results.searchResults:e.utilsService.showFailureMsg(t)}))}},{key:"save",value:function(t){var e=this;if(t){var i=[];this.attachmentsList.forEach((function(o){o.id||i.push({fileName:o.fileName,screenName:e.type,referenceId:t})})),0===i.length?this.doSuccess.emit():this.attachmentsDataService.save(i).subscribe((function(t){"SUCCESS"===t.status?e.doSuccess.emit():(e.utilsService.showFailureMsg(t),e.doFailure.emit())}))}else this.utilsService.showFailureMsg("Missing reference id to update!"),this.doFailure.emit()}},{key:"upload",value:function(){var t=this,e=this.fileUpload.nativeElement.files||this.fileUpload.srcElement.files;if(0===e.length)return this.utilsService.showFailureMsg("Please select the file!"),!1;this.attachmentsDataService.upload(e).subscribe((function(e){"SUCCESS"===e.status?t.attachmentsList.push({id:"",fileName:e.results.fileName,createdOn:"Now"}):t.utilsService.showFailureMsg(e),t.fileUpload.nativeElement.value=""}))}},{key:"delete",value:function(t){var e=this;this.attachmentsList[t].id?this.attachmentsDataService.delete(this.attachmentsList[t].id).subscribe((function(i){"SUCCESS"===i.status?(e.attachmentsList.splice(t,1),e.utilsService.showSuccessMsg(i)):e.utilsService.showFailureMsg(i)})):this.attachmentsList.splice(t,1)}},{key:"download",value:function(t){this.utilsService.externalRedirect(this.attachmentsList[t].downloadLink)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Pb(n.g),o.Pb(r.g))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-attachments"]],viewQuery:function(t,e){var i;1&t&&o.Pc(c,!0),2&t&&o.zc(i=o.ec())&&(e.fileUpload=i.first)},inputs:{type:"type"},outputs:{doSuccess:"doSuccess",doFailure:"doFailure"},decls:19,vars:2,consts:[[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-table"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],["colspan","4"],["type","file",1,"btn","btn-success","btn-sm"],["fileUpload",""],[1,"btn","btn-primary","btn-sm",3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"min-width","120px"],[1,"action","red",3,"click"],[1,"fa","fa-minus-circle"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,e){1&t&&(o.Vb(0,"div",0),o.Vb(1,"div",1),o.Qb(2,"i",2),o.Lc(3,"Attachments "),o.Ub(),o.Vb(4,"div",3),o.Vb(5,"div",4),o.Vb(6,"table",5),o.Vb(7,"thead"),o.Vb(8,"tr"),o.Vb(9,"th",6),o.Lc(10," Select file \xa0 "),o.Qb(11,"input",7,8),o.Lc(13," \xa0 "),o.Vb(14,"button",9),o.dc("click",(function(){return e.upload()})),o.Lc(15,"Upload"),o.Ub(),o.Ub(),o.Ub(),o.Jc(16,s,7,0,"tr",10),o.Ub(),o.Vb(17,"tbody"),o.Jc(18,b,12,4,"tr",11),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&t&&(o.Cb(16),o.oc("ngIf",e.attachmentsList.length>0),o.Cb(2),o.oc("ngForOf",e.attachmentsList))},directives:[a.m,a.l],styles:[""]}),t}()}}]);