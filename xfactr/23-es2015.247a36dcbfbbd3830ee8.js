(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{XLNE:function(t,e,i){"use strict";i.r(e),i.d(e,"SalesModule",(function(){return Zs}));var s=i("tyNb"),n=i("ey9i"),r=i("fXoL"),o=i("IzNV"),c=i("XNiG"),a=i("HDdC"),l=i("3Pt+"),u=i("LvDl"),m=i("oARB");let b=(()=>{class t{constructor(t,e,i,s,r,o,a,l,u,m,b){this.utilsService=t,this.storageService=e,this.branchUtilsService=i,this.salesQuoteDataService=s,this.salesOrderDataService=r,this.salesDeliveryDataService=o,this.salesArInvoiceDataService=a,this.salesArDpInvoiceDataService=l,this.salesArCreditMemoDataService=u,this.formBuilder=m,this.salesReturnDataService=b,this.appConstants=n.h,this.selectedItemsByWarehouseSubscription=new c.a,this.initializeSubscriptions()}initializeSubscriptions(){this.branchUtilsService.spiTxnOptionsDownloadPdf.subscribe(t=>{this.downloadPDF(t)}),this.branchUtilsService.spiTxnOptionsDownloadPickListPdf.subscribe(t=>{this.downloadPickListPDF(t)})}checkScreenNameValid(t){return!(!this.branchUtilsService.screenAttributes.hasOwnProperty(t)||"salesQuote"!==t&&"salesOrder"!==t&&"salesDelivery"!==t&&"salesArInvoice"!==t&&"salesArDpInvoice"!==t&&"salesArCreditMemo"!==t&&"salesReturn"!==t)}getScreenDataService(t){return"salesQuote"===t?this.salesQuoteDataService:"salesOrder"===t?this.salesOrderDataService:"salesDelivery"===t?this.salesDeliveryDataService:"salesArInvoice"===t?this.salesArInvoiceDataService:"salesArDpInvoice"===t?this.salesArDpInvoiceDataService:"salesArCreditMemo"===t?this.salesArCreditMemoDataService:"salesReturn"===t?this.salesReturnDataService:void 0}addFieldsVisibility(t,e){return"salesQuote"===t&&("fnValidUntil"===e||"fnDiscountTab"===e)||!("salesOrder"!==t&&"salesDelivery"!==t||"fnDeliveryDate"!==e&&"fnDiscountTab"!==e)||"salesArInvoice"===t&&("fnDueDate"===e||"fnGatepassStatus"===e||"fnDiscountTab"===e||"fnDpInvoice"===e||"courier"===e||"trackingNumber"===e||"deliveryStatus"===e)||"salesArCreditMemo"===t&&("fnDueDate"===e||"fnDiscountTab"===e||"fnWithoutQtyPosting"===e||"fnOriginalRefNumber"===e||"fnOriginalRefDate"===e||"fnIssuingNoteId"===e||"fnDpInvoice"===e)||"salesArDpInvoice"===t&&("fnDueDate"===e||"fnDpmTab"===e)||"salesReturn"===t&&("fnDueDate"===e||"fnDiscountTab"===e)}getFormErrors(t,e){if("mainFields"===e){const e={documentNumberingId:"",documentNumber:"",customerBpId:"",currencyId:"",postingDate:"",documentDate:"",status:"",discountPercentage:"",rounding:"",totalAmount:"",itemListArray:[]};return"salesQuote"===t?e.validUntil="":"salesOrder"===t||"salesDelivery"===t?e.deliveryDate="":"salesArInvoice"!==t&&"salesArDpInvoice"!==t&&"salesArCreditMemo"!==t&&"salesReturn"!==t||(e.dueDate="","salesArDpInvoice"===t&&(e.dpmPercentage="",e.dpmValue=""),"salesArInvoice"!==t&&"salesArCreditMemo"!==t||(e.salesArDpInvoiceUsedAmount="")),e}if("itemFields"===e){const e={itemId:"",quantity:"",unitPrice:"",warehouseId:"",binId:"",discountPercentage:"",taxId:"",distributionRulesId:""};return"salesOrder"===t&&(e.dealerDiscountPercentage=""),e}}getFormValMsgs(t){const e={documentNumberingId:{required:"Document No is required"},documentNumber:{required:"Document No is required"},customerBpId:{required:"Customer Name is required"},currencyId:{required:"Currency is required"},postingDate:{required:"Posting Date is required"},documentDate:{required:"Document Date is required"},status:{required:"Status is required"},discountPercentage:{min:"Enter 0 to 100",max:"Enter 0 to 100",pattern:"Only positive numbers are allowed"},rounding:{pattern:"Only numbers are allowed"},totalAmount:{required:"Total Amount is required"}};return"salesQuote"===t?e.validUntil={required:"Valid Until is required"}:"salesOrder"===t||"salesDelivery"===t?e.deliveryDate={required:"Delivery Date is required"}:"salesArInvoice"!==t&&"salesArDpInvoice"!==t&&"salesArCreditMemo"!==t&&"salesReturn"!==t||(e.dueDate={required:"Due Date is required"},"salesArDpInvoice"===t&&(e.dpmPercentage={required:"DPM % is required",min:"Enter 0 to 100",max:"Enter 0 to 100",pattern:"Only positive numbers are allowed"},e.dpmValue={required:"DPM is required",min:"Minimum 1",pattern:"Only positive numbers are allowed"}),"salesArInvoice"!==t&&"salesArCreditMemo"!==t||(e.salesArDpInvoiceUsedAmount={pattern:"Only positive numbers are allowed"})),e.itemListArray={itemId:{required:"Item Name is required"},quantity:{required:"Quantity is required",min:"Minimum 1",pattern:"Only positive numbers are allowed"},unitPrice:{pattern:"Only positive numbers are allowed"},warehouseId:{required:"Warehouse is required"},binId:{required:"Bin is required"},discountPercentage:{min:"Enter 0 to 100",max:"Enter 0 to 100",pattern:"Only positive numbers are allowed"},taxId:{required:"Tax Code is required"},distributionRulesId:{required:"Dist.Rules is required"}},"salesOrder"===t&&(e.itemListArray.dealerDiscountPercentage={min:"Enter 0 to 100",max:"Enter 0 to 100",pattern:"Only positive numbers are allowed"}),e}getFormMainFields(t){const e={documentNumberingId:[null,[l.u.required]],documentNumber:["",[l.u.required]],documentNumberingType:[""],customerBpId:[null,[l.u.required]],customerBpContactsId:[null],currencyId:["",[l.u.required]],referenceNumber:[""],postingDate:[new Date,[l.u.required]],documentDate:[new Date,[l.u.required]],salesEmpId:[null],status:["1",[l.u.required]],remarks:[""],totalBeforeDiscount:["0.00"],discountPercentage:["0.00",[l.u.min(0),l.u.max(100),l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],discountValue:["0.00"],taxPercentage:["0.00"],roundingOffCheckbox:[!1],rounding:[{value:"0.00",disabled:!0},[l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveNegativeFloatNumber)]],totalAmount:[0,[l.u.required]],customerShipToBpAddressId:[""],customerShipToAddress:[""],customerBillToBpAddressId:[""],customerBillToAddress:[""],paymentTermsId:[""],paymentMethodId:[""],taxCode:[""],originalRefNumber:[""],originalRefDate:[""],issuingNoteId:[""],deletedItemChildIds:[[]],approvalStatus:["4"],showAddButton:[""],itemsTotalAmount:["0.00"],editFlag:[!1]};"salesQuote"===t?e.validUntil=["",[l.u.required]]:"salesOrder"===t||"salesDelivery"===t?e.deliveryDate=["",[l.u.required]]:"salesArInvoice"!==t&&"salesArDpInvoice"!==t&&"salesArCreditMemo"!==t&&"salesReturn"!==t||(e.dueDate=["",[l.u.required]],"salesArInvoice"===t&&(e.gatepassStatus=["1"],e.salesArDpInvoiceId=[null],e.salesArDpInvoiceUsedAmount=[0,[l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],e.salesArDpInvoiceUsedTaxAmount=[{value:0,disabled:!0}],e.courier=[""],e.trackingNumber=[""],e.deliveryStatus=[1]),"salesArCreditMemo"===t&&(e.salesArDpInvoiceId=[{value:null,disabled:!0}],e.salesArDpInvoiceUsedAmount=[{value:0,disabled:!0},[l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],e.salesArDpInvoiceUsedTaxAmount=[{value:0,disabled:!0}]),"salesArDpInvoice"===t&&(e.dpmPercentage=[0,[l.u.required,l.u.min(0),l.u.max(100),l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],e.dpmValue=[0,[l.u.required,l.u.min(1),l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]])),e.itemListArray=this.formBuilder.array([]);const i=this.formBuilder.group(e);return this.setItemFieldsCustomValidations(i,t),i}setItemFieldsCustomValidations(t,e){const i=[];"salesQuote"===e&&i.push(this.utilsService.startEndDateValidator("documentDate","validUntil","invalidValidUntilDate","Should => Document Date")),"salesOrder"!==e&&"salesDelivery"!==e||i.push(this.utilsService.startEndDateValidator("documentDate","deliveryDate","invalidDeliveryDate","Should => Document Date")),"salesArInvoice"!==e&&"salesArDpInvoice"!==e&&"salesArCreditMemo"!==e&&"salesReturn"!==e||i.push(this.utilsService.startEndDateValidator("documentDate","dueDate","invalidDueDate","Should => Document Date")),i.push(this.utilsService.startEndDateValidator("postingDate","documentDate","invalidPostingDate","Should <= Document Date")),t.setValidators(l.u.compose(i)),t.updateValueAndValidity()}getMainFieldsWithData(t,e){const i={};return this.utilsService.updateObject(i,"documentNumberingId",e.documentNumberingId),this.utilsService.updateObject(i,"documentNumber",e.documentNumber),e.documentNumberingInfo&&this.utilsService.updateObject(i,"documentNumberingType",e.documentNumberingInfo.length>0?e.documentNumberingInfo[0].documentNumberingType:""),this.utilsService.updateObject(i,"customerBpId",e.customerBpId),this.utilsService.updateObject(i,"customerBpContactsId",e.customerBpContactsId),this.utilsService.updateObject(i,"currencyId",e.currencyId),this.utilsService.updateObject(i,"referenceNumber",e.referenceNumber),this.utilsService.updateObject(i,"postingDate",e.postingDate,"date"),this.utilsService.updateObject(i,"documentDate",e.documentDate,"date"),this.utilsService.updateObject(i,"salesEmpId",e.salesEmpId),this.utilsService.updateObject(i,"status",e.status),this.utilsService.updateObject(i,"remarks",e.remarks),this.utilsService.updateObject(i,"totalBeforeDiscount",e.totalBeforeDiscount),this.utilsService.updateObject(i,"discountPercentage",e.discountPercentage),this.utilsService.updateObject(i,"discountValue",e.discountValue),this.utilsService.updateObject(i,"taxPercentage",e.taxPercentage),"1"===e.roundingFlag&&(i.roundingOffCheckbox=!0),this.utilsService.updateObject(i,"rounding",e.rounding),this.utilsService.updateObject(i,"totalAmount",e.totalAmount),this.utilsService.updateObject(i,"customerShipToBpAddressId",e.customerShipToBpAddressId),this.utilsService.updateObject(i,"customerShipToAddress",e.customerShipToAddress),this.utilsService.updateObject(i,"customerBillToBpAddressId",e.customerBillToBpAddressId),this.utilsService.updateObject(i,"customerBillToAddress",e.customerBillToAddress),this.utilsService.updateObject(i,"paymentTermsId",e.paymentTermsId),this.utilsService.updateObject(i,"paymentMethodId",e.paymentMethodId),this.utilsService.updateObject(i,"taxCode",e.taxCode),this.utilsService.updateObject(i,"originalRefNumber",e.originalRefNumber),this.utilsService.updateObject(i,"originalRefDate",e.originalRefDate,"date"),this.utilsService.updateObject(i,"issuingNoteId",e.issuingNoteId),"salesQuote"===t?this.utilsService.updateObject(i,"validUntil",e.validUntil,"date"):"salesOrder"===t||"salesDelivery"===t?this.utilsService.updateObject(i,"deliveryDate",e.deliveryDate,"date"):"salesArInvoice"!==t&&"salesArDpInvoice"!==t&&"salesArCreditMemo"!==t&&"salesReturn"!==t||(this.utilsService.updateObject(i,"dueDate",e.dueDate,"date"),"salesArInvoice"===t&&(this.utilsService.updateObject(i,"gatepassStatus",e.gatepassStatus),this.utilsService.updateObject(i,"courier",e.courier),this.utilsService.updateObject(i,"trackingNumber",e.trackingNumber),this.utilsService.updateObject(i,"deliveryStatus",e.deliveryStatus)),"salesArInvoice"!==t&&"salesArCreditMemo"!==t||(this.utilsService.updateObject(i,"salesArDpInvoiceId",e.salesArDpInvoiceId),this.utilsService.updateObject(i,"salesArDpInvoiceUsedAmount",e.salesArDpInvoiceUsedAmount),this.utilsService.updateObject(i,"salesArDpInvoiceUsedTaxAmount",e.salesArDpInvoiceUsedTaxAmount)),"salesArDpInvoice"===t&&(this.utilsService.updateObject(i,"dpmPercentage",e.dpmPercentage),this.utilsService.updateObject(i,"dpmValue",e.dpmValue))),this.utilsService.updateObject(i,"editFlag",e.editFlag),this.utilsService.updateObject(i,"showAddButton",e.showAddButton),this.utilsService.updateObject(i,"approvalStatus",e.approvalStatus),i}getFormItemFields(t,e,i){const s=[];this.storageService.get("distRulesMode")&&s.push(l.u.required);const n={itemId:[null,[l.u.required]],lastPrice:["-"],quantity:[1,[l.u.required,l.u.min(1),l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveIntNumber)]],openQuantity:[0],uomId:[null],unitPrice:["0.00",[l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],warehouseId:[this.storageService.get("defaultWarehouseId")?this.storageService.get("defaultWarehouseId"):null],binId:[null],binList:[[]],hsnId:[null],discountPercentage:["0.00",[l.u.min(0),l.u.max(100),l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],taxId:[this.storageService.get("salesTaxId")?this.storageService.get("salesTaxId"):null,[l.u.required]],itemTaxPercentage:["0.00"],itemTaxValue:["0.00"],totalItemAmount:["0.00"],distributionRulesId:[null,s],id:[""],copyFromType:[""],copyFromId:[""],showDeleteIcon:[!0],orderedQuantity:[0],stockDetails:[""],copyFromOpenQuantity:[0],availableStock:[{value:0,disabled:!0}],committedStock:[{value:0,disabled:!0}],orderedStock:[{value:0,disabled:!0}]};"salesOrder"===t&&(n.serialNumber=[""],n.expiryDate=[""],n.bpApproval=[!1],n.remarks=[""],n.dealerDiscountPercentage=["0.00"]),"salesDelivery"!==t&&"salesArInvoice"!==t&&"salesArDpInvoice"!==t&&"salesArCreditMemo"!==t&&"salesReturn"!==t||(n.warehouseId[1]=l.u.required,n.binId[1]=l.u.required,"salesArCreditMemo"===t&&(n.withoutQtyPosting=[!1])),e&&this.setDataToItemFields(t,n,e);const r=this.formBuilder.group(n);return i&&this.setItemFieldsCustomValidation(r,i),r}setItemFieldsCustomValidation(t,e){const i=t.getRawValue(),s=[];"edit"===e?s.push(this.utilsService.minValidator("quantity",i.orderedQuantity,"invalidMinQuantity","Minimum : "+i.orderedQuantity)):"copy"===e&&"SALES_QUOTE"!==i.copyFromType&&"SALES_ORDER"!==i.copyFromType&&s.push(this.utilsService.maxValidator("quantity",i.copyFromOpenQuantity,"invalidMaxQuantity","Maximim : "+i.orderedQuantity)),t.setValidators(l.u.compose(s)),t.updateValueAndValidity()}setDataToItemFields(t,e,i){this.utilsService.updateObject(e,"itemId",i.itemId),this.utilsService.updateObject(e,"lastPrice",i.lastPrice),this.utilsService.updateObject(e,"quantity",i.quantity),this.utilsService.updateObject(e,"openQuantity",parseInt(i.openQuantity,0)<0?0:i.openQuantity),this.utilsService.updateObject(e,"uomId",i.uomId),this.utilsService.updateObject(e,"unitPrice",i.unitPrice),this.utilsService.updateObject(e,"warehouseId",i.warehouseId),this.utilsService.updateObject(e,"binId",i.binId),this.utilsService.updateObject(e,"hsnId",i.hsnId),this.utilsService.updateObject(e,"discountPercentage",i.discountPercentage),this.utilsService.updateObject(e,"taxId",i.taxId),this.utilsService.updateObject(e,"itemTaxPercentage",i.itemTaxPercentage),this.utilsService.updateObject(e,"itemTaxValue",i.itemTaxValue),this.utilsService.updateObject(e,"totalItemAmount",i.totalItemAmount),this.utilsService.isEmpty(i.distributionRulesId)||(e.distributionRulesId[0]=this.branchUtilsService.distRulesRemoveZeroPatternOnEdit(i.distributionRulesId)),this.utilsService.updateObject(e,"id",i.id),this.utilsService.updateObject(e,"copyFromType",i.copyFromType),this.utilsService.updateObject(e,"copyFromId",i.copyFromId),this.utilsService.updateObject(e,"copyFromOpenQuantity",i.copyFromOpenQuantity),"salesOrder"===t&&(this.utilsService.updateObject(e,"serialNumber",i.serialNumber),this.utilsService.updateObject(e,"expiryDate",i.expiryDate,"date"),e.bpApproval="1"===i.bpApproval,this.utilsService.updateObject(e,"remarks",i.remarks),this.utilsService.updateObject(e,"dealerDiscountPercentage",i.dealerDiscountPercentage)),"salesArCreditMemo"===t&&(e.withoutQtyPosting="1"===i.withoutQtyPosting),this.utilsService.updateObject(e,"orderedQuantity",i.orderedQuantity)}getSaveUpdateDataFormation(t,e){const i=e.getRawValue(),s={documentNumberingId:i.documentNumberingId,documentNumber:i.documentNumber,documentNumberingType:i.documentNumberingType,customerBpId:i.customerBpId,customerBpContactsId:i.customerBpContactsId,currencyId:i.currencyId,referenceNumber:i.referenceNumber,postingDate:this.utilsService.getBackendDateFormat(i.postingDate),documentDate:this.utilsService.getBackendDateFormat(i.documentDate),salesEmpId:i.salesEmpId,status:i.status,remarks:i.remarks,totalBeforeDiscount:i.totalBeforeDiscount,discountPercentage:i.discountPercentage,discountValue:i.discountValue,taxPercentage:i.taxPercentage,roundingFlag:i.roundingOffCheckbox?1:0,rounding:i.rounding,totalAmount:i.totalAmount,customerShipToBpAddressId:i.customerShipToBpAddressId,customerShipToAddress:i.customerShipToAddress,customerBillToBpAddressId:i.customerBillToBpAddressId,customerBillToAddress:i.customerBillToAddress,paymentTermsId:i.paymentTermsId,paymentMethodId:i.paymentMethodId,taxCode:i.taxCode,originalRefNumber:i.originalRefNumber,originalRefDate:this.utilsService.getBackendDateFormat(i.originalRefDate),issuingNoteId:i.issuingNoteId,itemListArray:[]};return"salesQuote"===t?s.validUntil=this.utilsService.getBackendDateFormat(i.validUntil):"salesOrder"===t||"salesDelivery"===t?s.deliveryDate=this.utilsService.getBackendDateFormat(i.deliveryDate):"salesArInvoice"!==t&&"salesArDpInvoice"!==t&&"salesArCreditMemo"!==t&&"salesReturn"!==t||(s.dueDate=this.utilsService.getBackendDateFormat(i.dueDate),"salesArInvoice"===t&&(s.gatepassStatus=i.gatepassStatus,s.courier=i.courier,s.trackingNumber=i.trackingNumber,s.deliveryStatus=i.deliveryStatus),"salesArInvoice"!==t&&"salesArCreditMemo"!==t||(s.salesArDpInvoiceId=i.salesArDpInvoiceId,s.salesArDpInvoiceUsedAmount=i.salesArDpInvoiceUsedAmount,s.salesArDpInvoiceUsedTaxAmount=i.salesArDpInvoiceUsedTaxAmount),"salesArDpInvoice"===t&&(s.dpmPercentage=i.dpmPercentage,s.dpmValue=i.dpmValue)),i.itemListArray.forEach(e=>{if("3"===i.status&&this.utilsService.isEmpty(e.id));else{const i={itemId:e.itemId,lastPrice:e.lastPrice,quantity:e.quantity,uomId:e.uomId,unitPrice:e.unitPrice,warehouseId:e.warehouseId,binId:e.binId,hsnId:e.hsnId,discountPercentage:e.discountPercentage,taxId:e.taxId,itemTaxPercentage:e.itemTaxPercentage,itemTaxValue:e.itemTaxValue,totalItemAmount:e.totalItemAmount,distributionRulesId:Array.isArray(e.distributionRulesId)?e.distributionRulesId.join(","):"",id:e.id,copyFromType:e.copyFromType,copyFromId:e.copyFromId};"salesOrder"===t&&(i.serialNumber=e.serialNumber,i.expiryDate=this.utilsService.getBackendDateFormat(e.expiryDate),i.bpApproval=e.bpApproval?"1":"0",i.remarks=e.remarks,i.dealerDiscountPercentage=e.dealerDiscountPercentage),"salesArCreditMemo"===t&&(i.withoutQtyPosting=e.withoutQtyPosting?"1":"0"),s.itemListArray.push(i)}}),s}manipulationsOnEdit(t,e){"1"===e.value.status?(e.controls.documentNumberingId.disable(),e.controls.documentNumber.disable(),e.controls.customerBpId.disable(),e.controls.roundingOffCheckbox.disable(),e.controls.rounding.disable(),e.controls.itemListArray.controls.forEach(e=>{const i=e.getRawValue();e.controls.itemId.disable(),parseInt(i.orderedQuantity,0)>0&&e.patchValue({showDeleteIcon:!1}),parseInt(i.openQuantity,0)<=0&&(e.disable(),e.patchValue({showDeleteIcon:!1})),"salesDelivery"!==t&&"salesArInvoice"!==t&&"salesArDpInvoice"!==t&&"salesArCreditMemo"!==t&&"salesReturn"!==t||e.patchValue({showDeleteIcon:!1})}),"salesDelivery"!==t&&"salesArInvoice"!==t&&"salesArDpInvoice"!==t&&"salesArCreditMemo"!==t&&"salesReturn"!==t||(e.disable(),e.controls.customerBpContactsId.enable(),e.controls.documentDate.enable(),e.controls.salesEmpId.enable(),e.controls.remarks.enable(),e.controls.status.enable(),"salesArInvoice"!==t&&"salesArDpInvoice"!==t&&"salesReturn"!==t||e.controls.dueDate.enable(),"salesArInvoice"===t&&e.controls.gatepassStatus.enable())):e.enable()}manipulationsOnAddEditBasedOnRole(t,e,i){"2"===this.storageService.get("employeeTypeId")&&"salesOrder"===t&&e.controls.itemListArray.controls.forEach(t=>{t.controls.bpApproval.disable(),t.controls.remarks.disable()}),"3"===this.storageService.get("employeeTypeId")&&"salesOrder"===t&&(e.disable(),e.controls.customerBpContactsId.enable(),e.controls.deliveryDate.enable(),e.controls.remarks.enable(),e.controls.discountPercentage.enable(),e.controls.itemListArray.controls.forEach(t=>{t.disable(),t.controls.itemId.enable(),t.controls.quantity.enable(),t.controls.uomId.enable(),t.controls.discountPercentage.enable(),t.controls.serialNumber.enable(),t.controls.expiryDate.enable(),t.controls.bpApproval.enable(),t.controls.remarks.enable()})),"5"===this.storageService.get("employeeTypeId")&&"salesOrder"===t&&(e.disable(),e.controls.customerBpContactsId.enable(),e.controls.deliveryDate.enable(),e.controls.remarks.enable(),e.controls.discountPercentage.enable(),i||e.controls.customerBpId.enable(),e.controls.itemListArray.controls.forEach(t=>{t.disable(),t.controls.itemId.enable(),t.controls.quantity.enable(),t.controls.uomId.enable(),t.controls.discountPercentage.enable()}))}manipulationsOnCopy(t,e){e.controls.customerBpId.disable(),"salesArInvoice"!==t&&"salesArCreditMemo"!==t||(e.controls.salesArDpInvoiceId.enable(),e.controls.salesArDpInvoiceUsedAmount.enable()),e.controls.itemListArray.controls.forEach(t=>{t.controls.itemId.disable()})}redirectToList(t){this.utilsService.redirect("/branch/sales/sales-txn-list/"+t)}listFieldsVisibility(t,e){if("salesQuote"===t){if("validUntil"===e)return!0}else if("salesOrder"===t||"salesDelivery"===t){if("deliveryDate"===e)return!0}else if("salesArInvoice"===t||"salesArDpInvoice"===t||"salesArCreditMemo"===t||"salesReturn"===t){if("dueDate"===e)return!0;if("salesArInvoice"===t&&("courier"===e||"trackingNumber"===e||"deliveryStatus"===e))return!0}return!1}getFormSearchFields(t){const e={fromDate:"",toDate:"",isDraft:!1,branchName:"",documentNumber:"",sapId:"",customerBpName:"",postingDate:"",status:"1",totalAmount:"",approvalStatus:""};return"salesQuote"===t?e.validUntil="":"salesOrder"===t||"salesDelivery"===t?e.deliveryDate="":"salesArInvoice"!==t&&"salesArDpInvoice"!==t&&"salesArCreditMemo"!==t&&"salesReturn"!==t||(e.dueDate="","salesArInvoice"===t&&(e.courier="",e.trackingNumber="",e.deliveryStatus="")),e}getSearchDataFormation(t,e){const i={fromDate:this.utilsService.getBackendDateFormat(e.fromDate),toDate:this.utilsService.getBackendDateFormat(e.toDate),isDraft:e.isDraft?1:0,branchName:e.branchName,documentNumber:e.documentNumber,sapId:e.sapId,customerBpName:e.customerBpName,postingDate:this.utilsService.getBackendDateFormat(e.postingDate),status:e.status,totalAmount:e.totalAmount,approvalStatus:e.approvalStatus};return"salesQuote"===t?i.validUntil=this.utilsService.getBackendDateFormat(e.validUntil):"salesOrder"===t||"salesDelivery"===t?i.deliveryDate=this.utilsService.getBackendDateFormat(e.deliveryDate):"salesArInvoice"!==t&&"salesArDpInvoice"!==t&&"salesArCreditMemo"!==t&&"salesReturn"!==t||(i.dueDate=this.utilsService.getBackendDateFormat(e.dueDate),"salesArInvoice"===t&&(i.courier=e.courier,i.trackingNumber=e.trackingNumber,i.deliveryStatus=e.deliveryStatus)),i}redirectToAdd(t){this.utilsService.redirect("/branch/sales/sales-txn-add/"+t)}redirectToEdit(t,e,i){this.utilsService.redirect("1"===i?"/branch/sales/sales-txn-edit-draft/"+t+"/"+this.utilsService.encrypt(e):"/branch/sales/sales-txn-edit/"+t+"/"+this.utilsService.encrypt(e))}getAnalyticsData(t){const e=this.getScreenDataService(t);return new a.a(t=>{e.getAnalyticsData().subscribe(e=>{if("SUCCESS"===e.status){const i=u.orderBy(e.results,["id"],["asc"]);t.next(i),t.complete()}else this.utilsService.showFailureMsg(e),t.error(),t.complete()})})}downloadAsExcel(t,e){this.utilsService.showSuccessMsg("Processing to download the Excel..."),this.getScreenDataService(t).downloadAsExcel(e).subscribe(t=>{"SUCCESS"===t.status?this.utilsService.externalRedirect(t.fileUrl):this.utilsService.showFailureMsg(t)})}downloadPDF(t){t.spiName===this.branchUtilsService.spiTxnId.sales&&(this.utilsService.showSuccessMsg("Processing to download the PDF..."),this.getScreenDataService(t.screenName).downloadPDF(t.id).subscribe(t=>{this.utilsService.externalRedirect(t.url,!0)}))}downloadPickListPDF(t){t.spiName===this.branchUtilsService.spiTxnId.sales&&(this.utilsService.showSuccessMsg("Processing to download the PDF..."),this.getScreenDataService(t.screenName).downloadPickListPDF(t.id).subscribe(t=>{this.utilsService.externalRedirect(t.url,!0)}))}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(n.g),r.Zb(n.f),r.Zb(o.a),r.Zb(m.Z),r.Zb(m.Y),r.Zb(m.X),r.Zb(m.W),r.Zb(m.V),r.Zb(m.U),r.Zb(l.e),r.Zb(m.ab))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();var d=i("ofXK"),h=i("eO1q"),p=i("rEr+"),f=i("7zfz"),g=i("Mfq2");const y=["dataTable"];function v(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",24),r.dc("click",(function(){r.Dc(t);const e=r.hc(2);return e.sTxnUtilsService.downloadAsExcel(e.inputScreenName,e.listingProperties)})),r.Qb(1,"i",25),r.Vb(2,"span"),r.Lc(3,"Download as Excel"),r.Ub(),r.Ub()}}function S(t,e){if(1&t&&(r.Vb(0,"div",26),r.Vb(1,"div",27),r.Vb(2,"div",28),r.Lc(3),r.Ub(),r.Vb(4,"div",29),r.Lc(5),r.Ub(),r.Ub(),r.Ub()),2&t){const t=e.$implicit,i=r.hc(2);r.Cb(3),r.Nc(" ",t.name," "),r.Cb(1),r.oc("ngClass",i.appConstants.TXN_STATUS_COLOR_CLS[t.id]),r.Cb(1),r.Mc(t.count)}}function I(t,e){1&t&&(r.Vb(0,"th",48),r.Lc(1," Branch Name "),r.Qb(2,"p-sortIcon",33),r.Ub()),2&t&&(r.oc("pSortableColumn","branchName"),r.Cb(2),r.oc("field","branchName"))}function C(t,e){1&t&&(r.Vb(0,"th",49),r.Lc(1,"Sap Doc No "),r.Qb(2,"p-sortIcon",33),r.Ub()),2&t&&(r.oc("pSortableColumn","sapId"),r.Cb(2),r.oc("field","sapId"))}function U(t,e){1&t&&(r.Vb(0,"th",38),r.Lc(1,"Valid Until "),r.Qb(2,"p-sortIcon",33),r.Ub()),2&t&&(r.oc("pSortableColumn","validUntil"),r.Cb(2),r.oc("field","validUntil"))}function D(t,e){1&t&&(r.Vb(0,"th",50),r.Lc(1,"Delivery Date "),r.Qb(2,"p-sortIcon",33),r.Ub()),2&t&&(r.oc("pSortableColumn","deliveryDate"),r.Cb(2),r.oc("field","deliveryDate"))}function L(t,e){1&t&&(r.Vb(0,"th",38),r.Lc(1,"Due Date "),r.Qb(2,"p-sortIcon",33),r.Ub()),2&t&&(r.oc("pSortableColumn","dueDate"),r.Cb(2),r.oc("field","dueDate"))}function V(t,e){1&t&&(r.Vb(0,"th",38),r.Lc(1,"Courier "),r.Qb(2,"p-sortIcon",33),r.Ub()),2&t&&(r.oc("pSortableColumn","courier"),r.Cb(2),r.oc("field","courier"))}function N(t,e){1&t&&(r.Vb(0,"th",38),r.Lc(1,"Tracking Number "),r.Qb(2,"p-sortIcon",33),r.Ub()),2&t&&(r.oc("pSortableColumn","trackingNumber"),r.Cb(2),r.oc("field","trackingNumber"))}function A(t,e){1&t&&(r.Vb(0,"th",38),r.Lc(1,"Delivery Status "),r.Qb(2,"p-sortIcon",33),r.Ub()),2&t&&(r.oc("pSortableColumn","deliveryStatus"),r.Cb(2),r.oc("field","deliveryStatus"))}function x(t,e){if(1&t){const t=r.Wb();r.Vb(0,"th"),r.Vb(1,"input",44),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(3).searchForm.branchName=e}))("keyup.enter",(function(){return r.Dc(t),r.hc(3).resetListing()})),r.Ub(),r.Ub()}if(2&t){const t=r.hc(3);r.Cb(1),r.oc("ngModel",t.searchForm.branchName)}}function F(t,e){if(1&t){const t=r.Wb();r.Vb(0,"th"),r.Vb(1,"input",44),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(3).searchForm.sapId=e}))("keyup.enter",(function(){return r.Dc(t),r.hc(3).resetListing()})),r.Ub(),r.Ub()}if(2&t){const t=r.hc(3);r.Cb(1),r.oc("ngModel",t.searchForm.sapId)}}function T(t,e){if(1&t){const t=r.Wb();r.Vb(0,"th"),r.Vb(1,"p-calendar",12),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(3).searchForm.validUntil=e}))("onSelect",(function(){return r.Dc(t),r.hc(3).resetListing()})),r.Ub(),r.Ub()}if(2&t){const t=r.hc(3);r.Cb(1),r.oc("ngModel",t.searchForm.validUntil)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT)}}function E(t,e){if(1&t){const t=r.Wb();r.Vb(0,"th"),r.Vb(1,"p-calendar",12),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(3).searchForm.deliveryDate=e}))("onSelect",(function(){return r.Dc(t),r.hc(3).resetListing()})),r.Ub(),r.Ub()}if(2&t){const t=r.hc(3);r.Cb(1),r.oc("ngModel",t.searchForm.deliveryDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT)}}function O(t,e){if(1&t){const t=r.Wb();r.Vb(0,"th"),r.Vb(1,"p-calendar",12),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(3).searchForm.dueDate=e}))("onSelect",(function(){return r.Dc(t),r.hc(3).resetListing()})),r.Ub(),r.Ub()}if(2&t){const t=r.hc(3);r.Cb(1),r.oc("ngModel",t.searchForm.dueDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT)}}function P(t,e){if(1&t&&(r.Vb(0,"option",51),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Nc(" ",t.name," ")}}function B(t,e){if(1&t&&(r.Vb(0,"option",51),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Nc(" ",t.name," ")}}function K(t,e){if(1&t){const t=r.Wb();r.Vb(0,"th"),r.Vb(1,"input",44),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(3).searchForm.courier=e}))("keyup.enter",(function(){return r.Dc(t),r.hc(3).resetListing()})),r.Ub(),r.Ub()}if(2&t){const t=r.hc(3);r.Cb(1),r.oc("ngModel",t.searchForm.courier)}}function M(t,e){if(1&t){const t=r.Wb();r.Vb(0,"th"),r.Vb(1,"input",44),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(3).searchForm.trackingNumber=e}))("keyup.enter",(function(){return r.Dc(t),r.hc(3).resetListing()})),r.Ub(),r.Ub()}if(2&t){const t=r.hc(3);r.Cb(1),r.oc("ngModel",t.searchForm.trackingNumber)}}function R(t,e){if(1&t){const t=r.Wb();r.Vb(0,"th"),r.Vb(1,"select",45),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(3).searchForm.deliveryStatus=e}))("change",(function(){return r.Dc(t),r.hc(3).resetListing()})),r.Vb(2,"option",46),r.Lc(3,"--SELECT--"),r.Ub(),r.Vb(4,"option",52),r.Lc(5,"Yes"),r.Ub(),r.Vb(6,"option",53),r.Lc(7,"No"),r.Ub(),r.Ub(),r.Ub()}if(2&t){const t=r.hc(3);r.Cb(1),r.oc("ngModel",t.searchForm.deliveryStatus)}}function k(t,e){if(1&t){const t=r.Wb();r.Vb(0,"tr"),r.Vb(1,"th",30),r.Lc(2,"Actions"),r.Ub(),r.Jc(3,I,3,2,"th",31),r.Vb(4,"th",32),r.Lc(5,"Overdue "),r.Qb(6,"p-sortIcon",33),r.Ub(),r.Vb(7,"th",34),r.Lc(8,"Doc No "),r.Qb(9,"p-sortIcon",33),r.Ub(),r.Jc(10,C,3,2,"th",35),r.Vb(11,"th",36),r.Lc(12,"Customer Name "),r.Qb(13,"p-sortIcon",33),r.Ub(),r.Vb(14,"th",37),r.Lc(15,"Line Items Count"),r.Ub(),r.Vb(16,"th",38),r.Lc(17,"Posting Date "),r.Qb(18,"p-sortIcon",33),r.Ub(),r.Jc(19,U,3,2,"th",39),r.Jc(20,D,3,2,"th",40),r.Jc(21,L,3,2,"th",39),r.Vb(22,"th",38),r.Lc(23,"Status "),r.Qb(24,"p-sortIcon",33),r.Ub(),r.Vb(25,"th",32),r.Lc(26,"Amount "),r.Qb(27,"p-sortIcon",33),r.Ub(),r.Vb(28,"th",32),r.Lc(29,"Approval Status "),r.Qb(30,"p-sortIcon",33),r.Ub(),r.Jc(31,V,3,2,"th",39),r.Jc(32,N,3,2,"th",39),r.Jc(33,A,3,2,"th",39),r.Ub(),r.Vb(34,"tr",41),r.Vb(35,"th"),r.Vb(36,"a",42),r.dc("click",(function(){return r.Dc(t),r.hc(2).clearSearchForm()})),r.Qb(37,"i",43),r.Lc(38,"Clear"),r.Ub(),r.Ub(),r.Jc(39,x,2,1,"th",0),r.Qb(40,"th"),r.Vb(41,"th"),r.Vb(42,"input",44),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.documentNumber=e}))("keyup.enter",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Ub(),r.Ub(),r.Jc(43,F,2,1,"th",0),r.Vb(44,"th"),r.Vb(45,"input",44),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.customerBpName=e}))("keyup.enter",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Ub(),r.Ub(),r.Qb(46,"th"),r.Vb(47,"th"),r.Vb(48,"p-calendar",12),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.postingDate=e}))("onSelect",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Ub(),r.Ub(),r.Jc(49,T,2,5,"th",0),r.Jc(50,E,2,5,"th",0),r.Jc(51,O,2,5,"th",0),r.Vb(52,"th"),r.Vb(53,"select",45),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.status=e}))("change",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Vb(54,"option",46),r.Lc(55,"--SELECT--"),r.Ub(),r.Jc(56,P,2,2,"option",47),r.Ub(),r.Ub(),r.Vb(57,"th"),r.Vb(58,"input",44),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.totalAmount=e}))("keyup.enter",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Ub(),r.Ub(),r.Vb(59,"th"),r.Vb(60,"select",45),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.approvalStatus=e}))("change",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Vb(61,"option",46),r.Lc(62,"--SELECT--"),r.Ub(),r.Jc(63,B,2,2,"option",47),r.Ub(),r.Ub(),r.Jc(64,K,2,1,"th",0),r.Jc(65,M,2,1,"th",0),r.Jc(66,R,8,1,"th",0),r.Ub()}if(2&t){const t=r.hc(2);r.Cb(3),r.oc("ngIf",!t.storageService.get("isSingleBranchUser")),r.Cb(1),r.oc("pSortableColumn","overDueValue"),r.Cb(2),r.oc("field","overDueValue"),r.Cb(1),r.oc("pSortableColumn","documentNumber"),r.Cb(2),r.oc("field","documentNumber"),r.Cb(1),r.oc("ngIf",t.storageService.get("isSap")),r.Cb(1),r.oc("pSortableColumn","customerBpName"),r.Cb(2),r.oc("field","customerBpName"),r.Cb(3),r.oc("pSortableColumn","postingDate"),r.Cb(2),r.oc("field","postingDate"),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.listFieldsVisibility(t.inputScreenName,"validUntil")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.listFieldsVisibility(t.inputScreenName,"deliveryDate")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.listFieldsVisibility(t.inputScreenName,"dueDate")),r.Cb(1),r.oc("pSortableColumn","status"),r.Cb(2),r.oc("field","status"),r.Cb(1),r.oc("pSortableColumn","totalAmount"),r.Cb(2),r.oc("field","totalAmount"),r.Cb(1),r.oc("pSortableColumn","approvalStatus"),r.Cb(2),r.oc("field","approvalStatus"),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.listFieldsVisibility(t.inputScreenName,"courier")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.listFieldsVisibility(t.inputScreenName,"trackingNumber")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.listFieldsVisibility(t.inputScreenName,"deliveryStatus")),r.Cb(6),r.oc("ngIf",!t.storageService.get("isSingleBranchUser")),r.Cb(3),r.oc("ngModel",t.searchForm.documentNumber),r.Cb(1),r.oc("ngIf",t.storageService.get("isSap")),r.Cb(2),r.oc("ngModel",t.searchForm.customerBpName),r.Cb(3),r.oc("ngModel",t.searchForm.postingDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.listFieldsVisibility(t.inputScreenName,"validUntil")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.listFieldsVisibility(t.inputScreenName,"deliveryDate")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.listFieldsVisibility(t.inputScreenName,"dueDate")),r.Cb(2),r.oc("ngModel",t.searchForm.status),r.Cb(3),r.oc("ngForOf",t.statusList),r.Cb(2),r.oc("ngModel",t.searchForm.totalAmount),r.Cb(2),r.oc("ngModel",t.searchForm.approvalStatus),r.Cb(3),r.oc("ngForOf",t.approvalStatusList),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.listFieldsVisibility(t.inputScreenName,"courier")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.listFieldsVisibility(t.inputScreenName,"trackingNumber")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.listFieldsVisibility(t.inputScreenName,"deliveryStatus"))}}function w(t,e){if(1&t&&(r.Vb(0,"td"),r.Lc(1),r.Ub()),2&t){const t=r.hc().$implicit;r.Cb(1),r.Mc(t.branchName)}}function J(t,e){if(1&t&&(r.Vb(0,"span",58),r.Lc(1),r.Ub()),2&t){const t=r.hc().$implicit;r.Cb(1),r.Nc("",t.overDueValue," Days")}}function Q(t,e){if(1&t&&(r.Vb(0,"td"),r.Lc(1),r.Ub()),2&t){const t=r.hc().$implicit;r.Cb(1),r.Mc(t.sapId)}}function G(t,e){if(1&t&&(r.Vb(0,"td"),r.Lc(1),r.Ub()),2&t){const t=r.hc().$implicit;r.Cb(1),r.Nc("",t.validUntil," ")}}function z(t,e){if(1&t&&(r.Vb(0,"td"),r.Lc(1),r.Ub()),2&t){const t=r.hc().$implicit;r.Cb(1),r.Nc("",t.deliveryDate," ")}}function _(t,e){if(1&t&&(r.Vb(0,"td"),r.Lc(1),r.Ub()),2&t){const t=r.hc().$implicit;r.Cb(1),r.Mc(t.dueDate)}}function q(t,e){if(1&t&&(r.Vb(0,"td"),r.Lc(1),r.Ub()),2&t){const t=r.hc().$implicit;r.Cb(1),r.Nc("",t.courier," ")}}function W(t,e){if(1&t&&(r.Vb(0,"td"),r.Lc(1),r.Ub()),2&t){const t=r.hc().$implicit;r.Cb(1),r.Nc("",t.trackingNumber," ")}}function j(t,e){if(1&t&&(r.Vb(0,"td"),r.Lc(1),r.Ub()),2&t){const t=r.hc().$implicit;r.Cb(1),r.Nc("","2"===t.deliveryStatus?"Yes":"No"," ")}}function $(t,e){if(1&t){const t=r.Wb();r.Vb(0,"tr"),r.Vb(1,"td"),r.Vb(2,"a",54),r.dc("click",(function(){r.Dc(t);const i=e.$implicit,s=r.hc(2);return s.sTxnUtilsService.redirectToEdit(s.inputScreenName,i.id,i.isDraft)})),r.Qb(3,"i",55),r.Ub(),r.Ub(),r.Jc(4,w,2,1,"td",0),r.Vb(5,"td"),r.Jc(6,J,2,1,"span",56),r.Ub(),r.Vb(7,"td"),r.Lc(8),r.Ub(),r.Jc(9,Q,2,1,"td",0),r.Vb(10,"td"),r.Lc(11),r.Ub(),r.Vb(12,"td"),r.Lc(13),r.Ub(),r.Vb(14,"td"),r.Lc(15),r.Ub(),r.Jc(16,G,2,1,"td",0),r.Jc(17,z,2,1,"td",0),r.Jc(18,_,2,1,"td",0),r.Vb(19,"td"),r.Vb(20,"span",57),r.Lc(21),r.Ub(),r.Ub(),r.Vb(22,"td"),r.Lc(23),r.Ub(),r.Vb(24,"td"),r.Vb(25,"span",57),r.Lc(26),r.Ub(),r.Ub(),r.Jc(27,q,2,1,"td",0),r.Jc(28,W,2,1,"td",0),r.Jc(29,j,2,1,"td",0),r.Ub()}if(2&t){const t=e.$implicit,i=r.hc(2);r.Cb(4),r.oc("ngIf",!i.storageService.get("isSingleBranchUser")),r.Cb(2),r.oc("ngIf",1==t.status&&t.overDueValue<0),r.Cb(2),r.Mc(t.documentNumber),r.Cb(1),r.oc("ngIf",i.storageService.get("isSap")),r.Cb(2),r.Oc("",t.customerBpCode," - ",t.customerBpName,""),r.Cb(2),r.Mc(t.lineItemInfo.length),r.Cb(2),r.Mc(t.postingDate),r.Cb(1),r.oc("ngIf",i.sTxnUtilsService.listFieldsVisibility(i.inputScreenName,"validUntil")),r.Cb(1),r.oc("ngIf",i.sTxnUtilsService.listFieldsVisibility(i.inputScreenName,"deliveryDate")),r.Cb(1),r.oc("ngIf",i.sTxnUtilsService.listFieldsVisibility(i.inputScreenName,"dueDate")),r.Cb(2),r.oc("ngClass",i.appConstants.TXN_STATUS_COLOR_CLS[t.status]),r.Cb(1),r.Mc(t.statusName),r.Cb(2),r.Mc(t.totalAmount),r.Cb(2),r.oc("ngClass",i.appConstants.APPROVAL_STATUS_COLOR_CLS[t.approvalStatus]),r.Cb(1),r.Mc(t.approvalStatusName),r.Cb(1),r.oc("ngIf",i.sTxnUtilsService.listFieldsVisibility(i.inputScreenName,"courier")),r.Cb(1),r.oc("ngIf",i.sTxnUtilsService.listFieldsVisibility(i.inputScreenName,"trackingNumber")),r.Cb(1),r.oc("ngIf",i.sTxnUtilsService.listFieldsVisibility(i.inputScreenName,"deliveryStatus"))}}function H(t,e){if(1&t){const t=r.Wb();r.Tb(0),r.Vb(1,"div",1),r.Vb(2,"span"),r.Lc(3),r.Ub(),r.Lc(4),r.Vb(5,"div",2),r.Jc(6,v,4,0,"button",3),r.Vb(7,"button",4),r.dc("click",(function(){r.Dc(t);const e=r.hc();return e.sTxnUtilsService.redirectToAdd(e.inputScreenName)})),r.Qb(8,"i",5),r.Vb(9,"span"),r.Lc(10),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(11,"div",6),r.Vb(12,"div",7),r.Vb(13,"div",8),r.Jc(14,S,6,3,"div",9),r.Ub(),r.Ub(),r.Vb(15,"div",8),r.Vb(16,"div",10),r.Vb(17,"label",11),r.Vb(18,"strong"),r.Lc(19,"From Date"),r.Ub(),r.Ub(),r.Vb(20,"p-calendar",12),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc().searchForm.fromDate=e}))("onSelect",(function(){return r.Dc(t),r.hc().resetListing()})),r.Ub(),r.Ub(),r.Vb(21,"div",10),r.Vb(22,"label",11),r.Vb(23,"strong"),r.Lc(24,"To Date"),r.Ub(),r.Ub(),r.Vb(25,"p-calendar",13),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc().searchForm.toDate=e}))("onSelect",(function(){return r.Dc(t),r.hc().resetListing()})),r.Ub(),r.Ub(),r.Vb(26,"div",14),r.Vb(27,"label",15),r.Vb(28,"input",16),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc().searchForm.isDraft=e}))("change",(function(){return r.Dc(t),r.hc().resetListing()})),r.Ub(),r.Qb(29,"span",17),r.Lc(30," Show Only Drafts "),r.Ub(),r.Ub(),r.Ub(),r.Vb(31,"div",8),r.Vb(32,"div",18),r.Vb(33,"div",19),r.Vb(34,"p-table",20,21),r.dc("onLazyLoad",(function(e){return r.Dc(t),r.hc().getListing(e)})),r.Jc(36,k,67,42,"ng-template",22),r.Jc(37,$,30,19,"ng-template",23),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Sb()}if(2&t){const t=r.hc();r.Cb(3),r.Mc(t.branchUtilsService.txnGetTitle(t.screenAttributes.title,!0)),r.Cb(1),r.Nc("",t.branchUtilsService.txnGetTitle(t.screenAttributes.title)," - List "),r.Cb(2),r.oc("ngIf",t.screenAcl.download),r.Cb(4),r.Nc("Add ",t.screenAttributes.title,""),r.Cb(4),r.oc("ngForOf",t.analyticsData),r.Cb(6),r.oc("ngModel",t.searchForm.fromDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),r.Cb(5),r.oc("ngModel",t.searchForm.toDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT)("minDate",t.searchForm.fromDate),r.Cb(3),r.oc("ngModel",t.searchForm.isDraft),r.Cb(6),r.oc("value",t.listing.data)("lazy",!0)("paginator",!0)("rows",t.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",t.listing.totalRecords)}}let Y=(()=>{class t{constructor(t,e,i,s,r,o,c){this.activatedRoute=t,this.utilsService=e,this.storageService=i,this.authGuardService=s,this.branchUtilsService=r,this.sTxnUtilsService=o,this.commonDataService=c,this.appConstants=n.h,this.screenAcl={},this.analyticsData=[],this.statusList=[],this.approvalStatusList=[],this.screenAttributes={},this.screenDataService={},this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}ngOnInit(){this.initializeSubscriptions()}initializeSubscriptions(){this.activatedRoute.params.subscribe(t=>this.sTxnUtilsService.checkScreenNameValid(t.screenName)?(this.screenAcl=this.authGuardService.getScreenAcl(this.branchUtilsService.screenAttributes[t.screenName].documentTypeId),this.screenAcl.view?(this.reInitializeGlobalVariables(),this.inputScreenName=t.screenName,void this.transactionInitialization()):(this.utilsService.showFailureMsg(n.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1)):(this.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),this.utilsService.goBack(),!1))}reInitializeGlobalVariables(){this.inputScreenName="",this.screenAttributes={},this.screenDataService={},this.analyticsData=[],this.statusList=[],this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}transactionInitialization(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.inputScreenName],this.screenDataService=this.sTxnUtilsService.getScreenDataService(this.inputScreenName),this.searchForm=this.sTxnUtilsService.getFormSearchFields(this.inputScreenName),this.getAutoSuggestionList("getSalesTransStatusList"),this.getAutoSuggestionList("getApprovalStatusList"),this.getAnalyticsData(),this.dataTable&&this.resetListing()}getListing(t){const e=this.sTxnUtilsService.getSearchDataFormation(this.inputScreenName,this.searchForm),i=this.utilsService.dataTableParameterFormation(t,e);this.listingProperties=i,this.screenDataService.getList(i).subscribe(t=>{"SUCCESS"===t.status?(this.listing.data=t.results.searchResults,this.listing.totalRecords=t.results.totalRecords):this.utilsService.showFailureMsg(t)})}clearSearchForm(){this.searchForm=this.sTxnUtilsService.getFormSearchFields(this.inputScreenName),this.resetListing()}resetListing(){this.dataTable.reset()}getAutoSuggestionList(t){this.commonDataService.getAutoSuggestionList(t).subscribe(e=>{"SUCCESS"===e.status?"getSalesTransStatusList"===t?this.statusList=e.results:"getApprovalStatusList"===t&&(this.approvalStatusList=e.results,this.approvalStatusList.push({id:"4",name:"No Approval Process"})):this.utilsService.showFailureMsg(e)})}getAnalyticsData(){this.sTxnUtilsService.getAnalyticsData(this.inputScreenName).subscribe(t=>{this.analyticsData=t})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(s.a),r.Pb(n.g),r.Pb(n.f),r.Pb(n.a),r.Pb(o.a),r.Pb(b),r.Pb(m.l))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-sales-txn-list"]],viewQuery:function(t,e){var i;1&t&&r.Pc(y,!0),2&t&&r.zc(i=r.ec())&&(e.dataTable=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-plus"],[1,"working-container"],[1,"analytics"],[1,"row"],["class","col-lg-2 col-md-3 col-sm-4 col-xs-12",4,"ngFor","ngForOf"],[1,"form-group","col-sm-3"],[1,"form-label"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","ngModelChange","onSelect"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","minDate","ngModelChange","onSelect"],[1,"form-group","col-sm-6","text-right"],[1,"checkbox","mt-3"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"checkmark"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-file-excel"],[1,"col-lg-2","col-md-3","col-sm-4","col-xs-12"],[1,"item"],[1,"name"],[1,"count",3,"ngClass"],[2,"width","80px"],["style","width:150px",3,"pSortableColumn",4,"ngIf"],[2,"width","100px",3,"pSortableColumn"],[3,"field"],[2,"width","90px",3,"pSortableColumn"],["style","width:110px",3,"pSortableColumn",4,"ngIf"],[2,"width","250px",3,"pSortableColumn"],[2,"width","120px"],[2,"width","120px",3,"pSortableColumn"],["style","width:120px",3,"pSortableColumn",4,"ngIf"],["style","width:130px",3,"pSortableColumn",4,"ngIf"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[2,"width","150px",3,"pSortableColumn"],[2,"width","110px",3,"pSortableColumn"],[2,"width","130px",3,"pSortableColumn"],[3,"value"],["value","2"],["value","1"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"click"],[1,"fa","fa-edit"],["class","badge badge-danger",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&r.Jc(0,H,38,22,"ng-container",0),2&t&&r.oc("ngIf",e.screenAcl.view)},directives:[d.m,d.l,h.a,l.m,l.o,l.a,p.c,f.b,d.k,p.b,p.a,g.a,l.b,l.t,l.p,l.v],styles:[""]}),t})();var Z=i("Kj3r"),X=i("/uUt"),tt=i("vkgz"),et=i("w9rb"),it=i("TlXv"),st=i("K3ix");function nt(t,e){if(1&t&&(r.Vb(0,"option",20),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Mc(t.manufacturerName)}}function rt(t,e){if(1&t){const t=r.Wb();r.Vb(0,"tr"),r.Vb(1,"td"),r.Vb(2,"input",21),r.dc("change",(function(i){r.Dc(t);const s=e.$implicit,n=e.index;return r.hc().selectItemCheckboxChange("ITEM",i.target.checked,s,n)})),r.Ub(),r.Ub(),r.Vb(3,"td"),r.Lc(4),r.Ub(),r.Vb(5,"td"),r.Lc(6),r.Ub(),r.Ub()}if(2&t){const t=e.$implicit,i=e.index,s=r.hc();r.Cb(2),r.oc("checked",s.checkboxSelection[i]),r.Cb(2),r.Mc(t.itemCode),r.Cb(2),r.Mc(t.itemName)}}const ot=function(){return{"max-height.px":300}};let ct=(()=>{class t{constructor(t,e,i,s){this.utilsService=t,this.commonDataService=e,this.sTxnUtilsService=i,this.activeModal=s,this.selectedItemList=new Set,this.manufacturerList=[],this.itemList=[],this.checkboxSelection=[]}ngOnInit(){this.getAutoSuggestionList("getManufacturerList")}getItemList(t){if(!t)return this.itemList=[],!1;this.commonDataService.getItemList("",1,!0,t).subscribe(t=>{"SUCCESS"===t.status?(this.itemList=t.results,this.checkboxSelection=[]):this.utilsService.showFailureMsg(t)})}selectItemCheckboxChange(t,e,i,s){"ALL"===t?e?(this.selectedItemList.clear(),this.itemList.forEach((t,e)=>{this.selectedItemList.add(t),this.checkboxSelection[e]=!0})):(this.selectedItemList.clear(),this.checkboxSelection=[]):e?(this.selectedItemList.add(i),this.checkboxSelection[s]=!0):(this.selectedItemList.delete(i),this.checkboxSelection[s]=!1)}loadItems(){const t=[];for(let e of this.selectedItemList)t.push(e);this.sTxnUtilsService.selectedItemsByWarehouseSubscription.next(t),this.activeModal.hide()}getAutoSuggestionList(t){this.commonDataService.getAutoSuggestionList(t).subscribe(t=>{"SUCCESS"===t.status?this.manufacturerList=t.results:this.utilsService.showFailureMsg(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(n.g),r.Pb(m.l),r.Pb(b),r.Pb(st.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-select-item-by-manufacturer-popup"]],decls:37,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],[1,"close",3,"click"],[1,"modal-body"],[1,"row"],[1,"form-group","col-sm-6"],[1,"form-label"],[1,"form-control","form-control-sm",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-bordered","table-striped"],["type","checkbox",3,"change"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn-group","text-right"],[1,"btn","btn-primary","btn-sm",3,"disabled","click"],[1,"fa","fa-upload"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-times"],[3,"value"],["type","checkbox",3,"checked","change"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"h5",1),r.Lc(2," Select Items by Manufacturer "),r.Ub(),r.Vb(3,"button",2),r.dc("click",(function(){return e.activeModal.hide()})),r.Vb(4,"span"),r.Lc(5,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(6,"div",3),r.Vb(7,"div",4),r.Vb(8,"div",5),r.Vb(9,"label",6),r.Lc(10,"Manufacturer"),r.Ub(),r.Vb(11,"select",7),r.dc("change",(function(t){return e.getItemList(t.target.value)})),r.Vb(12,"option",8),r.Lc(13,"--SELECT--"),r.Ub(),r.Jc(14,nt,2,2,"option",9),r.Ub(),r.Ub(),r.Ub(),r.Vb(15,"div",10),r.Vb(16,"table",11),r.Vb(17,"thead"),r.Vb(18,"tr"),r.Vb(19,"th"),r.Vb(20,"input",12),r.dc("change",(function(t){return e.selectItemCheckboxChange("ALL",t.target.checked)})),r.Ub(),r.Ub(),r.Vb(21,"th"),r.Lc(22,"Item Code"),r.Ub(),r.Vb(23,"th"),r.Lc(24,"Item Name"),r.Ub(),r.Ub(),r.Ub(),r.Vb(25,"tbody"),r.Jc(26,rt,7,3,"tr",13),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(27,"div",14),r.Vb(28,"div",15),r.Vb(29,"button",16),r.dc("click",(function(){return e.loadItems()})),r.Qb(30,"i",17),r.Vb(31,"span"),r.Lc(32,"Load"),r.Ub(),r.Ub(),r.Vb(33,"button",18),r.dc("click",(function(){return e.activeModal.hide()})),r.Qb(34,"i",19),r.Vb(35,"span"),r.Lc(36,"Cancel"),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&t&&(r.Cb(14),r.oc("ngForOf",e.manufacturerList),r.Cb(1),r.oc("ngStyle",r.rc(4,ot)),r.Cb(11),r.oc("ngForOf",e.itemList),r.Cb(3),r.oc("disabled",0===e.selectedItemList.size))},directives:[l.p,l.v,d.l,d.n],styles:[""]}),t})();function at(t,e){if(1&t&&(r.Vb(0,"tr"),r.Vb(1,"td"),r.Lc(2),r.Ub(),r.Vb(3,"td"),r.Lc(4),r.Ub(),r.Vb(5,"td"),r.Lc(6),r.Ub(),r.Vb(7,"td"),r.Lc(8),r.Ub(),r.Vb(9,"td"),r.Lc(10),r.Ub(),r.Ub()),2&t){const t=e.$implicit;r.Cb(2),r.Mc(t.documentNumber),r.Cb(2),r.Oc("",t.itemCode," - ",t.itemName,""),r.Cb(2),r.Mc(t.uomName),r.Cb(2),r.Mc(t.quantity),r.Cb(2),r.Mc(t.deliveryDate)}}const lt=function(){return{"max-height.px":400}};let ut=(()=>{class t{constructor(t,e,i){this.utilsService=t,this.salesOrderDataService=e,this.activeModal=i,this.salesOrderList=[]}ngOnInit(){this.getOpenSalesOrders()}getOpenSalesOrders(){this.salesOrderDataService.getOpenSalesOrdersByItemId(this.itemId).subscribe(t=>{"SUCCESS"===t.status?this.salesOrderList=t.results:this.utilsService.showFailureMsg(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(n.g),r.Pb(m.Y),r.Pb(st.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-open-sales-orders-by-item-popup"]],inputs:{itemId:"itemId"},decls:23,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],[1,"close",3,"click"],[1,"modal-body"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"h5",1),r.Lc(2," Open Sales Orders "),r.Ub(),r.Vb(3,"button",2),r.dc("click",(function(){return e.activeModal.hide()})),r.Vb(4,"span"),r.Lc(5,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(6,"div",3),r.Vb(7,"div",4),r.Vb(8,"table",5),r.Vb(9,"thead"),r.Vb(10,"tr"),r.Vb(11,"th"),r.Lc(12,"Doc No "),r.Ub(),r.Vb(13,"th"),r.Lc(14,"Item Name"),r.Ub(),r.Vb(15,"th"),r.Lc(16,"UOM"),r.Ub(),r.Vb(17,"th"),r.Lc(18,"Quantity"),r.Ub(),r.Vb(19,"th"),r.Lc(20,"Delivery Date"),r.Ub(),r.Ub(),r.Ub(),r.Vb(21,"tbody"),r.Jc(22,at,11,6,"tr",6),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&t&&(r.Cb(7),r.oc("ngStyle",r.rc(2,lt)),r.Cb(15),r.oc("ngForOf",e.salesOrderList))},directives:[d.n,d.l],styles:[""]}),t})();var mt=i("fIZe"),bt=i("ZOsW"),dt=i("umDy"),ht=i("dZIy"),pt=i("EDFS");const ft=["hActions"],gt=["hSno"],yt=["hWithoutQtyPosting"],vt=["hItemName"],St=["hQuantity"],It=["hOpenQty"],Ct=["hUOM"],Ut=["hUnitPrice"],Dt=["hWarehouse"],Lt=["hBin"],Vt=["hAvailable"],Nt=["hCommitted"],At=["hOrdered"],xt=["hHSN"],Ft=["hDiscount"],Tt=["hTaxCode"],Et=["hTax"],Ot=["hTotal"],Pt=["hDistRules"],Bt=["hSerialNumber"],Kt=["hExpiryDate"],Mt=["hBpApproval"],Rt=["hRemarks"],kt=["hDealerDiscountPercentage"],wt=["bActions"],Jt=["bSno"],Qt=["bWithoutQtyPosting"],Gt=["bItemName"],zt=["bQuantity"],_t=["bOpenQty"],qt=["bUOM"],Wt=["bUnitPrice"],jt=["bWarehouse"],$t=["bBin"],Ht=["bAvailable"],Yt=["bCommitted"],Zt=["bOrdered"],Xt=["bHSN"],te=["bDiscount"],ee=["bTaxCode"],ie=["bTax"],se=["bTotal"],ne=["bDistRules"],re=["bSerialNumber"],oe=["bExpiryDate"],ce=["bBpApproval"],ae=["bRemarks"],le=["bDealerDiscountPercentage"];function ue(t,e){1&t&&(r.Tb(0),r.Lc(1,"Add"),r.Sb())}function me(t,e){1&t&&(r.Tb(0),r.Lc(1,"Edit"),r.Sb())}function be(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",5),r.dc("click",(function(){return r.Dc(t),r.hc(2).downloadPdf()})),r.Qb(1,"i",121),r.Vb(2,"span"),r.Lc(3,"Print"),r.Ub(),r.Ub()}}function de(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(2);r.Cb(1),r.Nc(" ",t.myFormErrors1.documentNumberingId?t.myFormErrors1.documentNumberingId:t.myFormErrors1.documentNumber," ")}}function he(t,e){if(1&t&&(r.Vb(0,"div"),r.Lc(1),r.Vb(2,"small"),r.Lc(3),r.Ub(),r.Ub()),2&t){const t=e.item;r.Cb(1),r.Nc("",t.partnerName,"\xa0"),r.Cb(2),r.Nc("(",t.partnerCode,")")}}function pe(t,e){if(1&t){const t=r.Wb();r.Vb(0,"a",123),r.dc("click",(function(){return r.Dc(t),r.hc(2).bizRefreshFlag=!0})),r.Qb(1,"i",124),r.Ub()}}function fe(t,e){if(1&t){const t=r.Wb();r.Vb(0,"a",125),r.dc("click",(function(){r.Dc(t);const e=r.hc(2);return e.getCustomerBpList(),e.bizRefreshFlag=!1})),r.Qb(1,"i",126),r.Ub()}}function ge(t,e){if(1&t){const t=r.Wb();r.Vb(0,"span",127),r.dc("click",(function(){r.Dc(t);const e=r.hc(2);return e.popupExternalService.showDetailPopup("biz-partner",e.myForm1Data.customerBpId)})),r.Qb(1,"i",128),r.Ub()}}function ye(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(2);r.Cb(1),r.Nc(" ",t.myFormErrors1.customerBpId," ")}}function ve(t,e){if(1&t&&(r.Vb(0,"div"),r.Lc(1),r.Ub(),r.Vb(2,"small"),r.Lc(3),r.Ub()),2&t){const t=e.item;r.Cb(1),r.Mc(t.contactName),r.Cb(2),r.Oc("",t.contactTypeName," / ",t.contactNumber,"")}}function Se(t,e){if(1&t&&(r.Vb(0,"option",129),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Mc(t.currencyName)}}function Ie(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(2);r.Cb(1),r.Nc(" ",t.myFormErrors1.currencyId," ")}}function Ce(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(2);r.Cb(1),r.Nc(" ",t.myFormErrors1.postingDate," ")}}function Ue(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(2);r.Cb(1),r.Nc(" ",null==t.myForm1.errors?null:t.myForm1.errors.invalidPostingDate," ")}}function De(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(3);r.Cb(1),r.Nc(" ",t.myFormErrors1.validUntil," ")}}function Le(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(3);r.Cb(1),r.Nc(" ",null==t.myForm1.errors?null:t.myForm1.errors.invalidValidUntilDate," ")}}function Ve(t,e){if(1&t&&(r.Vb(0,"div",15),r.Vb(1,"label",16),r.Lc(2,"Valid Until"),r.Vb(3,"span",17),r.Lc(4,"*"),r.Ub(),r.Ub(),r.Qb(5,"p-calendar",130),r.Jc(6,De,2,1,"div",21),r.Jc(7,Le,2,1,"div",21),r.Ub()),2&t){const t=r.hc(2);r.Cb(5),r.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),r.Cb(1),r.oc("ngIf",t.myFormErrors1.validUntil),r.Cb(1),r.oc("ngIf",null==t.myForm1.errors?null:t.myForm1.errors.invalidValidUntilDate)}}function Ne(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(3);r.Cb(1),r.Nc(" ",t.myFormErrors1.deliveryDate," ")}}function Ae(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(3);r.Cb(1),r.Nc(" ",null==t.myForm1.errors?null:t.myForm1.errors.invalidDeliveryDate," ")}}function xe(t,e){if(1&t&&(r.Vb(0,"div",15),r.Vb(1,"label",16),r.Lc(2,"Delivery Date"),r.Vb(3,"span",17),r.Lc(4,"*"),r.Ub(),r.Ub(),r.Qb(5,"p-calendar",131),r.Jc(6,Ne,2,1,"div",21),r.Jc(7,Ae,2,1,"div",21),r.Ub()),2&t){const t=r.hc(2);r.Cb(5),r.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),r.Cb(1),r.oc("ngIf",t.myFormErrors1.deliveryDate),r.Cb(1),r.oc("ngIf",null==t.myForm1.errors?null:t.myForm1.errors.invalidDeliveryDate)}}function Fe(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(3);r.Cb(1),r.Nc(" ",t.myFormErrors1.dueDate," ")}}function Te(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(3);r.Cb(1),r.Nc(" ",null==t.myForm1.errors?null:t.myForm1.errors.invalidDueDate," ")}}function Ee(t,e){if(1&t&&(r.Vb(0,"div",15),r.Vb(1,"label",16),r.Lc(2,"Due Date"),r.Vb(3,"span",17),r.Lc(4,"*"),r.Ub(),r.Ub(),r.Qb(5,"p-calendar",132),r.Jc(6,Fe,2,1,"div",21),r.Jc(7,Te,2,1,"div",21),r.Ub()),2&t){const t=r.hc(2);r.Cb(5),r.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),r.Cb(1),r.oc("ngIf",t.myFormErrors1.dueDate),r.Cb(1),r.oc("ngIf",null==t.myForm1.errors?null:t.myForm1.errors.invalidDueDate)}}function Oe(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(2);r.Cb(1),r.Nc(" ",t.myFormErrors1.documentDate," ")}}function Pe(t,e){if(1&t&&(r.Vb(0,"div"),r.Lc(1),r.Vb(2,"small"),r.Lc(3),r.Ub(),r.Ub()),2&t){const t=e.item;r.Cb(1),r.Nc("",t.employeeName,"\xa0"),r.Cb(2),r.Nc("(",t.empCode,")")}}function Be(t,e){if(1&t){const t=r.Wb();r.Vb(0,"span",127),r.dc("click",(function(){r.Dc(t);const e=r.hc(2);return e.popupExternalService.showDetailPopup("employee",e.myForm1Data.salesEmpId)})),r.Qb(1,"i",128),r.Ub()}}function Ke(t,e){if(1&t&&(r.Vb(0,"option",129),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Nc(" ",t.name," ")}}function Me(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(2);r.Cb(1),r.Nc(" ",t.myFormErrors1.status," ")}}function Re(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(2);r.Cb(1),r.Nc(" ",t.myFormErrors1.remarks," ")}}function ke(t,e){1&t&&(r.Vb(0,"div",15),r.Vb(1,"label",16),r.Lc(2,"Gatepass"),r.Ub(),r.Vb(3,"select",133),r.Vb(4,"option",134),r.Lc(5,"Not available"),r.Ub(),r.Vb(6,"option",135),r.Lc(7,"Open for Gatepass"),r.Ub(),r.Ub(),r.Ub())}const we=function(t){return{data:t}};function Je(t,e){if(1&t&&(r.Tb(0),r.Qb(1,"template",136),r.Sb()),2&t){const t=e.$implicit,i=r.hc(2);r.Cb(1),r.oc("ngTemplateOutlet",i[t.headerRef])("ngTemplateOutletContext",r.sc(2,we,t))}}const Qe=function(t,e){return{formItemListRow:t,i:e}};function Ge(t,e){if(1&t&&(r.Tb(0),r.Qb(1,"template",136),r.Sb()),2&t){const t=e.$implicit,i=r.hc(),s=i.$implicit,n=i.index,o=r.hc(2);r.Cb(1),r.oc("ngTemplateOutlet",o[t.bodyRef])("ngTemplateOutletContext",r.tc(2,Qe,s,n))}}function ze(t,e){if(1&t&&(r.Vb(0,"tr",137),r.Jc(1,Ge,2,5,"ng-container",43),r.Ub()),2&t){const t=e.index,i=r.hc(2);r.oc("formGroupName",t),r.Cb(1),r.oc("ngForOf",i.itemListColumnOrder)}}function _e(t,e){if(1&t){const t=r.Wb();r.Vb(0,"tfoot"),r.Vb(1,"tr"),r.Vb(2,"td",138),r.Vb(3,"button",139),r.dc("click",(function(){return r.Dc(t),r.hc(2).addItemFields()})),r.Qb(4,"i",124),r.Vb(5,"span"),r.Lc(6,"Add Item"),r.Ub(),r.Ub(),r.Lc(7," \xa0 "),r.Vb(8,"button",140),r.dc("click",(function(){return r.Dc(t),r.hc(2).showSelectItemsByManufacturerPopup()})),r.Qb(9,"i",124),r.Vb(10,"span"),r.Lc(11,"Add Items by Manufacturer"),r.Ub(),r.Ub(),r.Lc(12," \xa0 "),r.Vb(13,"span",141),r.Lc(14,"Note:"),r.Ub(),r.Lc(15," Select Customer to add items "),r.Ub(),r.Ub(),r.Ub()}if(2&t){const t=r.hc(2);r.Cb(3),r.oc("disabled",!t.myForm1Data.customerBpId),r.Cb(5),r.oc("disabled",!t.myForm1Data.customerBpId)}}function qe(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(3);r.Cb(1),r.Nc(" ",t.myFormErrors1.discountPercentage," ")}}function We(t,e){if(1&t){const t=r.Wb();r.Vb(0,"tr"),r.Vb(1,"td"),r.Lc(2,"Discount %"),r.Ub(),r.Vb(3,"td",53),r.Vb(4,"input",142),r.dc("keyup",(function(){r.Dc(t);const e=r.hc(2);return e.branchUtilsService.txnCalcTotal(e.myForm1)})),r.Ub(),r.Jc(5,qe,2,1,"div",21),r.Ub(),r.Vb(6,"td",53),r.Lc(7),r.Ub(),r.Ub()}if(2&t){const t=r.hc(2);r.Cb(5),r.oc("ngIf",t.myFormErrors1.discountPercentage),r.Cb(2),r.Oc(" ",t.myForm1Data.discountValue," ",t.branchUtilsService.txnGetActiveCurrency(t.currencyList,t.myForm1,"currencyId")," ")}}function je(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(3);r.Cb(1),r.Nc(" ",t.myFormErrors1.dpmPercentage," ")}}function $e(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(3);r.Cb(1),r.Nc(" ",t.myFormErrors1.dpmValue," ")}}function He(t,e){if(1&t){const t=r.Wb();r.Vb(0,"tr"),r.Vb(1,"td"),r.Lc(2,"DPM %"),r.Ub(),r.Vb(3,"td",53),r.Vb(4,"input",143),r.dc("keyup",(function(){r.Dc(t);const e=r.hc(2);return e.branchUtilsService.txnCalcTotal(e.myForm1)})),r.Ub(),r.Jc(5,je,2,1,"div",21),r.Ub(),r.Vb(6,"td",53),r.Vb(7,"input",144),r.dc("keyup",(function(){return r.Dc(t),r.hc(2).convertDpmValueToPercentage()})),r.Ub(),r.Jc(8,$e,2,1,"div",21),r.Ub(),r.Ub()}if(2&t){const t=r.hc(2);r.Cb(4),r.Db("disabled",!(t.myForm1Data.totalBeforeDiscount>0)||null),r.Cb(1),r.oc("ngIf",t.myFormErrors1.dpmPercentage),r.Cb(2),r.Db("disabled",!(t.myForm1Data.totalBeforeDiscount>0)||null),r.Cb(1),r.oc("ngIf",t.myFormErrors1.dpmValue)}}function Ye(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(2);r.Cb(1),r.Nc(" ",t.myFormErrors1.rounding," ")}}function Ze(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc(3);r.Cb(1),r.Nc(" ",t.myFormErrors1.salesArDpInvoiceUsedAmount," ")}}function Xe(t,e){if(1&t&&(r.Vb(0,"span",148),r.Lc(1),r.Ub()),2&t){const t=r.hc(3);r.Cb(1),r.Nc("Maximum: ",t.txnKeys.salesArDpInvoiceUsedOriginalAmount,"")}}function ti(t,e){if(1&t){const t=r.Wb();r.Vb(0,"tr"),r.Vb(1,"td"),r.Lc(2," Down Payment "),r.Ub(),r.Vb(3,"td"),r.Vb(4,"ng-select",145),r.dc("change",(function(){return r.Dc(t),r.hc(2).setDpAmount()})),r.Ub(),r.Ub(),r.Vb(5,"td",53),r.Vb(6,"input",146),r.dc("keyup",(function(){return r.Dc(t),r.hc(2).setDpTaxAmount()})),r.Ub(),r.Jc(7,Ze,2,1,"div",21),r.Jc(8,Xe,2,1,"span",147),r.Ub(),r.Ub()}if(2&t){const t=r.hc(2);r.Cb(4),r.oc("items",t.dpDocumentNoList)("multiple",!1),r.Cb(3),r.oc("ngIf",t.myFormErrors1.salesArDpInvoiceUsedAmount),r.Cb(1),r.oc("ngIf",t.myForm1Data.salesArDpInvoiceId&&!t.txnKeys.inputEditId)}}function ei(t,e){1&t&&(r.Vb(0,"tr"),r.Vb(1,"td"),r.Lc(2," Down Payment Tax "),r.Ub(),r.Qb(3,"td"),r.Vb(4,"td",53),r.Qb(5,"input",149),r.Ub(),r.Ub())}function ii(t,e){if(1&t&&(r.Vb(0,"option",129),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Oc(" ",t.address," - ",t.city," ")}}function si(t,e){if(1&t&&(r.Vb(0,"option",129),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Oc(" ",t.address," - ",t.city," ")}}function ni(t,e){1&t&&(r.Vb(0,"div",15),r.Vb(1,"label",16),r.Lc(2,"Courier"),r.Ub(),r.Qb(3,"input",150),r.Ub())}function ri(t,e){1&t&&(r.Vb(0,"div",15),r.Vb(1,"label",16),r.Lc(2,"Tracking NUmber"),r.Ub(),r.Qb(3,"input",151),r.Ub())}function oi(t,e){1&t&&(r.Vb(0,"div",15),r.Vb(1,"label",16),r.Lc(2,"Delivery Status"),r.Ub(),r.Vb(3,"select",152),r.Vb(4,"option",134),r.Lc(5,"No"),r.Ub(),r.Vb(6,"option",135),r.Lc(7,"Yes"),r.Ub(),r.Ub(),r.Ub())}function ci(t,e){if(1&t&&(r.Vb(0,"option",129),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Nc(" ",t.paymentTermName," ")}}function ai(t,e){if(1&t&&(r.Vb(0,"option",129),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Nc(" ",t.paymentMethodName," ")}}function li(t,e){1&t&&(r.Vb(0,"div",15),r.Vb(1,"label",16),r.Lc(2,"Original Ref. No"),r.Ub(),r.Qb(3,"input",153),r.Ub())}function ui(t,e){if(1&t&&(r.Vb(0,"div",15),r.Vb(1,"label",16),r.Lc(2,"Original Ref. Date"),r.Ub(),r.Qb(3,"p-calendar",154),r.Ub()),2&t){const t=r.hc(2);r.Cb(3),r.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT)}}function mi(t,e){if(1&t&&(r.Vb(0,"option",129),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Mc(t.noteName)}}function bi(t,e){if(1&t&&(r.Vb(0,"div",15),r.Vb(1,"label",16),r.Lc(2,"Reason for Issue Note"),r.Ub(),r.Vb(3,"select",155),r.Vb(4,"option",30),r.Lc(5,"--SELECT--"),r.Ub(),r.Jc(6,mi,2,2,"option",31),r.Ub(),r.Ub()),2&t){const t=r.hc(2);r.Cb(6),r.oc("ngForOf",t.issuingNoteList)}}function di(t,e){if(1&t&&(r.Vb(0,"tr"),r.Vb(1,"td"),r.Lc(2),r.Ub(),r.Vb(3,"td"),r.Lc(4),r.Ub(),r.Vb(5,"td"),r.Vb(6,"span",158),r.Lc(7),r.Ub(),r.Ub(),r.Vb(8,"td"),r.Lc(9),r.Ub(),r.Vb(10,"td"),r.Lc(11),r.Ub(),r.Ub()),2&t){const t=e.$implicit,i=e.index,s=r.hc(3);r.Cb(2),r.Mc(i+1),r.Cb(2),r.Mc(t.employeeName),r.Cb(2),r.oc("ngClass",s.appConstants.APPROVAL_STATUS_COLOR_CLS[t.approvalStatus]),r.Cb(1),r.Nc(" ",t.approvalStatusName,""),r.Cb(2),r.Mc(t.remarks),r.Cb(2),r.Mc(t.createdDateTime)}}const hi=function(){return{"max-height.px":300}};function pi(t,e){if(1&t&&(r.Vb(0,"div",10),r.Vb(1,"div",11),r.Qb(2,"i",12),r.Lc(3,"Approval History "),r.Ub(),r.Vb(4,"div",40),r.Vb(5,"div",41),r.Vb(6,"table",42),r.Vb(7,"thead"),r.Vb(8,"tr"),r.Vb(9,"th",156),r.Lc(10,"S.No"),r.Ub(),r.Vb(11,"th",51),r.Lc(12,"Approver / Rejecter"),r.Ub(),r.Vb(13,"th",51),r.Lc(14,"Status"),r.Ub(),r.Vb(15,"th",157),r.Lc(16,"History"),r.Ub(),r.Vb(17,"th",51),r.Lc(18,"Date / Time"),r.Ub(),r.Ub(),r.Ub(),r.Vb(19,"tbody"),r.Jc(20,di,12,6,"tr",43),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&t){const t=r.hc(2);r.Cb(5),r.oc("ngStyle",r.rc(2,hi)),r.Cb(15),r.oc("ngForOf",t.approvalHistory)}}function fi(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",5),r.dc("click",(function(){return r.Dc(t),r.hc(2).confirmSaveUpdate()})),r.Qb(1,"i",159),r.Vb(2,"span"),r.Lc(3,"Save"),r.Ub(),r.Ub()}}function gi(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",5),r.dc("click",(function(){return r.Dc(t),r.hc(2).addUpdateDraft()})),r.Qb(1,"i",159),r.Vb(2,"span"),r.Lc(3,"Save as Draft"),r.Ub(),r.Ub()}}function yi(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",3),r.dc("click",(function(){return r.Dc(t),r.hc(2).clearForm()})),r.Qb(1,"i",160),r.Vb(2,"span"),r.Lc(3,"Clear"),r.Ub(),r.Ub()}}function vi(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",5),r.dc("click",(function(){return r.Dc(t),r.hc(2).confirmSaveUpdate("add")})),r.Qb(1,"i",126),r.Vb(2,"span"),r.Lc(3,"Add"),r.Ub(),r.Ub()}}function Si(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",5),r.dc("click",(function(){return r.Dc(t),r.hc(2).confirmSaveUpdate()})),r.Qb(1,"i",126),r.Vb(2,"span"),r.Lc(3,"Update"),r.Ub(),r.Ub()}}function Ii(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",3),r.dc("click",(function(){r.Dc(t);const e=r.hc(2);return e.sTxnUtilsService.redirectToList(e.txnKeys.inputScreenName)})),r.Qb(1,"i",161),r.Vb(2,"span"),r.Lc(3,"Cancel"),r.Ub(),r.Ub()}}function Ci(t,e){1&t&&(r.Vb(0,"div",164),r.Vb(1,"span",141),r.Lc(2,"Note:"),r.Ub(),r.Lc(3," You are unauthorized to "),r.Vb(4,"strong"),r.Lc(5,"update"),r.Ub(),r.Lc(6," this transaction! "),r.Ub())}function Ui(t,e){1&t&&(r.Vb(0,"div",164),r.Vb(1,"span",141),r.Lc(2,"Note:"),r.Ub(),r.Lc(3," Cannot update "),r.Vb(4,"strong"),r.Lc(5,"Cancelled"),r.Ub(),r.Lc(6," / "),r.Vb(7,"strong"),r.Lc(8,"Closed"),r.Ub(),r.Lc(9," / "),r.Vb(10,"strong"),r.Lc(11," Approved"),r.Ub(),r.Lc(12," transactions! "),r.Ub())}function Di(t,e){if(1&t&&(r.Vb(0,"div",162),r.Vb(1,"div"),r.Vb(2,"strong"),r.Lc(3,"Created By:"),r.Ub(),r.Lc(4),r.Ub(),r.Jc(5,Ci,7,0,"div",163),r.Jc(6,Ui,13,0,"div",163),r.Ub()),2&t){const t=r.hc(2);r.Cb(4),r.Nc(" ",t.txnKeys.editCreatedName,""),r.Cb(1),r.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"updateAclNote")),r.Cb(1),r.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"updateNote"))}}function Li(t,e){1&t&&(r.Vb(0,"div",162),r.Vb(1,"span",141),r.Lc(2,"Note:"),r.Ub(),r.Lc(3," You are unauthorized to "),r.Vb(4,"strong"),r.Lc(5,"add"),r.Ub(),r.Lc(6," this transaction!. "),r.Ub())}function Vi(t,e){if(1&t&&(r.Vb(0,"th",165),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function Ni(t,e){if(1&t&&(r.Vb(0,"th",166),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function Ai(t,e){if(1&t&&(r.Vb(0,"th",168),r.Lc(1),r.Ub()),2&t){const t=r.hc().data;r.Cb(1),r.Nc(" ",t.name,"")}}function xi(t,e){if(1&t&&r.Jc(0,Ai,2,1,"th",167),2&t){const t=r.hc(2);r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnWithoutQtyPosting"))}}function Fi(t,e){if(1&t&&(r.Vb(0,"th",169),r.Lc(1),r.Vb(2,"span",17),r.Lc(3,"*"),r.Ub(),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function Ti(t,e){if(1&t&&(r.Vb(0,"th",168),r.Lc(1),r.Vb(2,"span",17),r.Lc(3,"*"),r.Ub(),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function Ei(t,e){if(1&t&&(r.Vb(0,"th",168),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function Oi(t,e){if(1&t&&(r.Vb(0,"th",168),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function Pi(t,e){if(1&t&&(r.Vb(0,"th",168),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function Bi(t,e){1&t&&(r.Vb(0,"span",17),r.Lc(1,"*"),r.Ub())}function Ki(t,e){if(1&t&&(r.Vb(0,"th",50),r.Lc(1),r.Jc(2,Bi,2,0,"span",170),r.Ub()),2&t){const t=e.data,i=r.hc(2);r.Cb(1),r.Nc("",t.name," "),r.Cb(1),r.oc("ngIf","salesDelivery"===i.txnKeys.inputScreenName||"salesArInvoice"===i.txnKeys.inputScreenName||"salesArDpInvoice"===i.txnKeys.inputScreenName||"salesArCreditMemo"===i.txnKeys.inputScreenName||"salesReturn"===i.txnKeys.inputScreenName)}}function Mi(t,e){1&t&&(r.Vb(0,"span",17),r.Lc(1,"*"),r.Ub())}function Ri(t,e){if(1&t&&(r.Vb(0,"th",168),r.Lc(1),r.Jc(2,Mi,2,0,"span",170),r.Ub()),2&t){const t=e.data,i=r.hc(2);r.Cb(1),r.Nc("",t.name," "),r.Cb(1),r.oc("ngIf","salesDelivery"===i.txnKeys.inputScreenName||"salesArInvoice"===i.txnKeys.inputScreenName||"salesArDpInvoice"===i.txnKeys.inputScreenName||"salesArCreditMemo"===i.txnKeys.inputScreenName||"salesReturn"===i.txnKeys.inputScreenName)}}function ki(t,e){if(1&t&&(r.Vb(0,"th",171),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function wi(t,e){if(1&t&&(r.Vb(0,"th",171),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function Ji(t,e){if(1&t&&(r.Vb(0,"th",171),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function Qi(t,e){if(1&t&&(r.Vb(0,"th",168),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function Gi(t,e){if(1&t&&(r.Vb(0,"th",168),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function zi(t,e){if(1&t&&(r.Vb(0,"th",172),r.Lc(1),r.Vb(2,"span",17),r.Lc(3,"*"),r.Ub(),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function _i(t,e){if(1&t&&(r.Vb(0,"th",168),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function qi(t,e){if(1&t&&(r.Vb(0,"th",173),r.Lc(1),r.Vb(2,"small"),r.Lc(3,"(Auto Fill)"),r.Ub(),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function Wi(t,e){1&t&&(r.Vb(0,"span",17),r.Lc(1,"*"),r.Ub())}function ji(t,e){if(1&t&&(r.Vb(0,"th",169),r.Lc(1),r.Jc(2,Wi,2,0,"span",170),r.Ub()),2&t){const t=e.data,i=r.hc(2);r.Cb(1),r.Mc(t.name),r.Cb(1),r.oc("ngIf",i.storageService.get("distRulesMode"))}}function $i(t,e){if(1&t&&(r.Vb(0,"th",172),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function Hi(t,e){if(1&t&&(r.Vb(0,"th",172),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function Yi(t,e){if(1&t&&(r.Vb(0,"th",168),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function Zi(t,e){if(1&t&&(r.Vb(0,"th",50),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Mc(t.name)}}function Xi(t,e){if(1&t&&(r.Vb(0,"th",172),r.Lc(1),r.Ub()),2&t){const t=e.data;r.Cb(1),r.Nc("",t.name," ")}}function ts(t,e){if(1&t){const t=r.Wb();r.Tb(0),r.Vb(1,"a",175),r.dc("click",(function(){r.Dc(t);const e=r.hc().i,i=r.hc(2);return i.removeItemFields(e),i.branchUtilsService.txnCalcItemsTotal(i.myForm1)})),r.Qb(2,"i",176),r.Ub(),r.Sb()}}function es(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Jc(3,ts,3,0,"ng-container",0),r.Ub(),r.Sb(),r.Sb()),2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(1),r.oc("ngIf",i.myForm1Data.itemListArray[t].showDeleteIcon)}}function is(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Lc(3),r.Ub(),r.Sb(),r.Sb()),2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(1),r.Mc(t+1)}}function ss(t,e){if(1&t&&(r.Vb(0,"td",137),r.Vb(1,"label",54),r.Qb(2,"input",178),r.Qb(3,"span",56),r.Ub(),r.Ub()),2&t){const t=r.hc().i;r.oc("formGroupName",t)}}function ns(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Jc(2,ss,4,1,"td",177),r.Sb(),r.Sb()),2&t){const t=r.hc(2);r.oc("formGroup",t.myForm1),r.Cb(2),r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnWithoutQtyPosting"))}}function rs(t,e){if(1&t&&(r.Vb(0,"div"),r.Lc(1),r.Vb(2,"small"),r.Lc(3),r.Ub(),r.Ub()),2&t){const t=e.item;r.Cb(1),r.Nc("",t.itemName,"\xa0"),r.Cb(2),r.Nc("(",t.itemCode,")")}}function os(t,e){if(1&t){const t=r.Wb();r.Vb(0,"li"),r.Vb(1,"a",185),r.dc("click",(function(){r.Dc(t);const e=r.hc(3).i,i=r.hc(2);return i.popupExternalService.showDetailPopup("item",i.myForm1Data.itemListArray[e].itemId)})),r.Lc(2,"View Item Details"),r.Ub(),r.Ub()}}function cs(t,e){if(1&t){const t=r.Wb();r.Vb(0,"li"),r.Vb(1,"a",185),r.dc("click",(function(){r.Dc(t);const e=r.hc(3).i,i=r.hc(2);return i.showOpenSalesOrdersByItemPopup(i.myForm1Data.itemListArray[e].itemId)})),r.Lc(2,"View Open Orders of this Item"),r.Ub(),r.Ub()}}function as(t,e){if(1&t&&(r.Vb(0,"ul",184),r.Jc(1,os,3,0,"li",0),r.Jc(2,cs,3,0,"li",0),r.Ub()),2&t){const t=r.hc(4);r.Cb(1),r.oc("ngIf","3"!==t.storageService.get("employeeTypeId")&&"5"!==t.storageService.get("employeeTypeId")),r.Cb(1),r.oc("ngIf","3"===t.storageService.get("employeeTypeId")||"5"===t.storageService.get("employeeTypeId"))}}function ls(t,e){1&t&&(r.Vb(0,"span",181),r.Qb(1,"i",182),r.Jc(2,as,3,2,"ul",183),r.Ub())}function us(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc().i,e=r.hc(2);r.Cb(1),r.Nc(" ",e.myFormErrors1.itemListArray[t].itemId," ")}}function ms(t,e){if(1&t){const t=r.Wb();r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Vb(3,"div",36),r.Vb(4,"ng-select",179),r.dc("search",(function(e){return r.Dc(t),r.hc(2).onItemSearch(e)}))("change",(function(){r.Dc(t);const i=e.i;return r.hc(2).onItemChange(i)})),r.Jc(5,rs,4,2,"ng-template",24),r.Ub(),r.Jc(6,ls,3,0,"span",180),r.Ub(),r.Vb(7,"div",148),r.Lc(8),r.Ub(),r.Jc(9,us,2,1,"div",21),r.Ub(),r.Sb(),r.Sb()}if(2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(2),r.oc("items",i.itemList)("multiple",!1)("virtualScroll",!0),r.Cb(2),r.oc("ngIf",i.myForm1Data.itemListArray[t].itemId),r.Cb(2),r.Nc("Last Price: ",i.myForm1Data.itemListArray[t].lastPrice,""),r.Cb(1),r.oc("ngIf",i.myFormErrors1.itemListArray[t].itemId)}}function bs(t,e){if(1&t){const t=r.Wb();r.Vb(0,"span",188),r.dc("click",(function(){r.Dc(t);const e=r.hc().i,i=r.hc(2);return i.popupExternalService.showAvailabletoPromisePopup(i.myForm1Data.itemListArray[e].itemId,i.myForm1Data.itemListArray[e].warehouseId)})),r.Qb(1,"i",128),r.Ub()}}function ds(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc().formItemListRow;r.Cb(1),r.Nc(" ",null==t.errors?null:t.errors.invalidMaxQuantity," ")}}function hs(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc().formItemListRow;r.Cb(1),r.Nc(" ",null==t.errors?null:t.errors.invalidMinQuantity," ")}}function ps(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc().i,e=r.hc(2);r.Cb(1),r.Nc(" ",e.myFormErrors1.itemListArray[t].quantity," ")}}function fs(t,e){if(1&t){const t=r.Wb();r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Vb(3,"div",36),r.Vb(4,"input",186),r.dc("keyup",(function(){r.Dc(t);const e=r.hc(2);return e.branchUtilsService.txnCalcItemsTotal(e.myForm1)})),r.Ub(),r.Jc(5,bs,2,0,"span",187),r.Ub(),r.Jc(6,ds,2,1,"div",21),r.Jc(7,hs,2,1,"div",21),r.Jc(8,ps,2,1,"div",21),r.Ub(),r.Sb(),r.Sb()}if(2&t){const t=e.formItemListRow,i=e.i,s=r.hc(2);r.oc("formGroup",s.myForm1),r.Cb(2),r.oc("formGroupName",i),r.Cb(3),r.oc("ngIf",s.myForm1Data.itemListArray[i].itemId&&s.myForm1Data.itemListArray[i].warehouseId),r.Cb(1),r.oc("ngIf",null==t.errors?null:t.errors.invalidMaxQuantity),r.Cb(1),r.oc("ngIf",null==t.errors?null:t.errors.invalidMinQuantity),r.Cb(1),r.oc("ngIf",s.myFormErrors1.itemListArray[i].quantity)}}function gs(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Lc(3),r.Ub(),r.Sb(),r.Sb()),2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(1),r.Nc(" ",i.myForm1Data.itemListArray[t].openQuantity," ")}}function ys(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Qb(3,"ng-select",189),r.Ub(),r.Sb(),r.Sb()),2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(1),r.oc("items",i.uomList)("multiple",!1)}}function vs(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc().i,e=r.hc(2);r.Cb(1),r.Nc(" ",e.myFormErrors1.itemListArray[t].unitPrice," ")}}function Ss(t,e){if(1&t){const t=r.Wb();r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Vb(3,"input",190),r.dc("keyup",(function(){r.Dc(t);const e=r.hc(2);return e.branchUtilsService.txnCalcItemsTotal(e.myForm1)})),r.Ub(),r.Jc(4,vs,2,1,"div",21),r.Ub(),r.Sb(),r.Sb()}if(2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(2),r.oc("ngIf",i.myFormErrors1.itemListArray[t].unitPrice)}}function Is(t,e){if(1&t&&(r.Vb(0,"div"),r.Lc(1),r.Vb(2,"small"),r.Lc(3),r.Ub(),r.Ub()),2&t){const t=e.item;r.Cb(1),r.Nc("",t.warehouseName,"\xa0"),r.Cb(2),r.Nc("(",t.warehouseCode,")")}}function Cs(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc().i,e=r.hc(2);r.Cb(1),r.Nc(" ",e.myFormErrors1.itemListArray[t].warehouseId," ")}}function Us(t,e){if(1&t){const t=r.Wb();r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Vb(3,"ng-select",191),r.dc("change",(function(){r.Dc(t);const i=e.i;return r.hc(2).setBinList(i)})),r.Jc(4,Is,4,2,"ng-template",24),r.Ub(),r.Jc(5,Cs,2,1,"div",21),r.Ub(),r.Sb(),r.Sb()}if(2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(1),r.oc("items",i.warehouseList)("multiple",!1),r.Cb(2),r.oc("ngIf",i.myFormErrors1.itemListArray[t].warehouseId)}}function Ds(t,e){if(1&t&&(r.Vb(0,"div",196),r.Vb(1,"strong"),r.Lc(2,"Only available stock bin's will be listed"),r.Ub(),r.Ub(),r.Lc(3)),2&t){const t=r.hc().i,e=r.hc(2);r.Cb(3),r.Nc(" ",e.myForm1Data.itemListArray[t].stockDetails?e.myForm1Data.itemListArray[t].stockDetails:"..."," ")}}function Ls(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc().i,e=r.hc(2);r.Cb(1),r.Nc(" ",e.myFormErrors1.itemListArray[t].binId," ")}}function Vs(t,e){if(1&t){const t=r.Wb();r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Vb(3,"div",36),r.Qb(4,"ng-select",192),r.Vb(5,"span",193),r.dc("click",(function(){r.Dc(t);const i=e.i,s=r.hc(2);return s.branchUtilsService.txnSetItemStockToBinTooltip(s.myForm1,i,"warehouseId","stockDetails")})),r.Jc(6,Ds,4,1,"ng-template",null,194,r.Kc),r.Vb(8,"span",195),r.Qb(9,"i",128),r.Ub(),r.Ub(),r.Ub(),r.Jc(10,Ls,2,1,"div",21),r.Ub(),r.Sb(),r.Sb()}if(2&t){const t=e.i,i=r.Ac(7),s=r.hc(2);r.oc("formGroup",s.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(2),r.oc("items",s.myForm1Data.itemListArray[t].binList)("multiple",!1),r.Cb(4),r.oc("popover",i)("outsideClick",!0),r.Cb(2),r.oc("ngIf",s.myFormErrors1.itemListArray[t].binId)}}function Ns(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Lc(3),r.Ub(),r.Sb(),r.Sb()),2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(1),r.Nc(" ",i.myForm1Data.itemListArray[t].availableStock," ")}}function As(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Lc(3),r.Ub(),r.Sb(),r.Sb()),2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(1),r.Nc(" ",i.myForm1Data.itemListArray[t].committedStock," ")}}function xs(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Lc(3),r.Ub(),r.Sb(),r.Sb()),2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(1),r.Nc(" ",i.myForm1Data.itemListArray[t].orderedStock," ")}}function Fs(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Qb(3,"ng-select",197),r.Ub(),r.Sb(),r.Sb()),2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(1),r.oc("items",i.hsnList)("multiple",!1)}}function Ts(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc().i,e=r.hc(2);r.Cb(1),r.Nc(" ",e.myFormErrors1.itemListArray[t].discountPercentage," ")}}function Es(t,e){if(1&t){const t=r.Wb();r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Vb(3,"input",142),r.dc("keyup",(function(){r.Dc(t);const e=r.hc(2);return e.branchUtilsService.txnCalcItemsTotal(e.myForm1)})),r.Ub(),r.Jc(4,Ts,2,1,"div",21),r.Ub(),r.Sb(),r.Sb()}if(2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(2),r.oc("ngIf",i.myFormErrors1.itemListArray[t].discountPercentage)}}function Os(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc().i,e=r.hc(2);r.Cb(1),r.Nc(" ",e.myFormErrors1.itemListArray[t].taxId," ")}}function Ps(t,e){if(1&t){const t=r.Wb();r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Vb(3,"ng-select",198),r.dc("change",(function(){r.Dc(t);const i=e.i,s=r.hc(2);return s.branchUtilsService.txnTaxChange(s.taxList,s.myForm1,i)})),r.Ub(),r.Jc(4,Os,2,1,"div",21),r.Ub(),r.Sb(),r.Sb()}if(2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(1),r.oc("items",i.taxList)("multiple",!1),r.Cb(1),r.oc("ngIf",i.myFormErrors1.itemListArray[t].taxId)}}function Bs(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Lc(3),r.Ub(),r.Sb(),r.Sb()),2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(1),r.Nc(" ",i.myForm1Data.itemListArray[t].itemTaxPercentage," ")}}function Ks(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",199),r.Lc(3),r.Ub(),r.Sb(),r.Sb()),2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(1),r.Nc(" ",i.myForm1Data.itemListArray[t].totalItemAmount," ")}}function Ms(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc().i,e=r.hc(2);r.Cb(1),r.Nc(" ",e.myFormErrors1.itemListArray[t].distributionRulesId," ")}}function Rs(t,e){if(1&t){const t=r.Wb();r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Vb(3,"ng-select",200),r.dc("add",(function(){r.Dc(t);const i=e.i;return r.hc(2).onDistRuleAdd(i)})),r.Ub(),r.Jc(4,Ms,2,1,"div",21),r.Ub(),r.Sb(),r.Sb()}if(2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(1),r.oc("items",i.distributionList)("multiple",!0),r.Cb(1),r.oc("ngIf",i.myFormErrors1.itemListArray[t].distributionRulesId)}}function ks(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Qb(3,"input",201),r.Ub(),r.Sb(),r.Sb()),2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t)}}function ws(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Qb(3,"p-calendar",202),r.Ub(),r.Sb(),r.Sb()),2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(1),r.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.appConstants.PICKER_YEAR_RANGE)("dateFormat",i.appConstants.PICKER_DATE_FORMAT)}}function Js(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Qb(3,"input",203),r.Ub(),r.Sb(),r.Sb()),2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t)}}function Qs(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Qb(3,"input",204),r.Ub(),r.Sb(),r.Sb()),2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t)}}function Gs(t,e){if(1&t&&(r.Vb(0,"div",122),r.Lc(1),r.Ub()),2&t){const t=r.hc().i,e=r.hc(2);r.Cb(1),r.Nc(" ",e.myFormErrors1.itemListArray[t].dealerDiscountPercentage," ")}}function zs(t,e){if(1&t&&(r.Tb(0,174),r.Tb(1,44),r.Vb(2,"td",137),r.Qb(3,"input",205),r.Jc(4,Gs,2,1,"div",21),r.Ub(),r.Sb(),r.Sb()),2&t){const t=e.i,i=r.hc(2);r.oc("formGroup",i.myForm1),r.Cb(2),r.oc("formGroupName",t),r.Cb(2),r.oc("ngIf",i.myFormErrors1.itemListArray[t].dealerDiscountPercentage)}}function _s(t,e){if(1&t){const t=r.Wb();r.Tb(0),r.Vb(1,"div",1),r.Vb(2,"span"),r.Lc(3),r.Ub(),r.Lc(4),r.Jc(5,ue,2,0,"ng-container",0),r.Jc(6,me,2,0,"ng-container",0),r.Vb(7,"div",2),r.Vb(8,"button",3),r.dc("click",(function(){return r.Dc(t),r.hc().utilsService.goBack()})),r.Qb(9,"i",4),r.Vb(10,"span"),r.Lc(11,"Back"),r.Ub(),r.Ub(),r.Vb(12,"button",5),r.dc("click",(function(){r.Dc(t);const e=r.hc();return e.popupExternalService.showManageColumnsPopup(e.txnKeys.inputScreenName)})),r.Qb(13,"i",6),r.Vb(14,"span"),r.Lc(15,"Manage Item Columns"),r.Ub(),r.Ub(),r.Jc(16,be,4,0,"button",7),r.Vb(17,"button",5),r.dc("click",(function(){return r.Dc(t),r.hc().showTxnOptionsSidebar()})),r.Qb(18,"i",8),r.Vb(19,"span"),r.Lc(20,"More"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(21,"div",9),r.Vb(22,"div",10),r.Vb(23,"div",11),r.Qb(24,"i",12),r.Lc(25,"Basic Info "),r.Ub(),r.Vb(26,"div",13),r.Vb(27,"div",14),r.Vb(28,"div",15),r.Vb(29,"label",16),r.Lc(30,"Doc No"),r.Vb(31,"span",17),r.Lc(32,"*"),r.Ub(),r.Ub(),r.Vb(33,"div",14),r.Vb(34,"div",18),r.Vb(35,"ng-select",19),r.dc("change",(function(){r.Dc(t);const e=r.hc();return e.branchUtilsService.onDocumentNumberingChange(e.documentNumberingList,e.myForm1)})),r.Ub(),r.Ub(),r.Vb(36,"div",18),r.Qb(37,"input",20),r.Ub(),r.Ub(),r.Jc(38,de,2,1,"div",21),r.Ub(),r.Vb(39,"div",15),r.Vb(40,"label",16),r.Lc(41,"Customer Name"),r.Vb(42,"span",17),r.Lc(43,"*"),r.Ub(),r.Ub(),r.Vb(44,"div",22),r.Vb(45,"ng-select",23),r.dc("focus",(function(){return r.Dc(t),r.hc().onCustomerNameChange()}))("change",(function(){return r.Dc(t),r.hc().onBpChange()})),r.Jc(46,he,4,2,"ng-template",24),r.Ub(),r.Vb(47,"span"),r.Jc(48,pe,2,0,"a",25),r.Jc(49,fe,2,0,"a",26),r.Ub(),r.Jc(50,ge,2,0,"span",27),r.Ub(),r.Jc(51,ye,2,1,"div",21),r.Ub(),r.Vb(52,"div",15),r.Vb(53,"label",16),r.Lc(54,"Contact Person"),r.Ub(),r.Vb(55,"ng-select",28),r.Jc(56,ve,4,3,"ng-template",24),r.Ub(),r.Ub(),r.Vb(57,"div",15),r.Vb(58,"label",16),r.Lc(59,"Currency"),r.Vb(60,"span",17),r.Lc(61,"*"),r.Ub(),r.Ub(),r.Vb(62,"select",29),r.Vb(63,"option",30),r.Lc(64,"--SELECT--"),r.Ub(),r.Jc(65,Se,2,2,"option",31),r.Ub(),r.Jc(66,Ie,2,1,"div",21),r.Ub(),r.Vb(67,"div",15),r.Vb(68,"label",16),r.Lc(69,"Reference No"),r.Ub(),r.Qb(70,"input",32),r.Ub(),r.Vb(71,"div",15),r.Vb(72,"label",16),r.Lc(73,"Posting Date"),r.Vb(74,"span",17),r.Lc(75,"*"),r.Ub(),r.Ub(),r.Qb(76,"p-calendar",33),r.Jc(77,Ce,2,1,"div",21),r.Jc(78,Ue,2,1,"div",21),r.Ub(),r.Jc(79,Ve,8,6,"div",34),r.Jc(80,xe,8,6,"div",34),r.Jc(81,Ee,8,6,"div",34),r.Vb(82,"div",15),r.Vb(83,"label",16),r.Lc(84,"Document Date"),r.Vb(85,"span",17),r.Lc(86,"*"),r.Ub(),r.Ub(),r.Qb(87,"p-calendar",35),r.Jc(88,Oe,2,1,"div",21),r.Ub(),r.Vb(89,"div",15),r.Vb(90,"label",16),r.Lc(91,"Sales Employee"),r.Ub(),r.Vb(92,"div",36),r.Vb(93,"ng-select",37),r.Jc(94,Pe,4,2,"ng-template",24),r.Ub(),r.Jc(95,Be,2,0,"span",27),r.Ub(),r.Ub(),r.Vb(96,"div",15),r.Vb(97,"label",16),r.Lc(98,"Status"),r.Vb(99,"span",17),r.Lc(100,"*"),r.Ub(),r.Ub(),r.Vb(101,"select",38),r.Jc(102,Ke,2,2,"option",31),r.Ub(),r.Jc(103,Me,2,1,"div",21),r.Ub(),r.Vb(104,"div",15),r.Vb(105,"label",16),r.Lc(106,"Remarks"),r.Ub(),r.Qb(107,"textarea",39),r.Jc(108,Re,2,1,"div",21),r.Ub(),r.Jc(109,ke,8,0,"div",34),r.Ub(),r.Ub(),r.Ub(),r.Vb(110,"div",10),r.Vb(111,"div",11),r.Qb(112,"i",12),r.Lc(113,"Content Info "),r.Ub(),r.Vb(114,"div",40),r.Vb(115,"div",41),r.Vb(116,"table",42),r.Vb(117,"thead"),r.Vb(118,"tr"),r.Jc(119,Je,2,4,"ng-container",43),r.Ub(),r.Ub(),r.Vb(120,"tbody",44),r.Jc(121,ze,2,2,"tr",45),r.Ub(),r.Jc(122,_e,16,2,"tfoot",0),r.Ub(),r.Ub(),r.Vb(123,"div",14),r.Vb(124,"div",46),r.Qb(125,"div",47),r.Ub(),r.Vb(126,"div",48),r.Vb(127,"table",49),r.Vb(128,"tbody"),r.Vb(129,"tr"),r.Vb(130,"td",50),r.Vb(131,"strong"),r.Lc(132,"Total Before Discount"),r.Ub(),r.Ub(),r.Qb(133,"td",51),r.Vb(134,"td",52),r.Vb(135,"strong"),r.Lc(136),r.Ub(),r.Ub(),r.Ub(),r.Jc(137,We,8,3,"tr",0),r.Jc(138,He,9,4,"tr",0),r.Vb(139,"tr"),r.Vb(140,"td"),r.Lc(141,"Tax"),r.Ub(),r.Qb(142,"td"),r.Vb(143,"td",53),r.Lc(144),r.Ub(),r.Ub(),r.Vb(145,"tr"),r.Vb(146,"td"),r.Lc(147," Rounding "),r.Vb(148,"div"),r.Vb(149,"label",54),r.Vb(150,"input",55),r.dc("ngModelChange",(function(){r.Dc(t);const e=r.hc();return e.branchUtilsService.txnRoundingOffChange(e.myForm1)})),r.Ub(),r.Qb(151,"span",56),r.Lc(152,"Edit "),r.Ub(),r.Ub(),r.Ub(),r.Vb(153,"td"),r.Vb(154,"input",57),r.dc("keyup",(function(){r.Dc(t);const e=r.hc();return e.branchUtilsService.txnCalcTotal(e.myForm1,!0)})),r.Ub(),r.Jc(155,Ye,2,1,"div",21),r.Ub(),r.Vb(156,"td",53),r.Lc(157),r.Ub(),r.Ub(),r.Jc(158,ti,9,4,"tr",0),r.Jc(159,ei,6,0,"tr",0),r.Vb(160,"tr"),r.Vb(161,"td",58),r.Lc(162,"Total "),r.Vb(163,"small"),r.Lc(164,"(Rounded off):"),r.Ub(),r.Ub(),r.Qb(165,"td"),r.Vb(166,"td",59),r.Lc(167),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(168,"div",10),r.Vb(169,"div",11),r.Qb(170,"i",12),r.Lc(171,"Logistics Info "),r.Ub(),r.Vb(172,"div",13),r.Vb(173,"div",14),r.Vb(174,"div",15),r.Vb(175,"label",16),r.Lc(176,"Ship To"),r.Ub(),r.Vb(177,"select",60),r.dc("change",(function(){r.Dc(t);const e=r.hc();return e.branchUtilsService.txnBpAddressChange(e.customerBpAddressShipToList,e.myForm1,"customerShipToBpAddressId","customerShipToAddress"),e.branchUtilsService.txnSetTaxCode(e.customerBpAddressShipToList,e.myForm1,"customerShipToBpAddressId")})),r.Vb(178,"option",30),r.Lc(179,"--SELECT--"),r.Ub(),r.Jc(180,ii,2,3,"option",31),r.Ub(),r.Qb(181,"textarea",61),r.Ub(),r.Vb(182,"div",15),r.Vb(183,"label",16),r.Lc(184,"Bill To"),r.Ub(),r.Vb(185,"select",62),r.dc("change",(function(){r.Dc(t);const e=r.hc();return e.branchUtilsService.txnBpAddressChange(e.customerBpAddressBillToList,e.myForm1,"customerBillToBpAddressId","customerBillToAddress")})),r.Vb(186,"option",30),r.Lc(187,"--SELECT--"),r.Ub(),r.Jc(188,si,2,3,"option",31),r.Ub(),r.Qb(189,"textarea",63),r.Ub(),r.Jc(190,ni,4,0,"div",34),r.Jc(191,ri,4,0,"div",34),r.Jc(192,oi,8,0,"div",34),r.Ub(),r.Ub(),r.Ub(),r.Vb(193,"div",10),r.Vb(194,"div",11),r.Qb(195,"i",12),r.Lc(196,"Accounting Info "),r.Ub(),r.Vb(197,"div",13),r.Vb(198,"div",14),r.Vb(199,"div",15),r.Vb(200,"label",16),r.Lc(201,"Payment Terms"),r.Ub(),r.Vb(202,"select",64),r.dc("change",(function(){r.Dc(t);const e=r.hc();return e.branchUtilsService.txnPaymentTermsChange(e.txnKeys.inputScreenName,e.paymentTermsList,e.myForm1,"paymentTermsId")})),r.Vb(203,"option",30),r.Lc(204,"--SELECT--"),r.Ub(),r.Jc(205,ci,2,2,"option",31),r.Ub(),r.Ub(),r.Vb(206,"div",15),r.Vb(207,"label",16),r.Lc(208,"Payment Method"),r.Ub(),r.Vb(209,"select",65),r.Vb(210,"option",30),r.Lc(211,"--SELECT--"),r.Ub(),r.Jc(212,ai,2,2,"option",31),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(213,"div",10),r.Vb(214,"div",11),r.Qb(215,"i",12),r.Lc(216,"Tax Info "),r.Ub(),r.Vb(217,"div",13),r.Vb(218,"div",14),r.Vb(219,"div",15),r.Vb(220,"label",16),r.Lc(221,"Tax code / GST / VAT"),r.Ub(),r.Qb(222,"input",66),r.Ub(),r.Jc(223,li,4,0,"div",34),r.Jc(224,ui,4,4,"div",34),r.Jc(225,bi,7,1,"div",34),r.Ub(),r.Ub(),r.Ub(),r.Qb(226,"app-udf-viewer",67),r.Vb(227,"app-attachments",68),r.dc("doSuccess",(function(){r.Dc(t);const e=r.hc();return e.sTxnUtilsService.redirectToList(e.txnKeys.inputScreenName)})),r.Ub(),r.Jc(228,pi,21,3,"div",69),r.Vb(229,"div",70),r.Jc(230,fi,4,0,"button",7),r.Jc(231,gi,4,0,"button",7),r.Jc(232,yi,4,0,"button",71),r.Jc(233,vi,4,0,"button",7),r.Jc(234,Si,4,0,"button",7),r.Jc(235,Ii,4,0,"button",71),r.Ub(),r.Jc(236,Di,7,3,"div",72),r.Jc(237,Li,7,0,"div",72),r.Ub(),r.Qb(238,"app-spi-txn-options"),r.Jc(239,Vi,2,1,"ng-template",null,73,r.Kc),r.Jc(241,Ni,2,1,"ng-template",null,74,r.Kc),r.Jc(243,xi,1,1,"ng-template",null,75,r.Kc),r.Jc(245,Fi,4,1,"ng-template",null,76,r.Kc),r.Jc(247,Ti,4,1,"ng-template",null,77,r.Kc),r.Jc(249,Ei,2,1,"ng-template",null,78,r.Kc),r.Jc(251,Oi,2,1,"ng-template",null,79,r.Kc),r.Jc(253,Pi,2,1,"ng-template",null,80,r.Kc),r.Jc(255,Ki,3,2,"ng-template",null,81,r.Kc),r.Jc(257,Ri,3,2,"ng-template",null,82,r.Kc),r.Jc(259,ki,2,1,"ng-template",null,83,r.Kc),r.Jc(261,wi,2,1,"ng-template",null,84,r.Kc),r.Jc(263,Ji,2,1,"ng-template",null,85,r.Kc),r.Jc(265,Qi,2,1,"ng-template",null,86,r.Kc),r.Jc(267,Gi,2,1,"ng-template",null,87,r.Kc),r.Jc(269,zi,4,1,"ng-template",null,88,r.Kc),r.Jc(271,_i,2,1,"ng-template",null,89,r.Kc),r.Jc(273,qi,4,1,"ng-template",null,90,r.Kc),r.Jc(275,ji,3,2,"ng-template",null,91,r.Kc),r.Jc(277,$i,2,1,"ng-template",null,92,r.Kc),r.Jc(279,Hi,2,1,"ng-template",null,93,r.Kc),r.Jc(281,Yi,2,1,"ng-template",null,94,r.Kc),r.Jc(283,Zi,2,1,"ng-template",null,95,r.Kc),r.Jc(285,Xi,2,1,"ng-template",null,96,r.Kc),r.Jc(287,es,4,3,"ng-template",null,97,r.Kc),r.Jc(289,is,4,3,"ng-template",null,98,r.Kc),r.Jc(291,ns,3,2,"ng-template",null,99,r.Kc),r.Jc(293,ms,10,8,"ng-template",null,100,r.Kc),r.Jc(295,fs,9,6,"ng-template",null,101,r.Kc),r.Jc(297,gs,4,3,"ng-template",null,102,r.Kc),r.Jc(299,ys,4,4,"ng-template",null,103,r.Kc),r.Jc(301,Ss,5,3,"ng-template",null,104,r.Kc),r.Jc(303,Us,6,5,"ng-template",null,105,r.Kc),r.Jc(305,Vs,11,7,"ng-template",null,106,r.Kc),r.Jc(307,Ns,4,3,"ng-template",null,107,r.Kc),r.Jc(309,As,4,3,"ng-template",null,108,r.Kc),r.Jc(311,xs,4,3,"ng-template",null,109,r.Kc),r.Jc(313,Fs,4,4,"ng-template",null,110,r.Kc),r.Jc(315,Es,5,3,"ng-template",null,111,r.Kc),r.Jc(317,Ps,5,5,"ng-template",null,112,r.Kc),r.Jc(319,Bs,4,3,"ng-template",null,113,r.Kc),r.Jc(321,Ks,4,3,"ng-template",null,114,r.Kc),r.Jc(323,Rs,5,5,"ng-template",null,115,r.Kc),r.Jc(325,ks,4,2,"ng-template",null,116,r.Kc),r.Jc(327,ws,4,6,"ng-template",null,117,r.Kc),r.Jc(329,Js,4,2,"ng-template",null,118,r.Kc),r.Jc(331,Qs,4,2,"ng-template",null,119,r.Kc),r.Jc(333,zs,5,3,"ng-template",null,120,r.Kc),r.Sb()}if(2&t){const t=r.hc();r.Cb(3),r.Mc(t.branchUtilsService.txnGetTitle(t.screenAttributes.title,!0)),r.Cb(1),r.Nc("",t.branchUtilsService.txnGetTitle(t.screenAttributes.title)," - "),r.Cb(1),r.oc("ngIf",!t.txnKeys.inputEditId),r.Cb(1),r.oc("ngIf",t.txnKeys.inputEditId),r.Cb(10),r.oc("ngIf",t.txnKeys.inputEditId),r.Cb(5),r.oc("formGroup",t.myForm1),r.Cb(14),r.oc("items",t.documentNumberingList),r.Cb(3),r.oc("ngIf",t.myFormErrors1.documentNumberingId||t.myFormErrors1.documentNumber),r.Cb(7),r.oc("items",t.customerBpList)("multiple",!1),r.Cb(3),r.oc("ngIf",!t.bizRefreshFlag),r.Cb(1),r.oc("ngIf",t.bizRefreshFlag),r.Cb(1),r.oc("ngIf",t.myForm1Data.customerBpId),r.Cb(1),r.oc("ngIf",t.myFormErrors1.customerBpId),r.Cb(4),r.oc("items",t.customerBpContactList)("multiple",!1),r.Cb(10),r.oc("ngForOf",t.currencyList),r.Cb(1),r.oc("ngIf",t.myFormErrors1.currencyId),r.Cb(10),r.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),r.Cb(1),r.oc("ngIf",t.myFormErrors1.postingDate),r.Cb(1),r.oc("ngIf",null==t.myForm1.errors?null:t.myForm1.errors.invalidPostingDate),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnValidUntil")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnDeliveryDate")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnDueDate")),r.Cb(6),r.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),r.Cb(1),r.oc("ngIf",t.myFormErrors1.documentDate),r.Cb(5),r.oc("items",t.salesEmployeeList)("multiple",!1),r.Cb(2),r.oc("ngIf",t.myForm1Data.salesEmpId),r.Cb(7),r.oc("ngForOf",t.statusList),r.Cb(1),r.oc("ngIf",t.myFormErrors1.status),r.Cb(5),r.oc("ngIf",t.myFormErrors1.remarks),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnGatepassStatus")),r.Cb(6),r.oc("ngStyle",r.rc(77,hi)),r.Cb(4),r.oc("ngForOf",t.itemListColumnOrder),r.Cb(2),r.oc("ngForOf",t.myForm1.controls.itemListArray.controls),r.Cb(1),r.oc("ngIf",t.branchUtilsService.txnAddItemAccess(t.txnKeys.inputScreenName,t.myForm1,t.txnKeys.inputEditId)),r.Cb(14),r.Oc(" ",t.myForm1Data.totalBeforeDiscount," ",t.branchUtilsService.txnGetActiveCurrency(t.currencyList,t.myForm1,"currencyId")," "),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnDiscountTab")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnDpmTab")),r.Cb(6),r.Oc(" ",t.myForm1Data.taxPercentage," ",t.branchUtilsService.txnGetActiveCurrency(t.currencyList,t.myForm1,"currencyId")," "),r.Cb(11),r.oc("ngIf",t.myFormErrors1.rounding),r.Cb(2),r.Oc(" ",t.myForm1Data.rounding," ",t.branchUtilsService.txnGetActiveCurrency(t.currencyList,t.myForm1,"currencyId")," "),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnDpInvoice")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnDpInvoice")),r.Cb(8),r.Oc(" ",t.myForm1Data.totalAmount," ",t.branchUtilsService.txnGetActiveCurrency(t.currencyList,t.myForm1,"currencyId")," "),r.Cb(13),r.oc("ngForOf",t.customerBpAddressShipToList),r.Cb(8),r.oc("ngForOf",t.customerBpAddressBillToList),r.Cb(2),r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"courier")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"trackingNumber")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"deliveryStatus")),r.Cb(13),r.oc("ngForOf",t.paymentTermsList),r.Cb(7),r.oc("ngForOf",t.paymentMethodsList),r.Cb(11),r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnOriginalRefNumber")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnOriginalRefDate")),r.Cb(1),r.oc("ngIf",t.sTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnIssuingNoteId")),r.Cb(1),r.oc("type",t.screenAttributes.backendKey),r.Cb(1),r.oc("type",t.screenAttributes.backendKey),r.Cb(1),r.oc("ngIf",0!==t.approvalHistory.length),r.Cb(2),r.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"save")),r.Cb(1),r.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"saveDraft")),r.Cb(1),r.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"clear")),r.Cb(1),r.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"add")),r.Cb(1),r.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"update")),r.Cb(1),r.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"cancel")),r.Cb(1),r.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"editMsgContainer")),r.Cb(1),r.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"addAclNote"))}}let qs=(()=>{class t{constructor(t,e,i,s,r,o,c,a,l,u,m,b){this.utilsService=t,this.storageService=e,this.authGuardService=i,this.commonDataService=s,this.branchUtilsService=r,this.sTxnUtilsService=o,this.popupExternalService=c,this.formBuilder=a,this.activatedRoute=l,this.changeDetectorRef=u,this.modalService=m,this.approvalStatusReportDataService=b,this.appConstants=n.h,this.screenAcl={},this.txnKeys={inputScreenName:"",inputEditId:"",inputDraftId:"",inputCopyIds:"",inputCopyScreenName:"",inputDuplicateId:"",editStatusId:"",editCreatedName:"",editTotalAmount:"",salesArDpInvoiceUsedOriginalAmount:""},this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.bizRefreshFlag=!1,this.documentNumberingList=[],this.customerBpList=[],this.customerBpContactList=[],this.currencyList=[],this.salesEmployeeList=[],this.statusList=[],this.itemList=[],this.warehouseList=[],this.binList=[],this.hsnList=[],this.taxList=[],this.uomList=[],this.distributionList=[],this.customerBpAddressShipToList=[],this.customerBpAddressBillToList=[],this.paymentTermsList=[],this.paymentMethodsList=[],this.issuingNoteList=[],this.approvalHistory=[],this.dpDocumentNoList=[],this.myForm1Data={},this.myFormErrors1={},this.myFormValidationMsgs1={}}ngOnInit(){this.initializeSubscriptions()}ngAfterViewInit(){this.attachmentsComponent&&this.udfViewerComponent&&(this.attachmentsComponent.loadAttachments(this.txnKeys.inputEditId||this.txnKeys.inputDraftId),this.udfViewerComponent.getFields(this.txnKeys.inputEditId||this.txnKeys.inputDuplicateId||this.txnKeys.inputDraftId),this.changeDetectorRef.detectChanges())}initializeSubscriptions(){this.activatedRoute.params.subscribe(t=>{if(!this.sTxnUtilsService.checkScreenNameValid(t.screenName))return this.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),this.utilsService.goBack(),!1;if(this.screenAcl=this.authGuardService.getScreenAcl(this.branchUtilsService.screenAttributes[t.screenName].documentTypeId),!this.screenAcl.view)return this.utilsService.showFailureMsg(n.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;if(this.reInitializeGlobalVariables(),this.txnKeys.inputScreenName=t.screenName,this.transactionInitialization(),t.id&&(this.txnKeys.inputEditId=this.utilsService.decrypt(t.id),this.get()),t.copyScreenName&&t.copyId){const e=this.utilsService.decrypt(t.copyId);this.txnKeys.inputCopyIds=e.split(","),this.txnKeys.inputCopyScreenName=t.copyScreenName,this.copyFrom()}t.duplicateId&&(this.txnKeys.inputDuplicateId=this.utilsService.decrypt(t.duplicateId),this.getDuplicate()),t.draftId&&(this.txnKeys.inputDraftId=this.utilsService.decrypt(t.draftId),this.getDraft()),this.txnKeys.inputEditId||this.txnKeys.inputCopyIds||this.txnKeys.inputDuplicateId||this.txnKeys.inputDraftId||(this.branchUtilsService.getMasterDocumentNumbering(this.myForm1,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),this.getAutoSuggestionList("getCurrencyList"),this.getCustomerBpList(),this.getSalesEmployeeList(),this.getAutoSuggestionList("getHsnList"),this.getAutoSuggestionList("getTaxList"),this.getAutoSuggestionList("getUomList"),this.getWarehouseList(),this.getDistributionList())}),this.branchUtilsService.itemSearch.pipe(Object(Z.a)(700),Object(X.a)(),Object(tt.a)(t=>{this.getItemList(t)})).subscribe(),this.itemListColumnOrderChangesSubscription=this.branchUtilsService.itemListColumnOrderChanges.subscribe(t=>{"salesQuote"!==t.triggerType&&"salesOrder"!==t.triggerType&&"salesDelivery"!==t.triggerType&&"salesArInvoice"!==t.triggerType&&"salesArDpInvoice"!==t.triggerType&&"salesArCreditMemo"!==t.triggerType&&"salesReturn"!==t.triggerType||(this.itemListColumnOrder=this.branchUtilsService.getSelectedItemColumnDataByTxn(this.txnKeys.inputScreenName))}),this.sTxnUtilsService.selectedItemsByWarehouseSubscription.subscribe(t=>{this.itemList=t.map(t=>(t.searchText=t.itemName+" - "+t.itemCode,t)),t.forEach(t=>{this.addItemFields();const e=this.myForm1.controls.itemListArray,i=e.length-1;e.at(i).patchValue({itemId:t.id}),this.onItemChange(i)})})}reInitializeGlobalVariables(){this.txnKeys.inputScreenName="",this.txnKeys.inputEditId="",this.txnKeys.inputCopyIds="",this.txnKeys.inputCopyScreenName="",this.txnKeys.inputDuplicateId="",this.txnKeys.editStatusId="",this.txnKeys.editCreatedName="",this.txnKeys.editTotalAmount=0,this.txnKeys.salesArDpInvoiceUsedOriginalAmount=0,this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.bizRefreshFlag=!1,this.documentNumberingList=[],this.customerBpList=[],this.customerBpContactList=[],this.currencyList=[],this.salesEmployeeList=[],this.statusList=[],this.itemList=[],this.warehouseList=[],this.binList=[],this.hsnList=[],this.taxList=[],this.uomList=[],this.distributionList=[],this.customerBpAddressShipToList=[],this.customerBpAddressBillToList=[],this.paymentTermsList=[],this.paymentMethodsList=[],this.dpDocumentNoList=[]}transactionInitialization(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.txnKeys.inputScreenName],this.itemListColumnOrder=this.branchUtilsService.getSelectedItemColumnDataByTxn(this.txnKeys.inputScreenName),this.screenDataService=this.sTxnUtilsService.getScreenDataService(this.txnKeys.inputScreenName),this.myFormErrors1=this.sTxnUtilsService.getFormErrors(this.txnKeys.inputScreenName,"mainFields"),this.myFormValidationMsgs1=this.sTxnUtilsService.getFormValMsgs(this.txnKeys.inputScreenName),this.initializeForm1(),this.getAutoSuggestionList("getSalesTransStatusList"),this.getAutoSuggestionList("getPaymentTermsList"),this.getAutoSuggestionList("getPaymentMethodsList"),this.getAutoSuggestionList("getIssuingNoteList"),this.branchUtilsService.spiTxnOptions.next({show:!1})}initializeForm1(){this.myForm1=this.sTxnUtilsService.getFormMainFields(this.txnKeys.inputScreenName),this.myForm1.valueChanges.subscribe(t=>{this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1),this.myForm1Data=this.myForm1.getRawValue()}),this.myForm1Data=this.myForm1.getRawValue(),this.sTxnUtilsService.manipulationsOnAddEditBasedOnRole(this.txnKeys.inputScreenName,this.myForm1,this.txnKeys.inputEditId)}addItemFields(t,e){const i=this.myForm1.controls.itemListArray;i.push(this.initItemFields(t,e)),t||(this.branchUtilsService.txnTaxChange(this.taxList,this.myForm1,i.length-1),this.setBinList(i.length-1,!0)),this.sTxnUtilsService.manipulationsOnAddEditBasedOnRole(this.txnKeys.inputScreenName,this.myForm1,this.txnKeys.inputEditId)}initItemFields(t,e){return this.myFormErrors1.itemListArray.push(this.sTxnUtilsService.getFormErrors(this.txnKeys.inputScreenName,"itemFields")),this.sTxnUtilsService.getFormItemFields(this.txnKeys.inputScreenName,t,e)}removeItemFields(t){const e=this.myForm1Data.itemListArray[t].id;if(e){const t=this.myForm1Data.deletedItemChildIds;t.push(e),this.myForm1.patchValue({deletedItemChildIds:t})}this.myForm1.controls.itemListArray.removeAt(t)}confirmSaveUpdate(t){const e=this.myForm1.getRawValue();if("3"!==e.approvalStatus&&"1"!==e.approvalStatus){const i=u.findIndex(this.documentNumberingList,{id:e.documentNumberingId});if("DRAFT"===this.documentNumberingList[i].documentNumberingType&&"add"!==t)return this.utilsService.showFailureMsg("Cannot Proceed - Select other than draft document numbering from Doc No field!"),!1}if(!this.myForm1.valid||!this.udfViewerComponent.valid())return this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1,!0),this.udfViewerComponent.checkValidations(),!1;if(0===e.itemListArray.length)return this.utilsService.showFailureMsg("Cannot save / update - No item added!"),!1;if("salesArDpInvoice"===this.txnKeys.inputScreenName&&parseFloat(e.dpmValue)>parseFloat(e.totalBeforeDiscount))return this.utilsService.showFailureMsg("Cannot save - DPM Value should not exceed Total Before Discount"),!1;if(("salesArInvoice"===this.txnKeys.inputScreenName||"salesArCreditMemo"===this.txnKeys.inputScreenName&&this.txnKeys.inputCopyIds)&&!this.txnKeys.inputEditId){const t=this.txnKeys.salesArDpInvoiceUsedOriginalAmount?this.txnKeys.salesArDpInvoiceUsedOriginalAmount:0;if(parseFloat(this.myForm1Data.salesArDpInvoiceUsedAmount?this.myForm1Data.salesArDpInvoiceUsedAmount:0)>parseFloat(t))return this.utilsService.showFailureMsg("Cannot exceed maximum amount specified in Down Payment"),!1}if(this.txnKeys.inputCopyIds){let t=!1;if(this.myForm1Data.itemListArray.forEach(e=>{e.copyFromId&&"SALES_QUOTE"!==e.copyFromType&&"SALES_ORDER"!==e.copyFromType&&parseInt(e.quantity,0)>parseInt(e.copyFromOpenQuantity,0)&&(t=!0)}),t)return this.utilsService.showFailureMsg("Quantity should not exceed maximum quantity specified under quantity field."),!1}if("salesOrder"===this.txnKeys.inputScreenName||"salesDelivery"===this.txnKeys.inputScreenName||"salesArInvoice"===this.txnKeys.inputScreenName){const e=u.find(this.customerBpList,{id:this.myForm1Data.customerBpId}),i=parseFloat(e.accountBalance)-parseFloat(e.creditLimit);let s=parseFloat(this.myForm1Data.totalAmount);if(this.txnKeys.inputEditId&&(this.txnKeys.editTotalAmount=parseFloat(this.txnKeys.editTotalAmount),this.txnKeys.editTotalAmount<s&&(s-=this.txnKeys.editTotalAmount)),s>i&&("1"==this.storageService.get("bpCreditLimitStrictMode")||"1"!==this.storageService.get("bpCreditLimitStrictMode")&&"0"!==e.creditLimit)){let n="";n="1"!==this.storageService.get("bpCreditLimitStrictMode")?`${e.partnerCode} - ${e.partnerName} has exceeded the credit limit by ${s-i}\n        ${this.branchUtilsService.txnGetActiveCurrency(this.currencyList,this.myForm1,"currencyId")}. Do you want to continue?`:`${e.partnerCode} - ${e.partnerName} has exceeded the credit limit by ${s-i}\n          ${this.branchUtilsService.txnGetActiveCurrency(this.currencyList,this.myForm1,"currencyId")}.`;const r="1"!==this.storageService.get("bpCreditLimitStrictMode")?"Confirmation":"Warning",o="1"!==this.storageService.get("bpCreditLimitStrictMode")?"Ok":"";this.utilsService.confirmDialog(r,n,"modal-sm",o,"Cancel").content.confirmation.subscribe(e=>{e&&this.saveUpdate(t)})}else this.saveUpdate(t)}else this.saveUpdate(t)}saveUpdate(t){const e=this.sTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm1);let i;e.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),e.isDraft=this.txnKeys.inputDraftId?"2":"0","add"===t?(e.id=this.txnKeys.inputEditId||this.txnKeys.inputDraftId,i="proceed"):this.txnKeys.inputEditId||this.txnKeys.inputDraftId?(i="update",e.id=this.txnKeys.inputEditId||this.txnKeys.inputDraftId,e.deletedItemChildIds=this.myForm1Data.deletedItemChildIds):i="save",this.screenDataService[i](e).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.attachmentsComponent.save("save"===i?t.sId:this.txnKeys.inputEditId||this.txnKeys.inputDraftId)):this.utilsService.showFailureMsg(t)})}addUpdateDraft(){const t=this.myForm1.getRawValue(),e=u.findIndex(this.documentNumberingList,{id:t.documentNumberingId});if("DRAFT"!==this.documentNumberingList[e].documentNumberingType)return this.utilsService.showFailureMsg("Cannot Proceed - Select draft document numbering from Doc No field!"),!1;if(0===t.itemListArray.length)return this.utilsService.showFailureMsg("Cannot save / update draft - No item added!"),!1;const i=this.sTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm1);let s;i.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),i.isDraft="1",this.txnKeys.inputDraftId?(s="update",i.id=this.txnKeys.inputDraftId,i.deletedItemChildIds=this.myForm1Data.deletedItemChildIds):s="save",this.screenDataService[s](i).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.attachmentsComponent.save("save"===s?t.sId:this.txnKeys.inputDraftId)):this.utilsService.showFailureMsg(t)})}get(){this.screenDataService.get(this.txnKeys.inputEditId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results;e.editFlag=!0;const i=this.sTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,e);this.myForm1.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm1,this.screenAttributes.documentTypeId,"edit",e.documentNumberingInfo).subscribe(t=>{this.documentNumberingList=t}),this.getAutoSuggestionList("getCurrencyList",e.currencyInfo),this.getCustomerBpList(!0,e.customerBpInfo),this.getCustomerBpContactList(!0,e.customerBpContactsInfo),this.getCustomerBpAddressShipToList(!0,e.customerShipToBpAddressInfo),this.getCustomerBpAddressBillToList(!0,e.customerBillToBpAddressInfo),this.getSalesEmployeeList(e.salesEmpInfo),"salesArInvoice"!==this.txnKeys.inputScreenName&&"salesArCreditMemo"!==this.txnKeys.inputScreenName||this.getDpDocumentNoList(!0,e.salesArDpInvoiceDocumentInfo),"salesDelivery"!==this.txnKeys.inputScreenName&&"salesArInvoice"!==this.txnKeys.inputScreenName&&"salesArDpInvoice"!==this.txnKeys.inputScreenName&&"salesArCreditMemo"!==this.txnKeys.inputScreenName&&"salesReturn"!==this.txnKeys.inputScreenName||"2"===e.status&&this.statusList.push({id:"2",name:"Closed"});const s=[],n=[],r=[],o=[],c=[],a=[];e.itemListArray.forEach(t=>{this.addItemFields(t,"edit"),t.itemInfo[0]&&s.push(t.itemInfo[0]),t.uomInfo[0]&&n.push(t.uomInfo[0]),t.warehouseInfo[0]&&r.push(t.warehouseInfo[0]),t.hsnInfo[0]&&o.push(t.hsnInfo[0]),t.taxInfo[0]&&c.push(t.taxInfo[0]),t.distributionRulesInfo.forEach(t=>{a.push(t)})}),this.getAutoSuggestionList("getUomList",n),this.getAutoSuggestionList("getHsnList",o),this.getAutoSuggestionList("getTaxList",c),this.getItemList("",!0,s,e),this.getWarehouseList(!0,r,e),this.getDistributionList(a),this.branchUtilsService.txnCalcItemsTotal(this.myForm1),this.txnKeys.editStatusId=e.status,this.txnKeys.editCreatedName=e.createdByInfo[0].employeeName,this.txnKeys.editTotalAmount=e.totalAmount,this.sTxnUtilsService.manipulationsOnEdit(this.txnKeys.inputScreenName,this.myForm1),this.sTxnUtilsService.manipulationsOnAddEditBasedOnRole(this.txnKeys.inputScreenName,this.myForm1,this.txnKeys.inputEditId),this.getApprovalHistory(e.approvalStatusReportId)}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}copyFrom(){const t=this.sTxnUtilsService.getScreenDataService(this.txnKeys.inputCopyScreenName),e=this.branchUtilsService.screenAttributes[this.txnKeys.inputCopyScreenName];t.copy(this.txnKeys.inputCopyIds).subscribe(t=>{if("SUCCESS"===t.status){const i=t.results;delete i.documentNumberingId,delete i.documentNumber,delete i.documentNumberingInfo;const s=this.sTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,i);if(this.myForm1.patchValue(s),this.branchUtilsService.getMasterDocumentNumbering(this.myForm1,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),this.getAutoSuggestionList("getCurrencyList",i.currencyInfo),this.getCustomerBpList(!0,i.customerBpInfo),this.getCustomerBpContactList(!0,i.customerBpContactsInfo),this.getCustomerBpAddressShipToList(!0,i.customerShipToBpAddressInfo),this.getCustomerBpAddressBillToList(!0,i.customerBillToBpAddressInfo),this.getSalesEmployeeList(i.salesEmpInfo),"salesArInvoice"!==this.txnKeys.inputScreenName&&"salesArCreditMemo"!==this.txnKeys.inputScreenName||this.getDpDocumentNoList(!0,i.salesArDpInvoiceDocumentInfo),"salesArDpInvoice"===this.txnKeys.inputScreenName){const t=parseFloat(this.myForm1Data.discountPercentage?this.myForm1Data.discountPercentage:0);this.myForm1.patchValue({dpmPercentage:100-t}),this.myForm1.patchValue({dpmValue:i.totalBeforeDiscount})}"salesArCreditMemo"===this.txnKeys.inputScreenName&&(this.myForm1.patchValue({salesArDpInvoiceUsedAmount:i.salesArDpInvoiceUsedRemainingAmount}),this.txnKeys.salesArDpInvoiceUsedOriginalAmount=i.salesArDpInvoiceUsedRemainingAmount);const n=[],r=[],o=[],c=[],a=[],l=[],u=i.itemListArray.filter(t=>parseInt(t.openQuantity,0)>0);i.itemListArray=u,i.itemListArray.forEach(t=>{t.copyFromId=t.id,t.copyFromType=e.backendKey,t.copyFromOpenQuantity=t.openQuantity,t.quantity=t.openQuantity,delete t.openQuantity,delete t.orderedQuantity,delete t.id,this.addItemFields(t,"copy"),t.itemInfo[0]&&n.push(t.itemInfo[0]),t.uomInfo[0]&&r.push(t.uomInfo[0]),t.warehouseInfo[0]&&o.push(t.warehouseInfo[0]),t.hsnInfo[0]&&c.push(t.hsnInfo[0]),t.taxInfo[0]&&a.push(t.taxInfo[0]),t.distributionRulesInfo.forEach(t=>{l.push(t)})}),this.getAutoSuggestionList("getUomList",r),this.getAutoSuggestionList("getHsnList",c),this.getAutoSuggestionList("getTaxList",a),this.getItemList("",!0,n,i),this.getWarehouseList(!0,o,i),this.getDistributionList(l),this.branchUtilsService.txnCalcItemsTotal(this.myForm1),this.sTxnUtilsService.manipulationsOnCopy(this.txnKeys.inputScreenName,this.myForm1),this.sTxnUtilsService.manipulationsOnAddEditBasedOnRole(this.txnKeys.inputScreenName,this.myForm1,this.txnKeys.inputEditId)}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}getDuplicate(){this.screenDataService.get(this.txnKeys.inputDuplicateId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results;delete e.documentNumberingId,delete e.documentNumber,delete e.documentNumberingInfo,delete e.status,delete e.courier,delete e.trackingNumber,delete e.deliveryStatus;const i=this.sTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,e);this.myForm1.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm1,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),this.getAutoSuggestionList("getCurrencyList"),this.getCustomerBpList(),this.getSalesEmployeeList(e.salesEmpInfo),"salesArInvoice"!==this.txnKeys.inputScreenName&&"salesArCreditMemo"!==this.txnKeys.inputScreenName||this.getDpDocumentNoList(!0,e.salesArDpInvoiceDocumentInfo);const s=[],n=[],r=[],o=[],c=[],a=[];e.itemListArray.forEach(t=>{delete t.id,delete t.openQuantity,delete t.orderedQuantity,delete t.copyFromType,delete t.copyFromId,this.addItemFields(t),t.itemInfo[0]&&s.push(t.itemInfo[0]),t.uomInfo[0]&&n.push(t.uomInfo[0]),t.warehouseInfo[0]&&r.push(t.warehouseInfo[0]),t.hsnInfo[0]&&o.push(t.hsnInfo[0]),t.taxInfo[0]&&c.push(t.taxInfo[0]),t.distributionRulesInfo.forEach(t=>{a.push(t)})}),this.getAutoSuggestionList("getUomList",n),this.getAutoSuggestionList("getHsnList",o),this.getAutoSuggestionList("getTaxList",c),this.getItemList("",!0,s,e),this.getWarehouseList(!0,r,e),this.getDistributionList(a),this.branchUtilsService.txnCalcItemsTotal(this.myForm1),this.sTxnUtilsService.manipulationsOnAddEditBasedOnRole(this.txnKeys.inputScreenName,this.myForm1,this.txnKeys.inputEditId)}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}getDraft(){this.screenDataService.get(this.txnKeys.inputDraftId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results,i=this.sTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,e);this.myForm1.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm1,this.screenAttributes.documentTypeId,"draft",e.documentNumberingInfo).subscribe(t=>{this.documentNumberingList=t}),this.getAutoSuggestionList("getCurrencyList",e.currencyInfo),this.getCustomerBpList(!0,e.customerBpInfo),this.getCustomerBpContactList(!0,e.customerBpContactsInfo),this.getCustomerBpAddressShipToList(!0,e.customerShipToBpAddressInfo),this.getCustomerBpAddressBillToList(!0,e.customerBillToBpAddressInfo),this.getSalesEmployeeList(e.salesEmpInfo),"salesArInvoice"!==this.txnKeys.inputScreenName&&"salesArCreditMemo"!==this.txnKeys.inputScreenName||this.getDpDocumentNoList(!0,e.salesArDpInvoiceDocumentInfo),"salesDelivery"!==this.txnKeys.inputScreenName&&"salesArInvoice"!==this.txnKeys.inputScreenName&&"salesArDpInvoice"!==this.txnKeys.inputScreenName&&"salesArCreditMemo"!==this.txnKeys.inputScreenName&&"salesReturn"!==this.txnKeys.inputScreenName||"2"===e.status&&this.statusList.push({id:"2",name:"Closed"});const s=[],n=[],r=[],o=[],c=[],a=[];e.itemListArray.forEach(t=>{this.addItemFields(t,"edit"),t.itemInfo[0]&&s.push(t.itemInfo[0]),t.uomInfo[0]&&n.push(t.uomInfo[0]),t.warehouseInfo[0]&&r.push(t.warehouseInfo[0]),t.hsnInfo[0]&&o.push(t.hsnInfo[0]),t.taxInfo[0]&&c.push(t.taxInfo[0]),t.distributionRulesInfo.forEach(t=>{a.push(t)})}),this.getAutoSuggestionList("getUomList",n),this.getAutoSuggestionList("getHsnList",o),this.getAutoSuggestionList("getTaxList",c),this.getItemList("",!0,s,e),this.getWarehouseList(!0,r,e),this.getDistributionList(a),this.branchUtilsService.txnCalcItemsTotal(this.myForm1),this.txnKeys.editStatusId=e.status,this.txnKeys.editCreatedName=e.createdByInfo[0].employeeName,this.txnKeys.editTotalAmount=e.totalAmount,"1"===e.isDraft&&"4"===e.approvalStatus?(this.myForm1.controls.documentNumberingId.enable(),this.myForm1.controls.documentNumber.enable()):(this.myForm1.controls.documentNumberingId.disable(),this.myForm1.controls.documentNumber.disable()),this.sTxnUtilsService.manipulationsOnAddEditBasedOnRole(this.txnKeys.inputScreenName,this.myForm1,this.txnKeys.inputEditId)}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}clearForm(){this.initializeForm1()}onBpChange(){this.getCustomerBpContactList(),this.branchUtilsService.txnSetCurrency(this.customerBpList,this.myForm1,"customerBpId","currencyId"),this.branchUtilsService.txnSetTermsAndMethods(this.customerBpList,this.myForm1,"customerBpId"),this.branchUtilsService.txnPaymentTermsChange(this.txnKeys.inputScreenName,this.paymentTermsList,this.myForm1,"paymentTermsId"),this.getCustomerBpAddressShipToList(),this.getCustomerBpAddressBillToList(),this.showTxnOptionsSidebar(!1),this.getDpDocumentNoList()}onCustomerNameChange(){if(this.myForm1Data.customerBpId){const t=this.myForm1.controls.itemListArray;t.length>0&&this.utilsService.confirmDialog("Confirmation","If changing the customer leads to remove the items. Do you want to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe(e=>{e&&(this.myForm1.patchValue({customerBpId:null}),t.clear())})}}onItemChange(t){this.myForm1Data.customerBpId||(this.utilsService.showFailureMsg("Please select customer name to add items"),this.myForm1.controls.itemListArray.at(t).patchValue({itemId:null})),this.branchUtilsService.txnSetUom(this.itemList,this.myForm1,t,"itemId"),this.branchUtilsService.txnSetHsn(this.itemList,this.myForm1,t,"itemId"),this.branchUtilsService.txnSetUnitPrice(this.myForm1,t,this.myForm1Data.customerBpId),this.branchUtilsService.txnCheckItemDuplicate(this.myForm1,t,"itemId",this.itemList),this.branchUtilsService.setLastPriceAndAvailableStock(this.itemList,this.myForm1,t,this.branchUtilsService.spiTxnId.sales),this.branchUtilsService.txnSetDefaultItemBin(this.itemList,this.myForm1,t,"warehouseId","binId","binList")}onDistRuleAdd(t){this.branchUtilsService.distRulesCheckUnique(this.distributionList,this.myForm1.controls.itemListArray.controls[t],"distributionRulesId")}onItemSearch(t){this.branchUtilsService.itemSearch.next(t)}getAutoSuggestionList(t,e){this.commonDataService.getAutoSuggestionList(t).subscribe(i=>{"SUCCESS"===i.status?(this.utilsService.ifNotPushToList(i.results,e),"getCurrencyList"===t?this.currencyList=i.results:"getSalesTransStatusList"===t?(this.txnKeys.inputEditId||(i.results=i.results.filter(t=>"1"===t.id)),this.txnKeys.inputEditId&&("salesDelivery"!==this.txnKeys.inputScreenName&&"salesArInvoice"!==this.txnKeys.inputScreenName&&"salesArDpInvoice"!==this.txnKeys.inputScreenName&&"salesArCreditMemo"!==this.txnKeys.inputScreenName&&"salesReturn"!==this.txnKeys.inputScreenName||(i.results=i.results.filter(t=>"2"!==t.id))),this.statusList=i.results):"getUomList"===t?this.uomList=i.results:"getHsnList"===t?this.hsnList=i.results.map(t=>(t.hsnLabel=t.chapter+"."+t.heading+"."+t.subHeading,t)):"getTaxList"===t?this.taxList=i.results:"getPaymentTermsList"===t?this.paymentTermsList=i.results:"getPaymentMethodsList"===t?this.paymentMethodsList=i.results:"getIssuingNoteList"===t&&(this.issuingNoteList=i.results)):this.utilsService.showFailureMsg(i)})}getDistributionList(t){this.commonDataService.getDistributionList(!0).subscribe(e=>{"SUCCESS"===e.status?(this.utilsService.ifNotPushToList(e.results,t),this.distributionList=e.results):this.utilsService.showFailureMsg(e)})}getCustomerBpList(t,e){this.commonDataService.getBusinessPartnerList([1]).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.ifNotPushToList(t.results,e),this.customerBpList=t.results.map(t=>(t.searchText=t.partnerName+" - "+t.partnerCode,t)),"3"!==this.storageService.get("employeeTypeId")||"salesOrder"!==this.txnKeys.inputScreenName||this.txnKeys.inputEditId||this.txnKeys.inputDraftId||(this.myForm1.patchValue({customerBpId:this.storageService.get("customerBpId")}),this.onBpChange())):this.utilsService.showFailureMsg(t)})}getCustomerBpContactList(t,e){this.customerBpContactList=[],this.branchUtilsService.getBpContactListAndSet(this.myForm1,"customerBpContactsId","customerBpId",t,e).subscribe(t=>{this.customerBpContactList=t})}getCustomerBpAddressShipToList(t,e){this.customerBpAddressShipToList=[],this.branchUtilsService.txnGetBpAddressListAndSet("1",this.myForm1,"customerShipToBpAddressId","customerShipToAddress","customerBpId",t,e).subscribe(t=>{this.customerBpAddressShipToList=t})}getCustomerBpAddressBillToList(t,e){this.customerBpAddressBillToList=[],this.branchUtilsService.txnGetBpAddressListAndSet("2",this.myForm1,"customerBillToBpAddressId","customerBillToAddress","customerBpId",t,e).subscribe(t=>{this.customerBpAddressBillToList=t})}getSalesEmployeeList(t){this.commonDataService.getEmployeeList(1).subscribe(e=>{"SUCCESS"===e.status?(this.utilsService.ifNotPushToList(e.results,t),this.salesEmployeeList=e.results.map(t=>(t.searchText=t.employeeName+" - "+t.empCode,t))):this.utilsService.showFailureMsg(e)})}getItemList(t,e,i,s){return e?(this.itemList=i.map(t=>(t.searchText=t.itemName+" - "+t.itemCode,t)),s.itemListArray.forEach((t,e)=>{const i=this.myForm1.controls.itemListArray.at(e),s=parseFloat(t.itemInfo[0].stock),n=parseFloat(t.itemInfo[0].salesOpenCount),r=parseFloat(t.itemInfo[0].purchaseOpenCount);i.patchValue({availableStock:s-n+r,committedStock:n,orderedStock:r})}),!1):!t.term||t.term.length<3?(this.itemList=[],!1):void this.commonDataService.getItemList(t.term,1).subscribe(t=>{"SUCCESS"===t.status?this.itemList=t.results.map(t=>(t.searchText=t.itemName+" - "+t.itemCode,t)):this.utilsService.showFailureMsg(t)})}getWarehouseList(t,e,i){this.commonDataService.getAutoSuggestionList("getWarehouseList").subscribe(s=>{"SUCCESS"===s.status?(this.utilsService.ifNotPushToList(s.results,e),this.warehouseList=s.results.map(t=>(t.searchText=t.warehouseName+" - "+t.warehouseCode,t)),t&&i.itemListArray.forEach((t,e)=>{this.setBinList(e,!0,t.binInfo)})):this.utilsService.showFailureMsg(s)})}setBinList(t,e,i){this.branchUtilsService.txnSetBinListAndPreselect(this.warehouseList,this.itemList,this.myForm1,t,"warehouseId","binId","binList",e,i),this.myForm1.controls.itemListArray.at(t).patchValue({stockDetails:""})}getDpDocumentNoList(t,e){if("salesArInvoice"!==this.txnKeys.inputScreenName&&"salesArCreditMemo"!==this.txnKeys.inputScreenName)return!1;const i=this.myForm1Data.customerBpId;if(this.dpDocumentNoList=[],t||this.myForm1.patchValue({salesArDpInvoiceId:null,salesArDpInvoiceUsedAmount:0}),!i)return!1;this.commonDataService.getDpDocumentList(i).subscribe(i=>{"SUCCESS"===i.status?(this.dpDocumentNoList=i.results,t&&this.utilsService.ifNotPushToList(this.dpDocumentNoList,e),"salesArInvoice"===this.txnKeys.inputScreenName&&(!this.txnKeys.inputCopyIds||"salesQuote"!==this.txnKeys.inputCopyScreenName&&"salesOrder"!==this.txnKeys.inputCopyScreenName||this.getDpIdBasedOnCopyFromQuoteAndOrder())):this.utilsService.showFailureMsg(i)})}getDpIdBasedOnCopyFromQuoteAndOrder(){this.commonDataService.getDpInvoiceDocumentNumberForArInvoice(this.branchUtilsService.screenAttributes[this.txnKeys.inputCopyScreenName].documentTypeId,this.txnKeys.inputCopyIds[0]).subscribe(t=>{"SUCCESS"===t.status?t.results.length>0&&(this.myForm1.patchValue({salesArDpInvoiceId:t.results[0].id}),this.setDpAmount()):this.utilsService.showFailureMsg(t)})}setDpAmount(){if(!this.myForm1Data.salesArDpInvoiceId)return this.myForm1.patchValue({salesArDpInvoiceUsedAmount:0,salesArDpInvoiceUsedTaxAmount:0}),this.branchUtilsService.txnCalcTotal(this.myForm1),!1;const t=u.findIndex(this.dpDocumentNoList,{id:this.myForm1Data.salesArDpInvoiceId});t>=0&&(this.myForm1.patchValue({salesArDpInvoiceUsedAmount:this.dpDocumentNoList[t].remainingAmount}),this.txnKeys.salesArDpInvoiceUsedOriginalAmount=this.dpDocumentNoList[t].remainingAmount,this.setDpTaxAmount())}setDpTaxAmount(){if(!this.myForm1Data.salesArDpInvoiceId)return this.myForm1.patchValue({salesArDpInvoiceUsedAmount:0,salesArDpInvoiceUsedTaxAmount:0}),this.branchUtilsService.txnCalcTotal(this.myForm1),!1;const t=u.findIndex(this.dpDocumentNoList,{id:this.myForm1Data.salesArDpInvoiceId});if(t>=0){let e=this.dpDocumentNoList[t].totalAmount;e=parseFloat(e||0);let i=this.dpDocumentNoList[t].taxPercentage;i=parseFloat(i||0);let s=this.myForm1Data.salesArDpInvoiceUsedAmount;s=parseFloat(s||0),this.myForm1.patchValue({salesArDpInvoiceUsedTaxAmount:s*(i/(e-i)*100)/100}),this.branchUtilsService.txnCalcTotal(this.myForm1)}}convertDpmValueToPercentage(){const t=parseFloat(this.myForm1Data.totalBeforeDiscount),e=(parseFloat(this.myForm1Data.dpmValue?this.myForm1Data.dpmValue:0)/t*100).toFixed(2);this.myForm1.patchValue({dpmPercentage:e}),this.branchUtilsService.txnCalcTotal(this.myForm1)}showTxnOptionsSidebar(t){this.branchUtilsService.spiTxnOptions.next(!1===t?{show:!1}:{show:!0,spiName:this.branchUtilsService.spiTxnId.sales,screenName:this.txnKeys.inputScreenName,editId:this.txnKeys.inputEditId,bpId:this.myForm1Data.customerBpId,status:this.myForm1Data.status})}downloadPdf(){this.branchUtilsService.spiTxnOptionsDownloadPdf.next({spiName:this.branchUtilsService.spiTxnId.sales,screenName:this.txnKeys.inputScreenName,id:this.txnKeys.inputEditId})}getApprovalHistory(t){t&&this.approvalStatusReportDataService.getHistory(t).subscribe(t=>{"SUCCESS"===t.status?this.approvalHistory=t.results:this.utilsService.showFailureMsg(t)})}showSelectItemsByManufacturerPopup(){this.modalService.show(ct,{backdrop:"static"})}showOpenSalesOrdersByItemPopup(t){const e={backdrop:"static"};e.initialState={itemId:t},this.modalService.show(ut,e)}onKeydownHandler(t){t.ctrlKey&&"s"===t.key.toLowerCase()&&(this.txnKeys.inputEditId&&"1"===this.txnKeys.editStatusId||!this.txnKeys.inputEditId)&&(this.confirmSaveUpdate(),t.preventDefault()),this.txnKeys.inputEditId&&t.ctrlKey&&-1!=="p".indexOf(t.key)&&(this.downloadPdf(),t.preventDefault())}ngOnDestroy(){this.reInitializeGlobalVariables(),this.itemListColumnOrderChangesSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(n.g),r.Pb(n.f),r.Pb(n.a),r.Pb(m.l),r.Pb(o.a),r.Pb(b),r.Pb(mt.a),r.Pb(l.e),r.Pb(s.a),r.Pb(r.h),r.Pb(st.b),r.Pb(m.e))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-sales-txn-add"]],viewQuery:function(t,e){var i;1&t&&(r.Pc(et.a,!0),r.Pc(it.a,!0),r.Pc(ft,!0),r.Pc(gt,!0),r.Pc(yt,!0),r.Pc(vt,!0),r.Pc(St,!0),r.Pc(It,!0),r.Pc(Ct,!0),r.Pc(Ut,!0),r.Pc(Dt,!0),r.Pc(Lt,!0),r.Pc(Vt,!0),r.Pc(Nt,!0),r.Pc(At,!0),r.Pc(xt,!0),r.Pc(Ft,!0),r.Pc(Tt,!0),r.Pc(Et,!0),r.Pc(Ot,!0),r.Pc(Pt,!0),r.Pc(Bt,!0),r.Pc(Kt,!0),r.Pc(Mt,!0),r.Pc(Rt,!0),r.Pc(kt,!0),r.Pc(wt,!0),r.Pc(Jt,!0),r.Pc(Qt,!0),r.Pc(Gt,!0),r.Pc(zt,!0),r.Pc(_t,!0),r.Pc(qt,!0),r.Pc(Wt,!0),r.Pc(jt,!0),r.Pc($t,!0),r.Pc(Ht,!0),r.Pc(Yt,!0),r.Pc(Zt,!0),r.Pc(Xt,!0),r.Pc(te,!0),r.Pc(ee,!0),r.Pc(ie,!0),r.Pc(se,!0),r.Pc(ne,!0),r.Pc(re,!0),r.Pc(oe,!0),r.Pc(ce,!0),r.Pc(ae,!0),r.Pc(le,!0)),2&t&&(r.zc(i=r.ec())&&(e.attachmentsComponent=i.first),r.zc(i=r.ec())&&(e.udfViewerComponent=i.first),r.zc(i=r.ec())&&(e.hActions=i.first),r.zc(i=r.ec())&&(e.hSno=i.first),r.zc(i=r.ec())&&(e.hWithoutQtyPosting=i.first),r.zc(i=r.ec())&&(e.hItemName=i.first),r.zc(i=r.ec())&&(e.hQuantity=i.first),r.zc(i=r.ec())&&(e.hOpenQty=i.first),r.zc(i=r.ec())&&(e.hUOM=i.first),r.zc(i=r.ec())&&(e.hUnitPrice=i.first),r.zc(i=r.ec())&&(e.hWarehouse=i.first),r.zc(i=r.ec())&&(e.hBin=i.first),r.zc(i=r.ec())&&(e.hAvailable=i.first),r.zc(i=r.ec())&&(e.hCommitted=i.first),r.zc(i=r.ec())&&(e.hOrdered=i.first),r.zc(i=r.ec())&&(e.hHSN=i.first),r.zc(i=r.ec())&&(e.hDiscount=i.first),r.zc(i=r.ec())&&(e.hTaxCode=i.first),r.zc(i=r.ec())&&(e.hTax=i.first),r.zc(i=r.ec())&&(e.hTotal=i.first),r.zc(i=r.ec())&&(e.hDistRules=i.first),r.zc(i=r.ec())&&(e.hSerialNumber=i.first),r.zc(i=r.ec())&&(e.hExpiryDate=i.first),r.zc(i=r.ec())&&(e.hBpApproval=i.first),r.zc(i=r.ec())&&(e.hRemarks=i.first),r.zc(i=r.ec())&&(e.hDealerDiscountPercentage=i.first),r.zc(i=r.ec())&&(e.bActions=i.first),r.zc(i=r.ec())&&(e.bSno=i.first),r.zc(i=r.ec())&&(e.bWithoutQtyPosting=i.first),r.zc(i=r.ec())&&(e.bItemName=i.first),r.zc(i=r.ec())&&(e.bQuantity=i.first),r.zc(i=r.ec())&&(e.bOpenQty=i.first),r.zc(i=r.ec())&&(e.bUOM=i.first),r.zc(i=r.ec())&&(e.bUnitPrice=i.first),r.zc(i=r.ec())&&(e.bWarehouse=i.first),r.zc(i=r.ec())&&(e.bBin=i.first),r.zc(i=r.ec())&&(e.bAvailable=i.first),r.zc(i=r.ec())&&(e.bCommitted=i.first),r.zc(i=r.ec())&&(e.bOrdered=i.first),r.zc(i=r.ec())&&(e.bHSN=i.first),r.zc(i=r.ec())&&(e.bDiscount=i.first),r.zc(i=r.ec())&&(e.bTaxCode=i.first),r.zc(i=r.ec())&&(e.bTax=i.first),r.zc(i=r.ec())&&(e.bTotal=i.first),r.zc(i=r.ec())&&(e.bDistRules=i.first),r.zc(i=r.ec())&&(e.bSerialNumber=i.first),r.zc(i=r.ec())&&(e.bExpiryDate=i.first),r.zc(i=r.ec())&&(e.bBpApproval=i.first),r.zc(i=r.ec())&&(e.bRemarks=i.first),r.zc(i=r.ec())&&(e.bDealerDiscountPercentage=i.first))},hostBindings:function(t,e){1&t&&r.dc("keydown",(function(t){return e.onKeydownHandler(t)}),!1,r.Bc)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-columns"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"fa","fa-plus-square"],[1,"working-container","spi-txn-add",3,"formGroup"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row"],[1,"form-group","col-sm-3"],[1,"form-label"],[1,"mandatory"],[1,"col-sm-6"],["formControlName","documentNumberingId","bindLabel","documentNumberingName","bindValue","id","placeholder","--SELECT--",3,"items","change"],["type","text","formControlName","documentNumber",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],[1,"action-control"],["formControlName","customerBpId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple","focus","change"],["ng-option-tmp",""],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["class","info-icon","container","body","tooltip","View Details",3,"click",4,"ngIf"],["formControlName","customerBpContactsId","bindLabel","contactName","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["formControlName","currencyId",1,"form-control","form-control-sm"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","referenceNumber",1,"form-control","form-control-sm"],["formControlName","postingDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["class","form-group col-sm-3",4,"ngIf"],["formControlName","documentDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],[1,"position-relative"],["formControlName","salesEmpId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["formControlName","status",1,"form-control","form-control-sm"],["formControlName","remarks","rows","2",1,"form-control","form-control-sm"],[1,"box-body","box-table"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-striped","table-bordered"],[4,"ngFor","ngForOf"],["formArrayName","itemListArray"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-sm-7","text-center"],[1,"calc-img"],[1,"col-sm-5"],[1,"table","table-striped","table-bordered","calculation"],[2,"min-width","150px"],[2,"width","100px"],[1,"text-right",2,"min-width","150px"],[1,"text-right"],[1,"checkbox"],["type","checkbox","formControlName","roundingOffCheckbox",3,"ngModelChange"],[1,"checkmark"],["type","text","formControlName","rounding",1,"form-control","form-control-sm","text-right",3,"keyup"],[1,"net"],[1,"net","text-right"],["formControlName","customerShipToBpAddressId",1,"form-control","form-control-sm",3,"change"],["formControlName","customerShipToAddress",1,"form-control","form-control-sm"],["formControlName","customerBillToBpAddressId",1,"form-control","form-control-sm",3,"change"],["formControlName","customerBillToAddress",1,"form-control","form-control-sm"],["formControlName","paymentTermsId",1,"form-control","form-control-sm",3,"change"],["formControlName","paymentMethodId",1,"form-control","form-control-sm"],["type","text","formControlName","taxCode",1,"form-control","form-control-sm"],[3,"type"],[3,"type","doSuccess"],["class","box",4,"ngIf"],[1,"btn-group","text-right"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],["hActions",""],["hSno",""],["hWithoutQtyPosting",""],["hItemName",""],["hQuantity",""],["hOpenQty",""],["hUOM",""],["hUnitPrice",""],["hWarehouse",""],["hBin",""],["hAvailable",""],["hCommitted",""],["hOrdered",""],["hHSN",""],["hDiscount",""],["hTaxCode",""],["hTax",""],["hTotal",""],["hDistRules",""],["hSerialNumber",""],["hExpiryDate",""],["hBpApproval",""],["hRemarks",""],["hDealerDiscountPercentage",""],["bActions",""],["bSno",""],["bWithoutQtyPosting",""],["bItemName",""],["bQuantity",""],["bOpenQty",""],["bUOM",""],["bUnitPrice",""],["bWarehouse",""],["bBin",""],["bAvailable",""],["bCommitted",""],["bOrdered",""],["bHSN",""],["bDiscount",""],["bTaxCode",""],["bTax",""],["bTotal",""],["bDistRules",""],["bSerialNumber",""],["bExpiryDate",""],["bBpApproval",""],["bRemarks",""],["bDealerDiscountPercentage",""],[1,"fa","fa-print"],[1,"validation-error"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click"],[1,"fa","fa-plus"],[3,"click"],[1,"fa","fa-redo-alt"],["container","body","tooltip","View Details",1,"info-icon",3,"click"],[1,"fa","fa-info-circle"],[3,"value"],["formControlName","validUntil",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","deliveryDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","dueDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["type","text","formControlName","gatepassStatus",1,"form-control","form-control-sm"],["value","1"],["value","2"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"formGroupName"],["colspan","17"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],[1,"btn","btn-info","btn-sm",3,"disabled","click"],[1,"badge","badge-danger"],["type","text","formControlName","discountPercentage",1,"form-control","form-control-sm","text-right",3,"keyup"],["type","text","formControlName","dpmPercentage",1,"form-control","form-control-sm","text-right",3,"keyup"],["type","text","formControlName","dpmValue",1,"form-control","form-control-sm","text-right",3,"keyup"],["formControlName","salesArDpInvoiceId","bindLabel","documentNumber","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","change"],["type","text","formControlName","salesArDpInvoiceUsedAmount",1,"form-control","form-control-sm","text-right",3,"keyup"],["class","small-text",4,"ngIf"],[1,"small-text"],["type","text","formControlName","salesArDpInvoiceUsedTaxAmount",1,"form-control","form-control-sm","text-right"],["type","text","formControlName","courier",1,"form-control","form-control-sm"],["type","text","formControlName","trackingNumber",1,"form-control","form-control-sm"],["formControlName","deliveryStatus",1,"form-control","form-control-sm"],["type","text","formControlName","originalRefNumber",1,"form-control","form-control-sm"],["formControlName","originalRefDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","issuingNoteId",1,"form-control","form-control-sm"],[2,"width","40px"],[2,"width","250px"],[1,"badge",3,"ngClass"],[1,"fa","fa-save"],[1,"fa","fa-broom"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[2,"min-width","80px"],[2,"min-width","30px"],["style","min-width:100px",4,"ngIf"],[2,"min-width","100px"],[2,"min-width","200px"],["class","mandatory",4,"ngIf"],[2,"min-width","60px"],[2,"min-width","120px"],[2,"min-width","130px"],[3,"formGroup"],["placement","top","container","body","tooltip","Delete",1,"action","red",3,"click"],[1,"fa","fa-minus-circle"],[3,"formGroupName",4,"ngIf"],["type","checkbox","formControlName","withoutQtyPosting"],["formControlName","itemId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","virtualScroll","search","change"],["class","info-icon","dropdown","",4,"ngIf"],["dropdown","",1,"info-icon"],["dropdownToggle","",1,"fa","fa-info-circle"],["class","dropdown-menu",4,"dropdownMenu"],[1,"dropdown-menu"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],["type","text","formControlName","quantity",1,"form-control","form-control-sm","text-right",3,"keyup"],["class","info-icon","container","body","tooltip","Available-to-Promise",3,"click",4,"ngIf"],["container","body","tooltip","Available-to-Promise",1,"info-icon",3,"click"],["formControlName","uomId","bindLabel","uomName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["type","text","formControlName","unitPrice",1,"form-control","form-control-sm","text-right",3,"keyup"],["formControlName","warehouseId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","change"],["formControlName","binId","bindLabel","binName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["tooltip","Click to get stock details","container","body","placement","bottom",1,"info-icon",3,"click"],["popTemplate",""],["container","body","placement","bottom",3,"popover","outsideClick"],[1,"mb-1"],["formControlName","hsnId","bindLabel","hsnLabel","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["formControlName","taxId","bindLabel","taxCode","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","change"],[1,"text-right",3,"formGroupName"],["formControlName","distributionRulesId","bindLabel","distributionName","bindValue","id","placeholder","--SELECT--","appendTo","body","groupBy","dimensionDescription",3,"items","multiple","add"],["type","text","formControlName","serialNumber",1,"form-control","form-control-sm"],["formControlName","expiryDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["type","checkbox","formControlName","bpApproval"],["type","text","formControlName","remarks",1,"form-control","form-control-sm"],["type","text","formControlName","dealerDiscountPercentage",1,"form-control","form-control-sm","text-right"]],template:function(t,e){1&t&&r.Jc(0,_s,335,78,"ng-container",0),2&t&&r.oc("ngIf",e.screenAcl.view)},directives:[d.m,l.n,l.i,bt.a,l.m,l.g,l.b,bt.c,l.t,l.p,l.v,d.l,h.a,d.n,l.d,l.a,it.a,et.a,dt.a,s.g,g.a,d.q,l.j,d.k,ht.a,ht.d,ht.b,pt.a],styles:[""]}),t})();const Ws=s.h.forChild([{path:"sales-txn-list/:screenName",component:Y},{path:"sales-txn-add/:screenName",component:qs},{path:"sales-txn-edit/:screenName/:id",component:qs},{path:"sales-txn-edit-draft/:screenName/:draftId",component:qs},{path:"sales-txn-copy/:screenName/:copyScreenName/:copyId",component:qs},{path:"sales-txn-duplicate/:screenName/:duplicateId",component:qs}]);var js=i("o+NB"),$s=i("7zUj"),Hs=i("N5hj"),Ys=i("dJ0z");let Zs=(()=>{class t{}return t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({factory:function(e){return new(e||t)},providers:[b],imports:[[Ws,js.BranchModule,$s.a,Hs.a,Ys.a]]}),t})()}}]);