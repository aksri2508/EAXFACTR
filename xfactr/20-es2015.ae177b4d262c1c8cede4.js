(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{dJxe:function(t,e,i){"use strict";i.r(e),i.d(e,"PurchaseModule",(function(){return nr}));var r=i("tyNb"),n=i("ey9i"),s=i("fXoL"),c=i("IzNV"),o=i("HDdC"),a=i("3Pt+"),u=i("LvDl"),d=i("oARB");let b=(()=>{class t{constructor(t,e,i,r,s,c,o,a){this.utilsService=t,this.storageService=e,this.branchUtilsService=i,this.puchaseRequestDataService=r,this.puchaseOrderDataService=s,this.grpoDataService=c,this.formBuilder=o,this.salesOrderDataService=a,this.appConstants=n.h,this.initializeSubscriptions()}initializeSubscriptions(){this.branchUtilsService.spiTxnOptionsDownloadPdf.subscribe(t=>{this.downloadPDF(t)})}checkScreenNameValid(t){return!(!this.branchUtilsService.screenAttributes.hasOwnProperty(t)||"purchaseRequest"!==t&&"purchaseOrder"!==t&&"purchaseGrpo"!==t)}getScreenDataService(t){return"purchaseRequest"===t?this.puchaseRequestDataService:"purchaseOrder"===t?this.puchaseOrderDataService:"purchaseGrpo"===t?this.grpoDataService:"salesOrder"===t?this.salesOrderDataService:void 0}addFieldsVisibility(t,e){if("purchaseRequest"===t){if("fnRequesterTypeId"===e||"fnRequesterId"===e||"fnValidUntil"===e||"fnItemListRequiredDate"===e)return!0}else if("purchaseOrder"===t){if("fnDeliveryDate"===e||"fnAccountingRequiredDate"===e)return!0}else if("purchaseGrpo"===t&&"fnDueDate"===e)return!0;return!("purchaseOrder"!==t&&"purchaseGrpo"!==t||"fnVendorBpId"!==e&&"fnVendorBpContactsId"!==e&&"fnCurrencyId"!==e&&"fnReferenceNumber"!==e&&"fnBuyerEmpId"!==e&&"fnLogisticsFields"!==e&&"fnAccountingFields"!==e&&"fnTaxFields"!==e)}getFormErrors(t,e){if("mainFields"===e){const e={documentNumberingId:"",documentNumber:"",postingDate:"",documentDate:"",status:"",discountPercentage:"",rounding:"",totalAmount:"",itemListArray:[]};return"purchaseRequest"===t?(e.requesterTypeId="",e.requesterId="",e.validUntil=""):"purchaseOrder"===t?e.deliveryDate="":"purchaseGrpo"===t&&(e.dueDate=""),"purchaseOrder"!==t&&"purchaseGrpo"!==t||(e.vendorBpId="",e.currencyId=""),e}if("itemFields"===e){const e={itemId:"",quantity:"",unitPrice:"",warehouseId:"",binId:"",discountPercentage:"",taxId:"",distributionRulesId:""};return"purchaseRequest"===t&&(e.requiredDate=""),e}}getFormValMsgs(t){const e={documentNumberingId:{required:"Document No is required"},documentNumber:{required:"Document No is required"},postingDate:{required:"Posting Date is required"},documentDate:{required:"Document Date is required"},status:{required:"Status is required"},discountPercentage:{min:"Enter 0 to 100",max:"Enter 0 to 100",pattern:"Only positive numbers are allowed"},rounding:{pattern:"Only numbers are allowed"},totalAmount:{required:"Total Amount is required"}};return"purchaseRequest"===t?(e.requesterTypeId={required:"Requester Type is required"},e.requesterId={required:"Requester Name is required"},e.validUntil={required:"Valid Until is required"}):"purchaseOrder"===t?e.deliveryDate={required:"Delivery Date is required"}:"purchaseGrpo"===t&&(e.dueDate={required:"Due Date is required"}),"purchaseOrder"!==t&&"purchaseGrpo"!==t||(e.vendorBpId={required:"Vendor Name is required"},e.currencyId={required:"Currency is required"}),e.itemListArray={itemId:{required:"Item Name is required"},quantity:{required:"Quantity is required",min:"Minimum 1",pattern:"Only positive numbers are allowed"},unitPrice:{pattern:"Only positive numbers are allowed"},warehouseId:{required:"Warehouse is required"},binId:{required:"Bin is required"},discountPercentage:{min:"Enter 0 to 100",max:"Enter 0 to 100",pattern:"Only positive numbers are allowed"},taxId:{required:"Tax Code is required"},distributionRulesId:{required:"Dist.Rules is required"},itemWeight:{pattern:"Only positive numbers are allowed"}},"purchaseRequest"===t&&(e.itemListArray.requiredDate={required:"Required Date is required"}),e}getFormMainFields(t){const e={documentNumberingId:[null,[a.u.required]],documentNumber:["",[a.u.required]],documentNumberingType:[""],postingDate:[new Date,[a.u.required]],documentDate:[new Date,[a.u.required]],status:["1",[a.u.required]],remarks:[""],totalBeforeDiscount:["0.00"],discountPercentage:["0.00",[a.u.min(0),a.u.max(100),a.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],discountValue:["0.00"],taxPercentage:["0.00"],roundingOffCheckbox:[!1],rounding:[{value:"0.00",disabled:!0},[a.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveNegativeFloatNumber)]],totalAmount:["0.00",[a.u.required]],deletedItemChildIds:[[]],showAddButton:[""],itemsTotalAmount:["0.00"],editFlag:[!1],approvalStatus:["4"]};"purchaseRequest"===t?(e.requesterTypeId=["",[a.u.required]],e.requesterId=[null,[a.u.required]],e.validUntil=["",[a.u.required]]):"purchaseOrder"===t?(e.deliveryDate=["",[a.u.required]],e.requiredDate=[""]):"purchaseGrpo"===t&&(e.dueDate=["",[a.u.required]]),"purchaseRequest"!==t&&"purchaseOrder"!==t||(e.totalWeight=[0]),"purchaseOrder"!==t&&"purchaseGrpo"!==t||(e.vendorBpId=[null,[a.u.required]],e.vendorBpContactsId=[null],e.currencyId=["",[a.u.required]],e.referenceNumber=[""],e.buyerEmpId=[null],e.vendorShipToBpAddressId=[""],e.vendorShipToAddress=[""],e.vendorPayToBpAddressId=[""],e.vendorPayToAddress=[""],e.paymentTermsId=[""],e.paymentMethodId=[""],e.cancellationDate=[""],e.goodsInTransit=[!1],e.taxCode=[""]),e.itemListArray=this.formBuilder.array([]);const i=this.formBuilder.group(e);return this.setMainFieldsCustomValidation(i,t),i}setMainFieldsCustomValidation(t,e){const i=[];"purchaseRequest"===e&&i.push(this.utilsService.startEndDateValidator("documentDate","validUntil","invalidValidUntilDate","Should => Document Date")),"purchaseOrder"===e&&i.push(this.utilsService.startEndDateValidator("documentDate","deliveryDate","invalidDeliveryDate","Should => Document Date")),"purchaseGrpo"===e&&i.push(this.utilsService.startEndDateValidator("documentDate","dueDate","invalidDueDate","Should => Document Date")),i.push(this.utilsService.startEndDateValidator("postingDate","documentDate","invalidPostingDate","Should <= Document Date")),t.setValidators(a.u.compose(i)),t.updateValueAndValidity()}getMainFieldsWithData(t,e){const i={};return this.utilsService.updateObject(i,"documentNumberingId",e.documentNumberingId),this.utilsService.updateObject(i,"documentNumber",e.documentNumber),e.documentNumberingInfo&&this.utilsService.updateObject(i,"documentNumberingType",e.documentNumberingInfo.length>0?e.documentNumberingInfo[0].documentNumberingType:""),this.utilsService.updateObject(i,"postingDate",e.postingDate,"date"),this.utilsService.updateObject(i,"documentDate",e.documentDate,"date"),this.utilsService.updateObject(i,"status",e.status),this.utilsService.updateObject(i,"remarks",e.remarks),this.utilsService.updateObject(i,"totalBeforeDiscount",e.totalBeforeDiscount),this.utilsService.updateObject(i,"discountPercentage",e.discountPercentage),this.utilsService.updateObject(i,"discountValue",e.discountValue),this.utilsService.updateObject(i,"taxPercentage",e.taxPercentage),"1"===e.roundingFlag&&(i.roundingOffCheckbox=!0),this.utilsService.updateObject(i,"rounding",e.rounding),this.utilsService.updateObject(i,"totalAmount",e.totalAmount),this.utilsService.updateObject(i,"showAddButton",e.showAddButton),"purchaseRequest"===t?(this.utilsService.updateObject(i,"requesterTypeId",e.requesterTypeId),this.utilsService.updateObject(i,"requesterId",e.requesterId),this.utilsService.updateObject(i,"validUntil",e.validUntil,"date")):"purchaseOrder"===t?(this.utilsService.updateObject(i,"deliveryDate",e.deliveryDate,"date"),this.utilsService.updateObject(i,"requiredDate",e.requiredDate,"date")):"purchaseGrpo"===t&&this.utilsService.updateObject(i,"dueDate",e.dueDate,"date"),"purchaseRequest"!==t&&"purchaseOrder"!==t||this.utilsService.updateObject(i,"totalWeight",e.totalWeight),"purchaseOrder"!==t&&"purchaseGrpo"!==t||(this.utilsService.updateObject(i,"vendorBpId",e.vendorBpId),this.utilsService.updateObject(i,"vendorBpContactsId",e.vendorBpContactsId),this.utilsService.updateObject(i,"currencyId",e.currencyId),this.utilsService.updateObject(i,"referenceNumber",e.referenceNumber),this.utilsService.updateObject(i,"buyerEmpId",e.buyerEmpId),this.utilsService.updateObject(i,"vendorShipToBpAddressId",e.vendorShipToBpAddressId),this.utilsService.updateObject(i,"vendorShipToAddress",e.vendorShipToAddress),this.utilsService.updateObject(i,"vendorPayToBpAddressId",e.vendorPayToBpAddressId),this.utilsService.updateObject(i,"vendorPayToAddress",e.vendorPayToAddress),this.utilsService.updateObject(i,"paymentTermsId",e.paymentTermsId),this.utilsService.updateObject(i,"paymentMethodId",e.paymentMethodId),this.utilsService.updateObject(i,"cancellationDate",e.cancellationDate,"date"),this.utilsService.isEmpty(e.goodsInTransit)||(i.goodsInTransit="1"===e.goodsInTransit),this.utilsService.updateObject(i,"taxCode",e.taxCode)),this.utilsService.updateObject(i,"editFlag",e.editFlag),this.utilsService.updateObject(i,"approvalStatus",e.approvalStatus),i}getFormItemFields(t,e,i){const r=[];this.storageService.get("distRulesMode")&&r.push(a.u.required);const n={itemId:[null,[a.u.required]],lastPrice:["-"],quantity:[1,[a.u.required,a.u.min(1),a.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveIntNumber)]],openQuantity:[0],uomId:[null],unitPrice:["0.00",[a.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],warehouseId:[this.storageService.get("defaultWarehouseId")?this.storageService.get("defaultWarehouseId"):null],binId:[null],binList:[[]],hsnId:[null],discountPercentage:["0.00",[a.u.min(0),a.u.max(100),a.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],taxId:[this.storageService.get("purchaseTaxId")?this.storageService.get("purchaseTaxId"):null,[a.u.required]],itemTaxPercentage:["0.00"],itemTaxValue:["0.00"],totalItemAmount:["0.00"],distributionRulesId:[null,r],id:[""],copyFromType:[""],copyFromId:[""],itemWeight:["",[a.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],showDeleteIcon:[!0],orderedQuantity:[0],stockDetails:[""]};"purchaseRequest"===t&&(n.requiredDate=["",[a.u.required]]),"purchaseGrpo"===t&&(n.warehouseId[1]=a.u.required,n.binId[1]=a.u.required),e&&this.setDataToItemFields(t,n,e);const s=this.formBuilder.group(n);return"edit"===i&&this.setItemFieldsCustomValidation(s),s}setItemFieldsCustomValidation(t){const e=t.getRawValue(),i=[];i.push(this.utilsService.minValidator("quantity",e.orderedQuantity,"invalidMinQuantity","Minimum : "+e.orderedQuantity)),t.setValidators(a.u.compose(i)),t.updateValueAndValidity()}setDataToItemFields(t,e,i){this.utilsService.updateObject(e,"itemId",i.itemId),this.utilsService.updateObject(e,"lastPrice",i.lastPrice),this.utilsService.updateObject(e,"quantity",i.quantity),this.utilsService.updateObject(e,"openQuantity",parseInt(i.openQuantity,0)<0?0:i.openQuantity),this.utilsService.updateObject(e,"uomId",i.uomId),this.utilsService.updateObject(e,"unitPrice",i.unitPrice),this.utilsService.updateObject(e,"warehouseId",i.warehouseId),this.utilsService.updateObject(e,"binId",i.binId),this.utilsService.updateObject(e,"hsnId",i.hsnId),this.utilsService.updateObject(e,"discountPercentage",i.discountPercentage),this.utilsService.updateObject(e,"taxId",i.taxId),this.utilsService.updateObject(e,"itemTaxPercentage",i.itemTaxPercentage),this.utilsService.updateObject(e,"itemTaxValue",i.itemTaxValue),this.utilsService.updateObject(e,"totalItemAmount",i.totalItemAmount),this.utilsService.updateObject(e,"itemWeight",i.itemWeight),this.utilsService.isEmpty(i.distributionRulesId)||(e.distributionRulesId[0]=this.branchUtilsService.distRulesRemoveZeroPatternOnEdit(i.distributionRulesId)),this.utilsService.updateObject(e,"id",i.id),this.utilsService.updateObject(e,"copyFromType",i.copyFromType),this.utilsService.updateObject(e,"copyFromId",i.copyFromId),this.utilsService.updateObject(e,"orderedQuantity",i.orderedQuantity),"purchaseRequest"===t&&this.utilsService.updateObject(e,"requiredDate",i.requiredDate,"date")}getSaveUpdateDataFormation(t,e){const i=e.getRawValue(),r={documentNumberingId:i.documentNumberingId,documentNumber:i.documentNumber,documentNumberingType:i.documentNumberingType,postingDate:this.utilsService.getBackendDateFormat(i.postingDate),documentDate:this.utilsService.getBackendDateFormat(i.documentDate),status:i.status,remarks:i.remarks,totalBeforeDiscount:i.totalBeforeDiscount,discountPercentage:i.discountPercentage,discountValue:i.discountValue,taxPercentage:i.taxPercentage,roundingFlag:i.roundingOffCheckbox?1:0,rounding:i.rounding,totalAmount:i.totalAmount,itemListArray:[]};return"purchaseRequest"===t?(r.requesterTypeId=i.requesterTypeId,r.requesterId=i.requesterId,r.validUntil=this.utilsService.getBackendDateFormat(i.validUntil)):"purchaseOrder"===t?(r.deliveryDate=this.utilsService.getBackendDateFormat(i.deliveryDate),r.requiredDate=this.utilsService.getBackendDateFormat(i.requiredDate)):"purchaseGrpo"===t&&(r.dueDate=this.utilsService.getBackendDateFormat(i.dueDate)),"purchaseRequest"!==t&&"purchaseOrder"!==t||(r.totalWeight=i.totalWeight),"purchaseOrder"!==t&&"purchaseGrpo"!==t||(r.vendorBpId=i.vendorBpId,r.vendorBpContactsId=i.vendorBpContactsId,r.currencyId=i.currencyId,r.referenceNumber=i.referenceNumber,r.buyerEmpId=i.buyerEmpId,r.vendorShipToBpAddressId=i.vendorShipToBpAddressId,r.vendorShipToAddress=i.vendorShipToAddress,r.vendorPayToBpAddressId=i.vendorPayToBpAddressId,r.vendorPayToAddress=i.vendorPayToAddress,r.paymentTermsId=i.paymentTermsId,r.paymentMethodId=i.paymentMethodId,r.cancellationDate=this.utilsService.getBackendDateFormat(i.cancellationDate),r.goodsInTransit=i.goodsInTransit?1:0,r.taxCode=i.taxCode),i.itemListArray.forEach(e=>{if("3"===i.status&&this.utilsService.isEmpty(e.id));else{const i={itemId:e.itemId,lastPrice:e.lastPrice,quantity:e.quantity,uomId:e.uomId,unitPrice:e.unitPrice,warehouseId:e.warehouseId,binId:e.binId,hsnId:e.hsnId,discountPercentage:e.discountPercentage,taxId:e.taxId,itemTaxPercentage:e.itemTaxPercentage,itemTaxValue:e.itemTaxValue,totalItemAmount:e.totalItemAmount,distributionRulesId:Array.isArray(e.distributionRulesId)?e.distributionRulesId.join(","):"",id:e.id,copyFromType:e.copyFromType,copyFromId:e.copyFromId,itemWeight:e.itemWeight};"purchaseRequest"===t&&(i.requiredDate=this.utilsService.getBackendDateFormat(e.requiredDate)),r.itemListArray.push(i)}}),r}manipulationsOnEdit(t,e){"1"===e.value.status?(e.controls.documentNumberingId.disable(),e.controls.documentNumber.disable(),e.controls.roundingOffCheckbox.disable(),e.controls.rounding.disable(),"purchaseOrder"!==t&&"purchaseGrpo"!==t||e.controls.vendorBpId.disable(),e.controls.itemListArray.controls.forEach(e=>{const i=e.getRawValue();e.controls.itemId.disable(),parseInt(i.orderedQuantity,0)>0&&e.patchValue({showDeleteIcon:!1}),parseInt(i.openQuantity,0)<=0&&(e.disable(),e.patchValue({showDeleteIcon:!1})),"purchaseGrpo"===t&&e.patchValue({showDeleteIcon:!1})}),"purchaseGrpo"===t&&(e.disable(),e.controls.vendorBpContactsId.enable(),e.controls.documentDate.enable(),e.controls.dueDate.enable(),e.controls.buyerEmpId.enable(),e.controls.remarks.enable(),e.controls.status.enable())):e.enable()}manipulationsOnCopy(t,e){"purchaseOrder"===t?e.controls.vendorBpId.enable():"purchaseGrpo"===t&&e.controls.vendorBpId.disable(),e.controls.itemListArray.controls.forEach(t=>{t.controls.itemId.disable()})}redirectToList(t){this.utilsService.redirect("/branch/purchase/purchase-txn-list/"+t)}listFieldsVisibility(t,e){if("purchaseRequest"===t){if("requesterName"===e||"validUntil"===e)return!0}else if("purchaseOrder"===t){if("deliveryDate"===e)return!0}else if("purchaseGrpo"===t&&"dueDate"===e)return!0;return("purchaseOrder"===t||"purchaseGrpo"===t)&&"vendorBpName"===e}getFormSearchFields(t){const e={fromDate:"",toDate:"",isDraft:!1,branchName:"",documentNumber:"",sapId:"",postingDate:"",status:1,totalAmount:""};return"purchaseRequest"===t?(e.requesterName="",e.validUntil=""):"purchaseOrder"===t?e.deliveryDate="":"purchaseGrpo"===t&&(e.dueDate=""),"purchaseOrder"!==t&&"purchaseGrpo"!==t||(e.vendorBpName=""),e}getSearchDataFormation(t,e){const i={fromDate:this.utilsService.getBackendDateFormat(e.fromDate),toDate:this.utilsService.getBackendDateFormat(e.toDate),isDraft:e.isDraft?1:0,branchName:e.branchName,documentNumber:e.documentNumber,sapId:e.sapId,postingDate:this.utilsService.getBackendDateFormat(e.postingDate),status:e.status,totalAmount:e.totalAmount};return"purchaseRequest"===t?(i.requesterName=e.requesterName,i.validUntil=this.utilsService.getBackendDateFormat(e.validUntil)):"purchaseOrder"===t?i.deliveryDate=this.utilsService.getBackendDateFormat(e.deliveryDate):"purchaseGrpo"===t&&(i.dueDate=this.utilsService.getBackendDateFormat(e.dueDate)),"purchaseOrder"!==t&&"purchaseGrpo"!==t||(i.vendorBpName=e.vendorBpName),i}redirectToAdd(t){this.utilsService.redirect("/branch/purchase/purchase-txn-add/"+t)}redirectToEdit(t,e,i){this.utilsService.redirect("1"===i?"/branch/purchase/purchase-txn-edit-draft/"+t+"/"+this.utilsService.encrypt(e):"/branch/purchase/purchase-txn-edit/"+t+"/"+this.utilsService.encrypt(e))}getAnalyticsData(t){const e=this.getScreenDataService(t);return new o.a(t=>{e.getAnalyticsData().subscribe(e=>{if("SUCCESS"===e.status){const i=u.orderBy(e.results,["id"],["asc"]);t.next(i),t.complete()}else this.utilsService.showFailureMsg(e),t.error(),t.complete()})})}downloadAsExcel(t,e){this.utilsService.showSuccessMsg("Processing to download the Excel..."),this.getScreenDataService(t).downloadAsExcel(e).subscribe(t=>{"SUCCESS"===t.status?this.utilsService.externalRedirect(t.fileUrl):this.utilsService.showFailureMsg(t)})}downloadPDF(t){t.spiName===this.branchUtilsService.spiTxnId.purchase&&(this.utilsService.showSuccessMsg("Processing to download the PDF..."),this.getScreenDataService(t.screenName).downloadPDF(t.id).subscribe(t=>{this.utilsService.externalRedirect(t.url,!0)}))}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(n.g),s.Zb(n.f),s.Zb(c.a),s.Zb(d.K),s.Zb(d.J),s.Zb(d.s),s.Zb(a.e),s.Zb(d.Y))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})();var l=i("ofXK"),m=i("eO1q"),h=i("rEr+"),p=i("7zfz"),g=i("Mfq2");const f=["dataTable"];function y(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",24),s.dc("click",(function(){s.Dc(t);const e=s.hc(2);return e.pTxnUtilsService.downloadAsExcel(e.inputScreenName,e.listingProperties)})),s.Qb(1,"i",25),s.Vb(2,"span"),s.Lc(3,"Download as Excel"),s.Ub(),s.Ub()}}function v(t,e){if(1&t&&(s.Vb(0,"div",26),s.Vb(1,"div",27),s.Vb(2,"div",28),s.Lc(3),s.Ub(),s.Vb(4,"div",29),s.Lc(5),s.Ub(),s.Ub(),s.Ub()),2&t){const t=e.$implicit,i=s.hc(2);s.Cb(3),s.Nc(" ",t.name," "),s.Cb(1),s.oc("ngClass",i.appConstants.TXN_STATUS_COLOR_CLS[t.id]),s.Cb(1),s.Mc(t.count)}}function S(t,e){1&t&&(s.Vb(0,"th",38),s.Lc(1," Branch Name"),s.Qb(2,"p-sortIcon",33),s.Ub()),2&t&&(s.oc("pSortableColumn","branchName"),s.Cb(2),s.oc("field","branchName"))}function I(t,e){1&t&&(s.Vb(0,"th",49),s.Lc(1,"Sap Doc No "),s.Qb(2,"p-sortIcon",33),s.Ub()),2&t&&(s.oc("pSortableColumn","sapId"),s.Cb(2),s.oc("field","sapId"))}function C(t,e){1&t&&(s.Vb(0,"th",50),s.Lc(1,"Requester Name "),s.Qb(2,"p-sortIcon",33),s.Ub()),2&t&&(s.oc("pSortableColumn","requesterName"),s.Cb(2),s.oc("field","requesterName"))}function L(t,e){1&t&&(s.Vb(0,"th",50),s.Lc(1,"Vendor Name"),s.Qb(2,"p-sortIcon",33),s.Ub()),2&t&&(s.oc("pSortableColumn","vendorBpName"),s.Cb(2),s.oc("field","vendorBpName"))}function U(t,e){1&t&&(s.Vb(0,"th",41),s.Lc(1,"Valid Until"),s.Qb(2,"p-sortIcon",33),s.Ub()),2&t&&(s.oc("pSortableColumn","validUntil"),s.Cb(2),s.oc("field","validUntil"))}function V(t,e){1&t&&(s.Vb(0,"th",51),s.Lc(1,"Delivery Date"),s.Qb(2,"p-sortIcon",33),s.Ub()),2&t&&(s.oc("pSortableColumn","deliveryDate"),s.Cb(2),s.oc("field","deliveryDate"))}function N(t,e){1&t&&(s.Vb(0,"th",41),s.Lc(1,"Due Date"),s.Qb(2,"p-sortIcon",33),s.Ub()),2&t&&(s.oc("pSortableColumn","dueDate"),s.Cb(2),s.oc("field","dueDate"))}function D(t,e){if(1&t){const t=s.Wb();s.Vb(0,"th"),s.Vb(1,"input",45),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(3).searchForm.branchName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&t){const t=s.hc(3);s.Cb(1),s.oc("ngModel",t.searchForm.branchName)}}function F(t,e){if(1&t){const t=s.Wb();s.Vb(0,"th"),s.Vb(1,"input",45),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(3).searchForm.sapId=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&t){const t=s.hc(3);s.Cb(1),s.oc("ngModel",t.searchForm.sapId)}}function x(t,e){if(1&t){const t=s.Wb();s.Vb(0,"th"),s.Vb(1,"input",45),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(3).searchForm.requesterName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&t){const t=s.hc(3);s.Cb(1),s.oc("ngModel",t.searchForm.requesterName)}}function T(t,e){if(1&t){const t=s.Wb();s.Vb(0,"th"),s.Vb(1,"input",45),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(3).searchForm.vendorBpName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&t){const t=s.hc(3);s.Cb(1),s.oc("ngModel",t.searchForm.vendorBpName)}}function A(t,e){if(1&t){const t=s.Wb();s.Vb(0,"th"),s.Vb(1,"p-calendar",12),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(3).searchForm.validUntil=e}))("onSelect",(function(){return s.Dc(t),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&t){const t=s.hc(3);s.Cb(1),s.oc("ngModel",t.searchForm.validUntil)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT)}}function E(t,e){if(1&t){const t=s.Wb();s.Vb(0,"th"),s.Vb(1,"p-calendar",12),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(3).searchForm.deliveryDate=e}))("onSelect",(function(){return s.Dc(t),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&t){const t=s.hc(3);s.Cb(1),s.oc("ngModel",t.searchForm.deliveryDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT)}}function R(t,e){if(1&t){const t=s.Wb();s.Vb(0,"th"),s.Vb(1,"p-calendar",12),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(3).searchForm.dueDate=e}))("onSelect",(function(){return s.Dc(t),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&t){const t=s.hc(3);s.Cb(1),s.oc("ngModel",t.searchForm.dueDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT)}}function P(t,e){if(1&t&&(s.Vb(0,"option",52),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc(" ",t.name," ")}}function O(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tr"),s.Vb(1,"th",30),s.Lc(2,"Actions"),s.Ub(),s.Jc(3,S,3,2,"th",31),s.Vb(4,"th",32),s.Lc(5,"Overdue"),s.Qb(6,"p-sortIcon",33),s.Ub(),s.Vb(7,"th",34),s.Lc(8,"Doc No"),s.Qb(9,"p-sortIcon",33),s.Ub(),s.Jc(10,I,3,2,"th",35),s.Jc(11,C,3,2,"th",36),s.Jc(12,L,3,2,"th",36),s.Vb(13,"th",37),s.Lc(14,"Line Items Count"),s.Ub(),s.Vb(15,"th",38),s.Lc(16,"Posting Date"),s.Qb(17,"p-sortIcon",33),s.Ub(),s.Jc(18,U,3,2,"th",39),s.Jc(19,V,3,2,"th",40),s.Jc(20,N,3,2,"th",39),s.Vb(21,"th",41),s.Lc(22,"Status"),s.Qb(23,"p-sortIcon",33),s.Ub(),s.Vb(24,"th",32),s.Lc(25,"Amount"),s.Qb(26,"p-sortIcon",33),s.Ub(),s.Ub(),s.Vb(27,"tr",42),s.Vb(28,"th"),s.Vb(29,"a",43),s.dc("click",(function(){return s.Dc(t),s.hc(2).clearSearchForm()})),s.Qb(30,"i",44),s.Lc(31,"Clear"),s.Ub(),s.Ub(),s.Jc(32,D,2,1,"th",0),s.Qb(33,"th"),s.Vb(34,"th"),s.Vb(35,"input",45),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.documentNumber=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Jc(36,F,2,1,"th",0),s.Jc(37,x,2,1,"th",0),s.Jc(38,T,2,1,"th",0),s.Qb(39,"th"),s.Vb(40,"th"),s.Vb(41,"p-calendar",12),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.postingDate=e}))("onSelect",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Jc(42,A,2,5,"th",0),s.Jc(43,E,2,5,"th",0),s.Jc(44,R,2,5,"th",0),s.Vb(45,"th"),s.Vb(46,"select",46),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.status=e}))("change",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Vb(47,"option",47),s.Lc(48,"--SELECT--"),s.Ub(),s.Jc(49,P,2,2,"option",48),s.Ub(),s.Ub(),s.Vb(50,"th"),s.Vb(51,"input",45),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.totalAmount=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=s.hc(2);s.Cb(3),s.oc("ngIf",!t.storageService.get("isSingleBranchUser")),s.Cb(1),s.oc("pSortableColumn","overDueValue"),s.Cb(2),s.oc("field","overDueValue"),s.Cb(1),s.oc("pSortableColumn","documentNumber"),s.Cb(2),s.oc("field","documentNumber"),s.Cb(1),s.oc("ngIf",t.storageService.get("isSap")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.listFieldsVisibility(t.inputScreenName,"requesterName")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.listFieldsVisibility(t.inputScreenName,"vendorBpName")),s.Cb(3),s.oc("pSortableColumn","postingDate"),s.Cb(2),s.oc("field","postingDate"),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.listFieldsVisibility(t.inputScreenName,"validUntil")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.listFieldsVisibility(t.inputScreenName,"deliveryDate")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.listFieldsVisibility(t.inputScreenName,"dueDate")),s.Cb(1),s.oc("pSortableColumn","status"),s.Cb(2),s.oc("field","status"),s.Cb(1),s.oc("pSortableColumn","totalAmount"),s.Cb(2),s.oc("field","totalAmount"),s.Cb(6),s.oc("ngIf",!t.storageService.get("isSingleBranchUser")),s.Cb(3),s.oc("ngModel",t.searchForm.documentNumber),s.Cb(1),s.oc("ngIf",t.storageService.get("isSap")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.listFieldsVisibility(t.inputScreenName,"requesterName")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.listFieldsVisibility(t.inputScreenName,"vendorBpName")),s.Cb(3),s.oc("ngModel",t.searchForm.postingDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.listFieldsVisibility(t.inputScreenName,"validUntil")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.listFieldsVisibility(t.inputScreenName,"deliveryDate")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.listFieldsVisibility(t.inputScreenName,"dueDate")),s.Cb(2),s.oc("ngModel",t.searchForm.status),s.Cb(3),s.oc("ngForOf",t.statusList),s.Cb(2),s.oc("ngModel",t.searchForm.totalAmount)}}function B(t,e){if(1&t&&(s.Vb(0,"td"),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Mc(t.branchName)}}function K(t,e){if(1&t&&(s.Vb(0,"span",57),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Nc("",t.overDueValue," Days")}}function q(t,e){if(1&t&&(s.Vb(0,"td"),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Mc(t.sapId)}}function w(t,e){if(1&t&&(s.Vb(0,"td"),s.Qb(1,"img",58),s.Lc(2),s.Ub()),2&t){const t=s.hc().$implicit,e=s.hc(2);s.Cb(1),s.oc("src",t.empImgUrl?t.empImgUrl:e.appConstants.DEFAULT_USER_ICON,s.Fc),s.Cb(1),s.Oc("\xa0",t.requesterCode," - ",t.requesterName," ")}}function M(t,e){if(1&t&&(s.Vb(0,"td"),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Oc("",t.vendorBpCode," - ",t.vendorBpName,"")}}function J(t,e){if(1&t&&(s.Vb(0,"td"),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Nc("",t.validUntil," ")}}function k(t,e){if(1&t&&(s.Vb(0,"td"),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Nc("",t.deliveryDate," ")}}function G(t,e){if(1&t&&(s.Vb(0,"td"),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Mc(t.dueDate)}}function Q(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tr"),s.Vb(1,"td"),s.Vb(2,"a",53),s.dc("click",(function(){s.Dc(t);const i=e.$implicit,r=s.hc(2);return r.pTxnUtilsService.redirectToEdit(r.inputScreenName,i.id,i.isDraft)})),s.Qb(3,"i",54),s.Ub(),s.Ub(),s.Jc(4,B,2,1,"td",0),s.Vb(5,"td"),s.Jc(6,K,2,1,"span",55),s.Ub(),s.Vb(7,"td"),s.Lc(8),s.Ub(),s.Jc(9,q,2,1,"td",0),s.Jc(10,w,3,3,"td",0),s.Jc(11,M,2,2,"td",0),s.Vb(12,"td"),s.Lc(13),s.Ub(),s.Vb(14,"td"),s.Lc(15),s.Ub(),s.Jc(16,J,2,1,"td",0),s.Jc(17,k,2,1,"td",0),s.Jc(18,G,2,1,"td",0),s.Vb(19,"td"),s.Vb(20,"span",56),s.Lc(21),s.Ub(),s.Ub(),s.Vb(22,"td"),s.Lc(23),s.Ub(),s.Ub()}if(2&t){const t=e.$implicit,i=s.hc(2);s.Cb(4),s.oc("ngIf",!i.storageService.get("isSingleBranchUser")),s.Cb(2),s.oc("ngIf",1==t.status&&t.overDueValue<0),s.Cb(2),s.Mc(t.documentNumber),s.Cb(1),s.oc("ngIf",i.storageService.get("isSap")),s.Cb(1),s.oc("ngIf",i.pTxnUtilsService.listFieldsVisibility(i.inputScreenName,"requesterName")),s.Cb(1),s.oc("ngIf",i.pTxnUtilsService.listFieldsVisibility(i.inputScreenName,"vendorBpName")),s.Cb(2),s.Mc(t.lineItemInfo.length),s.Cb(2),s.Mc(t.postingDate),s.Cb(1),s.oc("ngIf",i.pTxnUtilsService.listFieldsVisibility(i.inputScreenName,"validUntil")),s.Cb(1),s.oc("ngIf",i.pTxnUtilsService.listFieldsVisibility(i.inputScreenName,"deliveryDate")),s.Cb(1),s.oc("ngIf",i.pTxnUtilsService.listFieldsVisibility(i.inputScreenName,"dueDate")),s.Cb(2),s.oc("ngClass",i.appConstants.TXN_STATUS_COLOR_CLS[t.status]),s.Cb(1),s.Mc(t.statusName),s.Cb(2),s.Mc(t.totalAmount)}}function W(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"div",1),s.Vb(2,"span"),s.Lc(3),s.Ub(),s.Lc(4),s.Vb(5,"div",2),s.Jc(6,y,4,0,"button",3),s.Vb(7,"button",4),s.dc("click",(function(){s.Dc(t);const e=s.hc();return e.pTxnUtilsService.redirectToAdd(e.inputScreenName)})),s.Qb(8,"i",5),s.Vb(9,"span"),s.Lc(10),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(11,"div",6),s.Vb(12,"div",7),s.Vb(13,"div",8),s.Jc(14,v,6,3,"div",9),s.Ub(),s.Ub(),s.Vb(15,"div",8),s.Vb(16,"div",10),s.Vb(17,"label",11),s.Vb(18,"strong"),s.Lc(19,"From Date"),s.Ub(),s.Ub(),s.Vb(20,"p-calendar",12),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().searchForm.fromDate=e}))("onSelect",(function(){return s.Dc(t),s.hc().resetListing()})),s.Ub(),s.Ub(),s.Vb(21,"div",10),s.Vb(22,"label",11),s.Vb(23,"strong"),s.Lc(24,"To Date"),s.Ub(),s.Ub(),s.Vb(25,"p-calendar",13),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().searchForm.toDate=e}))("onSelect",(function(){return s.Dc(t),s.hc().resetListing()})),s.Ub(),s.Ub(),s.Vb(26,"div",14),s.Vb(27,"label",15),s.Vb(28,"input",16),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().searchForm.isDraft=e}))("change",(function(){return s.Dc(t),s.hc().resetListing()})),s.Ub(),s.Qb(29,"span",17),s.Lc(30," Show Only Drafts "),s.Ub(),s.Ub(),s.Ub(),s.Vb(31,"div",8),s.Vb(32,"div",18),s.Vb(33,"div",19),s.Vb(34,"p-table",20,21),s.dc("onLazyLoad",(function(e){return s.Dc(t),s.hc().getListing(e)})),s.Jc(36,O,52,33,"ng-template",22),s.Jc(37,Q,24,14,"ng-template",23),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Sb()}if(2&t){const t=s.hc();s.Cb(3),s.Mc(t.branchUtilsService.txnGetTitle(t.screenAttributes.title,!0)),s.Cb(1),s.Nc("",t.branchUtilsService.txnGetTitle(t.screenAttributes.title)," - List "),s.Cb(2),s.oc("ngIf",t.screenAcl.download),s.Cb(4),s.Nc("Add ",t.screenAttributes.title,""),s.Cb(4),s.oc("ngForOf",t.analyticsData),s.Cb(6),s.oc("ngModel",t.searchForm.fromDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(5),s.oc("ngModel",t.searchForm.toDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT)("minDate",t.searchForm.fromDate),s.Cb(3),s.oc("ngModel",t.searchForm.isDraft),s.Cb(6),s.oc("value",t.listing.data)("lazy",!0)("paginator",!0)("rows",t.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",t.listing.totalRecords)}}let _=(()=>{class t{constructor(t,e,i,r,s,c,o){this.activatedRoute=t,this.utilsService=e,this.storageService=i,this.authGuardService=r,this.branchUtilsService=s,this.pTxnUtilsService=c,this.commonDataService=o,this.appConstants=n.h,this.screenAcl={},this.analyticsData=[],this.statusList=[],this.screenAttributes={},this.screenDataService={},this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}ngOnInit(){this.initializeSubscriptions()}initializeSubscriptions(){this.activatedRoute.params.subscribe(t=>this.pTxnUtilsService.checkScreenNameValid(t.screenName)?(this.screenAcl=this.authGuardService.getScreenAcl(this.branchUtilsService.screenAttributes[t.screenName].documentTypeId),this.screenAcl.view?(this.reInitializeGlobalVariables(),this.inputScreenName=t.screenName,void this.transactionInitialization()):(this.utilsService.showFailureMsg(n.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1)):(this.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),this.utilsService.goBack(),!1))}reInitializeGlobalVariables(){this.inputScreenName="",this.screenAttributes={},this.screenDataService={},this.analyticsData=[],this.statusList=[],this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}transactionInitialization(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.inputScreenName],this.screenDataService=this.pTxnUtilsService.getScreenDataService(this.inputScreenName),this.searchForm=this.pTxnUtilsService.getFormSearchFields(this.inputScreenName),this.getAutoSuggestionList("getPurchaseTransStatusList"),this.getAnalyticsData(),this.dataTable&&this.resetListing()}getListing(t){const e=this.pTxnUtilsService.getSearchDataFormation(this.inputScreenName,this.searchForm),i=this.utilsService.dataTableParameterFormation(t,e);this.listingProperties=i,this.screenDataService.getList(i).subscribe(t=>{"SUCCESS"===t.status?(this.listing.data=t.results.searchResults,this.listing.totalRecords=t.results.totalRecords):this.utilsService.showFailureMsg(t)})}clearSearchForm(){this.searchForm=this.pTxnUtilsService.getFormSearchFields(this.inputScreenName),this.resetListing()}resetListing(){this.dataTable.reset()}getAutoSuggestionList(t){this.commonDataService.getAutoSuggestionList(t).subscribe(e=>{"SUCCESS"===e.status?"getPurchaseTransStatusList"===t&&(this.statusList=e.results):this.utilsService.showFailureMsg(e)})}getAnalyticsData(){this.pTxnUtilsService.getAnalyticsData(this.inputScreenName).subscribe(t=>{this.analyticsData=t})}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(r.a),s.Pb(n.g),s.Pb(n.f),s.Pb(n.a),s.Pb(c.a),s.Pb(b),s.Pb(d.l))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-purchase-txn-list"]],viewQuery:function(t,e){var i;1&t&&s.Pc(f,!0),2&t&&s.zc(i=s.ec())&&(e.dataTable=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-plus"],[1,"working-container"],[1,"analytics"],[1,"row"],["class","col-lg-2 col-md-3 col-sm-4 col-xs-12",4,"ngFor","ngForOf"],[1,"form-group","col-sm-3"],[1,"form-label"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","ngModelChange","onSelect"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","minDate","ngModelChange","onSelect"],[1,"form-group","col-sm-6","text-right"],[1,"checkbox","mt-3"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"checkmark"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-file-excel"],[1,"col-lg-2","col-md-3","col-sm-4","col-xs-12"],[1,"item"],[1,"name"],[1,"count",3,"ngClass"],[2,"width","80px"],["style","width:150px",3,"pSortableColumn",4,"ngIf"],[2,"width","100px",3,"pSortableColumn"],[3,"field"],[2,"width","90px",3,"pSortableColumn"],["style","width:110px",3,"pSortableColumn",4,"ngIf"],["style","width:250px",3,"pSortableColumn",4,"ngIf"],[2,"width","120px"],[2,"width","150px",3,"pSortableColumn"],["style","width:120px",3,"pSortableColumn",4,"ngIf"],["style","width:130px",3,"pSortableColumn",4,"ngIf"],[2,"width","120px",3,"pSortableColumn"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[2,"width","110px",3,"pSortableColumn"],[2,"width","250px",3,"pSortableColumn"],[2,"width","130px",3,"pSortableColumn"],[3,"value"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"click"],[1,"fa","fa-edit"],["class","badge badge-danger",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"badge","badge-danger"],["height","20px",3,"src"]],template:function(t,e){1&t&&s.Jc(0,W,38,22,"ng-container",0),2&t&&s.oc("ngIf",e.screenAcl.view)},directives:[l.m,l.l,m.a,a.m,a.o,a.a,h.c,p.b,l.k,h.b,h.a,g.a,a.b,a.t,a.p,a.v],styles:[""]}),t})();var z=i("Kj3r"),j=i("/uUt"),$=i("vkgz"),H=i("w9rb"),Y=i("TlXv"),Z=i("fIZe"),X=i("K3ix"),tt=i("ZOsW"),et=i("umDy"),it=i("EDFS");const rt=["hActions"],nt=["hSno"],st=["hItemName"],ct=["hRequiredDate"],ot=["hQuantity"],at=["hOpenQty"],ut=["hUOM"],dt=["hUnitPrice"],bt=["hWarehouse"],lt=["hBin"],mt=["hHSN"],ht=["hDiscount"],pt=["hTaxCode"],gt=["hTax"],ft=["hTotal"],yt=["hDistRules"],vt=["hWeight"],St=["bActions"],It=["bSno"],Ct=["bItemName"],Lt=["bRequiredDate"],Ut=["bQuantity"],Vt=["bOpenQty"],Nt=["bUOM"],Dt=["bUnitPrice"],Ft=["bWarehouse"],xt=["bBin"],Tt=["bHSN"],At=["bDiscount"],Et=["bTaxCode"],Rt=["bTax"],Pt=["bTotal"],Ot=["bDistRules"],Bt=["bWeight"];function Kt(t,e){1&t&&(s.Tb(0),s.Lc(1,"Add"),s.Sb())}function qt(t,e){1&t&&(s.Tb(0),s.Lc(1,"Edit"),s.Sb())}function wt(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",5),s.dc("click",(function(){return s.Dc(t),s.hc(2).downloadPdf()})),s.Qb(1,"i",89),s.Vb(2,"span"),s.Lc(3,"Print"),s.Ub(),s.Ub()}}function Mt(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors1.documentNumberingId?t.myFormErrors1.documentNumberingId:t.myFormErrors1.documentNumber," ")}}function Jt(t,e){if(1&t&&(s.Vb(0,"option",93),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Mc(t.name)}}function kt(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",t.myFormErrors1.requesterTypeId," ")}}function Gt(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Requester Type"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Vb(5,"select",91),s.dc("change",(function(){return s.Dc(t),s.hc(2).getRequesterList()})),s.Vb(6,"option",92),s.Lc(7,"--SELECT--"),s.Ub(),s.Jc(8,Jt,2,2,"option",26),s.Ub(),s.Jc(9,kt,2,1,"div",21),s.Ub()}if(2&t){const t=s.hc(2);s.Cb(8),s.oc("ngForOf",t.requesterTypeList),s.Cb(1),s.oc("ngIf",t.myFormErrors1.requesterTypeId)}}function Qt(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.employeeName,"\xa0"),s.Cb(2),s.Nc("(",t.empCode,")")}}function Wt(t,e){if(1&t){const t=s.Wb();s.Vb(0,"span",98),s.dc("click",(function(){s.Dc(t);const e=s.hc(3);return e.popupExternalService.showDetailPopup("employee",e.myForm1Data.requesterId)})),s.Qb(1,"i",99),s.Ub()}}function _t(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",t.myFormErrors1.requesterId," ")}}function zt(t,e){if(1&t&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Requester Name"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Vb(5,"div",94),s.Vb(6,"ng-select",95),s.Jc(7,Qt,4,2,"ng-template",96),s.Ub(),s.Jc(8,Wt,2,0,"span",97),s.Ub(),s.Jc(9,_t,2,1,"div",21),s.Ub()),2&t){const t=s.hc(2);s.Cb(6),s.oc("items",t.requesterList)("multiple",!1),s.Cb(2),s.oc("ngIf",t.myForm1Data.requesterId),s.Cb(1),s.oc("ngIf",t.myFormErrors1.requesterId)}}function jt(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.partnerName,"\xa0"),s.Cb(2),s.Nc("(",t.partnerCode,")")}}function $t(t,e){if(1&t){const t=s.Wb();s.Vb(0,"a",104),s.dc("click",(function(){return s.Dc(t),s.hc(3).bizRefreshFlag=!0})),s.Qb(1,"i",105),s.Ub()}}function Ht(t,e){if(1&t){const t=s.Wb();s.Vb(0,"a",106),s.dc("click",(function(){s.Dc(t);const e=s.hc(3);return e.getVendorBpList(),e.bizRefreshFlag=!1})),s.Qb(1,"i",107),s.Ub()}}function Yt(t,e){if(1&t){const t=s.Wb();s.Vb(0,"span",98),s.dc("click",(function(){s.Dc(t);const e=s.hc(3);return e.popupExternalService.showDetailPopup("biz-partner",e.myForm1Data.vendorBpId)})),s.Qb(1,"i",99),s.Ub()}}function Zt(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",t.myFormErrors1.vendorBpId," ")}}function Xt(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Vendor Name"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Vb(5,"div",100),s.Vb(6,"ng-select",101),s.dc("focus",(function(){return s.Dc(t),s.hc(2).onVendorNameChange()}))("change",(function(){s.Dc(t);const e=s.hc(2);return e.getVendorBpContactList(),e.branchUtilsService.txnSetCurrency(e.vendorBpList,e.myForm1,"vendorBpId","currencyId"),e.branchUtilsService.txnSetTermsAndMethods(e.vendorBpList,e.myForm1,"vendorBpId"),e.branchUtilsService.txnPaymentTermsChange(e.txnKeys.inputScreenName,e.paymentTermsList,e.myForm1,"paymentTermsId"),e.getVendorBpAddressShipToList(),e.getVendorBpAddressPayToList(),e.showTxnOptionsSidebar(!1)})),s.Jc(7,jt,4,2,"ng-template",96),s.Ub(),s.Vb(8,"span"),s.Jc(9,$t,2,0,"a",102),s.Jc(10,Ht,2,0,"a",103),s.Ub(),s.Jc(11,Yt,2,0,"span",97),s.Ub(),s.Jc(12,Zt,2,1,"div",21),s.Ub()}if(2&t){const t=s.hc(2);s.Cb(6),s.oc("items",t.vendorBpList)("multiple",!1),s.Cb(3),s.oc("ngIf",!t.bizRefreshFlag),s.Cb(1),s.oc("ngIf",t.bizRefreshFlag),s.Cb(1),s.oc("ngIf",t.myForm1Data.vendorBpId),s.Cb(1),s.oc("ngIf",t.myFormErrors1.vendorBpId)}}function te(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Ub(),s.Vb(2,"small"),s.Lc(3),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Mc(t.contactName),s.Cb(2),s.Oc("",t.contactTypeName," / ",t.contactNumber,"")}}function ee(t,e){if(1&t&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Contact Person"),s.Ub(),s.Vb(3,"ng-select",108),s.Jc(4,te,4,3,"ng-template",96),s.Ub(),s.Ub()),2&t){const t=s.hc(2);s.Cb(3),s.oc("items",t.vendorBpContactList)("multiple",!1)}}function ie(t,e){if(1&t&&(s.Vb(0,"option",93),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Mc(t.currencyName)}}function re(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",t.myFormErrors1.currencyId," ")}}function ne(t,e){if(1&t&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Currency"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Vb(5,"select",109),s.Vb(6,"option",92),s.Lc(7,"--SELECT--"),s.Ub(),s.Jc(8,ie,2,2,"option",26),s.Ub(),s.Jc(9,re,2,1,"div",21),s.Ub()),2&t){const t=s.hc(2);s.Cb(8),s.oc("ngForOf",t.currencyList),s.Cb(1),s.oc("ngIf",t.myFormErrors1.currencyId)}}function se(t,e){1&t&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Reference No"),s.Ub(),s.Qb(3,"input",110),s.Ub())}function ce(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors1.postingDate," ")}}function oe(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",null==t.myForm1.errors?null:t.myForm1.errors.invalidPostingDate," ")}}function ae(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",t.myFormErrors1.validUntil," ")}}function ue(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",null==t.myForm1.errors?null:t.myForm1.errors.invalidValidUntilDate," ")}}function de(t,e){if(1&t&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Valid Until"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Qb(5,"p-calendar",111),s.Jc(6,ae,2,1,"div",21),s.Jc(7,ue,2,1,"div",21),s.Ub()),2&t){const t=s.hc(2);s.Cb(5),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",t.myFormErrors1.validUntil),s.Cb(1),s.oc("ngIf",null==t.myForm1.errors?null:t.myForm1.errors.invalidValidUntilDate)}}function be(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",t.myFormErrors1.deliveryDate," ")}}function le(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",null==t.myForm1.errors?null:t.myForm1.errors.invalidDeliveryDate," ")}}function me(t,e){if(1&t&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Delivery Date"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Qb(5,"p-calendar",112),s.Jc(6,be,2,1,"div",21),s.Jc(7,le,2,1,"div",21),s.Ub()),2&t){const t=s.hc(2);s.Cb(5),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",t.myFormErrors1.deliveryDate),s.Cb(1),s.oc("ngIf",null==t.myForm1.errors?null:t.myForm1.errors.invalidDeliveryDate)}}function he(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",t.myFormErrors1.dueDate," ")}}function pe(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",null==t.myForm1.errors?null:t.myForm1.errors.invalidDueDate," ")}}function ge(t,e){if(1&t&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Due Date"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Qb(5,"p-calendar",113),s.Jc(6,he,2,1,"div",21),s.Jc(7,pe,2,1,"div",21),s.Ub()),2&t){const t=s.hc(2);s.Cb(5),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",t.myFormErrors1.dueDate),s.Cb(1),s.oc("ngIf",null==t.myForm1.errors?null:t.myForm1.errors.invalidDueDate)}}function fe(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors1.documentDate," ")}}function ye(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.employeeName,"\xa0"),s.Cb(2),s.Nc("(",t.empCode,")")}}function ve(t,e){if(1&t){const t=s.Wb();s.Vb(0,"span",98),s.dc("click",(function(){s.Dc(t);const e=s.hc(3);return e.popupExternalService.showDetailPopup("employee",e.myForm1Data.buyerEmpId)})),s.Qb(1,"i",99),s.Ub()}}function Se(t,e){if(1&t&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Buyer"),s.Ub(),s.Vb(3,"div",94),s.Vb(4,"ng-select",114),s.Jc(5,ye,4,2,"ng-template",96),s.Ub(),s.Jc(6,ve,2,0,"span",97),s.Ub(),s.Ub()),2&t){const t=s.hc(2);s.Cb(4),s.oc("items",t.buyerEmployeeList)("multiple",!1),s.Cb(2),s.oc("ngIf",t.myForm1Data.buyerEmpId)}}function Ie(t,e){if(1&t&&(s.Vb(0,"option",93),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc(" ",t.name," ")}}function Ce(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors1.statusList," ")}}function Le(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors1.remarks," ")}}const Ue=function(t){return{data:t}};function Ve(t,e){if(1&t&&(s.Tb(0),s.Qb(1,"template",115),s.Sb()),2&t){const t=e.$implicit,i=s.hc(2);s.Cb(1),s.oc("ngTemplateOutlet",i[t.headerRef])("ngTemplateOutletContext",s.sc(2,Ue,t))}}const Ne=function(t,e){return{formItemListRow:t,i:e}};function De(t,e){if(1&t&&(s.Tb(0),s.Qb(1,"template",115),s.Sb()),2&t){const t=e.$implicit,i=s.hc(),r=i.$implicit,n=i.index,c=s.hc(2);s.Cb(1),s.oc("ngTemplateOutlet",c[t.bodyRef])("ngTemplateOutletContext",s.tc(2,Ne,r,n))}}function Fe(t,e){if(1&t&&(s.Vb(0,"tr",116),s.Jc(1,De,2,5,"ng-container",31),s.Ub()),2&t){const t=e.index,i=s.hc(2);s.oc("formGroupName",t),s.Cb(1),s.oc("ngForOf",i.itemListColumnOrder)}}function xe(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tfoot"),s.Vb(1,"tr"),s.Vb(2,"td",117),s.Vb(3,"button",118),s.dc("click",(function(){return s.Dc(t),s.hc(2).addItemFields()})),s.Qb(4,"i",105),s.Vb(5,"span"),s.Lc(6,"Add Item"),s.Ub(),s.Ub(),s.Lc(7," \xa0 "),s.Vb(8,"span",119),s.Lc(9,"Note:"),s.Ub(),s.Lc(10," Select Vendor to add items "),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=s.hc(2);s.Cb(3),s.oc("disabled",!t.myForm1Data.vendorBpId)}}function Te(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors1.discountPercentage," ")}}function Ae(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors1.rounding," ")}}function Ee(t,e){if(1&t&&(s.Vb(0,"option",93),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Oc(" ",t.address," - ",t.city," ")}}function Re(t,e){if(1&t&&(s.Vb(0,"option",93),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Oc(" ",t.address," - ",t.city," ")}}function Pe(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div",10),s.Vb(1,"div",11),s.Qb(2,"i",12),s.Lc(3,"Logistics Info "),s.Ub(),s.Vb(4,"div",13),s.Vb(5,"div",14),s.Vb(6,"div",15),s.Vb(7,"label",16),s.Lc(8,"Ship From"),s.Ub(),s.Vb(9,"select",120),s.dc("change",(function(){s.Dc(t);const e=s.hc(2);return e.branchUtilsService.txnBpAddressChange(e.vendorBpAddressShipToList,e.myForm1,"vendorShipToBpAddressId","vendorShipToAddress")})),s.Vb(10,"option",92),s.Lc(11,"--SELECT--"),s.Ub(),s.Jc(12,Ee,2,3,"option",26),s.Ub(),s.Qb(13,"textarea",121),s.Ub(),s.Vb(14,"div",15),s.Vb(15,"label",16),s.Lc(16,"Pay To"),s.Ub(),s.Vb(17,"select",122),s.dc("change",(function(){s.Dc(t);const e=s.hc(2);return e.branchUtilsService.txnBpAddressChange(e.vendorBpAddressPayToList,e.myForm1,"vendorPayToBpAddressId","vendorPayToAddress"),e.branchUtilsService.txnSetTaxCode(e.vendorBpAddressPayToList,e.myForm1,"vendorPayToBpAddressId")})),s.Vb(18,"option",92),s.Lc(19,"--SELECT--"),s.Ub(),s.Jc(20,Re,2,3,"option",26),s.Ub(),s.Qb(21,"textarea",123),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=s.hc(2);s.Cb(12),s.oc("ngForOf",t.vendorBpAddressShipToList),s.Cb(8),s.oc("ngForOf",t.vendorBpAddressPayToList)}}function Oe(t,e){if(1&t&&(s.Vb(0,"option",93),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc(" ",t.paymentTermName," ")}}function Be(t,e){if(1&t&&(s.Vb(0,"option",93),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc(" ",t.paymentMethodName," ")}}function Ke(t,e){if(1&t&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Required Date"),s.Ub(),s.Qb(3,"p-calendar",128),s.Ub()),2&t){const t=s.hc(3);s.Cb(3),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT)}}function qe(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div",10),s.Vb(1,"div",11),s.Qb(2,"i",12),s.Lc(3,"Accounting Info "),s.Ub(),s.Vb(4,"div",13),s.Vb(5,"div",14),s.Vb(6,"div",15),s.Vb(7,"label",16),s.Lc(8,"Payment Terms"),s.Ub(),s.Vb(9,"select",124),s.dc("change",(function(){s.Dc(t);const e=s.hc(2);return e.branchUtilsService.txnPaymentTermsChange(e.txnKeys.inputScreenName,e.paymentTermsList,e.myForm1,"paymentTermsId")})),s.Vb(10,"option",92),s.Lc(11,"--SELECT--"),s.Ub(),s.Jc(12,Oe,2,2,"option",26),s.Ub(),s.Ub(),s.Vb(13,"div",15),s.Vb(14,"label",16),s.Lc(15,"Payment Method"),s.Ub(),s.Vb(16,"select",125),s.Vb(17,"option",92),s.Lc(18,"--SELECT--"),s.Ub(),s.Jc(19,Be,2,2,"option",26),s.Ub(),s.Ub(),s.Vb(20,"div",15),s.Vb(21,"label",16),s.Lc(22,"Cancellation Date"),s.Ub(),s.Qb(23,"p-calendar",126),s.Ub(),s.Jc(24,Ke,4,4,"div",22),s.Vb(25,"div",15),s.Vb(26,"label",16),s.Lc(27,"Goods in Transit"),s.Ub(),s.Qb(28,"br"),s.Vb(29,"label",43),s.Qb(30,"input",127),s.Qb(31,"span",45),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=s.hc(2);s.Cb(12),s.oc("ngForOf",t.paymentTermsList),s.Cb(7),s.oc("ngForOf",t.paymentMethodsList),s.Cb(4),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnAccountingRequiredDate"))}}function we(t,e){1&t&&(s.Vb(0,"div",10),s.Vb(1,"div",11),s.Qb(2,"i",12),s.Lc(3,"Tax Info "),s.Ub(),s.Vb(4,"div",13),s.Vb(5,"div",14),s.Vb(6,"div",15),s.Vb(7,"label",16),s.Lc(8,"Tax code / GST / VAT"),s.Ub(),s.Qb(9,"input",129),s.Ub(),s.Ub(),s.Ub(),s.Ub())}function Me(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",5),s.dc("click",(function(){return s.Dc(t),s.hc(2).saveUpdate()})),s.Qb(1,"i",130),s.Vb(2,"span"),s.Lc(3,"Save"),s.Ub(),s.Ub()}}function Je(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",5),s.dc("click",(function(){return s.Dc(t),s.hc(2).addUpdateDraft()})),s.Qb(1,"i",130),s.Vb(2,"span"),s.Lc(3,"Save as Draft"),s.Ub(),s.Ub()}}function ke(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",3),s.dc("click",(function(){return s.Dc(t),s.hc(2).clearForm()})),s.Qb(1,"i",131),s.Vb(2,"span"),s.Lc(3,"Clear"),s.Ub(),s.Ub()}}function Ge(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",5),s.dc("click",(function(){return s.Dc(t),s.hc(2).saveUpdate("add")})),s.Qb(1,"i",107),s.Vb(2,"span"),s.Lc(3,"Add"),s.Ub(),s.Ub()}}function Qe(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",5),s.dc("click",(function(){return s.Dc(t),s.hc(2).saveUpdate()})),s.Qb(1,"i",107),s.Vb(2,"span"),s.Lc(3,"Update"),s.Ub(),s.Ub()}}function We(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",3),s.dc("click",(function(){s.Dc(t);const e=s.hc(2);return e.pTxnUtilsService.redirectToList(e.txnKeys.inputScreenName)})),s.Qb(1,"i",132),s.Vb(2,"span"),s.Lc(3,"Cancel"),s.Ub(),s.Ub()}}function _e(t,e){1&t&&(s.Vb(0,"div",135),s.Vb(1,"span",119),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," You are unauthorized to "),s.Vb(4,"strong"),s.Lc(5,"update"),s.Ub(),s.Lc(6," this transaction! "),s.Ub())}function ze(t,e){1&t&&(s.Vb(0,"div",135),s.Vb(1,"span",119),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," Cannot update "),s.Vb(4,"strong"),s.Lc(5,"Cancelled"),s.Ub(),s.Lc(6," / "),s.Vb(7,"strong"),s.Lc(8,"Closed"),s.Ub(),s.Lc(9," / "),s.Vb(10,"strong"),s.Lc(11," Approved"),s.Ub(),s.Lc(12," transactions! "),s.Ub())}function je(t,e){if(1&t&&(s.Vb(0,"div",133),s.Vb(1,"div"),s.Vb(2,"strong"),s.Lc(3,"Created By:"),s.Ub(),s.Lc(4),s.Ub(),s.Jc(5,_e,7,0,"div",134),s.Jc(6,ze,13,0,"div",134),s.Ub()),2&t){const t=s.hc(2);s.Cb(4),s.Nc(" ",t.txnKeys.editCreatedName,""),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"updateAclNote")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"updateNote"))}}function $e(t,e){1&t&&(s.Vb(0,"div",133),s.Vb(1,"span",119),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," You are unauthorized to "),s.Vb(4,"strong"),s.Lc(5,"add"),s.Ub(),s.Lc(6," this transaction!. "),s.Ub())}function He(t,e){if(1&t&&(s.Vb(0,"th",136),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function Ye(t,e){if(1&t&&(s.Vb(0,"th",137),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function Ze(t,e){if(1&t&&(s.Vb(0,"th",138),s.Lc(1),s.Vb(2,"span",17),s.Lc(3,"*"),s.Ub(),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function Xe(t,e){if(1&t&&(s.Vb(0,"th",140),s.Lc(1),s.Vb(2,"span",17),s.Lc(3,"*"),s.Ub(),s.Ub()),2&t){const t=s.hc().data;s.Cb(1),s.Nc(" ",t.name,"")}}function ti(t,e){if(1&t&&s.Jc(0,Xe,4,1,"th",139),2&t){const t=s.hc(2);s.oc("ngIf",t.pTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnItemListRequiredDate"))}}function ei(t,e){if(1&t&&(s.Vb(0,"th",141),s.Lc(1),s.Vb(2,"span",17),s.Lc(3,"*"),s.Ub(),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function ii(t,e){if(1&t&&(s.Vb(0,"th",141),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function ri(t,e){if(1&t&&(s.Vb(0,"th",141),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function ni(t,e){if(1&t&&(s.Vb(0,"th",141),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function si(t,e){1&t&&(s.Vb(0,"span",17),s.Lc(1,"*"),s.Ub())}function ci(t,e){if(1&t&&(s.Vb(0,"th",38),s.Lc(1),s.Jc(2,si,2,0,"span",142),s.Ub()),2&t){const t=e.data,i=s.hc(2);s.Cb(1),s.Mc(t.name),s.Cb(1),s.oc("ngIf","purchaseGrpo"===i.txnKeys.inputScreenName)}}function oi(t,e){1&t&&(s.Vb(0,"span",17),s.Lc(1,"*"),s.Ub())}function ai(t,e){if(1&t&&(s.Vb(0,"th",38),s.Lc(1),s.Jc(2,oi,2,0,"span",142),s.Ub()),2&t){const t=e.data,i=s.hc(2);s.Cb(1),s.Mc(t.name),s.Cb(1),s.oc("ngIf","purchaseGrpo"===i.txnKeys.inputScreenName)}}function ui(t,e){if(1&t&&(s.Vb(0,"th",141),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function di(t,e){if(1&t&&(s.Vb(0,"th",141),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function bi(t,e){if(1&t&&(s.Vb(0,"th",143),s.Lc(1),s.Vb(2,"span",17),s.Lc(3,"*"),s.Ub(),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function li(t,e){if(1&t&&(s.Vb(0,"th",141),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function mi(t,e){if(1&t&&(s.Vb(0,"th",140),s.Lc(1),s.Vb(2,"small"),s.Lc(3,"(Auto Fill)"),s.Ub(),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Nc("",t.name," ")}}function hi(t,e){1&t&&(s.Vb(0,"span",17),s.Lc(1,"*"),s.Ub())}function pi(t,e){if(1&t&&(s.Vb(0,"th",138),s.Lc(1),s.Jc(2,hi,2,0,"span",142),s.Ub()),2&t){const t=e.data,i=s.hc(2);s.Cb(1),s.Mc(t.name),s.Cb(1),s.oc("ngIf",i.storageService.get("distRulesMode"))}}function gi(t,e){if(1&t&&(s.Vb(0,"th",141),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function fi(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"a",145),s.dc("click",(function(){s.Dc(t);const e=s.hc().i,i=s.hc(2);return i.removeItemFields(e),i.branchUtilsService.txnCalcItemsTotal(i.myForm1)})),s.Qb(2,"i",146),s.Ub(),s.Sb()}}function yi(t,e){if(1&t&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Jc(3,fi,3,0,"ng-container",0),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm1),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.oc("ngIf",i.myForm1Data.itemListArray[t].showDeleteIcon)}}function vi(t,e){if(1&t&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Lc(3),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm1),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.Mc(t+1)}}function Si(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.itemName,"\xa0"),s.Cb(2),s.Nc("(",t.itemCode,")")}}function Ii(t,e){if(1&t){const t=s.Wb();s.Vb(0,"span",98),s.dc("click",(function(){s.Dc(t);const e=s.hc().i,i=s.hc(2);return i.popupExternalService.showDetailPopup("item",i.myForm1Data.itemListArray[e].itemId)})),s.Qb(1,"i",99),s.Ub()}}function Ci(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors1.itemListArray[t].itemId," ")}}function Li(t,e){if(1&t){const t=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"div",94),s.Vb(4,"ng-select",147),s.dc("search",(function(e){return s.Dc(t),s.hc(2).onItemSearch(e)}))("change",(function(){s.Dc(t);const i=e.i;return s.hc(2).onItemChange(i)})),s.Jc(5,Si,4,2,"ng-template",96),s.Ub(),s.Jc(6,Ii,2,0,"span",97),s.Ub(),s.Vb(7,"div",148),s.Lc(8),s.Ub(),s.Jc(9,Ci,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm1),s.Cb(2),s.oc("formGroupName",t),s.Cb(2),s.oc("items",i.itemList)("multiple",!1)("virtualScroll",!0),s.Cb(2),s.oc("ngIf",i.myForm1Data.itemListArray[t].itemId),s.Cb(2),s.Nc("Last Price: ",i.myForm1Data.itemListArray[t].lastPrice,""),s.Cb(1),s.oc("ngIf",i.myFormErrors1.itemListArray[t].itemId)}}function Ui(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc(2).i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors1.itemListArray[t].requiredDate," ")}}function Vi(t,e){if(1&t&&(s.Tb(0),s.Qb(1,"p-calendar",149),s.Jc(2,Ui,2,1,"div",21),s.Sb()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",e.myFormErrors1.itemListArray[t].requiredDate)}}function Ni(t,e){if(1&t&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Jc(3,Vi,3,5,"ng-container",0),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm1),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.oc("ngIf",i.pTxnUtilsService.addFieldsVisibility(i.txnKeys.inputScreenName,"fnItemListRequiredDate"))}}function Di(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc().formItemListRow;s.Cb(1),s.Nc(" ",null==t.errors?null:t.errors.invalidMinQuantity," ")}}function Fi(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors1.itemListArray[t].quantity," ")}}function xi(t,e){if(1&t){const t=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"input",150),s.dc("keyup",(function(){s.Dc(t);const i=e.i,r=s.hc(2);return r.branchUtilsService.txnCalcItemsTotal(r.myForm1),r.branchUtilsService.setItemWeight(r.itemList,r.myForm1,i,"itemId"),r.branchUtilsService.txnGetTotalWeight(r.myForm1)})),s.Ub(),s.Jc(4,Di,2,1,"div",21),s.Jc(5,Fi,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.formItemListRow,i=e.i,r=s.hc(2);s.oc("formGroup",r.myForm1),s.Cb(2),s.oc("formGroupName",i),s.Cb(2),s.oc("ngIf",null==t.errors?null:t.errors.invalidMinQuantity),s.Cb(1),s.oc("ngIf",r.myFormErrors1.itemListArray[i].quantity)}}function Ti(t,e){if(1&t&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Lc(3),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm1),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.Nc(" ",i.myForm1Data.itemListArray[t].openQuantity," ")}}function Ai(t,e){if(1&t&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Qb(3,"ng-select",151),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm1),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.oc("items",i.uomList)("multiple",!1)}}function Ei(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors1.itemListArray[t].unitPrice," ")}}function Ri(t,e){if(1&t){const t=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"input",152),s.dc("keyup",(function(){s.Dc(t);const e=s.hc(2);return e.branchUtilsService.txnCalcItemsTotal(e.myForm1)})),s.Ub(),s.Jc(4,Ei,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm1),s.Cb(2),s.oc("formGroupName",t),s.Cb(2),s.oc("ngIf",i.myFormErrors1.itemListArray[t].unitPrice)}}function Pi(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.warehouseName,"\xa0"),s.Cb(2),s.Nc("(",t.warehouseCode,")")}}function Oi(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors1.itemListArray[t].warehouseId," ")}}function Bi(t,e){if(1&t){const t=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"ng-select",153),s.dc("change",(function(){s.Dc(t);const i=e.i;return s.hc(2).setBinList(i)})),s.Jc(4,Pi,4,2,"ng-template",96),s.Ub(),s.Jc(5,Oi,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm1),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.oc("items",i.warehouseList)("multiple",!1),s.Cb(2),s.oc("ngIf",i.myFormErrors1.itemListArray[t].warehouseId)}}function Ki(t,e){if(1&t&&(s.Vb(0,"div",158),s.Vb(1,"strong"),s.Lc(2,"Only available stock bin's will be listed"),s.Ub(),s.Ub(),s.Lc(3)),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(3),s.Nc(" ",e.myForm1Data.itemListArray[t].stockDetails?e.myForm1Data.itemListArray[t].stockDetails:"..."," ")}}function qi(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors1.itemListArray[t].binId," ")}}function wi(t,e){if(1&t){const t=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"div",94),s.Qb(4,"ng-select",154),s.Vb(5,"span",155),s.dc("click",(function(){s.Dc(t);const i=e.i,r=s.hc(2);return r.branchUtilsService.txnSetItemStockToBinTooltip(r.myForm1,i,"warehouseId","stockDetails")})),s.Jc(6,Ki,4,1,"ng-template",null,156,s.Kc),s.Vb(8,"span",157),s.Qb(9,"i",99),s.Ub(),s.Ub(),s.Ub(),s.Jc(10,qi,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.Ac(7),r=s.hc(2);s.oc("formGroup",r.myForm1),s.Cb(2),s.oc("formGroupName",t),s.Cb(2),s.oc("items",r.myForm1Data.itemListArray[t].binList)("multiple",!1),s.Cb(4),s.oc("popover",i)("outsideClick",!0),s.Cb(2),s.oc("ngIf",r.myFormErrors1.itemListArray[t].binId)}}function Mi(t,e){if(1&t&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Qb(3,"ng-select",159),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm1),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.oc("items",i.hsnList)("multiple",!1)}}function Ji(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors1.itemListArray[t].discountPercentage," ")}}function ki(t,e){if(1&t){const t=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"input",42),s.dc("keyup",(function(){s.Dc(t);const e=s.hc(2);return e.branchUtilsService.txnCalcItemsTotal(e.myForm1)})),s.Ub(),s.Jc(4,Ji,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm1),s.Cb(2),s.oc("formGroupName",t),s.Cb(2),s.oc("ngIf",i.myFormErrors1.itemListArray[t].discountPercentage)}}function Gi(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors1.itemListArray[t].taxId," ")}}function Qi(t,e){if(1&t){const t=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"ng-select",160),s.dc("change",(function(){s.Dc(t);const i=e.i,r=s.hc(2);return r.branchUtilsService.txnTaxChange(r.taxList,r.myForm1,i)})),s.Ub(),s.Jc(4,Gi,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm1),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.oc("items",i.taxList)("multiple",!1),s.Cb(1),s.oc("ngIf",i.myFormErrors1.itemListArray[t].taxId)}}function Wi(t,e){if(1&t&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Lc(3),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm1),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.Nc(" ",i.myForm1Data.itemListArray[t].itemTaxPercentage," ")}}function _i(t,e){if(1&t&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",161),s.Lc(3),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm1),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.Nc(" ",i.myForm1Data.itemListArray[t].totalItemAmount," ")}}function zi(t,e){if(1&t&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors1.itemListArray[t].distributionRulesId," ")}}function ji(t,e){if(1&t){const t=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"ng-select",162),s.dc("add",(function(){s.Dc(t);const i=e.i;return s.hc(2).onDistRuleAdd(i)})),s.Ub(),s.Jc(4,zi,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm1),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.oc("items",i.distributionList)("multiple",!0),s.Cb(1),s.oc("ngIf",i.myFormErrors1.itemListArray[t].distributionRulesId)}}function $i(t,e){if(1&t){const t=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"input",163),s.dc("keyup",(function(){s.Dc(t);const e=s.hc(2);return e.branchUtilsService.txnGetTotalWeight(e.myForm1)})),s.Ub(),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm1),s.Cb(2),s.oc("formGroupName",t)}}const Hi=function(){return{"max-height.px":300}};function Yi(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"div",1),s.Vb(2,"span"),s.Lc(3),s.Ub(),s.Lc(4),s.Jc(5,Kt,2,0,"ng-container",0),s.Jc(6,qt,2,0,"ng-container",0),s.Vb(7,"div",2),s.Vb(8,"button",3),s.dc("click",(function(){return s.Dc(t),s.hc().utilsService.goBack()})),s.Qb(9,"i",4),s.Vb(10,"span"),s.Lc(11,"Back"),s.Ub(),s.Ub(),s.Vb(12,"button",5),s.dc("click",(function(){s.Dc(t);const e=s.hc();return e.popupExternalService.showManageColumnsPopup(e.txnKeys.inputScreenName)})),s.Qb(13,"i",6),s.Vb(14,"span"),s.Lc(15,"Manage Item Columns"),s.Ub(),s.Ub(),s.Jc(16,wt,4,0,"button",7),s.Vb(17,"button",5),s.dc("click",(function(){return s.Dc(t),s.hc().showTxnOptionsSidebar()})),s.Qb(18,"i",8),s.Vb(19,"span"),s.Lc(20,"More"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(21,"div",9),s.Vb(22,"div",10),s.Vb(23,"div",11),s.Qb(24,"i",12),s.Lc(25,"Basic Info "),s.Ub(),s.Vb(26,"div",13),s.Vb(27,"div",14),s.Vb(28,"div",15),s.Vb(29,"label",16),s.Lc(30,"Doc No"),s.Vb(31,"span",17),s.Lc(32,"*"),s.Ub(),s.Ub(),s.Vb(33,"div",14),s.Vb(34,"div",18),s.Vb(35,"ng-select",19),s.dc("change",(function(){s.Dc(t);const e=s.hc();return e.branchUtilsService.onDocumentNumberingChange(e.documentNumberingList,e.myForm1)})),s.Ub(),s.Ub(),s.Vb(36,"div",18),s.Qb(37,"input",20),s.Ub(),s.Ub(),s.Jc(38,Mt,2,1,"div",21),s.Ub(),s.Jc(39,Gt,10,2,"div",22),s.Jc(40,zt,10,4,"div",22),s.Jc(41,Xt,13,6,"div",22),s.Jc(42,ee,5,2,"div",22),s.Jc(43,ne,10,2,"div",22),s.Jc(44,se,4,0,"div",22),s.Vb(45,"div",15),s.Vb(46,"label",16),s.Lc(47,"Posting Date"),s.Vb(48,"span",17),s.Lc(49,"*"),s.Ub(),s.Ub(),s.Qb(50,"p-calendar",23),s.Jc(51,ce,2,1,"div",21),s.Jc(52,oe,2,1,"div",21),s.Ub(),s.Jc(53,de,8,6,"div",22),s.Jc(54,me,8,6,"div",22),s.Jc(55,ge,8,6,"div",22),s.Vb(56,"div",15),s.Vb(57,"label",16),s.Lc(58,"Document Date"),s.Vb(59,"span",17),s.Lc(60,"*"),s.Ub(),s.Ub(),s.Qb(61,"p-calendar",24),s.Jc(62,fe,2,1,"div",21),s.Ub(),s.Jc(63,Se,7,3,"div",22),s.Vb(64,"div",15),s.Vb(65,"label",16),s.Lc(66,"Status"),s.Vb(67,"span",17),s.Lc(68,"*"),s.Ub(),s.Ub(),s.Vb(69,"select",25),s.Jc(70,Ie,2,2,"option",26),s.Ub(),s.Jc(71,Ce,2,1,"div",21),s.Ub(),s.Vb(72,"div",15),s.Vb(73,"label",16),s.Lc(74,"Remarks"),s.Ub(),s.Qb(75,"textarea",27),s.Jc(76,Le,2,1,"div",21),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(77,"div",10),s.Vb(78,"div",11),s.Qb(79,"i",12),s.Lc(80,"Content Info "),s.Ub(),s.Vb(81,"div",28),s.Vb(82,"div",29),s.Vb(83,"table",30),s.Vb(84,"thead"),s.Vb(85,"tr"),s.Jc(86,Ve,2,4,"ng-container",31),s.Ub(),s.Ub(),s.Vb(87,"tbody",32),s.Jc(88,Fe,2,2,"tr",33),s.Ub(),s.Jc(89,xe,11,1,"tfoot",0),s.Ub(),s.Ub(),s.Vb(90,"div",14),s.Vb(91,"div",34),s.Qb(92,"div",35),s.Ub(),s.Vb(93,"div",36),s.Vb(94,"table",37),s.Vb(95,"tbody"),s.Vb(96,"tr"),s.Vb(97,"td",38),s.Vb(98,"strong"),s.Lc(99,"Total Weight"),s.Ub(),s.Ub(),s.Qb(100,"td",39),s.Vb(101,"td",40),s.Vb(102,"strong"),s.Lc(103),s.Ub(),s.Ub(),s.Ub(),s.Vb(104,"tr"),s.Vb(105,"td",38),s.Vb(106,"strong"),s.Lc(107,"Total Before Discount"),s.Ub(),s.Ub(),s.Qb(108,"td",39),s.Vb(109,"td",40),s.Vb(110,"strong"),s.Lc(111),s.Ub(),s.Ub(),s.Ub(),s.Vb(112,"tr"),s.Vb(113,"td"),s.Lc(114,"Discount %"),s.Ub(),s.Vb(115,"td",41),s.Vb(116,"input",42),s.dc("keyup",(function(){s.Dc(t);const e=s.hc();return e.branchUtilsService.txnCalcTotal(e.myForm1)})),s.Ub(),s.Jc(117,Te,2,1,"div",21),s.Ub(),s.Vb(118,"td",41),s.Lc(119),s.Ub(),s.Ub(),s.Vb(120,"tr"),s.Vb(121,"td"),s.Lc(122,"Tax"),s.Ub(),s.Qb(123,"td"),s.Vb(124,"td",41),s.Lc(125),s.Ub(),s.Ub(),s.Vb(126,"tr"),s.Vb(127,"td"),s.Lc(128," Rounding "),s.Vb(129,"div"),s.Vb(130,"label",43),s.Vb(131,"input",44),s.dc("ngModelChange",(function(){s.Dc(t);const e=s.hc();return e.branchUtilsService.txnRoundingOffChange(e.myForm1)})),s.Ub(),s.Qb(132,"span",45),s.Lc(133,"Edit "),s.Ub(),s.Ub(),s.Ub(),s.Vb(134,"td"),s.Vb(135,"input",46),s.dc("keyup",(function(){s.Dc(t);const e=s.hc();return e.branchUtilsService.txnCalcTotal(e.myForm1,!0)})),s.Ub(),s.Jc(136,Ae,2,1,"div",21),s.Ub(),s.Vb(137,"td",41),s.Lc(138),s.Ub(),s.Ub(),s.Vb(139,"tr"),s.Vb(140,"td",47),s.Lc(141,"Total "),s.Vb(142,"small"),s.Lc(143,"(Rounded off):"),s.Ub(),s.Ub(),s.Qb(144,"td"),s.Vb(145,"td",48),s.Lc(146),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Jc(147,Pe,22,2,"div",49),s.Jc(148,qe,32,7,"div",49),s.Jc(149,we,10,0,"div",49),s.Qb(150,"app-udf-viewer",50),s.Vb(151,"app-attachments",51),s.dc("doSuccess",(function(){s.Dc(t);const e=s.hc();return e.pTxnUtilsService.redirectToList(e.txnKeys.inputScreenName)})),s.Ub(),s.Vb(152,"div",52),s.Jc(153,Me,4,0,"button",7),s.Jc(154,Je,4,0,"button",7),s.Jc(155,ke,4,0,"button",53),s.Jc(156,Ge,4,0,"button",7),s.Jc(157,Qe,4,0,"button",7),s.Jc(158,We,4,0,"button",53),s.Ub(),s.Jc(159,je,7,3,"div",54),s.Jc(160,$e,7,0,"div",54),s.Ub(),s.Qb(161,"app-spi-txn-options"),s.Jc(162,He,2,1,"ng-template",null,55,s.Kc),s.Jc(164,Ye,2,1,"ng-template",null,56,s.Kc),s.Jc(166,Ze,4,1,"ng-template",null,57,s.Kc),s.Jc(168,ti,1,1,"ng-template",null,58,s.Kc),s.Jc(170,ei,4,1,"ng-template",null,59,s.Kc),s.Jc(172,ii,2,1,"ng-template",null,60,s.Kc),s.Jc(174,ri,2,1,"ng-template",null,61,s.Kc),s.Jc(176,ni,2,1,"ng-template",null,62,s.Kc),s.Jc(178,ci,3,2,"ng-template",null,63,s.Kc),s.Jc(180,ai,3,2,"ng-template",null,64,s.Kc),s.Jc(182,ui,2,1,"ng-template",null,65,s.Kc),s.Jc(184,di,2,1,"ng-template",null,66,s.Kc),s.Jc(186,bi,4,1,"ng-template",null,67,s.Kc),s.Jc(188,li,2,1,"ng-template",null,68,s.Kc),s.Jc(190,mi,4,1,"ng-template",null,69,s.Kc),s.Jc(192,pi,3,2,"ng-template",null,70,s.Kc),s.Jc(194,gi,2,1,"ng-template",null,71,s.Kc),s.Jc(196,yi,4,3,"ng-template",null,72,s.Kc),s.Jc(198,vi,4,3,"ng-template",null,73,s.Kc),s.Jc(200,Li,10,8,"ng-template",null,74,s.Kc),s.Jc(202,Ni,4,3,"ng-template",null,75,s.Kc),s.Jc(204,xi,6,4,"ng-template",null,76,s.Kc),s.Jc(206,Ti,4,3,"ng-template",null,77,s.Kc),s.Jc(208,Ai,4,4,"ng-template",null,78,s.Kc),s.Jc(210,Ri,5,3,"ng-template",null,79,s.Kc),s.Jc(212,Bi,6,5,"ng-template",null,80,s.Kc),s.Jc(214,wi,11,7,"ng-template",null,81,s.Kc),s.Jc(216,Mi,4,4,"ng-template",null,82,s.Kc),s.Jc(218,ki,5,3,"ng-template",null,83,s.Kc),s.Jc(220,Qi,5,5,"ng-template",null,84,s.Kc),s.Jc(222,Wi,4,3,"ng-template",null,85,s.Kc),s.Jc(224,_i,4,3,"ng-template",null,86,s.Kc),s.Jc(226,ji,5,5,"ng-template",null,87,s.Kc),s.Jc(228,$i,4,2,"ng-template",null,88,s.Kc),s.Sb()}if(2&t){const t=s.hc();s.Cb(3),s.Mc(t.branchUtilsService.txnGetTitle(t.screenAttributes.title,!0)),s.Cb(1),s.Nc("",t.branchUtilsService.txnGetTitle(t.screenAttributes.title)," - "),s.Cb(1),s.oc("ngIf",!t.txnKeys.inputEditId),s.Cb(1),s.oc("ngIf",t.txnKeys.inputEditId),s.Cb(10),s.oc("ngIf",t.txnKeys.inputEditId),s.Cb(5),s.oc("formGroup",t.myForm1),s.Cb(14),s.oc("items",t.documentNumberingList),s.Cb(3),s.oc("ngIf",t.myFormErrors1.documentNumberingId||t.myFormErrors1.documentNumber),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnRequesterTypeId")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnRequesterId")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnVendorBpId")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnVendorBpContactsId")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnCurrencyId")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnReferenceNumber")),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",t.myFormErrors1.postingDate),s.Cb(1),s.oc("ngIf",null==t.myForm1.errors?null:t.myForm1.errors.invalidPostingDate),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnValidUntil")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnDeliveryDate")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnDueDate")),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",t.myFormErrors1.documentDate),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnBuyerEmpId")),s.Cb(7),s.oc("ngForOf",t.statusList),s.Cb(1),s.oc("ngIf",t.myFormErrors1.statusList),s.Cb(5),s.oc("ngIf",t.myFormErrors1.remarks),s.Cb(6),s.oc("ngStyle",s.rc(62,Hi)),s.Cb(4),s.oc("ngForOf",t.itemListColumnOrder),s.Cb(2),s.oc("ngForOf",t.myForm1.controls.itemListArray.controls),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnAddItemAccess(t.txnKeys.inputScreenName,t.myForm1,t.txnKeys.inputEditId)),s.Cb(14),s.Nc(" ",t.myForm1Data.totalWeight," "),s.Cb(8),s.Oc(" ",t.myForm1Data.totalBeforeDiscount," ",t.branchUtilsService.txnGetActiveCurrency(t.currencyList,t.myForm1,"currencyId")," "),s.Cb(6),s.oc("ngIf",t.myFormErrors1.discountPercentage),s.Cb(2),s.Oc(" ",t.myForm1Data.discountValue," ",t.branchUtilsService.txnGetActiveCurrency(t.currencyList,t.myForm1,"currencyId")," "),s.Cb(6),s.Oc(" ",t.myForm1Data.taxPercentage," ",t.branchUtilsService.txnGetActiveCurrency(t.currencyList,t.myForm1,"currencyId")," "),s.Cb(11),s.oc("ngIf",t.myFormErrors1.rounding),s.Cb(2),s.Oc(" ",t.myForm1Data.rounding," ",t.branchUtilsService.txnGetActiveCurrency(t.currencyList,t.myForm1,"currencyId")," "),s.Cb(8),s.Oc(" ",t.myForm1Data.totalAmount," ",t.branchUtilsService.txnGetActiveCurrency(t.currencyList,t.myForm1,"currencyId")," "),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnLogisticsFields")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnAccountingFields")),s.Cb(1),s.oc("ngIf",t.pTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnTaxFields")),s.Cb(1),s.oc("type",t.screenAttributes.backendKey),s.Cb(1),s.oc("type",t.screenAttributes.backendKey),s.Cb(2),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"save")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"saveDraft")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"clear")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"add")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"update")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"cancel")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"editMsgContainer")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm1,t.txnKeys,"addAclNote"))}}let Zi=(()=>{class t{constructor(t,e,i,r,s,c,o,a,u,d,b){this.utilsService=t,this.storageService=e,this.authGuardService=i,this.commonDataService=r,this.branchUtilsService=s,this.pTxnUtilsService=c,this.popupExternalService=o,this.formBuilder=a,this.activatedRoute=u,this.changeDetectorRef=d,this.modalService=b,this.appConstants=n.h,this.screenAcl={},this.txnKeys={inputScreenName:"",inputEditId:"",inputDraftId:"",inputCopyIds:"",inputCopyScreenName:"",inputDuplicateId:"",editStatusId:"",editCreatedName:""},this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.documentNumberingList=[],this.statusList=[],this.itemList=[],this.warehouseList=[],this.binList=[],this.hsnList=[],this.taxList=[],this.uomList=[],this.distributionList=[],this.requesterTypeList=[],this.requesterList=[],this.bizRefreshFlag=!1,this.vendorBpList=[],this.vendorBpContactList=[],this.currencyList=[],this.buyerEmployeeList=[],this.vendorBpAddressShipToList=[],this.vendorBpAddressPayToList=[],this.paymentTermsList=[],this.paymentMethodsList=[],this.myForm1Data={},this.myFormErrors1={},this.myFormValidationMsgs1={}}ngOnInit(){this.initializeSubscriptions(),this.setRequesterTypeAndName()}ngAfterViewInit(){this.attachmentsComponent&&this.udfViewerComponent&&(this.attachmentsComponent.loadAttachments(this.txnKeys.inputEditId||this.txnKeys.inputDraftId),this.udfViewerComponent.getFields(this.txnKeys.inputEditId||this.txnKeys.inputDuplicateId||this.txnKeys.inputDraftId),this.changeDetectorRef.detectChanges())}initializeSubscriptions(){this.activatedRoute.params.subscribe(t=>{if(!this.pTxnUtilsService.checkScreenNameValid(t.screenName))return this.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),this.utilsService.goBack(),!1;if(this.screenAcl=this.authGuardService.getScreenAcl(this.branchUtilsService.screenAttributes[t.screenName].documentTypeId),!this.screenAcl.view)return this.utilsService.showFailureMsg(n.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;if(this.reInitializeGlobalVariables(),this.txnKeys.inputScreenName=t.screenName,this.transactionInitialization(),t.id&&(this.txnKeys.inputEditId=this.utilsService.decrypt(t.id),this.get()),t.copyScreenName&&t.copyId){const e=this.utilsService.decrypt(t.copyId);this.txnKeys.inputCopyIds=e.split(","),this.txnKeys.inputCopyScreenName=t.copyScreenName,t.vendorId&&this.myForm1.patchValue({vendorBpId:this.utilsService.decrypt(t.vendorId)}),"purchaseOrder"===this.txnKeys.inputScreenName&&"salesOrder"===this.txnKeys.inputCopyScreenName?this.copyFromSalesOrder():this.copyFrom()}t.duplicateId&&(this.txnKeys.inputDuplicateId=this.utilsService.decrypt(t.duplicateId),this.getDuplicate()),t.draftId&&(this.txnKeys.inputDraftId=this.utilsService.decrypt(t.draftId),this.getDraft()),this.txnKeys.inputEditId||this.txnKeys.inputCopyIds||this.txnKeys.inputDuplicateId||this.txnKeys.inputDraftId||(this.branchUtilsService.getMasterDocumentNumbering(this.myForm1,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),"purchaseOrder"!==this.txnKeys.inputScreenName&&"purchaseGrpo"!==this.txnKeys.inputScreenName||(this.getAutoSuggestionList("getCurrencyList"),this.getVendorBpList(),this.getBuyerEmployeeList()),this.getAutoSuggestionList("getHsnList"),this.getAutoSuggestionList("getTaxList"),this.getAutoSuggestionList("getUomList"),this.getWarehouseList(),this.getDistributionList())}),this.branchUtilsService.itemSearch.pipe(Object(z.a)(700),Object(j.a)(),Object($.a)(t=>{this.getItemList(t)})).subscribe(),this.itemListColumnOrderChangesSubscription=this.branchUtilsService.itemListColumnOrderChanges.subscribe(t=>{"purchaseRequest"!==t.triggerType&&"purchaseOrder"!==t.triggerType&&"purchaseGrpo"!==t.triggerType||(this.itemListColumnOrder=this.branchUtilsService.getSelectedItemColumnDataByTxn(this.txnKeys.inputScreenName))})}reInitializeGlobalVariables(){this.txnKeys.inputScreenName="",this.txnKeys.inputEditId="",this.txnKeys.inputCopyIds="",this.txnKeys.inputCopyScreenName="",this.txnKeys.inputDuplicateId="",this.txnKeys.editStatusId="",this.txnKeys.editCreatedName="",this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.documentNumberingList=[],this.statusList=[],this.itemList=[],this.warehouseList=[],this.binList=[],this.taxList=[],this.uomList=[],this.distributionList=[],this.requesterTypeList=[],this.requesterList=[],this.bizRefreshFlag=!1,this.vendorBpList=[],this.vendorBpContactList=[],this.currencyList=[],this.buyerEmployeeList=[],this.vendorBpAddressShipToList=[],this.vendorBpAddressPayToList=[],this.paymentTermsList=[],this.paymentMethodsList=[]}transactionInitialization(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.txnKeys.inputScreenName],this.screenDataService=this.pTxnUtilsService.getScreenDataService(this.txnKeys.inputScreenName),this.itemListColumnOrder=this.branchUtilsService.getSelectedItemColumnDataByTxn(this.txnKeys.inputScreenName),this.myFormErrors1=this.pTxnUtilsService.getFormErrors(this.txnKeys.inputScreenName,"mainFields"),this.myFormValidationMsgs1=this.pTxnUtilsService.getFormValMsgs(this.txnKeys.inputScreenName),this.initializeForm1(),this.getAutoSuggestionList("getPurchaseTransStatusList"),"purchaseRequest"===this.txnKeys.inputScreenName&&this.getAutoSuggestionList("getEmployeeTypeList"),"purchaseOrder"!==this.txnKeys.inputScreenName&&"purchaseGrpo"!==this.txnKeys.inputScreenName||(this.getAutoSuggestionList("getPaymentTermsList"),this.getAutoSuggestionList("getPaymentMethodsList")),this.branchUtilsService.spiTxnOptions.next({show:!1})}initializeForm1(){this.myForm1=this.pTxnUtilsService.getFormMainFields(this.txnKeys.inputScreenName),this.myForm1.valueChanges.subscribe(t=>{this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1),this.myForm1Data=this.myForm1.getRawValue()}),this.myForm1Data=this.myForm1.getRawValue()}addItemFields(t,e){const i=this.myForm1.controls.itemListArray;i.push(this.initItemFields(t,e)),t||(this.branchUtilsService.txnTaxChange(this.taxList,this.myForm1,i.length-1),this.setBinList(i.length-1,!0)),!t&&i.length>1&&i.at(i.length-1).patchValue({requiredDate:this.myForm1Data.itemListArray[i.length-2].requiredDate})}initItemFields(t,e){return this.myFormErrors1.itemListArray.push(this.pTxnUtilsService.getFormErrors(this.txnKeys.inputScreenName,"itemFields")),this.pTxnUtilsService.getFormItemFields(this.txnKeys.inputScreenName,t,e)}removeItemFields(t){const e=this.myForm1Data.itemListArray[t].id;if(e){const t=this.myForm1Data.deletedItemChildIds;t.push(e),this.myForm1.patchValue({deletedItemChildIds:t})}this.myForm1.controls.itemListArray.removeAt(t)}saveUpdate(t){const e=this.myForm1.getRawValue();if("3"!==e.approvalStatus&&"1"!==e.approvalStatus){const i=u.findIndex(this.documentNumberingList,{id:e.documentNumberingId});if("DRAFT"===this.documentNumberingList[i].documentNumberingType&&"add"!==t)return this.utilsService.showFailureMsg("Cannot Proceed - Select other than draft document numbering from Doc No field!"),!1}if(!this.myForm1.valid||!this.udfViewerComponent.valid())return this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1,!0),this.udfViewerComponent.checkValidations(),!1;if(0===e.itemListArray.length)return this.utilsService.showFailureMsg("Cannot save / update - No item added!"),!1;const i=this.pTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm1);let r;i.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),i.isDraft=this.txnKeys.inputDraftId?"2":"0","add"===t?(i.id=this.txnKeys.inputEditId||this.txnKeys.inputDraftId,r="proceed"):this.txnKeys.inputEditId||this.txnKeys.inputDraftId?(r="update",i.id=this.txnKeys.inputEditId||this.txnKeys.inputDraftId,i.deletedItemChildIds=this.myForm1Data.deletedItemChildIds):r="save",this.screenDataService[r](i).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.attachmentsComponent.save("save"===r?t.sId:this.txnKeys.inputEditId||this.txnKeys.inputDraftId)):this.utilsService.showFailureMsg(t)})}addUpdateDraft(){const t=this.myForm1.getRawValue(),e=u.findIndex(this.documentNumberingList,{id:t.documentNumberingId});if("DRAFT"!==this.documentNumberingList[e].documentNumberingType)return this.utilsService.showFailureMsg("Cannot Proceed - Select draft document numbering from Doc No field!"),!1;if(0===t.itemListArray.length)return this.utilsService.showFailureMsg("Cannot save / update draft - No item added!"),!1;const i=this.pTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm1);let r;i.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),i.isDraft="1",this.txnKeys.inputDraftId?(r="update",i.id=this.txnKeys.inputDraftId,i.deletedItemChildIds=this.myForm1Data.deletedItemChildIds):r="save",this.screenDataService[r](i).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.attachmentsComponent.save("save"===r?t.sId:this.txnKeys.inputDraftId)):this.utilsService.showFailureMsg(t)})}get(){this.screenDataService.get(this.txnKeys.inputEditId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results;e.editFlag=!0;const i=this.pTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,e);this.myForm1.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm1,this.screenAttributes.documentTypeId,"edit",e.documentNumberingInfo).subscribe(t=>{this.documentNumberingList=t}),"purchaseRequest"===this.txnKeys.inputScreenName&&this.getRequesterList(!0,e.requesterInfo),"purchaseOrder"!==this.txnKeys.inputScreenName&&"purchaseGrpo"!==this.txnKeys.inputScreenName||(this.getAutoSuggestionList("getCurrencyList",e.currencyInfo),this.getVendorBpList(!0,e.vendorBpInfo),this.getVendorBpContactList(!0,e.vendorBpContactsInfo),this.getVendorBpAddressShipToList(!0,e.vendorShipToBpAddressInfo),this.getVendorBpAddressPayToList(!0,e.vendorPayToBpAddressInfo),this.getBuyerEmployeeList(e.buyerEmpInfo));const r=[],n=[],s=[],c=[],o=[],a=[];e.itemListArray.forEach(t=>{this.addItemFields(t,"edit"),t.itemInfo[0]&&r.push(t.itemInfo[0]),t.uomInfo[0]&&n.push(t.uomInfo[0]),t.warehouseInfo[0]&&s.push(t.warehouseInfo[0]),t.hsnInfo[0]&&c.push(t.hsnInfo[0]),t.taxInfo[0]&&o.push(t.taxInfo[0]),t.distributionRulesInfo.forEach(t=>{a.push(t)})}),this.getAutoSuggestionList("getUomList",n),this.getAutoSuggestionList("getHsnList",c),this.getAutoSuggestionList("getTaxList",o),this.getItemList("",!0,r),this.getWarehouseList(!0,s,e),this.getDistributionList(a),this.branchUtilsService.txnCalcItemsTotal(this.myForm1),this.txnKeys.editStatusId=e.status,this.txnKeys.editCreatedName=e.createdByInfo[0].employeeName,this.pTxnUtilsService.manipulationsOnEdit(this.txnKeys.inputScreenName,this.myForm1)}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}copyFrom(){const t=this.pTxnUtilsService.getScreenDataService(this.txnKeys.inputCopyScreenName),e=this.branchUtilsService.screenAttributes[this.txnKeys.inputCopyScreenName];t.copy(this.txnKeys.inputCopyIds).subscribe(t=>{if("SUCCESS"===t.status){const i=t.results;delete i.documentNumber,delete i.documentNumberingId,delete i.documentNumberingInfo;const r=this.pTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,i);this.myForm1.patchValue(r),this.branchUtilsService.getMasterDocumentNumbering(this.myForm1,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),"purchaseRequest"===this.txnKeys.inputScreenName&&this.getRequesterList(!0,i.requesterInfo),"purchaseOrder"!==this.txnKeys.inputScreenName&&"purchaseGrpo"!==this.txnKeys.inputScreenName||(this.getAutoSuggestionList("getCurrencyList",i.currencyInfo),this.getVendorBpList(!0,i.vendorBpInfo),this.getVendorBpContactList(!0,i.vendorBpContactsInfo),this.getBuyerEmployeeList(i.buyerEmpInfo),this.getVendorBpAddressShipToList(!0,i.vendorShipToBpAddressInfo),this.getVendorBpAddressPayToList(!0,i.vendorPayToBpAddressInfo));const n=[],s=[],c=[],o=[],a=[],u=[],d=i.itemListArray.filter(t=>parseInt(t.openQuantity,0)>0);i.itemListArray=d,i.itemListArray.forEach(t=>{t.copyFromId=t.id,t.copyFromType=e.backendKey,t.quantity=t.openQuantity,delete t.openQuantity,delete t.orderedQuantity,delete t.id,this.addItemFields(t),t.itemInfo[0]&&n.push(t.itemInfo[0]),t.uomInfo[0]&&s.push(t.uomInfo[0]),t.warehouseInfo[0]&&c.push(t.warehouseInfo[0]),t.hsnInfo[0]&&o.push(t.hsnInfo[0]),t.taxInfo[0]&&a.push(t.taxInfo[0]),t.distributionRulesInfo.forEach(t=>{u.push(t)})}),this.getAutoSuggestionList("getUomList",s),this.getAutoSuggestionList("getHsnList",o),this.getAutoSuggestionList("getTaxList",a),this.getItemList("",!0,n),this.getWarehouseList(!0,c,i),this.getDistributionList(u),this.branchUtilsService.txnCalcItemsTotal(this.myForm1),this.pTxnUtilsService.manipulationsOnCopy(this.txnKeys.inputScreenName,this.myForm1)}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}getDuplicate(){this.screenDataService.get(this.txnKeys.inputDuplicateId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results;delete e.documentNumber,delete e.documentNumberingId,delete e.documentNumberingInfo,delete e.status;const i=this.pTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,e);this.myForm1.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm1,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),"purchaseRequest"===this.txnKeys.inputScreenName&&this.getRequesterList(!0,e.requesterInfo),"purchaseOrder"!==this.txnKeys.inputScreenName&&"purchaseGrpo"!==this.txnKeys.inputScreenName||(this.getAutoSuggestionList("getCurrencyList"),this.getVendorBpList(),this.getBuyerEmployeeList(e.buyerEmpInfo));const r=[],n=[],s=[],c=[],o=[],a=[];e.itemListArray.forEach(t=>{delete t.id,delete t.openQuantity,delete t.orderedQuantity,delete t.copyFromType,delete t.copyFromId,this.addItemFields(t),t.itemInfo[0]&&r.push(t.itemInfo[0]),t.uomInfo[0]&&n.push(t.uomInfo[0]),t.warehouseInfo[0]&&s.push(t.warehouseInfo[0]),t.hsnInfo[0]&&c.push(t.hsnInfo[0]),t.taxInfo[0]&&o.push(t.taxInfo[0]),t.distributionRulesInfo.forEach(t=>{a.push(t)})}),this.getAutoSuggestionList("getUomList",n),this.getAutoSuggestionList("getHsnList",c),this.getAutoSuggestionList("getTaxList",o),this.getItemList("",!0,r),this.getWarehouseList(!0,s,e),this.getDistributionList(a),this.branchUtilsService.txnCalcItemsTotal(this.myForm1)}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}getDraft(){this.screenDataService.get(this.txnKeys.inputDraftId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results,i=this.pTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,e);this.myForm1.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm1,this.screenAttributes.documentTypeId,"draft",e.documentNumberingInfo).subscribe(t=>{this.documentNumberingList=t}),"purchaseRequest"===this.txnKeys.inputScreenName&&this.getRequesterList(!0,e.requesterInfo),"purchaseOrder"!==this.txnKeys.inputScreenName&&"purchaseGrpo"!==this.txnKeys.inputScreenName||(this.getAutoSuggestionList("getCurrencyList"),this.getVendorBpList(),this.getBuyerEmployeeList(e.buyerEmpInfo));const r=[],n=[],s=[],c=[],o=[],a=[];e.itemListArray.forEach(t=>{this.addItemFields(t),t.itemInfo[0]&&r.push(t.itemInfo[0]),t.uomInfo[0]&&n.push(t.uomInfo[0]),t.warehouseInfo[0]&&s.push(t.warehouseInfo[0]),t.hsnInfo[0]&&c.push(t.hsnInfo[0]),t.taxInfo[0]&&o.push(t.taxInfo[0]),t.distributionRulesInfo.forEach(t=>{a.push(t)})}),this.getAutoSuggestionList("getUomList",n),this.getAutoSuggestionList("getHsnList",c),this.getAutoSuggestionList("getTaxList",o),this.getItemList("",!0,r),this.getWarehouseList(!0,s,e),this.getDistributionList(a),this.branchUtilsService.txnCalcItemsTotal(this.myForm1),this.txnKeys.editStatusId=e.status,this.txnKeys.editCreatedName=e.createdByInfo[0].employeeName,"1"===e.isDraft&&"4"===e.approvalStatus?(this.myForm1.controls.documentNumberingId.enable(),this.myForm1.controls.documentNumber.enable()):(this.myForm1.controls.documentNumberingId.disable(),this.myForm1.controls.documentNumber.disable())}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}copyFromSalesOrder(){const t=this.pTxnUtilsService.getScreenDataService(this.txnKeys.inputCopyScreenName),e=this.txnKeys.inputCopyIds.toString();t.get(e).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results;this.branchUtilsService.getMasterDocumentNumbering(this.myForm1,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),this.getAutoSuggestionList("getCurrencyList"),this.getVendorBpList(),this.getBuyerEmployeeList();const i=[],r=[],n=[],s=[],c=[],o=[];e.itemListArray.forEach(t=>{delete t.openQuantity,delete t.orderedQuantity,delete t.id,this.addItemFields(t),t.itemInfo[0]&&i.push(t.itemInfo[0]),t.uomInfo[0]&&r.push(t.uomInfo[0]),t.warehouseInfo[0]&&n.push(t.warehouseInfo[0]),t.hsnInfo[0]&&s.push(t.hsnInfo[0]),t.taxInfo[0]&&c.push(t.taxInfo[0]),t.distributionRulesInfo.forEach(t=>{o.push(t)})}),this.getAutoSuggestionList("getUomList",r),this.getAutoSuggestionList("getHsnList",s),this.getAutoSuggestionList("getTaxList",c),this.getItemList("",!0,i),this.getWarehouseList(!0,n,e),this.getDistributionList(o),this.branchUtilsService.txnCalcItemsTotal(this.myForm1)}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}clearForm(){this.initializeForm1()}onDistRuleAdd(t){this.branchUtilsService.distRulesCheckUnique(this.distributionList,this.myForm1.controls.itemListArray.controls[t],"distributionRulesId")}onVendorNameChange(){if(this.myForm1Data.vendorBpId){const t=this.myForm1.controls.itemListArray;t.length>0&&this.utilsService.confirmDialog("Confirmation","If changing the vendor leads to remove the items. Do you want to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe(e=>{e&&(this.myForm1.patchValue({vendorBpId:null}),t.clear())})}}onItemChange(t){"purchaseRequest"!==this.txnKeys.inputScreenName&&"purchaseOrder"!==this.txnKeys.inputScreenName||(this.branchUtilsService.setItemWeight(this.itemList,this.myForm1,t,"itemId"),this.branchUtilsService.txnGetTotalWeight(this.myForm1)),("purchaseOrder"===this.txnKeys.inputScreenName||"purchaseGrpo"===this.txnKeys.inputScreenName)&&(this.myForm1Data.vendorBpId||(this.utilsService.showFailureMsg("Please select vendor name to add items"),this.myForm1.controls.itemListArray.at(t).patchValue({itemId:null})),this.branchUtilsService.txnSetUom(this.itemList,this.myForm1,t,"itemId"),this.branchUtilsService.txnSetHsn(this.itemList,this.myForm1,t,"itemId"),this.branchUtilsService.txnSetUnitPrice(this.myForm1,t,this.myForm1Data.vendorBpId),this.branchUtilsService.txnCheckItemDuplicate(this.myForm1,t,"itemId",this.itemList),this.branchUtilsService.setLastPriceAndAvailableStock(this.itemList,this.myForm1,t,this.branchUtilsService.spiTxnId.purchase),this.branchUtilsService.txnSetDefaultItemBin(this.itemList,this.myForm1,t,"warehouseId","binId","binList"))}onItemSearch(t){this.branchUtilsService.itemSearch.next(t)}getAutoSuggestionList(t,e){this.commonDataService.getAutoSuggestionList(t).subscribe(i=>{"SUCCESS"===i.status?(this.utilsService.ifNotPushToList(i.results,e),"getPurchaseTransStatusList"===t?(this.txnKeys.inputEditId||(i.results=i.results.filter(t=>"1"===t.id)),this.statusList=i.results):"getEmployeeTypeList"===t?this.requesterTypeList=i.results.filter(t=>"1"===t.id||"2"===t.id):"getCurrencyList"===t?this.currencyList=i.results:"getUomList"===t?this.uomList=i.results:"getHsnList"===t?this.hsnList=i.results.map(t=>(t.hsnLabel=t.chapter+"."+t.heading+"."+t.subHeading,t)):"getTaxList"===t?this.taxList=i.results:"getPaymentTermsList"===t?this.paymentTermsList=i.results:"getPaymentMethodsList"===t&&(this.paymentMethodsList=i.results)):this.utilsService.showFailureMsg(i)})}getItemList(t,e,i){return e?(this.itemList=i.map(t=>(t.searchText=t.itemName+" - "+t.itemCode,t)),!1):!t.term||t.term.length<3?(this.itemList=[],!1):void this.commonDataService.getItemList(t.term,2).subscribe(t=>{"SUCCESS"===t.status?this.itemList=t.results.map(t=>(t.searchText=t.itemName+" - "+t.itemCode,t)):this.utilsService.showFailureMsg(t)})}getDistributionList(t){this.commonDataService.getDistributionList(!0).subscribe(e=>{"SUCCESS"===e.status?(this.utilsService.ifNotPushToList(e.results,t),this.distributionList=e.results):this.utilsService.showFailureMsg(e)})}getRequesterList(t,e){const i=this.myForm1Data.requesterTypeId;this.requesterList=[],t||this.myForm1.patchValue({requesterId:null}),this.utilsService.isEmpty(i)||this.commonDataService.getEmployeeList(i).subscribe(i=>{"SUCCESS"===i.status?(t&&this.utilsService.ifNotPushToList(i.results,e),this.requesterList=i.results.map(t=>(t.searchText=t.employeeName+" - "+t.empCode,t))):this.utilsService.showFailureMsg(i)})}getVendorBpList(t,e){this.commonDataService.getBusinessPartnerList([2]).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.ifNotPushToList(t.results,e),this.vendorBpList=t.results.map(t=>(t.searchText=t.partnerName+" - "+t.partnerCode,t))):this.utilsService.showFailureMsg(t)})}getVendorBpContactList(t,e){this.vendorBpContactList=[],this.branchUtilsService.getBpContactListAndSet(this.myForm1,"vendorBpContactsId","vendorBpId",t,e).subscribe(t=>{this.vendorBpContactList=t})}getVendorBpAddressShipToList(t,e){this.vendorBpAddressShipToList=[],this.branchUtilsService.txnGetBpAddressListAndSet("1",this.myForm1,"vendorShipToBpAddressId","vendorShipToAddress","vendorBpId",t,e).subscribe(t=>{this.vendorBpAddressShipToList=t})}getVendorBpAddressPayToList(t,e){this.vendorBpAddressPayToList=[],this.branchUtilsService.txnGetBpAddressListAndSet("3",this.myForm1,"vendorPayToBpAddressId","vendorPayToAddress","vendorBpId",t,e).subscribe(t=>{this.vendorBpAddressPayToList=t})}getBuyerEmployeeList(t){this.commonDataService.getEmployeeList(1).subscribe(e=>{"SUCCESS"===e.status?(this.utilsService.ifNotPushToList(e.results,t),this.buyerEmployeeList=e.results.map(t=>(t.searchText=t.employeeName+" - "+t.empCode,t))):this.utilsService.showFailureMsg(e)})}getWarehouseList(t,e,i){this.commonDataService.getAutoSuggestionList("getWarehouseList").subscribe(r=>{"SUCCESS"===r.status?(this.utilsService.ifNotPushToList(r.results,e),this.warehouseList=r.results.map(t=>(t.searchText=t.warehouseName+" - "+t.warehouseCode,t)),t&&i.itemListArray.forEach((t,e)=>{this.setBinList(e,!0,t.binInfo)})):this.utilsService.showFailureMsg(r)})}setBinList(t,e,i){this.branchUtilsService.txnSetBinListAndPreselect(this.warehouseList,this.itemList,this.myForm1,t,"warehouseId","binId","binList",e,i),this.myForm1.controls.itemListArray.at(t).patchValue({stockDetails:""})}setRequesterTypeAndName(){this.storageService.get("employeeTypeId");let t=this.storageService.get("userId");"purchaseRequest"==this.txnKeys.inputScreenName&&(this.myForm1.patchValue({requesterTypeId:2}),this.getRequesterList(),this.myForm1.patchValue({requesterId:t}))}showTxnOptionsSidebar(t){this.branchUtilsService.spiTxnOptions.next(!1===t?{show:!1}:{show:!0,spiName:this.branchUtilsService.spiTxnId.purchase,screenName:this.txnKeys.inputScreenName,editId:this.txnKeys.inputEditId,bpId:this.myForm1Data.vendorBpId,status:this.myForm1Data.status})}downloadPdf(){this.branchUtilsService.spiTxnOptionsDownloadPdf.next({spiName:this.branchUtilsService.spiTxnId.purchase,screenName:this.txnKeys.inputScreenName,id:this.txnKeys.inputEditId})}onKeydownHandler(t){t.ctrlKey&&"s"===t.key.toLowerCase()&&(this.txnKeys.inputEditId&&"1"===this.txnKeys.editStatusId||!this.txnKeys.inputEditId)&&(this.saveUpdate(),t.preventDefault()),this.txnKeys.inputEditId&&t.ctrlKey&&-1!=="p".indexOf(t.key)&&(this.downloadPdf(),t.preventDefault())}ngOnDestroy(){this.reInitializeGlobalVariables(),this.itemListColumnOrderChangesSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.g),s.Pb(n.f),s.Pb(n.a),s.Pb(d.l),s.Pb(c.a),s.Pb(b),s.Pb(Z.a),s.Pb(a.e),s.Pb(r.a),s.Pb(s.h),s.Pb(X.b))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-purchase-txn-add"]],viewQuery:function(t,e){var i;1&t&&(s.Pc(H.a,!0),s.Pc(Y.a,!0),s.Pc(rt,!0),s.Pc(nt,!0),s.Pc(st,!0),s.Pc(ct,!0),s.Pc(ot,!0),s.Pc(at,!0),s.Pc(ut,!0),s.Pc(dt,!0),s.Pc(bt,!0),s.Pc(lt,!0),s.Pc(mt,!0),s.Pc(ht,!0),s.Pc(pt,!0),s.Pc(gt,!0),s.Pc(ft,!0),s.Pc(yt,!0),s.Pc(vt,!0),s.Pc(St,!0),s.Pc(It,!0),s.Pc(Ct,!0),s.Pc(Lt,!0),s.Pc(Ut,!0),s.Pc(Vt,!0),s.Pc(Nt,!0),s.Pc(Dt,!0),s.Pc(Ft,!0),s.Pc(xt,!0),s.Pc(Tt,!0),s.Pc(At,!0),s.Pc(Et,!0),s.Pc(Rt,!0),s.Pc(Pt,!0),s.Pc(Ot,!0),s.Pc(Bt,!0)),2&t&&(s.zc(i=s.ec())&&(e.attachmentsComponent=i.first),s.zc(i=s.ec())&&(e.udfViewerComponent=i.first),s.zc(i=s.ec())&&(e.hActions=i.first),s.zc(i=s.ec())&&(e.hSno=i.first),s.zc(i=s.ec())&&(e.hItemName=i.first),s.zc(i=s.ec())&&(e.hRequiredDate=i.first),s.zc(i=s.ec())&&(e.hQuantity=i.first),s.zc(i=s.ec())&&(e.hOpenQty=i.first),s.zc(i=s.ec())&&(e.hUOM=i.first),s.zc(i=s.ec())&&(e.hUnitPrice=i.first),s.zc(i=s.ec())&&(e.hWarehouse=i.first),s.zc(i=s.ec())&&(e.hBin=i.first),s.zc(i=s.ec())&&(e.hHSN=i.first),s.zc(i=s.ec())&&(e.hDiscount=i.first),s.zc(i=s.ec())&&(e.hTaxCode=i.first),s.zc(i=s.ec())&&(e.hTax=i.first),s.zc(i=s.ec())&&(e.hTotal=i.first),s.zc(i=s.ec())&&(e.hDistRules=i.first),s.zc(i=s.ec())&&(e.hWeight=i.first),s.zc(i=s.ec())&&(e.bActions=i.first),s.zc(i=s.ec())&&(e.bSno=i.first),s.zc(i=s.ec())&&(e.bItemName=i.first),s.zc(i=s.ec())&&(e.bRequiredDate=i.first),s.zc(i=s.ec())&&(e.bQuantity=i.first),s.zc(i=s.ec())&&(e.bOpenQty=i.first),s.zc(i=s.ec())&&(e.bUOM=i.first),s.zc(i=s.ec())&&(e.bUnitPrice=i.first),s.zc(i=s.ec())&&(e.bWarehouse=i.first),s.zc(i=s.ec())&&(e.bBin=i.first),s.zc(i=s.ec())&&(e.bHSN=i.first),s.zc(i=s.ec())&&(e.bDiscount=i.first),s.zc(i=s.ec())&&(e.bTaxCode=i.first),s.zc(i=s.ec())&&(e.bTax=i.first),s.zc(i=s.ec())&&(e.bTotal=i.first),s.zc(i=s.ec())&&(e.bDistRules=i.first),s.zc(i=s.ec())&&(e.bWeight=i.first))},hostBindings:function(t,e){1&t&&s.dc("keydown",(function(t){return e.onKeydownHandler(t)}),!1,s.Bc)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-columns"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"fa","fa-plus-square"],[1,"working-container","spi-txn-add",3,"formGroup"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row"],[1,"form-group","col-sm-3"],[1,"form-label"],[1,"mandatory"],[1,"col-sm-6"],["formControlName","documentNumberingId","bindLabel","documentNumberingName","bindValue","id","placeholder","--SELECT--",3,"items","change"],["type","text","formControlName","documentNumber",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],["class","form-group col-sm-3",4,"ngIf"],["formControlName","postingDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","documentDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","status",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],["formControlName","remarks","rows","2",1,"form-control","form-control-sm"],[1,"box-body","box-table"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-striped","table-bordered"],[4,"ngFor","ngForOf"],["formArrayName","itemListArray"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-sm-7","text-center"],[1,"calc-img"],[1,"col-sm-5"],[1,"table","table-striped","table-bordered","calculation"],[2,"min-width","150px"],[2,"width","100px"],[1,"text-right",2,"min-width","150px"],[1,"text-right"],["type","text","formControlName","discountPercentage",1,"form-control","form-control-sm","text-right",3,"keyup"],[1,"checkbox"],["type","checkbox","formControlName","roundingOffCheckbox",3,"ngModelChange"],[1,"checkmark"],["type","text","formControlName","rounding",1,"form-control","form-control-sm","text-right",3,"keyup"],[1,"net"],[1,"net","text-right"],["class","box",4,"ngIf"],[3,"type"],[3,"type","doSuccess"],[1,"btn-group","text-right"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],["hActions",""],["hSno",""],["hItemName",""],["hRequiredDate",""],["hQuantity",""],["hOpenQty",""],["hUOM",""],["hUnitPrice",""],["hWarehouse",""],["hBin",""],["hHSN",""],["hDiscount",""],["hTaxCode",""],["hTax",""],["hTotal",""],["hDistRules",""],["hWeight",""],["bActions",""],["bSno",""],["bItemName",""],["bRequiredDate",""],["bQuantity",""],["bOpenQty",""],["bUOM",""],["bUnitPrice",""],["bWarehouse",""],["bBin",""],["bHSN",""],["bDiscount",""],["bTaxCode",""],["bTax",""],["bTotal",""],["bDistRules",""],["bWeight",""],[1,"fa","fa-print"],[1,"validation-error"],["formControlName","requesterTypeId",1,"form-control","form-control-sm",3,"change"],["value",""],[3,"value"],[1,"position-relative"],["formControlName","requesterId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["ng-option-tmp",""],["class","info-icon","container","body","tooltip","View Details",3,"click",4,"ngIf"],["container","body","tooltip","View Details",1,"info-icon",3,"click"],[1,"fa","fa-info-circle"],[1,"action-control"],["formControlName","vendorBpId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple","focus","change"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click"],[1,"fa","fa-plus"],[3,"click"],[1,"fa","fa-redo-alt"],["formControlName","vendorBpContactsId","bindLabel","contactName","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["formControlName","currencyId",1,"form-control","form-control-sm"],["type","text","formControlName","referenceNumber",1,"form-control","form-control-sm"],["formControlName","validUntil",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","deliveryDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","dueDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","buyerEmpId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"formGroupName"],["colspan","16"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],[1,"badge","badge-danger"],["formControlName","vendorShipToBpAddressId",1,"form-control","form-control-sm",3,"change"],["formControlName","vendorShipToAddress",1,"form-control","form-control-sm"],["formControlName","vendorPayToBpAddressId",1,"form-control","form-control-sm",3,"change"],["formControlName","vendorPayToAddress",1,"form-control","form-control-sm"],["formControlName","paymentTermsId",1,"form-control","form-control-sm",3,"change"],["formControlName","paymentMethodId",1,"form-control","form-control-sm"],["formControlName","cancellationDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["type","checkbox","formControlName","goodsInTransit"],["formControlName","requiredDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["type","text","formControlName","taxCode",1,"form-control","form-control-sm"],[1,"fa","fa-save"],[1,"fa","fa-broom"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[2,"min-width","80px"],[2,"min-width","30px"],[2,"min-width","200px"],["style","min-width:130px",4,"ngIf"],[2,"min-width","130px"],[2,"min-width","100px"],["class","mandatory",4,"ngIf"],[2,"min-width","120px"],[3,"formGroup"],["placement","top","container","body","tooltip","Delete",1,"action","red",3,"click"],[1,"fa","fa-minus-circle"],["formControlName","itemId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","virtualScroll","search","change"],[1,"small-text"],["formControlName","requiredDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["type","text","formControlName","quantity",1,"form-control","form-control-sm","text-right",3,"keyup"],["formControlName","uomId","bindLabel","uomName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["type","text","formControlName","unitPrice",1,"form-control","form-control-sm","text-right",3,"keyup"],["formControlName","warehouseId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","change"],["formControlName","binId","bindLabel","binName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["tooltip","Click to get stock details","container","body","placement","bottom",1,"info-icon",3,"click"],["popTemplate",""],["container","body","placement","bottom",3,"popover","outsideClick"],[1,"mb-1"],["formControlName","hsnId","bindLabel","hsnLabel","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["formControlName","taxId","bindLabel","taxCode","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","change"],[1,"text-right",3,"formGroupName"],["formControlName","distributionRulesId","bindLabel","distributionName","bindValue","id","placeholder","--SELECT--","appendTo","body","groupBy","dimensionDescription",3,"items","multiple","add"],["type","text","formControlName","itemWeight",1,"form-control","form-control-sm","text-right",3,"keyup"]],template:function(t,e){1&t&&s.Jc(0,Yi,230,63,"ng-container",0),2&t&&s.oc("ngIf",e.screenAcl.view)},directives:[l.m,a.n,a.i,tt.a,a.m,a.g,a.b,m.a,a.t,l.l,l.n,a.d,a.a,Y.a,H.a,et.a,a.p,a.v,tt.c,g.a,r.g,l.q,a.j,it.a],styles:[""]}),t})();const Xi=r.h.forChild([{path:"purchase-txn-list/:screenName",component:_},{path:"purchase-txn-add/:screenName",component:Zi},{path:"purchase-txn-edit/:screenName/:id",component:Zi},{path:"purchase-txn-edit-draft/:screenName/:draftId",component:Zi},{path:"purchase-txn-copy/:screenName/:copyScreenName/:copyId",component:Zi},{path:"purchase-txn-copy/:screenName/:copyScreenName/:copyId/:vendorId",component:Zi},{path:"purchase-txn-duplicate/:screenName/:duplicateId",component:Zi}]);var tr=i("o+NB"),er=i("7zUj"),ir=i("N5hj"),rr=i("dJ0z");let nr=(()=>{class t{}return t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({factory:function(e){return new(e||t)},providers:[b],imports:[[Xi,tr.BranchModule,er.a,ir.a,rr.a]]}),t})()}}]);