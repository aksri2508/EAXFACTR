function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{dJxe:function(e,t,i){"use strict";i.r(t),i.d(t,"PurchaseModule",(function(){return or}));var r,n=i("tyNb"),a=i("ey9i"),s=i("fXoL"),c=i("IzNV"),o=i("HDdC"),u=i("3Pt+"),d=i("LvDl"),l=i("oARB"),b=((r=function(){function e(t,i,r,n,s,c,o,u){_classCallCheck(this,e),this.utilsService=t,this.storageService=i,this.branchUtilsService=r,this.puchaseRequestDataService=n,this.puchaseOrderDataService=s,this.grpoDataService=c,this.formBuilder=o,this.salesOrderDataService=u,this.appConstants=a.h,this.initializeSubscriptions()}return _createClass(e,[{key:"initializeSubscriptions",value:function(){var e=this;this.branchUtilsService.spiTxnOptionsDownloadPdf.subscribe((function(t){e.downloadPDF(t)}))}},{key:"checkScreenNameValid",value:function(e){return!(!this.branchUtilsService.screenAttributes.hasOwnProperty(e)||"purchaseRequest"!==e&&"purchaseOrder"!==e&&"purchaseGrpo"!==e)}},{key:"getScreenDataService",value:function(e){return"purchaseRequest"===e?this.puchaseRequestDataService:"purchaseOrder"===e?this.puchaseOrderDataService:"purchaseGrpo"===e?this.grpoDataService:"salesOrder"===e?this.salesOrderDataService:void 0}},{key:"addFieldsVisibility",value:function(e,t){if("purchaseRequest"===e){if("fnRequesterTypeId"===t||"fnRequesterId"===t||"fnValidUntil"===t||"fnItemListRequiredDate"===t)return!0}else if("purchaseOrder"===e){if("fnDeliveryDate"===t||"fnAccountingRequiredDate"===t)return!0}else if("purchaseGrpo"===e&&"fnDueDate"===t)return!0;return!("purchaseOrder"!==e&&"purchaseGrpo"!==e||"fnVendorBpId"!==t&&"fnVendorBpContactsId"!==t&&"fnCurrencyId"!==t&&"fnReferenceNumber"!==t&&"fnBuyerEmpId"!==t&&"fnLogisticsFields"!==t&&"fnAccountingFields"!==t&&"fnTaxFields"!==t)}},{key:"getFormErrors",value:function(e,t){if("mainFields"===t){var i={documentNumberingId:"",documentNumber:"",postingDate:"",documentDate:"",status:"",discountPercentage:"",rounding:"",totalAmount:"",itemListArray:[]};return"purchaseRequest"===e?(i.requesterTypeId="",i.requesterId="",i.validUntil=""):"purchaseOrder"===e?i.deliveryDate="":"purchaseGrpo"===e&&(i.dueDate=""),"purchaseOrder"!==e&&"purchaseGrpo"!==e||(i.vendorBpId="",i.currencyId=""),i}if("itemFields"===t){var r={itemId:"",quantity:"",unitPrice:"",warehouseId:"",binId:"",discountPercentage:"",taxId:"",distributionRulesId:""};return"purchaseRequest"===e&&(r.requiredDate=""),r}}},{key:"getFormValMsgs",value:function(e){var t={documentNumberingId:{required:"Document No is required"},documentNumber:{required:"Document No is required"},postingDate:{required:"Posting Date is required"},documentDate:{required:"Document Date is required"},status:{required:"Status is required"},discountPercentage:{min:"Enter 0 to 100",max:"Enter 0 to 100",pattern:"Only positive numbers are allowed"},rounding:{pattern:"Only numbers are allowed"},totalAmount:{required:"Total Amount is required"}};return"purchaseRequest"===e?(t.requesterTypeId={required:"Requester Type is required"},t.requesterId={required:"Requester Name is required"},t.validUntil={required:"Valid Until is required"}):"purchaseOrder"===e?t.deliveryDate={required:"Delivery Date is required"}:"purchaseGrpo"===e&&(t.dueDate={required:"Due Date is required"}),"purchaseOrder"!==e&&"purchaseGrpo"!==e||(t.vendorBpId={required:"Vendor Name is required"},t.currencyId={required:"Currency is required"}),t.itemListArray={itemId:{required:"Item Name is required"},quantity:{required:"Quantity is required",min:"Minimum 1",pattern:"Only positive numbers are allowed"},unitPrice:{pattern:"Only positive numbers are allowed"},warehouseId:{required:"Warehouse is required"},binId:{required:"Bin is required"},discountPercentage:{min:"Enter 0 to 100",max:"Enter 0 to 100",pattern:"Only positive numbers are allowed"},taxId:{required:"Tax Code is required"},distributionRulesId:{required:"Dist.Rules is required"},itemWeight:{pattern:"Only positive numbers are allowed"}},"purchaseRequest"===e&&(t.itemListArray.requiredDate={required:"Required Date is required"}),t}},{key:"getFormMainFields",value:function(e){var t={documentNumberingId:[null,[u.u.required]],documentNumber:["",[u.u.required]],documentNumberingType:[""],postingDate:[new Date,[u.u.required]],documentDate:[new Date,[u.u.required]],status:["1",[u.u.required]],remarks:[""],totalBeforeDiscount:["0.00"],discountPercentage:["0.00",[u.u.min(0),u.u.max(100),u.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],discountValue:["0.00"],taxPercentage:["0.00"],roundingOffCheckbox:[!1],rounding:[{value:"0.00",disabled:!0},[u.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveNegativeFloatNumber)]],totalAmount:["0.00",[u.u.required]],deletedItemChildIds:[[]],showAddButton:[""],itemsTotalAmount:["0.00"],editFlag:[!1],approvalStatus:["4"]};"purchaseRequest"===e?(t.requesterTypeId=["",[u.u.required]],t.requesterId=[null,[u.u.required]],t.validUntil=["",[u.u.required]]):"purchaseOrder"===e?(t.deliveryDate=["",[u.u.required]],t.requiredDate=[""]):"purchaseGrpo"===e&&(t.dueDate=["",[u.u.required]]),"purchaseRequest"!==e&&"purchaseOrder"!==e||(t.totalWeight=[0]),"purchaseOrder"!==e&&"purchaseGrpo"!==e||(t.vendorBpId=[null,[u.u.required]],t.vendorBpContactsId=[null],t.currencyId=["",[u.u.required]],t.referenceNumber=[""],t.buyerEmpId=[null],t.vendorShipToBpAddressId=[""],t.vendorShipToAddress=[""],t.vendorPayToBpAddressId=[""],t.vendorPayToAddress=[""],t.paymentTermsId=[""],t.paymentMethodId=[""],t.cancellationDate=[""],t.goodsInTransit=[!1],t.taxCode=[""]),t.itemListArray=this.formBuilder.array([]);var i=this.formBuilder.group(t);return this.setMainFieldsCustomValidation(i,e),i}},{key:"setMainFieldsCustomValidation",value:function(e,t){var i=[];"purchaseRequest"===t&&i.push(this.utilsService.startEndDateValidator("documentDate","validUntil","invalidValidUntilDate","Should => Document Date")),"purchaseOrder"===t&&i.push(this.utilsService.startEndDateValidator("documentDate","deliveryDate","invalidDeliveryDate","Should => Document Date")),"purchaseGrpo"===t&&i.push(this.utilsService.startEndDateValidator("documentDate","dueDate","invalidDueDate","Should => Document Date")),i.push(this.utilsService.startEndDateValidator("postingDate","documentDate","invalidPostingDate","Should <= Document Date")),e.setValidators(u.u.compose(i)),e.updateValueAndValidity()}},{key:"getMainFieldsWithData",value:function(e,t){var i={};return this.utilsService.updateObject(i,"documentNumberingId",t.documentNumberingId),this.utilsService.updateObject(i,"documentNumber",t.documentNumber),t.documentNumberingInfo&&this.utilsService.updateObject(i,"documentNumberingType",t.documentNumberingInfo.length>0?t.documentNumberingInfo[0].documentNumberingType:""),this.utilsService.updateObject(i,"postingDate",t.postingDate,"date"),this.utilsService.updateObject(i,"documentDate",t.documentDate,"date"),this.utilsService.updateObject(i,"status",t.status),this.utilsService.updateObject(i,"remarks",t.remarks),this.utilsService.updateObject(i,"totalBeforeDiscount",t.totalBeforeDiscount),this.utilsService.updateObject(i,"discountPercentage",t.discountPercentage),this.utilsService.updateObject(i,"discountValue",t.discountValue),this.utilsService.updateObject(i,"taxPercentage",t.taxPercentage),"1"===t.roundingFlag&&(i.roundingOffCheckbox=!0),this.utilsService.updateObject(i,"rounding",t.rounding),this.utilsService.updateObject(i,"totalAmount",t.totalAmount),this.utilsService.updateObject(i,"showAddButton",t.showAddButton),"purchaseRequest"===e?(this.utilsService.updateObject(i,"requesterTypeId",t.requesterTypeId),this.utilsService.updateObject(i,"requesterId",t.requesterId),this.utilsService.updateObject(i,"validUntil",t.validUntil,"date")):"purchaseOrder"===e?(this.utilsService.updateObject(i,"deliveryDate",t.deliveryDate,"date"),this.utilsService.updateObject(i,"requiredDate",t.requiredDate,"date")):"purchaseGrpo"===e&&this.utilsService.updateObject(i,"dueDate",t.dueDate,"date"),"purchaseRequest"!==e&&"purchaseOrder"!==e||this.utilsService.updateObject(i,"totalWeight",t.totalWeight),"purchaseOrder"!==e&&"purchaseGrpo"!==e||(this.utilsService.updateObject(i,"vendorBpId",t.vendorBpId),this.utilsService.updateObject(i,"vendorBpContactsId",t.vendorBpContactsId),this.utilsService.updateObject(i,"currencyId",t.currencyId),this.utilsService.updateObject(i,"referenceNumber",t.referenceNumber),this.utilsService.updateObject(i,"buyerEmpId",t.buyerEmpId),this.utilsService.updateObject(i,"vendorShipToBpAddressId",t.vendorShipToBpAddressId),this.utilsService.updateObject(i,"vendorShipToAddress",t.vendorShipToAddress),this.utilsService.updateObject(i,"vendorPayToBpAddressId",t.vendorPayToBpAddressId),this.utilsService.updateObject(i,"vendorPayToAddress",t.vendorPayToAddress),this.utilsService.updateObject(i,"paymentTermsId",t.paymentTermsId),this.utilsService.updateObject(i,"paymentMethodId",t.paymentMethodId),this.utilsService.updateObject(i,"cancellationDate",t.cancellationDate,"date"),this.utilsService.isEmpty(t.goodsInTransit)||(i.goodsInTransit="1"===t.goodsInTransit),this.utilsService.updateObject(i,"taxCode",t.taxCode)),this.utilsService.updateObject(i,"editFlag",t.editFlag),this.utilsService.updateObject(i,"approvalStatus",t.approvalStatus),i}},{key:"getFormItemFields",value:function(e,t,i){var r=[];this.storageService.get("distRulesMode")&&r.push(u.u.required);var n={itemId:[null,[u.u.required]],lastPrice:["-"],quantity:[1,[u.u.required,u.u.min(1),u.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveIntNumber)]],openQuantity:[0],uomId:[null],unitPrice:["0.00",[u.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],warehouseId:[this.storageService.get("defaultWarehouseId")?this.storageService.get("defaultWarehouseId"):null],binId:[null],binList:[[]],hsnId:[null],discountPercentage:["0.00",[u.u.min(0),u.u.max(100),u.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],taxId:[this.storageService.get("purchaseTaxId")?this.storageService.get("purchaseTaxId"):null,[u.u.required]],itemTaxPercentage:["0.00"],itemTaxValue:["0.00"],totalItemAmount:["0.00"],distributionRulesId:[null,r],id:[""],copyFromType:[""],copyFromId:[""],itemWeight:["",[u.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],showDeleteIcon:[!0],orderedQuantity:[0],stockDetails:[""]};"purchaseRequest"===e&&(n.requiredDate=["",[u.u.required]]),"purchaseGrpo"===e&&(n.warehouseId[1]=u.u.required,n.binId[1]=u.u.required),t&&this.setDataToItemFields(e,n,t);var a=this.formBuilder.group(n);return"edit"===i&&this.setItemFieldsCustomValidation(a),a}},{key:"setItemFieldsCustomValidation",value:function(e){var t=e.getRawValue(),i=[];i.push(this.utilsService.minValidator("quantity",t.orderedQuantity,"invalidMinQuantity","Minimum : "+t.orderedQuantity)),e.setValidators(u.u.compose(i)),e.updateValueAndValidity()}},{key:"setDataToItemFields",value:function(e,t,i){this.utilsService.updateObject(t,"itemId",i.itemId),this.utilsService.updateObject(t,"lastPrice",i.lastPrice),this.utilsService.updateObject(t,"quantity",i.quantity),this.utilsService.updateObject(t,"openQuantity",parseInt(i.openQuantity,0)<0?0:i.openQuantity),this.utilsService.updateObject(t,"uomId",i.uomId),this.utilsService.updateObject(t,"unitPrice",i.unitPrice),this.utilsService.updateObject(t,"warehouseId",i.warehouseId),this.utilsService.updateObject(t,"binId",i.binId),this.utilsService.updateObject(t,"hsnId",i.hsnId),this.utilsService.updateObject(t,"discountPercentage",i.discountPercentage),this.utilsService.updateObject(t,"taxId",i.taxId),this.utilsService.updateObject(t,"itemTaxPercentage",i.itemTaxPercentage),this.utilsService.updateObject(t,"itemTaxValue",i.itemTaxValue),this.utilsService.updateObject(t,"totalItemAmount",i.totalItemAmount),this.utilsService.updateObject(t,"itemWeight",i.itemWeight),this.utilsService.isEmpty(i.distributionRulesId)||(t.distributionRulesId[0]=this.branchUtilsService.distRulesRemoveZeroPatternOnEdit(i.distributionRulesId)),this.utilsService.updateObject(t,"id",i.id),this.utilsService.updateObject(t,"copyFromType",i.copyFromType),this.utilsService.updateObject(t,"copyFromId",i.copyFromId),this.utilsService.updateObject(t,"orderedQuantity",i.orderedQuantity),"purchaseRequest"===e&&this.utilsService.updateObject(t,"requiredDate",i.requiredDate,"date")}},{key:"getSaveUpdateDataFormation",value:function(e,t){var i=this,r=t.getRawValue(),n={documentNumberingId:r.documentNumberingId,documentNumber:r.documentNumber,documentNumberingType:r.documentNumberingType,postingDate:this.utilsService.getBackendDateFormat(r.postingDate),documentDate:this.utilsService.getBackendDateFormat(r.documentDate),status:r.status,remarks:r.remarks,totalBeforeDiscount:r.totalBeforeDiscount,discountPercentage:r.discountPercentage,discountValue:r.discountValue,taxPercentage:r.taxPercentage,roundingFlag:r.roundingOffCheckbox?1:0,rounding:r.rounding,totalAmount:r.totalAmount,itemListArray:[]};return"purchaseRequest"===e?(n.requesterTypeId=r.requesterTypeId,n.requesterId=r.requesterId,n.validUntil=this.utilsService.getBackendDateFormat(r.validUntil)):"purchaseOrder"===e?(n.deliveryDate=this.utilsService.getBackendDateFormat(r.deliveryDate),n.requiredDate=this.utilsService.getBackendDateFormat(r.requiredDate)):"purchaseGrpo"===e&&(n.dueDate=this.utilsService.getBackendDateFormat(r.dueDate)),"purchaseRequest"!==e&&"purchaseOrder"!==e||(n.totalWeight=r.totalWeight),"purchaseOrder"!==e&&"purchaseGrpo"!==e||(n.vendorBpId=r.vendorBpId,n.vendorBpContactsId=r.vendorBpContactsId,n.currencyId=r.currencyId,n.referenceNumber=r.referenceNumber,n.buyerEmpId=r.buyerEmpId,n.vendorShipToBpAddressId=r.vendorShipToBpAddressId,n.vendorShipToAddress=r.vendorShipToAddress,n.vendorPayToBpAddressId=r.vendorPayToBpAddressId,n.vendorPayToAddress=r.vendorPayToAddress,n.paymentTermsId=r.paymentTermsId,n.paymentMethodId=r.paymentMethodId,n.cancellationDate=this.utilsService.getBackendDateFormat(r.cancellationDate),n.goodsInTransit=r.goodsInTransit?1:0,n.taxCode=r.taxCode),r.itemListArray.forEach((function(t){if("3"===r.status&&i.utilsService.isEmpty(t.id));else{var a={itemId:t.itemId,lastPrice:t.lastPrice,quantity:t.quantity,uomId:t.uomId,unitPrice:t.unitPrice,warehouseId:t.warehouseId,binId:t.binId,hsnId:t.hsnId,discountPercentage:t.discountPercentage,taxId:t.taxId,itemTaxPercentage:t.itemTaxPercentage,itemTaxValue:t.itemTaxValue,totalItemAmount:t.totalItemAmount,distributionRulesId:Array.isArray(t.distributionRulesId)?t.distributionRulesId.join(","):"",id:t.id,copyFromType:t.copyFromType,copyFromId:t.copyFromId,itemWeight:t.itemWeight};"purchaseRequest"===e&&(a.requiredDate=i.utilsService.getBackendDateFormat(t.requiredDate)),n.itemListArray.push(a)}})),n}},{key:"manipulationsOnEdit",value:function(e,t){"1"===t.value.status?(t.controls.documentNumberingId.disable(),t.controls.documentNumber.disable(),t.controls.roundingOffCheckbox.disable(),t.controls.rounding.disable(),"purchaseOrder"!==e&&"purchaseGrpo"!==e||t.controls.vendorBpId.disable(),t.controls.itemListArray.controls.forEach((function(t){var i=t.getRawValue();t.controls.itemId.disable(),parseInt(i.orderedQuantity,0)>0&&t.patchValue({showDeleteIcon:!1}),parseInt(i.openQuantity,0)<=0&&(t.disable(),t.patchValue({showDeleteIcon:!1})),"purchaseGrpo"===e&&t.patchValue({showDeleteIcon:!1})})),"purchaseGrpo"===e&&(t.disable(),t.controls.vendorBpContactsId.enable(),t.controls.documentDate.enable(),t.controls.dueDate.enable(),t.controls.buyerEmpId.enable(),t.controls.remarks.enable(),t.controls.status.enable())):t.enable()}},{key:"manipulationsOnCopy",value:function(e,t){"purchaseOrder"===e?t.controls.vendorBpId.enable():"purchaseGrpo"===e&&t.controls.vendorBpId.disable(),t.controls.itemListArray.controls.forEach((function(e){e.controls.itemId.disable()}))}},{key:"redirectToList",value:function(e){this.utilsService.redirect("/branch/purchase/purchase-txn-list/"+e)}},{key:"listFieldsVisibility",value:function(e,t){if("purchaseRequest"===e){if("requesterName"===t||"validUntil"===t)return!0}else if("purchaseOrder"===e){if("deliveryDate"===t)return!0}else if("purchaseGrpo"===e&&"dueDate"===t)return!0;return("purchaseOrder"===e||"purchaseGrpo"===e)&&"vendorBpName"===t}},{key:"getFormSearchFields",value:function(e){var t={fromDate:"",toDate:"",isDraft:!1,branchName:"",documentNumber:"",sapId:"",postingDate:"",status:1,totalAmount:""};return"purchaseRequest"===e?(t.requesterName="",t.validUntil=""):"purchaseOrder"===e?t.deliveryDate="":"purchaseGrpo"===e&&(t.dueDate=""),"purchaseOrder"!==e&&"purchaseGrpo"!==e||(t.vendorBpName=""),t}},{key:"getSearchDataFormation",value:function(e,t){var i={fromDate:this.utilsService.getBackendDateFormat(t.fromDate),toDate:this.utilsService.getBackendDateFormat(t.toDate),isDraft:t.isDraft?1:0,branchName:t.branchName,documentNumber:t.documentNumber,sapId:t.sapId,postingDate:this.utilsService.getBackendDateFormat(t.postingDate),status:t.status,totalAmount:t.totalAmount};return"purchaseRequest"===e?(i.requesterName=t.requesterName,i.validUntil=this.utilsService.getBackendDateFormat(t.validUntil)):"purchaseOrder"===e?i.deliveryDate=this.utilsService.getBackendDateFormat(t.deliveryDate):"purchaseGrpo"===e&&(i.dueDate=this.utilsService.getBackendDateFormat(t.dueDate)),"purchaseOrder"!==e&&"purchaseGrpo"!==e||(i.vendorBpName=t.vendorBpName),i}},{key:"redirectToAdd",value:function(e){this.utilsService.redirect("/branch/purchase/purchase-txn-add/"+e)}},{key:"redirectToEdit",value:function(e,t,i){this.utilsService.redirect("1"===i?"/branch/purchase/purchase-txn-edit-draft/"+e+"/"+this.utilsService.encrypt(t):"/branch/purchase/purchase-txn-edit/"+e+"/"+this.utilsService.encrypt(t))}},{key:"getAnalyticsData",value:function(e){var t=this,i=this.getScreenDataService(e);return new o.a((function(e){i.getAnalyticsData().subscribe((function(i){if("SUCCESS"===i.status){var r=d.orderBy(i.results,["id"],["asc"]);e.next(r),e.complete()}else t.utilsService.showFailureMsg(i),e.error(),e.complete()}))}))}},{key:"downloadAsExcel",value:function(e,t){var i=this;this.utilsService.showSuccessMsg("Processing to download the Excel..."),this.getScreenDataService(e).downloadAsExcel(t).subscribe((function(e){"SUCCESS"===e.status?i.utilsService.externalRedirect(e.fileUrl):i.utilsService.showFailureMsg(e)}))}},{key:"downloadPDF",value:function(e){var t=this;e.spiName===this.branchUtilsService.spiTxnId.purchase&&(this.utilsService.showSuccessMsg("Processing to download the PDF..."),this.getScreenDataService(e.screenName).downloadPDF(e.id).subscribe((function(e){t.utilsService.externalRedirect(e.url,!0)})))}}]),e}()).\u0275fac=function(e){return new(e||r)(s.Zb(a.g),s.Zb(a.f),s.Zb(c.a),s.Zb(l.K),s.Zb(l.J),s.Zb(l.s),s.Zb(u.e),s.Zb(l.Y))},r.\u0275prov=s.Lb({token:r,factory:r.\u0275fac}),r),m=i("ofXK"),p=i("eO1q"),h=i("rEr+"),f=i("7zfz"),v=i("Mfq2"),g=["dataTable"];function y(e,t){if(1&e){var i=s.Wb();s.Vb(0,"button",24),s.dc("click",(function(){s.Dc(i);var e=s.hc(2);return e.pTxnUtilsService.downloadAsExcel(e.inputScreenName,e.listingProperties)})),s.Qb(1,"i",25),s.Vb(2,"span"),s.Lc(3,"Download as Excel"),s.Ub(),s.Ub()}}function S(e,t){if(1&e&&(s.Vb(0,"div",26),s.Vb(1,"div",27),s.Vb(2,"div",28),s.Lc(3),s.Ub(),s.Vb(4,"div",29),s.Lc(5),s.Ub(),s.Ub(),s.Ub()),2&e){var i=t.$implicit,r=s.hc(2);s.Cb(3),s.Nc(" ",i.name," "),s.Cb(1),s.oc("ngClass",r.appConstants.TXN_STATUS_COLOR_CLS[i.id]),s.Cb(1),s.Mc(i.count)}}function I(e,t){1&e&&(s.Vb(0,"th",38),s.Lc(1," Branch Name"),s.Qb(2,"p-sortIcon",33),s.Ub()),2&e&&(s.oc("pSortableColumn","branchName"),s.Cb(2),s.oc("field","branchName"))}function C(e,t){1&e&&(s.Vb(0,"th",49),s.Lc(1,"Sap Doc No "),s.Qb(2,"p-sortIcon",33),s.Ub()),2&e&&(s.oc("pSortableColumn","sapId"),s.Cb(2),s.oc("field","sapId"))}function L(e,t){1&e&&(s.Vb(0,"th",50),s.Lc(1,"Requester Name "),s.Qb(2,"p-sortIcon",33),s.Ub()),2&e&&(s.oc("pSortableColumn","requesterName"),s.Cb(2),s.oc("field","requesterName"))}function U(e,t){1&e&&(s.Vb(0,"th",50),s.Lc(1,"Vendor Name"),s.Qb(2,"p-sortIcon",33),s.Ub()),2&e&&(s.oc("pSortableColumn","vendorBpName"),s.Cb(2),s.oc("field","vendorBpName"))}function V(e,t){1&e&&(s.Vb(0,"th",41),s.Lc(1,"Valid Until"),s.Qb(2,"p-sortIcon",33),s.Ub()),2&e&&(s.oc("pSortableColumn","validUntil"),s.Cb(2),s.oc("field","validUntil"))}function N(e,t){1&e&&(s.Vb(0,"th",51),s.Lc(1,"Delivery Date"),s.Qb(2,"p-sortIcon",33),s.Ub()),2&e&&(s.oc("pSortableColumn","deliveryDate"),s.Cb(2),s.oc("field","deliveryDate"))}function D(e,t){1&e&&(s.Vb(0,"th",41),s.Lc(1,"Due Date"),s.Qb(2,"p-sortIcon",33),s.Ub()),2&e&&(s.oc("pSortableColumn","dueDate"),s.Cb(2),s.oc("field","dueDate"))}function F(e,t){if(1&e){var i=s.Wb();s.Vb(0,"th"),s.Vb(1,"input",45),s.dc("ngModelChange",(function(e){return s.Dc(i),s.hc(3).searchForm.branchName=e}))("keyup.enter",(function(){return s.Dc(i),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&e){var r=s.hc(3);s.Cb(1),s.oc("ngModel",r.searchForm.branchName)}}function x(e,t){if(1&e){var i=s.Wb();s.Vb(0,"th"),s.Vb(1,"input",45),s.dc("ngModelChange",(function(e){return s.Dc(i),s.hc(3).searchForm.sapId=e}))("keyup.enter",(function(){return s.Dc(i),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&e){var r=s.hc(3);s.Cb(1),s.oc("ngModel",r.searchForm.sapId)}}function T(e,t){if(1&e){var i=s.Wb();s.Vb(0,"th"),s.Vb(1,"input",45),s.dc("ngModelChange",(function(e){return s.Dc(i),s.hc(3).searchForm.requesterName=e}))("keyup.enter",(function(){return s.Dc(i),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&e){var r=s.hc(3);s.Cb(1),s.oc("ngModel",r.searchForm.requesterName)}}function A(e,t){if(1&e){var i=s.Wb();s.Vb(0,"th"),s.Vb(1,"input",45),s.dc("ngModelChange",(function(e){return s.Dc(i),s.hc(3).searchForm.vendorBpName=e}))("keyup.enter",(function(){return s.Dc(i),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&e){var r=s.hc(3);s.Cb(1),s.oc("ngModel",r.searchForm.vendorBpName)}}function E(e,t){if(1&e){var i=s.Wb();s.Vb(0,"th"),s.Vb(1,"p-calendar",12),s.dc("ngModelChange",(function(e){return s.Dc(i),s.hc(3).searchForm.validUntil=e}))("onSelect",(function(){return s.Dc(i),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&e){var r=s.hc(3);s.Cb(1),s.oc("ngModel",r.searchForm.validUntil)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT)}}function R(e,t){if(1&e){var i=s.Wb();s.Vb(0,"th"),s.Vb(1,"p-calendar",12),s.dc("ngModelChange",(function(e){return s.Dc(i),s.hc(3).searchForm.deliveryDate=e}))("onSelect",(function(){return s.Dc(i),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&e){var r=s.hc(3);s.Cb(1),s.oc("ngModel",r.searchForm.deliveryDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT)}}function P(e,t){if(1&e){var i=s.Wb();s.Vb(0,"th"),s.Vb(1,"p-calendar",12),s.dc("ngModelChange",(function(e){return s.Dc(i),s.hc(3).searchForm.dueDate=e}))("onSelect",(function(){return s.Dc(i),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&e){var r=s.hc(3);s.Cb(1),s.oc("ngModel",r.searchForm.dueDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT)}}function O(e,t){if(1&e&&(s.Vb(0,"option",52),s.Lc(1),s.Ub()),2&e){var i=t.$implicit;s.oc("value",i.id),s.Cb(1),s.Nc(" ",i.name," ")}}function k(e,t){if(1&e){var i=s.Wb();s.Vb(0,"tr"),s.Vb(1,"th",30),s.Lc(2,"Actions"),s.Ub(),s.Jc(3,I,3,2,"th",31),s.Vb(4,"th",32),s.Lc(5,"Overdue"),s.Qb(6,"p-sortIcon",33),s.Ub(),s.Vb(7,"th",34),s.Lc(8,"Doc No"),s.Qb(9,"p-sortIcon",33),s.Ub(),s.Jc(10,C,3,2,"th",35),s.Jc(11,L,3,2,"th",36),s.Jc(12,U,3,2,"th",36),s.Vb(13,"th",37),s.Lc(14,"Line Items Count"),s.Ub(),s.Vb(15,"th",38),s.Lc(16,"Posting Date"),s.Qb(17,"p-sortIcon",33),s.Ub(),s.Jc(18,V,3,2,"th",39),s.Jc(19,N,3,2,"th",40),s.Jc(20,D,3,2,"th",39),s.Vb(21,"th",41),s.Lc(22,"Status"),s.Qb(23,"p-sortIcon",33),s.Ub(),s.Vb(24,"th",32),s.Lc(25,"Amount"),s.Qb(26,"p-sortIcon",33),s.Ub(),s.Ub(),s.Vb(27,"tr",42),s.Vb(28,"th"),s.Vb(29,"a",43),s.dc("click",(function(){return s.Dc(i),s.hc(2).clearSearchForm()})),s.Qb(30,"i",44),s.Lc(31,"Clear"),s.Ub(),s.Ub(),s.Jc(32,F,2,1,"th",0),s.Qb(33,"th"),s.Vb(34,"th"),s.Vb(35,"input",45),s.dc("ngModelChange",(function(e){return s.Dc(i),s.hc(2).searchForm.documentNumber=e}))("keyup.enter",(function(){return s.Dc(i),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Jc(36,x,2,1,"th",0),s.Jc(37,T,2,1,"th",0),s.Jc(38,A,2,1,"th",0),s.Qb(39,"th"),s.Vb(40,"th"),s.Vb(41,"p-calendar",12),s.dc("ngModelChange",(function(e){return s.Dc(i),s.hc(2).searchForm.postingDate=e}))("onSelect",(function(){return s.Dc(i),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Jc(42,E,2,5,"th",0),s.Jc(43,R,2,5,"th",0),s.Jc(44,P,2,5,"th",0),s.Vb(45,"th"),s.Vb(46,"select",46),s.dc("ngModelChange",(function(e){return s.Dc(i),s.hc(2).searchForm.status=e}))("change",(function(){return s.Dc(i),s.hc(2).resetListing()})),s.Vb(47,"option",47),s.Lc(48,"--SELECT--"),s.Ub(),s.Jc(49,O,2,2,"option",48),s.Ub(),s.Ub(),s.Vb(50,"th"),s.Vb(51,"input",45),s.dc("ngModelChange",(function(e){return s.Dc(i),s.hc(2).searchForm.totalAmount=e}))("keyup.enter",(function(){return s.Dc(i),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Ub()}if(2&e){var r=s.hc(2);s.Cb(3),s.oc("ngIf",!r.storageService.get("isSingleBranchUser")),s.Cb(1),s.oc("pSortableColumn","overDueValue"),s.Cb(2),s.oc("field","overDueValue"),s.Cb(1),s.oc("pSortableColumn","documentNumber"),s.Cb(2),s.oc("field","documentNumber"),s.Cb(1),s.oc("ngIf",r.storageService.get("isSap")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.listFieldsVisibility(r.inputScreenName,"requesterName")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.listFieldsVisibility(r.inputScreenName,"vendorBpName")),s.Cb(3),s.oc("pSortableColumn","postingDate"),s.Cb(2),s.oc("field","postingDate"),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.listFieldsVisibility(r.inputScreenName,"validUntil")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.listFieldsVisibility(r.inputScreenName,"deliveryDate")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.listFieldsVisibility(r.inputScreenName,"dueDate")),s.Cb(1),s.oc("pSortableColumn","status"),s.Cb(2),s.oc("field","status"),s.Cb(1),s.oc("pSortableColumn","totalAmount"),s.Cb(2),s.oc("field","totalAmount"),s.Cb(6),s.oc("ngIf",!r.storageService.get("isSingleBranchUser")),s.Cb(3),s.oc("ngModel",r.searchForm.documentNumber),s.Cb(1),s.oc("ngIf",r.storageService.get("isSap")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.listFieldsVisibility(r.inputScreenName,"requesterName")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.listFieldsVisibility(r.inputScreenName,"vendorBpName")),s.Cb(3),s.oc("ngModel",r.searchForm.postingDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.listFieldsVisibility(r.inputScreenName,"validUntil")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.listFieldsVisibility(r.inputScreenName,"deliveryDate")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.listFieldsVisibility(r.inputScreenName,"dueDate")),s.Cb(2),s.oc("ngModel",r.searchForm.status),s.Cb(3),s.oc("ngForOf",r.statusList),s.Cb(2),s.oc("ngModel",r.searchForm.totalAmount)}}function B(e,t){if(1&e&&(s.Vb(0,"td"),s.Lc(1),s.Ub()),2&e){var i=s.hc().$implicit;s.Cb(1),s.Mc(i.branchName)}}function K(e,t){if(1&e&&(s.Vb(0,"span",57),s.Lc(1),s.Ub()),2&e){var i=s.hc().$implicit;s.Cb(1),s.Nc("",i.overDueValue," Days")}}function q(e,t){if(1&e&&(s.Vb(0,"td"),s.Lc(1),s.Ub()),2&e){var i=s.hc().$implicit;s.Cb(1),s.Mc(i.sapId)}}function w(e,t){if(1&e&&(s.Vb(0,"td"),s.Qb(1,"img",58),s.Lc(2),s.Ub()),2&e){var i=s.hc().$implicit,r=s.hc(2);s.Cb(1),s.oc("src",i.empImgUrl?i.empImgUrl:r.appConstants.DEFAULT_USER_ICON,s.Fc),s.Cb(1),s.Oc("\xa0",i.requesterCode," - ",i.requesterName," ")}}function M(e,t){if(1&e&&(s.Vb(0,"td"),s.Lc(1),s.Ub()),2&e){var i=s.hc().$implicit;s.Cb(1),s.Oc("",i.vendorBpCode," - ",i.vendorBpName,"")}}function J(e,t){if(1&e&&(s.Vb(0,"td"),s.Lc(1),s.Ub()),2&e){var i=s.hc().$implicit;s.Cb(1),s.Nc("",i.validUntil," ")}}function G(e,t){if(1&e&&(s.Vb(0,"td"),s.Lc(1),s.Ub()),2&e){var i=s.hc().$implicit;s.Cb(1),s.Nc("",i.deliveryDate," ")}}function Q(e,t){if(1&e&&(s.Vb(0,"td"),s.Lc(1),s.Ub()),2&e){var i=s.hc().$implicit;s.Cb(1),s.Mc(i.dueDate)}}function _(e,t){if(1&e){var i=s.Wb();s.Vb(0,"tr"),s.Vb(1,"td"),s.Vb(2,"a",53),s.dc("click",(function(){s.Dc(i);var e=t.$implicit,r=s.hc(2);return r.pTxnUtilsService.redirectToEdit(r.inputScreenName,e.id,e.isDraft)})),s.Qb(3,"i",54),s.Ub(),s.Ub(),s.Jc(4,B,2,1,"td",0),s.Vb(5,"td"),s.Jc(6,K,2,1,"span",55),s.Ub(),s.Vb(7,"td"),s.Lc(8),s.Ub(),s.Jc(9,q,2,1,"td",0),s.Jc(10,w,3,3,"td",0),s.Jc(11,M,2,2,"td",0),s.Vb(12,"td"),s.Lc(13),s.Ub(),s.Vb(14,"td"),s.Lc(15),s.Ub(),s.Jc(16,J,2,1,"td",0),s.Jc(17,G,2,1,"td",0),s.Jc(18,Q,2,1,"td",0),s.Vb(19,"td"),s.Vb(20,"span",56),s.Lc(21),s.Ub(),s.Ub(),s.Vb(22,"td"),s.Lc(23),s.Ub(),s.Ub()}if(2&e){var r=t.$implicit,n=s.hc(2);s.Cb(4),s.oc("ngIf",!n.storageService.get("isSingleBranchUser")),s.Cb(2),s.oc("ngIf",1==r.status&&r.overDueValue<0),s.Cb(2),s.Mc(r.documentNumber),s.Cb(1),s.oc("ngIf",n.storageService.get("isSap")),s.Cb(1),s.oc("ngIf",n.pTxnUtilsService.listFieldsVisibility(n.inputScreenName,"requesterName")),s.Cb(1),s.oc("ngIf",n.pTxnUtilsService.listFieldsVisibility(n.inputScreenName,"vendorBpName")),s.Cb(2),s.Mc(r.lineItemInfo.length),s.Cb(2),s.Mc(r.postingDate),s.Cb(1),s.oc("ngIf",n.pTxnUtilsService.listFieldsVisibility(n.inputScreenName,"validUntil")),s.Cb(1),s.oc("ngIf",n.pTxnUtilsService.listFieldsVisibility(n.inputScreenName,"deliveryDate")),s.Cb(1),s.oc("ngIf",n.pTxnUtilsService.listFieldsVisibility(n.inputScreenName,"dueDate")),s.Cb(2),s.oc("ngClass",n.appConstants.TXN_STATUS_COLOR_CLS[r.status]),s.Cb(1),s.Mc(r.statusName),s.Cb(2),s.Mc(r.totalAmount)}}function W(e,t){if(1&e){var i=s.Wb();s.Tb(0),s.Vb(1,"div",1),s.Vb(2,"span"),s.Lc(3),s.Ub(),s.Lc(4),s.Vb(5,"div",2),s.Jc(6,y,4,0,"button",3),s.Vb(7,"button",4),s.dc("click",(function(){s.Dc(i);var e=s.hc();return e.pTxnUtilsService.redirectToAdd(e.inputScreenName)})),s.Qb(8,"i",5),s.Vb(9,"span"),s.Lc(10),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(11,"div",6),s.Vb(12,"div",7),s.Vb(13,"div",8),s.Jc(14,S,6,3,"div",9),s.Ub(),s.Ub(),s.Vb(15,"div",8),s.Vb(16,"div",10),s.Vb(17,"label",11),s.Vb(18,"strong"),s.Lc(19,"From Date"),s.Ub(),s.Ub(),s.Vb(20,"p-calendar",12),s.dc("ngModelChange",(function(e){return s.Dc(i),s.hc().searchForm.fromDate=e}))("onSelect",(function(){return s.Dc(i),s.hc().resetListing()})),s.Ub(),s.Ub(),s.Vb(21,"div",10),s.Vb(22,"label",11),s.Vb(23,"strong"),s.Lc(24,"To Date"),s.Ub(),s.Ub(),s.Vb(25,"p-calendar",13),s.dc("ngModelChange",(function(e){return s.Dc(i),s.hc().searchForm.toDate=e}))("onSelect",(function(){return s.Dc(i),s.hc().resetListing()})),s.Ub(),s.Ub(),s.Vb(26,"div",14),s.Vb(27,"label",15),s.Vb(28,"input",16),s.dc("ngModelChange",(function(e){return s.Dc(i),s.hc().searchForm.isDraft=e}))("change",(function(){return s.Dc(i),s.hc().resetListing()})),s.Ub(),s.Qb(29,"span",17),s.Lc(30," Show Only Drafts "),s.Ub(),s.Ub(),s.Ub(),s.Vb(31,"div",8),s.Vb(32,"div",18),s.Vb(33,"div",19),s.Vb(34,"p-table",20,21),s.dc("onLazyLoad",(function(e){return s.Dc(i),s.hc().getListing(e)})),s.Jc(36,k,52,33,"ng-template",22),s.Jc(37,_,24,14,"ng-template",23),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Sb()}if(2&e){var r=s.hc();s.Cb(3),s.Mc(r.branchUtilsService.txnGetTitle(r.screenAttributes.title,!0)),s.Cb(1),s.Nc("",r.branchUtilsService.txnGetTitle(r.screenAttributes.title)," - List "),s.Cb(2),s.oc("ngIf",r.screenAcl.download),s.Cb(4),s.Nc("Add ",r.screenAttributes.title,""),s.Cb(4),s.oc("ngForOf",r.analyticsData),s.Cb(6),s.oc("ngModel",r.searchForm.fromDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),s.Cb(5),s.oc("ngModel",r.searchForm.toDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT)("minDate",r.searchForm.fromDate),s.Cb(3),s.oc("ngModel",r.searchForm.isDraft),s.Cb(6),s.oc("value",r.listing.data)("lazy",!0)("paginator",!0)("rows",r.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",r.listing.totalRecords)}}var z,j=((z=function(){function e(t,i,r,n,s,c,o){_classCallCheck(this,e),this.activatedRoute=t,this.utilsService=i,this.storageService=r,this.authGuardService=n,this.branchUtilsService=s,this.pTxnUtilsService=c,this.commonDataService=o,this.appConstants=a.h,this.screenAcl={},this.analyticsData=[],this.statusList=[],this.screenAttributes={},this.screenDataService={},this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}return _createClass(e,[{key:"ngOnInit",value:function(){this.initializeSubscriptions()}},{key:"initializeSubscriptions",value:function(){var e=this;this.activatedRoute.params.subscribe((function(t){return e.pTxnUtilsService.checkScreenNameValid(t.screenName)?(e.screenAcl=e.authGuardService.getScreenAcl(e.branchUtilsService.screenAttributes[t.screenName].documentTypeId),e.screenAcl.view?(e.reInitializeGlobalVariables(),e.inputScreenName=t.screenName,void e.transactionInitialization()):(e.utilsService.showFailureMsg(a.h.ACL_UNAUTHORIZED_MSG),e.utilsService.goBack(),!1)):(e.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),e.utilsService.goBack(),!1)}))}},{key:"reInitializeGlobalVariables",value:function(){this.inputScreenName="",this.screenAttributes={},this.screenDataService={},this.analyticsData=[],this.statusList=[],this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}},{key:"transactionInitialization",value:function(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.inputScreenName],this.screenDataService=this.pTxnUtilsService.getScreenDataService(this.inputScreenName),this.searchForm=this.pTxnUtilsService.getFormSearchFields(this.inputScreenName),this.getAutoSuggestionList("getPurchaseTransStatusList"),this.getAnalyticsData(),this.dataTable&&this.resetListing()}},{key:"getListing",value:function(e){var t=this,i=this.pTxnUtilsService.getSearchDataFormation(this.inputScreenName,this.searchForm),r=this.utilsService.dataTableParameterFormation(e,i);this.listingProperties=r,this.screenDataService.getList(r).subscribe((function(e){"SUCCESS"===e.status?(t.listing.data=e.results.searchResults,t.listing.totalRecords=e.results.totalRecords):t.utilsService.showFailureMsg(e)}))}},{key:"clearSearchForm",value:function(){this.searchForm=this.pTxnUtilsService.getFormSearchFields(this.inputScreenName),this.resetListing()}},{key:"resetListing",value:function(){this.dataTable.reset()}},{key:"getAutoSuggestionList",value:function(e){var t=this;this.commonDataService.getAutoSuggestionList(e).subscribe((function(i){"SUCCESS"===i.status?"getPurchaseTransStatusList"===e&&(t.statusList=i.results):t.utilsService.showFailureMsg(i)}))}},{key:"getAnalyticsData",value:function(){var e=this;this.pTxnUtilsService.getAnalyticsData(this.inputScreenName).subscribe((function(t){e.analyticsData=t}))}}]),e}()).\u0275fac=function(e){return new(e||z)(s.Pb(n.a),s.Pb(a.g),s.Pb(a.f),s.Pb(a.a),s.Pb(c.a),s.Pb(b),s.Pb(l.l))},z.\u0275cmp=s.Jb({type:z,selectors:[["app-purchase-txn-list"]],viewQuery:function(e,t){var i;1&e&&s.Pc(g,!0),2&e&&s.zc(i=s.ec())&&(t.dataTable=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-plus"],[1,"working-container"],[1,"analytics"],[1,"row"],["class","col-lg-2 col-md-3 col-sm-4 col-xs-12",4,"ngFor","ngForOf"],[1,"form-group","col-sm-3"],[1,"form-label"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","ngModelChange","onSelect"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","minDate","ngModelChange","onSelect"],[1,"form-group","col-sm-6","text-right"],[1,"checkbox","mt-3"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"checkmark"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-file-excel"],[1,"col-lg-2","col-md-3","col-sm-4","col-xs-12"],[1,"item"],[1,"name"],[1,"count",3,"ngClass"],[2,"width","80px"],["style","width:150px",3,"pSortableColumn",4,"ngIf"],[2,"width","100px",3,"pSortableColumn"],[3,"field"],[2,"width","90px",3,"pSortableColumn"],["style","width:110px",3,"pSortableColumn",4,"ngIf"],["style","width:250px",3,"pSortableColumn",4,"ngIf"],[2,"width","120px"],[2,"width","150px",3,"pSortableColumn"],["style","width:120px",3,"pSortableColumn",4,"ngIf"],["style","width:130px",3,"pSortableColumn",4,"ngIf"],[2,"width","120px",3,"pSortableColumn"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[2,"width","110px",3,"pSortableColumn"],[2,"width","250px",3,"pSortableColumn"],[2,"width","130px",3,"pSortableColumn"],[3,"value"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"click"],[1,"fa","fa-edit"],["class","badge badge-danger",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"badge","badge-danger"],["height","20px",3,"src"]],template:function(e,t){1&e&&s.Jc(0,W,38,22,"ng-container",0),2&e&&s.oc("ngIf",t.screenAcl.view)},directives:[m.m,m.l,p.a,u.m,u.o,u.a,h.c,f.b,m.k,h.b,h.a,v.a,u.b,u.t,u.p,u.v],styles:[""]}),z),$=i("Kj3r"),H=i("/uUt"),Y=i("vkgz"),Z=i("w9rb"),X=i("TlXv"),ee=i("fIZe"),te=i("K3ix"),ie=i("ZOsW"),re=i("umDy"),ne=i("EDFS"),ae=["hActions"],se=["hSno"],ce=["hItemName"],oe=["hRequiredDate"],ue=["hQuantity"],de=["hOpenQty"],le=["hUOM"],be=["hUnitPrice"],me=["hWarehouse"],pe=["hBin"],he=["hHSN"],fe=["hDiscount"],ve=["hTaxCode"],ge=["hTax"],ye=["hTotal"],Se=["hDistRules"],Ie=["hWeight"],Ce=["bActions"],Le=["bSno"],Ue=["bItemName"],Ve=["bRequiredDate"],Ne=["bQuantity"],De=["bOpenQty"],Fe=["bUOM"],xe=["bUnitPrice"],Te=["bWarehouse"],Ae=["bBin"],Ee=["bHSN"],Re=["bDiscount"],Pe=["bTaxCode"],Oe=["bTax"],ke=["bTotal"],Be=["bDistRules"],Ke=["bWeight"];function qe(e,t){1&e&&(s.Tb(0),s.Lc(1,"Add"),s.Sb())}function we(e,t){1&e&&(s.Tb(0),s.Lc(1,"Edit"),s.Sb())}function Me(e,t){if(1&e){var i=s.Wb();s.Vb(0,"button",5),s.dc("click",(function(){return s.Dc(i),s.hc(2).downloadPdf()})),s.Qb(1,"i",89),s.Vb(2,"span"),s.Lc(3,"Print"),s.Ub(),s.Ub()}}function Je(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(2);s.Cb(1),s.Nc(" ",i.myFormErrors1.documentNumberingId?i.myFormErrors1.documentNumberingId:i.myFormErrors1.documentNumber," ")}}function Ge(e,t){if(1&e&&(s.Vb(0,"option",93),s.Lc(1),s.Ub()),2&e){var i=t.$implicit;s.oc("value",i.id),s.Cb(1),s.Mc(i.name)}}function Qe(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(3);s.Cb(1),s.Nc(" ",i.myFormErrors1.requesterTypeId," ")}}function _e(e,t){if(1&e){var i=s.Wb();s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Requester Type"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Vb(5,"select",91),s.dc("change",(function(){return s.Dc(i),s.hc(2).getRequesterList()})),s.Vb(6,"option",92),s.Lc(7,"--SELECT--"),s.Ub(),s.Jc(8,Ge,2,2,"option",26),s.Ub(),s.Jc(9,Qe,2,1,"div",21),s.Ub()}if(2&e){var r=s.hc(2);s.Cb(8),s.oc("ngForOf",r.requesterTypeList),s.Cb(1),s.oc("ngIf",r.myFormErrors1.requesterTypeId)}}function We(e,t){if(1&e&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&e){var i=t.item;s.Cb(1),s.Nc("",i.employeeName,"\xa0"),s.Cb(2),s.Nc("(",i.empCode,")")}}function ze(e,t){if(1&e){var i=s.Wb();s.Vb(0,"span",98),s.dc("click",(function(){s.Dc(i);var e=s.hc(3);return e.popupExternalService.showDetailPopup("employee",e.myForm1Data.requesterId)})),s.Qb(1,"i",99),s.Ub()}}function je(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(3);s.Cb(1),s.Nc(" ",i.myFormErrors1.requesterId," ")}}function $e(e,t){if(1&e&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Requester Name"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Vb(5,"div",94),s.Vb(6,"ng-select",95),s.Jc(7,We,4,2,"ng-template",96),s.Ub(),s.Jc(8,ze,2,0,"span",97),s.Ub(),s.Jc(9,je,2,1,"div",21),s.Ub()),2&e){var i=s.hc(2);s.Cb(6),s.oc("items",i.requesterList)("multiple",!1),s.Cb(2),s.oc("ngIf",i.myForm1Data.requesterId),s.Cb(1),s.oc("ngIf",i.myFormErrors1.requesterId)}}function He(e,t){if(1&e&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&e){var i=t.item;s.Cb(1),s.Nc("",i.partnerName,"\xa0"),s.Cb(2),s.Nc("(",i.partnerCode,")")}}function Ye(e,t){if(1&e){var i=s.Wb();s.Vb(0,"a",104),s.dc("click",(function(){return s.Dc(i),s.hc(3).bizRefreshFlag=!0})),s.Qb(1,"i",105),s.Ub()}}function Ze(e,t){if(1&e){var i=s.Wb();s.Vb(0,"a",106),s.dc("click",(function(){s.Dc(i);var e=s.hc(3);return e.getVendorBpList(),e.bizRefreshFlag=!1})),s.Qb(1,"i",107),s.Ub()}}function Xe(e,t){if(1&e){var i=s.Wb();s.Vb(0,"span",98),s.dc("click",(function(){s.Dc(i);var e=s.hc(3);return e.popupExternalService.showDetailPopup("biz-partner",e.myForm1Data.vendorBpId)})),s.Qb(1,"i",99),s.Ub()}}function et(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(3);s.Cb(1),s.Nc(" ",i.myFormErrors1.vendorBpId," ")}}function tt(e,t){if(1&e){var i=s.Wb();s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Vendor Name"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Vb(5,"div",100),s.Vb(6,"ng-select",101),s.dc("focus",(function(){return s.Dc(i),s.hc(2).onVendorNameChange()}))("change",(function(){s.Dc(i);var e=s.hc(2);return e.getVendorBpContactList(),e.branchUtilsService.txnSetCurrency(e.vendorBpList,e.myForm1,"vendorBpId","currencyId"),e.branchUtilsService.txnSetTermsAndMethods(e.vendorBpList,e.myForm1,"vendorBpId"),e.branchUtilsService.txnPaymentTermsChange(e.txnKeys.inputScreenName,e.paymentTermsList,e.myForm1,"paymentTermsId"),e.getVendorBpAddressShipToList(),e.getVendorBpAddressPayToList(),e.showTxnOptionsSidebar(!1)})),s.Jc(7,He,4,2,"ng-template",96),s.Ub(),s.Vb(8,"span"),s.Jc(9,Ye,2,0,"a",102),s.Jc(10,Ze,2,0,"a",103),s.Ub(),s.Jc(11,Xe,2,0,"span",97),s.Ub(),s.Jc(12,et,2,1,"div",21),s.Ub()}if(2&e){var r=s.hc(2);s.Cb(6),s.oc("items",r.vendorBpList)("multiple",!1),s.Cb(3),s.oc("ngIf",!r.bizRefreshFlag),s.Cb(1),s.oc("ngIf",r.bizRefreshFlag),s.Cb(1),s.oc("ngIf",r.myForm1Data.vendorBpId),s.Cb(1),s.oc("ngIf",r.myFormErrors1.vendorBpId)}}function it(e,t){if(1&e&&(s.Vb(0,"div"),s.Lc(1),s.Ub(),s.Vb(2,"small"),s.Lc(3),s.Ub()),2&e){var i=t.item;s.Cb(1),s.Mc(i.contactName),s.Cb(2),s.Oc("",i.contactTypeName," / ",i.contactNumber,"")}}function rt(e,t){if(1&e&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Contact Person"),s.Ub(),s.Vb(3,"ng-select",108),s.Jc(4,it,4,3,"ng-template",96),s.Ub(),s.Ub()),2&e){var i=s.hc(2);s.Cb(3),s.oc("items",i.vendorBpContactList)("multiple",!1)}}function nt(e,t){if(1&e&&(s.Vb(0,"option",93),s.Lc(1),s.Ub()),2&e){var i=t.$implicit;s.oc("value",i.id),s.Cb(1),s.Mc(i.currencyName)}}function at(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(3);s.Cb(1),s.Nc(" ",i.myFormErrors1.currencyId," ")}}function st(e,t){if(1&e&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Currency"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Vb(5,"select",109),s.Vb(6,"option",92),s.Lc(7,"--SELECT--"),s.Ub(),s.Jc(8,nt,2,2,"option",26),s.Ub(),s.Jc(9,at,2,1,"div",21),s.Ub()),2&e){var i=s.hc(2);s.Cb(8),s.oc("ngForOf",i.currencyList),s.Cb(1),s.oc("ngIf",i.myFormErrors1.currencyId)}}function ct(e,t){1&e&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Reference No"),s.Ub(),s.Qb(3,"input",110),s.Ub())}function ot(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(2);s.Cb(1),s.Nc(" ",i.myFormErrors1.postingDate," ")}}function ut(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(2);s.Cb(1),s.Nc(" ",null==i.myForm1.errors?null:i.myForm1.errors.invalidPostingDate," ")}}function dt(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(3);s.Cb(1),s.Nc(" ",i.myFormErrors1.validUntil," ")}}function lt(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(3);s.Cb(1),s.Nc(" ",null==i.myForm1.errors?null:i.myForm1.errors.invalidValidUntilDate," ")}}function bt(e,t){if(1&e&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Valid Until"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Qb(5,"p-calendar",111),s.Jc(6,dt,2,1,"div",21),s.Jc(7,lt,2,1,"div",21),s.Ub()),2&e){var i=s.hc(2);s.Cb(5),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.appConstants.PICKER_YEAR_RANGE)("dateFormat",i.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",i.myFormErrors1.validUntil),s.Cb(1),s.oc("ngIf",null==i.myForm1.errors?null:i.myForm1.errors.invalidValidUntilDate)}}function mt(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(3);s.Cb(1),s.Nc(" ",i.myFormErrors1.deliveryDate," ")}}function pt(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(3);s.Cb(1),s.Nc(" ",null==i.myForm1.errors?null:i.myForm1.errors.invalidDeliveryDate," ")}}function ht(e,t){if(1&e&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Delivery Date"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Qb(5,"p-calendar",112),s.Jc(6,mt,2,1,"div",21),s.Jc(7,pt,2,1,"div",21),s.Ub()),2&e){var i=s.hc(2);s.Cb(5),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.appConstants.PICKER_YEAR_RANGE)("dateFormat",i.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",i.myFormErrors1.deliveryDate),s.Cb(1),s.oc("ngIf",null==i.myForm1.errors?null:i.myForm1.errors.invalidDeliveryDate)}}function ft(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(3);s.Cb(1),s.Nc(" ",i.myFormErrors1.dueDate," ")}}function vt(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(3);s.Cb(1),s.Nc(" ",null==i.myForm1.errors?null:i.myForm1.errors.invalidDueDate," ")}}function gt(e,t){if(1&e&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Due Date"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Qb(5,"p-calendar",113),s.Jc(6,ft,2,1,"div",21),s.Jc(7,vt,2,1,"div",21),s.Ub()),2&e){var i=s.hc(2);s.Cb(5),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.appConstants.PICKER_YEAR_RANGE)("dateFormat",i.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",i.myFormErrors1.dueDate),s.Cb(1),s.oc("ngIf",null==i.myForm1.errors?null:i.myForm1.errors.invalidDueDate)}}function yt(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(2);s.Cb(1),s.Nc(" ",i.myFormErrors1.documentDate," ")}}function St(e,t){if(1&e&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&e){var i=t.item;s.Cb(1),s.Nc("",i.employeeName,"\xa0"),s.Cb(2),s.Nc("(",i.empCode,")")}}function It(e,t){if(1&e){var i=s.Wb();s.Vb(0,"span",98),s.dc("click",(function(){s.Dc(i);var e=s.hc(3);return e.popupExternalService.showDetailPopup("employee",e.myForm1Data.buyerEmpId)})),s.Qb(1,"i",99),s.Ub()}}function Ct(e,t){if(1&e&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Buyer"),s.Ub(),s.Vb(3,"div",94),s.Vb(4,"ng-select",114),s.Jc(5,St,4,2,"ng-template",96),s.Ub(),s.Jc(6,It,2,0,"span",97),s.Ub(),s.Ub()),2&e){var i=s.hc(2);s.Cb(4),s.oc("items",i.buyerEmployeeList)("multiple",!1),s.Cb(2),s.oc("ngIf",i.myForm1Data.buyerEmpId)}}function Lt(e,t){if(1&e&&(s.Vb(0,"option",93),s.Lc(1),s.Ub()),2&e){var i=t.$implicit;s.oc("value",i.id),s.Cb(1),s.Nc(" ",i.name," ")}}function Ut(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(2);s.Cb(1),s.Nc(" ",i.myFormErrors1.statusList," ")}}function Vt(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(2);s.Cb(1),s.Nc(" ",i.myFormErrors1.remarks," ")}}var Nt=function(e){return{data:e}};function Dt(e,t){if(1&e&&(s.Tb(0),s.Qb(1,"template",115),s.Sb()),2&e){var i=t.$implicit,r=s.hc(2);s.Cb(1),s.oc("ngTemplateOutlet",r[i.headerRef])("ngTemplateOutletContext",s.sc(2,Nt,i))}}var Ft=function(e,t){return{formItemListRow:e,i:t}};function xt(e,t){if(1&e&&(s.Tb(0),s.Qb(1,"template",115),s.Sb()),2&e){var i=t.$implicit,r=s.hc(),n=r.$implicit,a=r.index,c=s.hc(2);s.Cb(1),s.oc("ngTemplateOutlet",c[i.bodyRef])("ngTemplateOutletContext",s.tc(2,Ft,n,a))}}function Tt(e,t){if(1&e&&(s.Vb(0,"tr",116),s.Jc(1,xt,2,5,"ng-container",31),s.Ub()),2&e){var i=t.index,r=s.hc(2);s.oc("formGroupName",i),s.Cb(1),s.oc("ngForOf",r.itemListColumnOrder)}}function At(e,t){if(1&e){var i=s.Wb();s.Vb(0,"tfoot"),s.Vb(1,"tr"),s.Vb(2,"td",117),s.Vb(3,"button",118),s.dc("click",(function(){return s.Dc(i),s.hc(2).addItemFields()})),s.Qb(4,"i",105),s.Vb(5,"span"),s.Lc(6,"Add Item"),s.Ub(),s.Ub(),s.Lc(7," \xa0 "),s.Vb(8,"span",119),s.Lc(9,"Note:"),s.Ub(),s.Lc(10," Select Vendor to add items "),s.Ub(),s.Ub(),s.Ub()}if(2&e){var r=s.hc(2);s.Cb(3),s.oc("disabled",!r.myForm1Data.vendorBpId)}}function Et(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(2);s.Cb(1),s.Nc(" ",i.myFormErrors1.discountPercentage," ")}}function Rt(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(2);s.Cb(1),s.Nc(" ",i.myFormErrors1.rounding," ")}}function Pt(e,t){if(1&e&&(s.Vb(0,"option",93),s.Lc(1),s.Ub()),2&e){var i=t.$implicit;s.oc("value",i.id),s.Cb(1),s.Oc(" ",i.address," - ",i.city," ")}}function Ot(e,t){if(1&e&&(s.Vb(0,"option",93),s.Lc(1),s.Ub()),2&e){var i=t.$implicit;s.oc("value",i.id),s.Cb(1),s.Oc(" ",i.address," - ",i.city," ")}}function kt(e,t){if(1&e){var i=s.Wb();s.Vb(0,"div",10),s.Vb(1,"div",11),s.Qb(2,"i",12),s.Lc(3,"Logistics Info "),s.Ub(),s.Vb(4,"div",13),s.Vb(5,"div",14),s.Vb(6,"div",15),s.Vb(7,"label",16),s.Lc(8,"Ship From"),s.Ub(),s.Vb(9,"select",120),s.dc("change",(function(){s.Dc(i);var e=s.hc(2);return e.branchUtilsService.txnBpAddressChange(e.vendorBpAddressShipToList,e.myForm1,"vendorShipToBpAddressId","vendorShipToAddress")})),s.Vb(10,"option",92),s.Lc(11,"--SELECT--"),s.Ub(),s.Jc(12,Pt,2,3,"option",26),s.Ub(),s.Qb(13,"textarea",121),s.Ub(),s.Vb(14,"div",15),s.Vb(15,"label",16),s.Lc(16,"Pay To"),s.Ub(),s.Vb(17,"select",122),s.dc("change",(function(){s.Dc(i);var e=s.hc(2);return e.branchUtilsService.txnBpAddressChange(e.vendorBpAddressPayToList,e.myForm1,"vendorPayToBpAddressId","vendorPayToAddress"),e.branchUtilsService.txnSetTaxCode(e.vendorBpAddressPayToList,e.myForm1,"vendorPayToBpAddressId")})),s.Vb(18,"option",92),s.Lc(19,"--SELECT--"),s.Ub(),s.Jc(20,Ot,2,3,"option",26),s.Ub(),s.Qb(21,"textarea",123),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&e){var r=s.hc(2);s.Cb(12),s.oc("ngForOf",r.vendorBpAddressShipToList),s.Cb(8),s.oc("ngForOf",r.vendorBpAddressPayToList)}}function Bt(e,t){if(1&e&&(s.Vb(0,"option",93),s.Lc(1),s.Ub()),2&e){var i=t.$implicit;s.oc("value",i.id),s.Cb(1),s.Nc(" ",i.paymentTermName," ")}}function Kt(e,t){if(1&e&&(s.Vb(0,"option",93),s.Lc(1),s.Ub()),2&e){var i=t.$implicit;s.oc("value",i.id),s.Cb(1),s.Nc(" ",i.paymentMethodName," ")}}function qt(e,t){if(1&e&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2,"Required Date"),s.Ub(),s.Qb(3,"p-calendar",128),s.Ub()),2&e){var i=s.hc(3);s.Cb(3),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.appConstants.PICKER_YEAR_RANGE)("dateFormat",i.appConstants.PICKER_DATE_FORMAT)}}function wt(e,t){if(1&e){var i=s.Wb();s.Vb(0,"div",10),s.Vb(1,"div",11),s.Qb(2,"i",12),s.Lc(3,"Accounting Info "),s.Ub(),s.Vb(4,"div",13),s.Vb(5,"div",14),s.Vb(6,"div",15),s.Vb(7,"label",16),s.Lc(8,"Payment Terms"),s.Ub(),s.Vb(9,"select",124),s.dc("change",(function(){s.Dc(i);var e=s.hc(2);return e.branchUtilsService.txnPaymentTermsChange(e.txnKeys.inputScreenName,e.paymentTermsList,e.myForm1,"paymentTermsId")})),s.Vb(10,"option",92),s.Lc(11,"--SELECT--"),s.Ub(),s.Jc(12,Bt,2,2,"option",26),s.Ub(),s.Ub(),s.Vb(13,"div",15),s.Vb(14,"label",16),s.Lc(15,"Payment Method"),s.Ub(),s.Vb(16,"select",125),s.Vb(17,"option",92),s.Lc(18,"--SELECT--"),s.Ub(),s.Jc(19,Kt,2,2,"option",26),s.Ub(),s.Ub(),s.Vb(20,"div",15),s.Vb(21,"label",16),s.Lc(22,"Cancellation Date"),s.Ub(),s.Qb(23,"p-calendar",126),s.Ub(),s.Jc(24,qt,4,4,"div",22),s.Vb(25,"div",15),s.Vb(26,"label",16),s.Lc(27,"Goods in Transit"),s.Ub(),s.Qb(28,"br"),s.Vb(29,"label",43),s.Qb(30,"input",127),s.Qb(31,"span",45),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&e){var r=s.hc(2);s.Cb(12),s.oc("ngForOf",r.paymentTermsList),s.Cb(7),s.oc("ngForOf",r.paymentMethodsList),s.Cb(4),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnAccountingRequiredDate"))}}function Mt(e,t){1&e&&(s.Vb(0,"div",10),s.Vb(1,"div",11),s.Qb(2,"i",12),s.Lc(3,"Tax Info "),s.Ub(),s.Vb(4,"div",13),s.Vb(5,"div",14),s.Vb(6,"div",15),s.Vb(7,"label",16),s.Lc(8,"Tax code / GST / VAT"),s.Ub(),s.Qb(9,"input",129),s.Ub(),s.Ub(),s.Ub(),s.Ub())}function Jt(e,t){if(1&e){var i=s.Wb();s.Vb(0,"button",5),s.dc("click",(function(){return s.Dc(i),s.hc(2).saveUpdate()})),s.Qb(1,"i",130),s.Vb(2,"span"),s.Lc(3,"Save"),s.Ub(),s.Ub()}}function Gt(e,t){if(1&e){var i=s.Wb();s.Vb(0,"button",5),s.dc("click",(function(){return s.Dc(i),s.hc(2).addUpdateDraft()})),s.Qb(1,"i",130),s.Vb(2,"span"),s.Lc(3,"Save as Draft"),s.Ub(),s.Ub()}}function Qt(e,t){if(1&e){var i=s.Wb();s.Vb(0,"button",3),s.dc("click",(function(){return s.Dc(i),s.hc(2).clearForm()})),s.Qb(1,"i",131),s.Vb(2,"span"),s.Lc(3,"Clear"),s.Ub(),s.Ub()}}function _t(e,t){if(1&e){var i=s.Wb();s.Vb(0,"button",5),s.dc("click",(function(){return s.Dc(i),s.hc(2).saveUpdate("add")})),s.Qb(1,"i",107),s.Vb(2,"span"),s.Lc(3,"Add"),s.Ub(),s.Ub()}}function Wt(e,t){if(1&e){var i=s.Wb();s.Vb(0,"button",5),s.dc("click",(function(){return s.Dc(i),s.hc(2).saveUpdate()})),s.Qb(1,"i",107),s.Vb(2,"span"),s.Lc(3,"Update"),s.Ub(),s.Ub()}}function zt(e,t){if(1&e){var i=s.Wb();s.Vb(0,"button",3),s.dc("click",(function(){s.Dc(i);var e=s.hc(2);return e.pTxnUtilsService.redirectToList(e.txnKeys.inputScreenName)})),s.Qb(1,"i",132),s.Vb(2,"span"),s.Lc(3,"Cancel"),s.Ub(),s.Ub()}}function jt(e,t){1&e&&(s.Vb(0,"div",135),s.Vb(1,"span",119),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," You are unauthorized to "),s.Vb(4,"strong"),s.Lc(5,"update"),s.Ub(),s.Lc(6," this transaction! "),s.Ub())}function $t(e,t){1&e&&(s.Vb(0,"div",135),s.Vb(1,"span",119),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," Cannot update "),s.Vb(4,"strong"),s.Lc(5,"Cancelled"),s.Ub(),s.Lc(6," / "),s.Vb(7,"strong"),s.Lc(8,"Closed"),s.Ub(),s.Lc(9," / "),s.Vb(10,"strong"),s.Lc(11," Approved"),s.Ub(),s.Lc(12," transactions! "),s.Ub())}function Ht(e,t){if(1&e&&(s.Vb(0,"div",133),s.Vb(1,"div"),s.Vb(2,"strong"),s.Lc(3,"Created By:"),s.Ub(),s.Lc(4),s.Ub(),s.Jc(5,jt,7,0,"div",134),s.Jc(6,$t,13,0,"div",134),s.Ub()),2&e){var i=s.hc(2);s.Cb(4),s.Nc(" ",i.txnKeys.editCreatedName,""),s.Cb(1),s.oc("ngIf",i.branchUtilsService.txnValidateBtn(i.myForm1,i.txnKeys,"updateAclNote")),s.Cb(1),s.oc("ngIf",i.branchUtilsService.txnValidateBtn(i.myForm1,i.txnKeys,"updateNote"))}}function Yt(e,t){1&e&&(s.Vb(0,"div",133),s.Vb(1,"span",119),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," You are unauthorized to "),s.Vb(4,"strong"),s.Lc(5,"add"),s.Ub(),s.Lc(6," this transaction!. "),s.Ub())}function Zt(e,t){if(1&e&&(s.Vb(0,"th",136),s.Lc(1),s.Ub()),2&e){var i=t.data;s.Cb(1),s.Mc(i.name)}}function Xt(e,t){if(1&e&&(s.Vb(0,"th",137),s.Lc(1),s.Ub()),2&e){var i=t.data;s.Cb(1),s.Mc(i.name)}}function ei(e,t){if(1&e&&(s.Vb(0,"th",138),s.Lc(1),s.Vb(2,"span",17),s.Lc(3,"*"),s.Ub(),s.Ub()),2&e){var i=t.data;s.Cb(1),s.Mc(i.name)}}function ti(e,t){if(1&e&&(s.Vb(0,"th",140),s.Lc(1),s.Vb(2,"span",17),s.Lc(3,"*"),s.Ub(),s.Ub()),2&e){var i=s.hc().data;s.Cb(1),s.Nc(" ",i.name,"")}}function ii(e,t){if(1&e&&s.Jc(0,ti,4,1,"th",139),2&e){var i=s.hc(2);s.oc("ngIf",i.pTxnUtilsService.addFieldsVisibility(i.txnKeys.inputScreenName,"fnItemListRequiredDate"))}}function ri(e,t){if(1&e&&(s.Vb(0,"th",141),s.Lc(1),s.Vb(2,"span",17),s.Lc(3,"*"),s.Ub(),s.Ub()),2&e){var i=t.data;s.Cb(1),s.Mc(i.name)}}function ni(e,t){if(1&e&&(s.Vb(0,"th",141),s.Lc(1),s.Ub()),2&e){var i=t.data;s.Cb(1),s.Mc(i.name)}}function ai(e,t){if(1&e&&(s.Vb(0,"th",141),s.Lc(1),s.Ub()),2&e){var i=t.data;s.Cb(1),s.Mc(i.name)}}function si(e,t){if(1&e&&(s.Vb(0,"th",141),s.Lc(1),s.Ub()),2&e){var i=t.data;s.Cb(1),s.Mc(i.name)}}function ci(e,t){1&e&&(s.Vb(0,"span",17),s.Lc(1,"*"),s.Ub())}function oi(e,t){if(1&e&&(s.Vb(0,"th",38),s.Lc(1),s.Jc(2,ci,2,0,"span",142),s.Ub()),2&e){var i=t.data,r=s.hc(2);s.Cb(1),s.Mc(i.name),s.Cb(1),s.oc("ngIf","purchaseGrpo"===r.txnKeys.inputScreenName)}}function ui(e,t){1&e&&(s.Vb(0,"span",17),s.Lc(1,"*"),s.Ub())}function di(e,t){if(1&e&&(s.Vb(0,"th",38),s.Lc(1),s.Jc(2,ui,2,0,"span",142),s.Ub()),2&e){var i=t.data,r=s.hc(2);s.Cb(1),s.Mc(i.name),s.Cb(1),s.oc("ngIf","purchaseGrpo"===r.txnKeys.inputScreenName)}}function li(e,t){if(1&e&&(s.Vb(0,"th",141),s.Lc(1),s.Ub()),2&e){var i=t.data;s.Cb(1),s.Mc(i.name)}}function bi(e,t){if(1&e&&(s.Vb(0,"th",141),s.Lc(1),s.Ub()),2&e){var i=t.data;s.Cb(1),s.Mc(i.name)}}function mi(e,t){if(1&e&&(s.Vb(0,"th",143),s.Lc(1),s.Vb(2,"span",17),s.Lc(3,"*"),s.Ub(),s.Ub()),2&e){var i=t.data;s.Cb(1),s.Mc(i.name)}}function pi(e,t){if(1&e&&(s.Vb(0,"th",141),s.Lc(1),s.Ub()),2&e){var i=t.data;s.Cb(1),s.Mc(i.name)}}function hi(e,t){if(1&e&&(s.Vb(0,"th",140),s.Lc(1),s.Vb(2,"small"),s.Lc(3,"(Auto Fill)"),s.Ub(),s.Ub()),2&e){var i=t.data;s.Cb(1),s.Nc("",i.name," ")}}function fi(e,t){1&e&&(s.Vb(0,"span",17),s.Lc(1,"*"),s.Ub())}function vi(e,t){if(1&e&&(s.Vb(0,"th",138),s.Lc(1),s.Jc(2,fi,2,0,"span",142),s.Ub()),2&e){var i=t.data,r=s.hc(2);s.Cb(1),s.Mc(i.name),s.Cb(1),s.oc("ngIf",r.storageService.get("distRulesMode"))}}function gi(e,t){if(1&e&&(s.Vb(0,"th",141),s.Lc(1),s.Ub()),2&e){var i=t.data;s.Cb(1),s.Mc(i.name)}}function yi(e,t){if(1&e){var i=s.Wb();s.Tb(0),s.Vb(1,"a",145),s.dc("click",(function(){s.Dc(i);var e=s.hc().i,t=s.hc(2);return t.removeItemFields(e),t.branchUtilsService.txnCalcItemsTotal(t.myForm1)})),s.Qb(2,"i",146),s.Ub(),s.Sb()}}function Si(e,t){if(1&e&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Jc(3,yi,3,0,"ng-container",0),s.Ub(),s.Sb(),s.Sb()),2&e){var i=t.i,r=s.hc(2);s.oc("formGroup",r.myForm1),s.Cb(2),s.oc("formGroupName",i),s.Cb(1),s.oc("ngIf",r.myForm1Data.itemListArray[i].showDeleteIcon)}}function Ii(e,t){if(1&e&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Lc(3),s.Ub(),s.Sb(),s.Sb()),2&e){var i=t.i,r=s.hc(2);s.oc("formGroup",r.myForm1),s.Cb(2),s.oc("formGroupName",i),s.Cb(1),s.Mc(i+1)}}function Ci(e,t){if(1&e&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&e){var i=t.item;s.Cb(1),s.Nc("",i.itemName,"\xa0"),s.Cb(2),s.Nc("(",i.itemCode,")")}}function Li(e,t){if(1&e){var i=s.Wb();s.Vb(0,"span",98),s.dc("click",(function(){s.Dc(i);var e=s.hc().i,t=s.hc(2);return t.popupExternalService.showDetailPopup("item",t.myForm1Data.itemListArray[e].itemId)})),s.Qb(1,"i",99),s.Ub()}}function Ui(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc().i,r=s.hc(2);s.Cb(1),s.Nc(" ",r.myFormErrors1.itemListArray[i].itemId," ")}}function Vi(e,t){if(1&e){var i=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"div",94),s.Vb(4,"ng-select",147),s.dc("search",(function(e){return s.Dc(i),s.hc(2).onItemSearch(e)}))("change",(function(){s.Dc(i);var e=t.i;return s.hc(2).onItemChange(e)})),s.Jc(5,Ci,4,2,"ng-template",96),s.Ub(),s.Jc(6,Li,2,0,"span",97),s.Ub(),s.Vb(7,"div",148),s.Lc(8),s.Ub(),s.Jc(9,Ui,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&e){var r=t.i,n=s.hc(2);s.oc("formGroup",n.myForm1),s.Cb(2),s.oc("formGroupName",r),s.Cb(2),s.oc("items",n.itemList)("multiple",!1)("virtualScroll",!0),s.Cb(2),s.oc("ngIf",n.myForm1Data.itemListArray[r].itemId),s.Cb(2),s.Nc("Last Price: ",n.myForm1Data.itemListArray[r].lastPrice,""),s.Cb(1),s.oc("ngIf",n.myFormErrors1.itemListArray[r].itemId)}}function Ni(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc(2).i,r=s.hc(2);s.Cb(1),s.Nc(" ",r.myFormErrors1.itemListArray[i].requiredDate," ")}}function Di(e,t){if(1&e&&(s.Tb(0),s.Qb(1,"p-calendar",149),s.Jc(2,Ni,2,1,"div",21),s.Sb()),2&e){var i=s.hc().i,r=s.hc(2);s.Cb(1),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",r.myFormErrors1.itemListArray[i].requiredDate)}}function Fi(e,t){if(1&e&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Jc(3,Di,3,5,"ng-container",0),s.Ub(),s.Sb(),s.Sb()),2&e){var i=t.i,r=s.hc(2);s.oc("formGroup",r.myForm1),s.Cb(2),s.oc("formGroupName",i),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnItemListRequiredDate"))}}function xi(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc().formItemListRow;s.Cb(1),s.Nc(" ",null==i.errors?null:i.errors.invalidMinQuantity," ")}}function Ti(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc().i,r=s.hc(2);s.Cb(1),s.Nc(" ",r.myFormErrors1.itemListArray[i].quantity," ")}}function Ai(e,t){if(1&e){var i=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"input",150),s.dc("keyup",(function(){s.Dc(i);var e=t.i,r=s.hc(2);return r.branchUtilsService.txnCalcItemsTotal(r.myForm1),r.branchUtilsService.setItemWeight(r.itemList,r.myForm1,e,"itemId"),r.branchUtilsService.txnGetTotalWeight(r.myForm1)})),s.Ub(),s.Jc(4,xi,2,1,"div",21),s.Jc(5,Ti,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&e){var r=t.formItemListRow,n=t.i,a=s.hc(2);s.oc("formGroup",a.myForm1),s.Cb(2),s.oc("formGroupName",n),s.Cb(2),s.oc("ngIf",null==r.errors?null:r.errors.invalidMinQuantity),s.Cb(1),s.oc("ngIf",a.myFormErrors1.itemListArray[n].quantity)}}function Ei(e,t){if(1&e&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Lc(3),s.Ub(),s.Sb(),s.Sb()),2&e){var i=t.i,r=s.hc(2);s.oc("formGroup",r.myForm1),s.Cb(2),s.oc("formGroupName",i),s.Cb(1),s.Nc(" ",r.myForm1Data.itemListArray[i].openQuantity," ")}}function Ri(e,t){if(1&e&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Qb(3,"ng-select",151),s.Ub(),s.Sb(),s.Sb()),2&e){var i=t.i,r=s.hc(2);s.oc("formGroup",r.myForm1),s.Cb(2),s.oc("formGroupName",i),s.Cb(1),s.oc("items",r.uomList)("multiple",!1)}}function Pi(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc().i,r=s.hc(2);s.Cb(1),s.Nc(" ",r.myFormErrors1.itemListArray[i].unitPrice," ")}}function Oi(e,t){if(1&e){var i=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"input",152),s.dc("keyup",(function(){s.Dc(i);var e=s.hc(2);return e.branchUtilsService.txnCalcItemsTotal(e.myForm1)})),s.Ub(),s.Jc(4,Pi,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&e){var r=t.i,n=s.hc(2);s.oc("formGroup",n.myForm1),s.Cb(2),s.oc("formGroupName",r),s.Cb(2),s.oc("ngIf",n.myFormErrors1.itemListArray[r].unitPrice)}}function ki(e,t){if(1&e&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&e){var i=t.item;s.Cb(1),s.Nc("",i.warehouseName,"\xa0"),s.Cb(2),s.Nc("(",i.warehouseCode,")")}}function Bi(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc().i,r=s.hc(2);s.Cb(1),s.Nc(" ",r.myFormErrors1.itemListArray[i].warehouseId," ")}}function Ki(e,t){if(1&e){var i=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"ng-select",153),s.dc("change",(function(){s.Dc(i);var e=t.i;return s.hc(2).setBinList(e)})),s.Jc(4,ki,4,2,"ng-template",96),s.Ub(),s.Jc(5,Bi,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&e){var r=t.i,n=s.hc(2);s.oc("formGroup",n.myForm1),s.Cb(2),s.oc("formGroupName",r),s.Cb(1),s.oc("items",n.warehouseList)("multiple",!1),s.Cb(2),s.oc("ngIf",n.myFormErrors1.itemListArray[r].warehouseId)}}function qi(e,t){if(1&e&&(s.Vb(0,"div",158),s.Vb(1,"strong"),s.Lc(2,"Only available stock bin's will be listed"),s.Ub(),s.Ub(),s.Lc(3)),2&e){var i=s.hc().i,r=s.hc(2);s.Cb(3),s.Nc(" ",r.myForm1Data.itemListArray[i].stockDetails?r.myForm1Data.itemListArray[i].stockDetails:"..."," ")}}function wi(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc().i,r=s.hc(2);s.Cb(1),s.Nc(" ",r.myFormErrors1.itemListArray[i].binId," ")}}function Mi(e,t){if(1&e){var i=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"div",94),s.Qb(4,"ng-select",154),s.Vb(5,"span",155),s.dc("click",(function(){s.Dc(i);var e=t.i,r=s.hc(2);return r.branchUtilsService.txnSetItemStockToBinTooltip(r.myForm1,e,"warehouseId","stockDetails")})),s.Jc(6,qi,4,1,"ng-template",null,156,s.Kc),s.Vb(8,"span",157),s.Qb(9,"i",99),s.Ub(),s.Ub(),s.Ub(),s.Jc(10,wi,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&e){var r=t.i,n=s.Ac(7),a=s.hc(2);s.oc("formGroup",a.myForm1),s.Cb(2),s.oc("formGroupName",r),s.Cb(2),s.oc("items",a.myForm1Data.itemListArray[r].binList)("multiple",!1),s.Cb(4),s.oc("popover",n)("outsideClick",!0),s.Cb(2),s.oc("ngIf",a.myFormErrors1.itemListArray[r].binId)}}function Ji(e,t){if(1&e&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Qb(3,"ng-select",159),s.Ub(),s.Sb(),s.Sb()),2&e){var i=t.i,r=s.hc(2);s.oc("formGroup",r.myForm1),s.Cb(2),s.oc("formGroupName",i),s.Cb(1),s.oc("items",r.hsnList)("multiple",!1)}}function Gi(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc().i,r=s.hc(2);s.Cb(1),s.Nc(" ",r.myFormErrors1.itemListArray[i].discountPercentage," ")}}function Qi(e,t){if(1&e){var i=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"input",42),s.dc("keyup",(function(){s.Dc(i);var e=s.hc(2);return e.branchUtilsService.txnCalcItemsTotal(e.myForm1)})),s.Ub(),s.Jc(4,Gi,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&e){var r=t.i,n=s.hc(2);s.oc("formGroup",n.myForm1),s.Cb(2),s.oc("formGroupName",r),s.Cb(2),s.oc("ngIf",n.myFormErrors1.itemListArray[r].discountPercentage)}}function _i(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc().i,r=s.hc(2);s.Cb(1),s.Nc(" ",r.myFormErrors1.itemListArray[i].taxId," ")}}function Wi(e,t){if(1&e){var i=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"ng-select",160),s.dc("change",(function(){s.Dc(i);var e=t.i,r=s.hc(2);return r.branchUtilsService.txnTaxChange(r.taxList,r.myForm1,e)})),s.Ub(),s.Jc(4,_i,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&e){var r=t.i,n=s.hc(2);s.oc("formGroup",n.myForm1),s.Cb(2),s.oc("formGroupName",r),s.Cb(1),s.oc("items",n.taxList)("multiple",!1),s.Cb(1),s.oc("ngIf",n.myFormErrors1.itemListArray[r].taxId)}}function zi(e,t){if(1&e&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Lc(3),s.Ub(),s.Sb(),s.Sb()),2&e){var i=t.i,r=s.hc(2);s.oc("formGroup",r.myForm1),s.Cb(2),s.oc("formGroupName",i),s.Cb(1),s.Nc(" ",r.myForm1Data.itemListArray[i].itemTaxPercentage," ")}}function ji(e,t){if(1&e&&(s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",161),s.Lc(3),s.Ub(),s.Sb(),s.Sb()),2&e){var i=t.i,r=s.hc(2);s.oc("formGroup",r.myForm1),s.Cb(2),s.oc("formGroupName",i),s.Cb(1),s.Nc(" ",r.myForm1Data.itemListArray[i].totalItemAmount," ")}}function $i(e,t){if(1&e&&(s.Vb(0,"div",90),s.Lc(1),s.Ub()),2&e){var i=s.hc().i,r=s.hc(2);s.Cb(1),s.Nc(" ",r.myFormErrors1.itemListArray[i].distributionRulesId," ")}}function Hi(e,t){if(1&e){var i=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"ng-select",162),s.dc("add",(function(){s.Dc(i);var e=t.i;return s.hc(2).onDistRuleAdd(e)})),s.Ub(),s.Jc(4,$i,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&e){var r=t.i,n=s.hc(2);s.oc("formGroup",n.myForm1),s.Cb(2),s.oc("formGroupName",r),s.Cb(1),s.oc("items",n.distributionList)("multiple",!0),s.Cb(1),s.oc("ngIf",n.myFormErrors1.itemListArray[r].distributionRulesId)}}function Yi(e,t){if(1&e){var i=s.Wb();s.Tb(0,144),s.Tb(1,32),s.Vb(2,"td",116),s.Vb(3,"input",163),s.dc("keyup",(function(){s.Dc(i);var e=s.hc(2);return e.branchUtilsService.txnGetTotalWeight(e.myForm1)})),s.Ub(),s.Ub(),s.Sb(),s.Sb()}if(2&e){var r=t.i,n=s.hc(2);s.oc("formGroup",n.myForm1),s.Cb(2),s.oc("formGroupName",r)}}var Zi=function(){return{"max-height.px":300}};function Xi(e,t){if(1&e){var i=s.Wb();s.Tb(0),s.Vb(1,"div",1),s.Vb(2,"span"),s.Lc(3),s.Ub(),s.Lc(4),s.Jc(5,qe,2,0,"ng-container",0),s.Jc(6,we,2,0,"ng-container",0),s.Vb(7,"div",2),s.Vb(8,"button",3),s.dc("click",(function(){return s.Dc(i),s.hc().utilsService.goBack()})),s.Qb(9,"i",4),s.Vb(10,"span"),s.Lc(11,"Back"),s.Ub(),s.Ub(),s.Vb(12,"button",5),s.dc("click",(function(){s.Dc(i);var e=s.hc();return e.popupExternalService.showManageColumnsPopup(e.txnKeys.inputScreenName)})),s.Qb(13,"i",6),s.Vb(14,"span"),s.Lc(15,"Manage Item Columns"),s.Ub(),s.Ub(),s.Jc(16,Me,4,0,"button",7),s.Vb(17,"button",5),s.dc("click",(function(){return s.Dc(i),s.hc().showTxnOptionsSidebar()})),s.Qb(18,"i",8),s.Vb(19,"span"),s.Lc(20,"More"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(21,"div",9),s.Vb(22,"div",10),s.Vb(23,"div",11),s.Qb(24,"i",12),s.Lc(25,"Basic Info "),s.Ub(),s.Vb(26,"div",13),s.Vb(27,"div",14),s.Vb(28,"div",15),s.Vb(29,"label",16),s.Lc(30,"Doc No"),s.Vb(31,"span",17),s.Lc(32,"*"),s.Ub(),s.Ub(),s.Vb(33,"div",14),s.Vb(34,"div",18),s.Vb(35,"ng-select",19),s.dc("change",(function(){s.Dc(i);var e=s.hc();return e.branchUtilsService.onDocumentNumberingChange(e.documentNumberingList,e.myForm1)})),s.Ub(),s.Ub(),s.Vb(36,"div",18),s.Qb(37,"input",20),s.Ub(),s.Ub(),s.Jc(38,Je,2,1,"div",21),s.Ub(),s.Jc(39,_e,10,2,"div",22),s.Jc(40,$e,10,4,"div",22),s.Jc(41,tt,13,6,"div",22),s.Jc(42,rt,5,2,"div",22),s.Jc(43,st,10,2,"div",22),s.Jc(44,ct,4,0,"div",22),s.Vb(45,"div",15),s.Vb(46,"label",16),s.Lc(47,"Posting Date"),s.Vb(48,"span",17),s.Lc(49,"*"),s.Ub(),s.Ub(),s.Qb(50,"p-calendar",23),s.Jc(51,ot,2,1,"div",21),s.Jc(52,ut,2,1,"div",21),s.Ub(),s.Jc(53,bt,8,6,"div",22),s.Jc(54,ht,8,6,"div",22),s.Jc(55,gt,8,6,"div",22),s.Vb(56,"div",15),s.Vb(57,"label",16),s.Lc(58,"Document Date"),s.Vb(59,"span",17),s.Lc(60,"*"),s.Ub(),s.Ub(),s.Qb(61,"p-calendar",24),s.Jc(62,yt,2,1,"div",21),s.Ub(),s.Jc(63,Ct,7,3,"div",22),s.Vb(64,"div",15),s.Vb(65,"label",16),s.Lc(66,"Status"),s.Vb(67,"span",17),s.Lc(68,"*"),s.Ub(),s.Ub(),s.Vb(69,"select",25),s.Jc(70,Lt,2,2,"option",26),s.Ub(),s.Jc(71,Ut,2,1,"div",21),s.Ub(),s.Vb(72,"div",15),s.Vb(73,"label",16),s.Lc(74,"Remarks"),s.Ub(),s.Qb(75,"textarea",27),s.Jc(76,Vt,2,1,"div",21),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(77,"div",10),s.Vb(78,"div",11),s.Qb(79,"i",12),s.Lc(80,"Content Info "),s.Ub(),s.Vb(81,"div",28),s.Vb(82,"div",29),s.Vb(83,"table",30),s.Vb(84,"thead"),s.Vb(85,"tr"),s.Jc(86,Dt,2,4,"ng-container",31),s.Ub(),s.Ub(),s.Vb(87,"tbody",32),s.Jc(88,Tt,2,2,"tr",33),s.Ub(),s.Jc(89,At,11,1,"tfoot",0),s.Ub(),s.Ub(),s.Vb(90,"div",14),s.Vb(91,"div",34),s.Qb(92,"div",35),s.Ub(),s.Vb(93,"div",36),s.Vb(94,"table",37),s.Vb(95,"tbody"),s.Vb(96,"tr"),s.Vb(97,"td",38),s.Vb(98,"strong"),s.Lc(99,"Total Weight"),s.Ub(),s.Ub(),s.Qb(100,"td",39),s.Vb(101,"td",40),s.Vb(102,"strong"),s.Lc(103),s.Ub(),s.Ub(),s.Ub(),s.Vb(104,"tr"),s.Vb(105,"td",38),s.Vb(106,"strong"),s.Lc(107,"Total Before Discount"),s.Ub(),s.Ub(),s.Qb(108,"td",39),s.Vb(109,"td",40),s.Vb(110,"strong"),s.Lc(111),s.Ub(),s.Ub(),s.Ub(),s.Vb(112,"tr"),s.Vb(113,"td"),s.Lc(114,"Discount %"),s.Ub(),s.Vb(115,"td",41),s.Vb(116,"input",42),s.dc("keyup",(function(){s.Dc(i);var e=s.hc();return e.branchUtilsService.txnCalcTotal(e.myForm1)})),s.Ub(),s.Jc(117,Et,2,1,"div",21),s.Ub(),s.Vb(118,"td",41),s.Lc(119),s.Ub(),s.Ub(),s.Vb(120,"tr"),s.Vb(121,"td"),s.Lc(122,"Tax"),s.Ub(),s.Qb(123,"td"),s.Vb(124,"td",41),s.Lc(125),s.Ub(),s.Ub(),s.Vb(126,"tr"),s.Vb(127,"td"),s.Lc(128," Rounding "),s.Vb(129,"div"),s.Vb(130,"label",43),s.Vb(131,"input",44),s.dc("ngModelChange",(function(){s.Dc(i);var e=s.hc();return e.branchUtilsService.txnRoundingOffChange(e.myForm1)})),s.Ub(),s.Qb(132,"span",45),s.Lc(133,"Edit "),s.Ub(),s.Ub(),s.Ub(),s.Vb(134,"td"),s.Vb(135,"input",46),s.dc("keyup",(function(){s.Dc(i);var e=s.hc();return e.branchUtilsService.txnCalcTotal(e.myForm1,!0)})),s.Ub(),s.Jc(136,Rt,2,1,"div",21),s.Ub(),s.Vb(137,"td",41),s.Lc(138),s.Ub(),s.Ub(),s.Vb(139,"tr"),s.Vb(140,"td",47),s.Lc(141,"Total "),s.Vb(142,"small"),s.Lc(143,"(Rounded off):"),s.Ub(),s.Ub(),s.Qb(144,"td"),s.Vb(145,"td",48),s.Lc(146),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Jc(147,kt,22,2,"div",49),s.Jc(148,wt,32,7,"div",49),s.Jc(149,Mt,10,0,"div",49),s.Qb(150,"app-udf-viewer",50),s.Vb(151,"app-attachments",51),s.dc("doSuccess",(function(){s.Dc(i);var e=s.hc();return e.pTxnUtilsService.redirectToList(e.txnKeys.inputScreenName)})),s.Ub(),s.Vb(152,"div",52),s.Jc(153,Jt,4,0,"button",7),s.Jc(154,Gt,4,0,"button",7),s.Jc(155,Qt,4,0,"button",53),s.Jc(156,_t,4,0,"button",7),s.Jc(157,Wt,4,0,"button",7),s.Jc(158,zt,4,0,"button",53),s.Ub(),s.Jc(159,Ht,7,3,"div",54),s.Jc(160,Yt,7,0,"div",54),s.Ub(),s.Qb(161,"app-spi-txn-options"),s.Jc(162,Zt,2,1,"ng-template",null,55,s.Kc),s.Jc(164,Xt,2,1,"ng-template",null,56,s.Kc),s.Jc(166,ei,4,1,"ng-template",null,57,s.Kc),s.Jc(168,ii,1,1,"ng-template",null,58,s.Kc),s.Jc(170,ri,4,1,"ng-template",null,59,s.Kc),s.Jc(172,ni,2,1,"ng-template",null,60,s.Kc),s.Jc(174,ai,2,1,"ng-template",null,61,s.Kc),s.Jc(176,si,2,1,"ng-template",null,62,s.Kc),s.Jc(178,oi,3,2,"ng-template",null,63,s.Kc),s.Jc(180,di,3,2,"ng-template",null,64,s.Kc),s.Jc(182,li,2,1,"ng-template",null,65,s.Kc),s.Jc(184,bi,2,1,"ng-template",null,66,s.Kc),s.Jc(186,mi,4,1,"ng-template",null,67,s.Kc),s.Jc(188,pi,2,1,"ng-template",null,68,s.Kc),s.Jc(190,hi,4,1,"ng-template",null,69,s.Kc),s.Jc(192,vi,3,2,"ng-template",null,70,s.Kc),s.Jc(194,gi,2,1,"ng-template",null,71,s.Kc),s.Jc(196,Si,4,3,"ng-template",null,72,s.Kc),s.Jc(198,Ii,4,3,"ng-template",null,73,s.Kc),s.Jc(200,Vi,10,8,"ng-template",null,74,s.Kc),s.Jc(202,Fi,4,3,"ng-template",null,75,s.Kc),s.Jc(204,Ai,6,4,"ng-template",null,76,s.Kc),s.Jc(206,Ei,4,3,"ng-template",null,77,s.Kc),s.Jc(208,Ri,4,4,"ng-template",null,78,s.Kc),s.Jc(210,Oi,5,3,"ng-template",null,79,s.Kc),s.Jc(212,Ki,6,5,"ng-template",null,80,s.Kc),s.Jc(214,Mi,11,7,"ng-template",null,81,s.Kc),s.Jc(216,Ji,4,4,"ng-template",null,82,s.Kc),s.Jc(218,Qi,5,3,"ng-template",null,83,s.Kc),s.Jc(220,Wi,5,5,"ng-template",null,84,s.Kc),s.Jc(222,zi,4,3,"ng-template",null,85,s.Kc),s.Jc(224,ji,4,3,"ng-template",null,86,s.Kc),s.Jc(226,Hi,5,5,"ng-template",null,87,s.Kc),s.Jc(228,Yi,4,2,"ng-template",null,88,s.Kc),s.Sb()}if(2&e){var r=s.hc();s.Cb(3),s.Mc(r.branchUtilsService.txnGetTitle(r.screenAttributes.title,!0)),s.Cb(1),s.Nc("",r.branchUtilsService.txnGetTitle(r.screenAttributes.title)," - "),s.Cb(1),s.oc("ngIf",!r.txnKeys.inputEditId),s.Cb(1),s.oc("ngIf",r.txnKeys.inputEditId),s.Cb(10),s.oc("ngIf",r.txnKeys.inputEditId),s.Cb(5),s.oc("formGroup",r.myForm1),s.Cb(14),s.oc("items",r.documentNumberingList),s.Cb(3),s.oc("ngIf",r.myFormErrors1.documentNumberingId||r.myFormErrors1.documentNumber),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnRequesterTypeId")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnRequesterId")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnVendorBpId")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnVendorBpContactsId")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnCurrencyId")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnReferenceNumber")),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",r.myFormErrors1.postingDate),s.Cb(1),s.oc("ngIf",null==r.myForm1.errors?null:r.myForm1.errors.invalidPostingDate),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnValidUntil")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnDeliveryDate")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnDueDate")),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",r.myFormErrors1.documentDate),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnBuyerEmpId")),s.Cb(7),s.oc("ngForOf",r.statusList),s.Cb(1),s.oc("ngIf",r.myFormErrors1.statusList),s.Cb(5),s.oc("ngIf",r.myFormErrors1.remarks),s.Cb(6),s.oc("ngStyle",s.rc(62,Zi)),s.Cb(4),s.oc("ngForOf",r.itemListColumnOrder),s.Cb(2),s.oc("ngForOf",r.myForm1.controls.itemListArray.controls),s.Cb(1),s.oc("ngIf",r.branchUtilsService.txnAddItemAccess(r.txnKeys.inputScreenName,r.myForm1,r.txnKeys.inputEditId)),s.Cb(14),s.Nc(" ",r.myForm1Data.totalWeight," "),s.Cb(8),s.Oc(" ",r.myForm1Data.totalBeforeDiscount," ",r.branchUtilsService.txnGetActiveCurrency(r.currencyList,r.myForm1,"currencyId")," "),s.Cb(6),s.oc("ngIf",r.myFormErrors1.discountPercentage),s.Cb(2),s.Oc(" ",r.myForm1Data.discountValue," ",r.branchUtilsService.txnGetActiveCurrency(r.currencyList,r.myForm1,"currencyId")," "),s.Cb(6),s.Oc(" ",r.myForm1Data.taxPercentage," ",r.branchUtilsService.txnGetActiveCurrency(r.currencyList,r.myForm1,"currencyId")," "),s.Cb(11),s.oc("ngIf",r.myFormErrors1.rounding),s.Cb(2),s.Oc(" ",r.myForm1Data.rounding," ",r.branchUtilsService.txnGetActiveCurrency(r.currencyList,r.myForm1,"currencyId")," "),s.Cb(8),s.Oc(" ",r.myForm1Data.totalAmount," ",r.branchUtilsService.txnGetActiveCurrency(r.currencyList,r.myForm1,"currencyId")," "),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnLogisticsFields")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnAccountingFields")),s.Cb(1),s.oc("ngIf",r.pTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnTaxFields")),s.Cb(1),s.oc("type",r.screenAttributes.backendKey),s.Cb(1),s.oc("type",r.screenAttributes.backendKey),s.Cb(2),s.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"save")),s.Cb(1),s.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"saveDraft")),s.Cb(1),s.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"clear")),s.Cb(1),s.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"add")),s.Cb(1),s.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"update")),s.Cb(1),s.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"cancel")),s.Cb(1),s.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"editMsgContainer")),s.Cb(1),s.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"addAclNote"))}}var er,tr,ir=((er=function(){function e(t,i,r,n,s,c,o,u,d,l,b){_classCallCheck(this,e),this.utilsService=t,this.storageService=i,this.authGuardService=r,this.commonDataService=n,this.branchUtilsService=s,this.pTxnUtilsService=c,this.popupExternalService=o,this.formBuilder=u,this.activatedRoute=d,this.changeDetectorRef=l,this.modalService=b,this.appConstants=a.h,this.screenAcl={},this.txnKeys={inputScreenName:"",inputEditId:"",inputDraftId:"",inputCopyIds:"",inputCopyScreenName:"",inputDuplicateId:"",editStatusId:"",editCreatedName:""},this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.documentNumberingList=[],this.statusList=[],this.itemList=[],this.warehouseList=[],this.binList=[],this.hsnList=[],this.taxList=[],this.uomList=[],this.distributionList=[],this.requesterTypeList=[],this.requesterList=[],this.bizRefreshFlag=!1,this.vendorBpList=[],this.vendorBpContactList=[],this.currencyList=[],this.buyerEmployeeList=[],this.vendorBpAddressShipToList=[],this.vendorBpAddressPayToList=[],this.paymentTermsList=[],this.paymentMethodsList=[],this.myForm1Data={},this.myFormErrors1={},this.myFormValidationMsgs1={}}return _createClass(e,[{key:"ngOnInit",value:function(){this.initializeSubscriptions(),this.setRequesterTypeAndName()}},{key:"ngAfterViewInit",value:function(){this.attachmentsComponent&&this.udfViewerComponent&&(this.attachmentsComponent.loadAttachments(this.txnKeys.inputEditId||this.txnKeys.inputDraftId),this.udfViewerComponent.getFields(this.txnKeys.inputEditId||this.txnKeys.inputDuplicateId||this.txnKeys.inputDraftId),this.changeDetectorRef.detectChanges())}},{key:"initializeSubscriptions",value:function(){var e=this;this.activatedRoute.params.subscribe((function(t){if(!e.pTxnUtilsService.checkScreenNameValid(t.screenName))return e.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),e.utilsService.goBack(),!1;if(e.screenAcl=e.authGuardService.getScreenAcl(e.branchUtilsService.screenAttributes[t.screenName].documentTypeId),!e.screenAcl.view)return e.utilsService.showFailureMsg(a.h.ACL_UNAUTHORIZED_MSG),e.utilsService.goBack(),!1;if(e.reInitializeGlobalVariables(),e.txnKeys.inputScreenName=t.screenName,e.transactionInitialization(),t.id&&(e.txnKeys.inputEditId=e.utilsService.decrypt(t.id),e.get()),t.copyScreenName&&t.copyId){var i=e.utilsService.decrypt(t.copyId);e.txnKeys.inputCopyIds=i.split(","),e.txnKeys.inputCopyScreenName=t.copyScreenName,t.vendorId&&e.myForm1.patchValue({vendorBpId:e.utilsService.decrypt(t.vendorId)}),"purchaseOrder"===e.txnKeys.inputScreenName&&"salesOrder"===e.txnKeys.inputCopyScreenName?e.copyFromSalesOrder():e.copyFrom()}t.duplicateId&&(e.txnKeys.inputDuplicateId=e.utilsService.decrypt(t.duplicateId),e.getDuplicate()),t.draftId&&(e.txnKeys.inputDraftId=e.utilsService.decrypt(t.draftId),e.getDraft()),e.txnKeys.inputEditId||e.txnKeys.inputCopyIds||e.txnKeys.inputDuplicateId||e.txnKeys.inputDraftId||(e.branchUtilsService.getMasterDocumentNumbering(e.myForm1,e.screenAttributes.documentTypeId).subscribe((function(t){e.documentNumberingList=t})),"purchaseOrder"!==e.txnKeys.inputScreenName&&"purchaseGrpo"!==e.txnKeys.inputScreenName||(e.getAutoSuggestionList("getCurrencyList"),e.getVendorBpList(),e.getBuyerEmployeeList()),e.getAutoSuggestionList("getHsnList"),e.getAutoSuggestionList("getTaxList"),e.getAutoSuggestionList("getUomList"),e.getWarehouseList(),e.getDistributionList())})),this.branchUtilsService.itemSearch.pipe(Object($.a)(700),Object(H.a)(),Object(Y.a)((function(t){e.getItemList(t)}))).subscribe(),this.itemListColumnOrderChangesSubscription=this.branchUtilsService.itemListColumnOrderChanges.subscribe((function(t){"purchaseRequest"!==t.triggerType&&"purchaseOrder"!==t.triggerType&&"purchaseGrpo"!==t.triggerType||(e.itemListColumnOrder=e.branchUtilsService.getSelectedItemColumnDataByTxn(e.txnKeys.inputScreenName))}))}},{key:"reInitializeGlobalVariables",value:function(){this.txnKeys.inputScreenName="",this.txnKeys.inputEditId="",this.txnKeys.inputCopyIds="",this.txnKeys.inputCopyScreenName="",this.txnKeys.inputDuplicateId="",this.txnKeys.editStatusId="",this.txnKeys.editCreatedName="",this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.documentNumberingList=[],this.statusList=[],this.itemList=[],this.warehouseList=[],this.binList=[],this.taxList=[],this.uomList=[],this.distributionList=[],this.requesterTypeList=[],this.requesterList=[],this.bizRefreshFlag=!1,this.vendorBpList=[],this.vendorBpContactList=[],this.currencyList=[],this.buyerEmployeeList=[],this.vendorBpAddressShipToList=[],this.vendorBpAddressPayToList=[],this.paymentTermsList=[],this.paymentMethodsList=[]}},{key:"transactionInitialization",value:function(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.txnKeys.inputScreenName],this.screenDataService=this.pTxnUtilsService.getScreenDataService(this.txnKeys.inputScreenName),this.itemListColumnOrder=this.branchUtilsService.getSelectedItemColumnDataByTxn(this.txnKeys.inputScreenName),this.myFormErrors1=this.pTxnUtilsService.getFormErrors(this.txnKeys.inputScreenName,"mainFields"),this.myFormValidationMsgs1=this.pTxnUtilsService.getFormValMsgs(this.txnKeys.inputScreenName),this.initializeForm1(),this.getAutoSuggestionList("getPurchaseTransStatusList"),"purchaseRequest"===this.txnKeys.inputScreenName&&this.getAutoSuggestionList("getEmployeeTypeList"),"purchaseOrder"!==this.txnKeys.inputScreenName&&"purchaseGrpo"!==this.txnKeys.inputScreenName||(this.getAutoSuggestionList("getPaymentTermsList"),this.getAutoSuggestionList("getPaymentMethodsList")),this.branchUtilsService.spiTxnOptions.next({show:!1})}},{key:"initializeForm1",value:function(){var e=this;this.myForm1=this.pTxnUtilsService.getFormMainFields(this.txnKeys.inputScreenName),this.myForm1.valueChanges.subscribe((function(t){e.utilsService.validation(e.myForm1,e.myFormErrors1,e.myFormValidationMsgs1),e.myForm1Data=e.myForm1.getRawValue()})),this.myForm1Data=this.myForm1.getRawValue()}},{key:"addItemFields",value:function(e,t){var i=this.myForm1.controls.itemListArray;i.push(this.initItemFields(e,t)),e||(this.branchUtilsService.txnTaxChange(this.taxList,this.myForm1,i.length-1),this.setBinList(i.length-1,!0)),!e&&i.length>1&&i.at(i.length-1).patchValue({requiredDate:this.myForm1Data.itemListArray[i.length-2].requiredDate})}},{key:"initItemFields",value:function(e,t){return this.myFormErrors1.itemListArray.push(this.pTxnUtilsService.getFormErrors(this.txnKeys.inputScreenName,"itemFields")),this.pTxnUtilsService.getFormItemFields(this.txnKeys.inputScreenName,e,t)}},{key:"removeItemFields",value:function(e){var t=this.myForm1Data.itemListArray[e].id;if(t){var i=this.myForm1Data.deletedItemChildIds;i.push(t),this.myForm1.patchValue({deletedItemChildIds:i})}this.myForm1.controls.itemListArray.removeAt(e)}},{key:"saveUpdate",value:function(e){var t=this,i=this.myForm1.getRawValue();if("3"!==i.approvalStatus&&"1"!==i.approvalStatus){var r=d.findIndex(this.documentNumberingList,{id:i.documentNumberingId});if("DRAFT"===this.documentNumberingList[r].documentNumberingType&&"add"!==e)return this.utilsService.showFailureMsg("Cannot Proceed - Select other than draft document numbering from Doc No field!"),!1}if(!this.myForm1.valid||!this.udfViewerComponent.valid())return this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1,!0),this.udfViewerComponent.checkValidations(),!1;if(0===i.itemListArray.length)return this.utilsService.showFailureMsg("Cannot save / update - No item added!"),!1;var n,a=this.pTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm1);a.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),a.isDraft=this.txnKeys.inputDraftId?"2":"0","add"===e?(a.id=this.txnKeys.inputEditId||this.txnKeys.inputDraftId,n="proceed"):this.txnKeys.inputEditId||this.txnKeys.inputDraftId?(n="update",a.id=this.txnKeys.inputEditId||this.txnKeys.inputDraftId,a.deletedItemChildIds=this.myForm1Data.deletedItemChildIds):n="save",this.screenDataService[n](a).subscribe((function(e){"SUCCESS"===e.status?(t.utilsService.showSuccessMsg(e),t.attachmentsComponent.save("save"===n?e.sId:t.txnKeys.inputEditId||t.txnKeys.inputDraftId)):t.utilsService.showFailureMsg(e)}))}},{key:"addUpdateDraft",value:function(){var e=this,t=this.myForm1.getRawValue(),i=d.findIndex(this.documentNumberingList,{id:t.documentNumberingId});if("DRAFT"!==this.documentNumberingList[i].documentNumberingType)return this.utilsService.showFailureMsg("Cannot Proceed - Select draft document numbering from Doc No field!"),!1;if(0===t.itemListArray.length)return this.utilsService.showFailureMsg("Cannot save / update draft - No item added!"),!1;var r,n=this.pTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm1);n.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),n.isDraft="1",this.txnKeys.inputDraftId?(r="update",n.id=this.txnKeys.inputDraftId,n.deletedItemChildIds=this.myForm1Data.deletedItemChildIds):r="save",this.screenDataService[r](n).subscribe((function(t){"SUCCESS"===t.status?(e.utilsService.showSuccessMsg(t),e.attachmentsComponent.save("save"===r?t.sId:e.txnKeys.inputDraftId)):e.utilsService.showFailureMsg(t)}))}},{key:"get",value:function(){var e=this;this.screenDataService.get(this.txnKeys.inputEditId).subscribe((function(t){if("SUCCESS"===t.status){var i=t.results;i.editFlag=!0;var r=e.pTxnUtilsService.getMainFieldsWithData(e.txnKeys.inputScreenName,i);e.myForm1.patchValue(r),e.branchUtilsService.getMasterDocumentNumbering(e.myForm1,e.screenAttributes.documentTypeId,"edit",i.documentNumberingInfo).subscribe((function(t){e.documentNumberingList=t})),"purchaseRequest"===e.txnKeys.inputScreenName&&e.getRequesterList(!0,i.requesterInfo),"purchaseOrder"!==e.txnKeys.inputScreenName&&"purchaseGrpo"!==e.txnKeys.inputScreenName||(e.getAutoSuggestionList("getCurrencyList",i.currencyInfo),e.getVendorBpList(!0,i.vendorBpInfo),e.getVendorBpContactList(!0,i.vendorBpContactsInfo),e.getVendorBpAddressShipToList(!0,i.vendorShipToBpAddressInfo),e.getVendorBpAddressPayToList(!0,i.vendorPayToBpAddressInfo),e.getBuyerEmployeeList(i.buyerEmpInfo));var n=[],a=[],s=[],c=[],o=[],u=[];i.itemListArray.forEach((function(t){e.addItemFields(t,"edit"),t.itemInfo[0]&&n.push(t.itemInfo[0]),t.uomInfo[0]&&a.push(t.uomInfo[0]),t.warehouseInfo[0]&&s.push(t.warehouseInfo[0]),t.hsnInfo[0]&&c.push(t.hsnInfo[0]),t.taxInfo[0]&&o.push(t.taxInfo[0]),t.distributionRulesInfo.forEach((function(e){u.push(e)}))})),e.getAutoSuggestionList("getUomList",a),e.getAutoSuggestionList("getHsnList",c),e.getAutoSuggestionList("getTaxList",o),e.getItemList("",!0,n),e.getWarehouseList(!0,s,i),e.getDistributionList(u),e.branchUtilsService.txnCalcItemsTotal(e.myForm1),e.txnKeys.editStatusId=i.status,e.txnKeys.editCreatedName=i.createdByInfo[0].employeeName,e.pTxnUtilsService.manipulationsOnEdit(e.txnKeys.inputScreenName,e.myForm1)}else e.utilsService.showFailureMsg(t),e.utilsService.goBack()}))}},{key:"copyFrom",value:function(){var e=this,t=this.pTxnUtilsService.getScreenDataService(this.txnKeys.inputCopyScreenName),i=this.branchUtilsService.screenAttributes[this.txnKeys.inputCopyScreenName];t.copy(this.txnKeys.inputCopyIds).subscribe((function(t){if("SUCCESS"===t.status){var r=t.results;delete r.documentNumber,delete r.documentNumberingId,delete r.documentNumberingInfo;var n=e.pTxnUtilsService.getMainFieldsWithData(e.txnKeys.inputScreenName,r);e.myForm1.patchValue(n),e.branchUtilsService.getMasterDocumentNumbering(e.myForm1,e.screenAttributes.documentTypeId).subscribe((function(t){e.documentNumberingList=t})),"purchaseRequest"===e.txnKeys.inputScreenName&&e.getRequesterList(!0,r.requesterInfo),"purchaseOrder"!==e.txnKeys.inputScreenName&&"purchaseGrpo"!==e.txnKeys.inputScreenName||(e.getAutoSuggestionList("getCurrencyList",r.currencyInfo),e.getVendorBpList(!0,r.vendorBpInfo),e.getVendorBpContactList(!0,r.vendorBpContactsInfo),e.getBuyerEmployeeList(r.buyerEmpInfo),e.getVendorBpAddressShipToList(!0,r.vendorShipToBpAddressInfo),e.getVendorBpAddressPayToList(!0,r.vendorPayToBpAddressInfo));var a=[],s=[],c=[],o=[],u=[],d=[],l=r.itemListArray.filter((function(e){return parseInt(e.openQuantity,0)>0}));r.itemListArray=l,r.itemListArray.forEach((function(t){t.copyFromId=t.id,t.copyFromType=i.backendKey,t.quantity=t.openQuantity,delete t.openQuantity,delete t.orderedQuantity,delete t.id,e.addItemFields(t),t.itemInfo[0]&&a.push(t.itemInfo[0]),t.uomInfo[0]&&s.push(t.uomInfo[0]),t.warehouseInfo[0]&&c.push(t.warehouseInfo[0]),t.hsnInfo[0]&&o.push(t.hsnInfo[0]),t.taxInfo[0]&&u.push(t.taxInfo[0]),t.distributionRulesInfo.forEach((function(e){d.push(e)}))})),e.getAutoSuggestionList("getUomList",s),e.getAutoSuggestionList("getHsnList",o),e.getAutoSuggestionList("getTaxList",u),e.getItemList("",!0,a),e.getWarehouseList(!0,c,r),e.getDistributionList(d),e.branchUtilsService.txnCalcItemsTotal(e.myForm1),e.pTxnUtilsService.manipulationsOnCopy(e.txnKeys.inputScreenName,e.myForm1)}else e.utilsService.showFailureMsg(t),e.utilsService.goBack()}))}},{key:"getDuplicate",value:function(){var e=this;this.screenDataService.get(this.txnKeys.inputDuplicateId).subscribe((function(t){if("SUCCESS"===t.status){var i=t.results;delete i.documentNumber,delete i.documentNumberingId,delete i.documentNumberingInfo,delete i.status;var r=e.pTxnUtilsService.getMainFieldsWithData(e.txnKeys.inputScreenName,i);e.myForm1.patchValue(r),e.branchUtilsService.getMasterDocumentNumbering(e.myForm1,e.screenAttributes.documentTypeId).subscribe((function(t){e.documentNumberingList=t})),"purchaseRequest"===e.txnKeys.inputScreenName&&e.getRequesterList(!0,i.requesterInfo),"purchaseOrder"!==e.txnKeys.inputScreenName&&"purchaseGrpo"!==e.txnKeys.inputScreenName||(e.getAutoSuggestionList("getCurrencyList"),e.getVendorBpList(),e.getBuyerEmployeeList(i.buyerEmpInfo));var n=[],a=[],s=[],c=[],o=[],u=[];i.itemListArray.forEach((function(t){delete t.id,delete t.openQuantity,delete t.orderedQuantity,delete t.copyFromType,delete t.copyFromId,e.addItemFields(t),t.itemInfo[0]&&n.push(t.itemInfo[0]),t.uomInfo[0]&&a.push(t.uomInfo[0]),t.warehouseInfo[0]&&s.push(t.warehouseInfo[0]),t.hsnInfo[0]&&c.push(t.hsnInfo[0]),t.taxInfo[0]&&o.push(t.taxInfo[0]),t.distributionRulesInfo.forEach((function(e){u.push(e)}))})),e.getAutoSuggestionList("getUomList",a),e.getAutoSuggestionList("getHsnList",c),e.getAutoSuggestionList("getTaxList",o),e.getItemList("",!0,n),e.getWarehouseList(!0,s,i),e.getDistributionList(u),e.branchUtilsService.txnCalcItemsTotal(e.myForm1)}else e.utilsService.showFailureMsg(t),e.utilsService.goBack()}))}},{key:"getDraft",value:function(){var e=this;this.screenDataService.get(this.txnKeys.inputDraftId).subscribe((function(t){if("SUCCESS"===t.status){var i=t.results,r=e.pTxnUtilsService.getMainFieldsWithData(e.txnKeys.inputScreenName,i);e.myForm1.patchValue(r),e.branchUtilsService.getMasterDocumentNumbering(e.myForm1,e.screenAttributes.documentTypeId,"draft",i.documentNumberingInfo).subscribe((function(t){e.documentNumberingList=t})),"purchaseRequest"===e.txnKeys.inputScreenName&&e.getRequesterList(!0,i.requesterInfo),"purchaseOrder"!==e.txnKeys.inputScreenName&&"purchaseGrpo"!==e.txnKeys.inputScreenName||(e.getAutoSuggestionList("getCurrencyList"),e.getVendorBpList(),e.getBuyerEmployeeList(i.buyerEmpInfo));var n=[],a=[],s=[],c=[],o=[],u=[];i.itemListArray.forEach((function(t){e.addItemFields(t),t.itemInfo[0]&&n.push(t.itemInfo[0]),t.uomInfo[0]&&a.push(t.uomInfo[0]),t.warehouseInfo[0]&&s.push(t.warehouseInfo[0]),t.hsnInfo[0]&&c.push(t.hsnInfo[0]),t.taxInfo[0]&&o.push(t.taxInfo[0]),t.distributionRulesInfo.forEach((function(e){u.push(e)}))})),e.getAutoSuggestionList("getUomList",a),e.getAutoSuggestionList("getHsnList",c),e.getAutoSuggestionList("getTaxList",o),e.getItemList("",!0,n),e.getWarehouseList(!0,s,i),e.getDistributionList(u),e.branchUtilsService.txnCalcItemsTotal(e.myForm1),e.txnKeys.editStatusId=i.status,e.txnKeys.editCreatedName=i.createdByInfo[0].employeeName,"1"===i.isDraft&&"4"===i.approvalStatus?(e.myForm1.controls.documentNumberingId.enable(),e.myForm1.controls.documentNumber.enable()):(e.myForm1.controls.documentNumberingId.disable(),e.myForm1.controls.documentNumber.disable())}else e.utilsService.showFailureMsg(t),e.utilsService.goBack()}))}},{key:"copyFromSalesOrder",value:function(){var e=this,t=this.pTxnUtilsService.getScreenDataService(this.txnKeys.inputCopyScreenName),i=this.txnKeys.inputCopyIds.toString();t.get(i).subscribe((function(t){if("SUCCESS"===t.status){var i=t.results;e.branchUtilsService.getMasterDocumentNumbering(e.myForm1,e.screenAttributes.documentTypeId).subscribe((function(t){e.documentNumberingList=t})),e.getAutoSuggestionList("getCurrencyList"),e.getVendorBpList(),e.getBuyerEmployeeList();var r=[],n=[],a=[],s=[],c=[],o=[];i.itemListArray.forEach((function(t){delete t.openQuantity,delete t.orderedQuantity,delete t.id,e.addItemFields(t),t.itemInfo[0]&&r.push(t.itemInfo[0]),t.uomInfo[0]&&n.push(t.uomInfo[0]),t.warehouseInfo[0]&&a.push(t.warehouseInfo[0]),t.hsnInfo[0]&&s.push(t.hsnInfo[0]),t.taxInfo[0]&&c.push(t.taxInfo[0]),t.distributionRulesInfo.forEach((function(e){o.push(e)}))})),e.getAutoSuggestionList("getUomList",n),e.getAutoSuggestionList("getHsnList",s),e.getAutoSuggestionList("getTaxList",c),e.getItemList("",!0,r),e.getWarehouseList(!0,a,i),e.getDistributionList(o),e.branchUtilsService.txnCalcItemsTotal(e.myForm1)}else e.utilsService.showFailureMsg(t),e.utilsService.goBack()}))}},{key:"clearForm",value:function(){this.initializeForm1()}},{key:"onDistRuleAdd",value:function(e){this.branchUtilsService.distRulesCheckUnique(this.distributionList,this.myForm1.controls.itemListArray.controls[e],"distributionRulesId")}},{key:"onVendorNameChange",value:function(){var e=this;if(this.myForm1Data.vendorBpId){var t=this.myForm1.controls.itemListArray;t.length>0&&this.utilsService.confirmDialog("Confirmation","If changing the vendor leads to remove the items. Do you want to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe((function(i){i&&(e.myForm1.patchValue({vendorBpId:null}),t.clear())}))}}},{key:"onItemChange",value:function(e){"purchaseRequest"!==this.txnKeys.inputScreenName&&"purchaseOrder"!==this.txnKeys.inputScreenName||(this.branchUtilsService.setItemWeight(this.itemList,this.myForm1,e,"itemId"),this.branchUtilsService.txnGetTotalWeight(this.myForm1)),("purchaseOrder"===this.txnKeys.inputScreenName||"purchaseGrpo"===this.txnKeys.inputScreenName)&&(this.myForm1Data.vendorBpId||(this.utilsService.showFailureMsg("Please select vendor name to add items"),this.myForm1.controls.itemListArray.at(e).patchValue({itemId:null})),this.branchUtilsService.txnSetUom(this.itemList,this.myForm1,e,"itemId"),this.branchUtilsService.txnSetHsn(this.itemList,this.myForm1,e,"itemId"),this.branchUtilsService.txnSetUnitPrice(this.myForm1,e,this.myForm1Data.vendorBpId),this.branchUtilsService.txnCheckItemDuplicate(this.myForm1,e,"itemId",this.itemList),this.branchUtilsService.setLastPriceAndAvailableStock(this.itemList,this.myForm1,e,this.branchUtilsService.spiTxnId.purchase),this.branchUtilsService.txnSetDefaultItemBin(this.itemList,this.myForm1,e,"warehouseId","binId","binList"))}},{key:"onItemSearch",value:function(e){this.branchUtilsService.itemSearch.next(e)}},{key:"getAutoSuggestionList",value:function(e,t){var i=this;this.commonDataService.getAutoSuggestionList(e).subscribe((function(r){"SUCCESS"===r.status?(i.utilsService.ifNotPushToList(r.results,t),"getPurchaseTransStatusList"===e?(i.txnKeys.inputEditId||(r.results=r.results.filter((function(e){return"1"===e.id}))),i.statusList=r.results):"getEmployeeTypeList"===e?i.requesterTypeList=r.results.filter((function(e){return"1"===e.id||"2"===e.id})):"getCurrencyList"===e?i.currencyList=r.results:"getUomList"===e?i.uomList=r.results:"getHsnList"===e?i.hsnList=r.results.map((function(e){return e.hsnLabel=e.chapter+"."+e.heading+"."+e.subHeading,e})):"getTaxList"===e?i.taxList=r.results:"getPaymentTermsList"===e?i.paymentTermsList=r.results:"getPaymentMethodsList"===e&&(i.paymentMethodsList=r.results)):i.utilsService.showFailureMsg(r)}))}},{key:"getItemList",value:function(e,t,i){var r=this;return t?(this.itemList=i.map((function(e){return e.searchText=e.itemName+" - "+e.itemCode,e})),!1):!e.term||e.term.length<3?(this.itemList=[],!1):void this.commonDataService.getItemList(e.term,2).subscribe((function(e){"SUCCESS"===e.status?r.itemList=e.results.map((function(e){return e.searchText=e.itemName+" - "+e.itemCode,e})):r.utilsService.showFailureMsg(e)}))}},{key:"getDistributionList",value:function(e){var t=this;this.commonDataService.getDistributionList(!0).subscribe((function(i){"SUCCESS"===i.status?(t.utilsService.ifNotPushToList(i.results,e),t.distributionList=i.results):t.utilsService.showFailureMsg(i)}))}},{key:"getRequesterList",value:function(e,t){var i=this,r=this.myForm1Data.requesterTypeId;this.requesterList=[],e||this.myForm1.patchValue({requesterId:null}),this.utilsService.isEmpty(r)||this.commonDataService.getEmployeeList(r).subscribe((function(r){"SUCCESS"===r.status?(e&&i.utilsService.ifNotPushToList(r.results,t),i.requesterList=r.results.map((function(e){return e.searchText=e.employeeName+" - "+e.empCode,e}))):i.utilsService.showFailureMsg(r)}))}},{key:"getVendorBpList",value:function(e,t){var i=this;this.commonDataService.getBusinessPartnerList([2]).subscribe((function(e){"SUCCESS"===e.status?(i.utilsService.ifNotPushToList(e.results,t),i.vendorBpList=e.results.map((function(e){return e.searchText=e.partnerName+" - "+e.partnerCode,e}))):i.utilsService.showFailureMsg(e)}))}},{key:"getVendorBpContactList",value:function(e,t){var i=this;this.vendorBpContactList=[],this.branchUtilsService.getBpContactListAndSet(this.myForm1,"vendorBpContactsId","vendorBpId",e,t).subscribe((function(e){i.vendorBpContactList=e}))}},{key:"getVendorBpAddressShipToList",value:function(e,t){var i=this;this.vendorBpAddressShipToList=[],this.branchUtilsService.txnGetBpAddressListAndSet("1",this.myForm1,"vendorShipToBpAddressId","vendorShipToAddress","vendorBpId",e,t).subscribe((function(e){i.vendorBpAddressShipToList=e}))}},{key:"getVendorBpAddressPayToList",value:function(e,t){var i=this;this.vendorBpAddressPayToList=[],this.branchUtilsService.txnGetBpAddressListAndSet("3",this.myForm1,"vendorPayToBpAddressId","vendorPayToAddress","vendorBpId",e,t).subscribe((function(e){i.vendorBpAddressPayToList=e}))}},{key:"getBuyerEmployeeList",value:function(e){var t=this;this.commonDataService.getEmployeeList(1).subscribe((function(i){"SUCCESS"===i.status?(t.utilsService.ifNotPushToList(i.results,e),t.buyerEmployeeList=i.results.map((function(e){return e.searchText=e.employeeName+" - "+e.empCode,e}))):t.utilsService.showFailureMsg(i)}))}},{key:"getWarehouseList",value:function(e,t,i){var r=this;this.commonDataService.getAutoSuggestionList("getWarehouseList").subscribe((function(n){"SUCCESS"===n.status?(r.utilsService.ifNotPushToList(n.results,t),r.warehouseList=n.results.map((function(e){return e.searchText=e.warehouseName+" - "+e.warehouseCode,e})),e&&i.itemListArray.forEach((function(e,t){r.setBinList(t,!0,e.binInfo)}))):r.utilsService.showFailureMsg(n)}))}},{key:"setBinList",value:function(e,t,i){this.branchUtilsService.txnSetBinListAndPreselect(this.warehouseList,this.itemList,this.myForm1,e,"warehouseId","binId","binList",t,i),this.myForm1.controls.itemListArray.at(e).patchValue({stockDetails:""})}},{key:"setRequesterTypeAndName",value:function(){this.storageService.get("employeeTypeId");var e=this.storageService.get("userId");"purchaseRequest"==this.txnKeys.inputScreenName&&(this.myForm1.patchValue({requesterTypeId:2}),this.getRequesterList(),this.myForm1.patchValue({requesterId:e}))}},{key:"showTxnOptionsSidebar",value:function(e){this.branchUtilsService.spiTxnOptions.next(!1===e?{show:!1}:{show:!0,spiName:this.branchUtilsService.spiTxnId.purchase,screenName:this.txnKeys.inputScreenName,editId:this.txnKeys.inputEditId,bpId:this.myForm1Data.vendorBpId,status:this.myForm1Data.status})}},{key:"downloadPdf",value:function(){this.branchUtilsService.spiTxnOptionsDownloadPdf.next({spiName:this.branchUtilsService.spiTxnId.purchase,screenName:this.txnKeys.inputScreenName,id:this.txnKeys.inputEditId})}},{key:"onKeydownHandler",value:function(e){e.ctrlKey&&"s"===e.key.toLowerCase()&&(this.txnKeys.inputEditId&&"1"===this.txnKeys.editStatusId||!this.txnKeys.inputEditId)&&(this.saveUpdate(),e.preventDefault()),this.txnKeys.inputEditId&&e.ctrlKey&&-1!=="p".indexOf(e.key)&&(this.downloadPdf(),e.preventDefault())}},{key:"ngOnDestroy",value:function(){this.reInitializeGlobalVariables(),this.itemListColumnOrderChangesSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||er)(s.Pb(a.g),s.Pb(a.f),s.Pb(a.a),s.Pb(l.l),s.Pb(c.a),s.Pb(b),s.Pb(ee.a),s.Pb(u.e),s.Pb(n.a),s.Pb(s.h),s.Pb(te.b))},er.\u0275cmp=s.Jb({type:er,selectors:[["app-purchase-txn-add"]],viewQuery:function(e,t){var i;1&e&&(s.Pc(Z.a,!0),s.Pc(X.a,!0),s.Pc(ae,!0),s.Pc(se,!0),s.Pc(ce,!0),s.Pc(oe,!0),s.Pc(ue,!0),s.Pc(de,!0),s.Pc(le,!0),s.Pc(be,!0),s.Pc(me,!0),s.Pc(pe,!0),s.Pc(he,!0),s.Pc(fe,!0),s.Pc(ve,!0),s.Pc(ge,!0),s.Pc(ye,!0),s.Pc(Se,!0),s.Pc(Ie,!0),s.Pc(Ce,!0),s.Pc(Le,!0),s.Pc(Ue,!0),s.Pc(Ve,!0),s.Pc(Ne,!0),s.Pc(De,!0),s.Pc(Fe,!0),s.Pc(xe,!0),s.Pc(Te,!0),s.Pc(Ae,!0),s.Pc(Ee,!0),s.Pc(Re,!0),s.Pc(Pe,!0),s.Pc(Oe,!0),s.Pc(ke,!0),s.Pc(Be,!0),s.Pc(Ke,!0)),2&e&&(s.zc(i=s.ec())&&(t.attachmentsComponent=i.first),s.zc(i=s.ec())&&(t.udfViewerComponent=i.first),s.zc(i=s.ec())&&(t.hActions=i.first),s.zc(i=s.ec())&&(t.hSno=i.first),s.zc(i=s.ec())&&(t.hItemName=i.first),s.zc(i=s.ec())&&(t.hRequiredDate=i.first),s.zc(i=s.ec())&&(t.hQuantity=i.first),s.zc(i=s.ec())&&(t.hOpenQty=i.first),s.zc(i=s.ec())&&(t.hUOM=i.first),s.zc(i=s.ec())&&(t.hUnitPrice=i.first),s.zc(i=s.ec())&&(t.hWarehouse=i.first),s.zc(i=s.ec())&&(t.hBin=i.first),s.zc(i=s.ec())&&(t.hHSN=i.first),s.zc(i=s.ec())&&(t.hDiscount=i.first),s.zc(i=s.ec())&&(t.hTaxCode=i.first),s.zc(i=s.ec())&&(t.hTax=i.first),s.zc(i=s.ec())&&(t.hTotal=i.first),s.zc(i=s.ec())&&(t.hDistRules=i.first),s.zc(i=s.ec())&&(t.hWeight=i.first),s.zc(i=s.ec())&&(t.bActions=i.first),s.zc(i=s.ec())&&(t.bSno=i.first),s.zc(i=s.ec())&&(t.bItemName=i.first),s.zc(i=s.ec())&&(t.bRequiredDate=i.first),s.zc(i=s.ec())&&(t.bQuantity=i.first),s.zc(i=s.ec())&&(t.bOpenQty=i.first),s.zc(i=s.ec())&&(t.bUOM=i.first),s.zc(i=s.ec())&&(t.bUnitPrice=i.first),s.zc(i=s.ec())&&(t.bWarehouse=i.first),s.zc(i=s.ec())&&(t.bBin=i.first),s.zc(i=s.ec())&&(t.bHSN=i.first),s.zc(i=s.ec())&&(t.bDiscount=i.first),s.zc(i=s.ec())&&(t.bTaxCode=i.first),s.zc(i=s.ec())&&(t.bTax=i.first),s.zc(i=s.ec())&&(t.bTotal=i.first),s.zc(i=s.ec())&&(t.bDistRules=i.first),s.zc(i=s.ec())&&(t.bWeight=i.first))},hostBindings:function(e,t){1&e&&s.dc("keydown",(function(e){return t.onKeydownHandler(e)}),!1,s.Bc)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-columns"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"fa","fa-plus-square"],[1,"working-container","spi-txn-add",3,"formGroup"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row"],[1,"form-group","col-sm-3"],[1,"form-label"],[1,"mandatory"],[1,"col-sm-6"],["formControlName","documentNumberingId","bindLabel","documentNumberingName","bindValue","id","placeholder","--SELECT--",3,"items","change"],["type","text","formControlName","documentNumber",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],["class","form-group col-sm-3",4,"ngIf"],["formControlName","postingDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","documentDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","status",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],["formControlName","remarks","rows","2",1,"form-control","form-control-sm"],[1,"box-body","box-table"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-striped","table-bordered"],[4,"ngFor","ngForOf"],["formArrayName","itemListArray"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-sm-7","text-center"],[1,"calc-img"],[1,"col-sm-5"],[1,"table","table-striped","table-bordered","calculation"],[2,"min-width","150px"],[2,"width","100px"],[1,"text-right",2,"min-width","150px"],[1,"text-right"],["type","text","formControlName","discountPercentage",1,"form-control","form-control-sm","text-right",3,"keyup"],[1,"checkbox"],["type","checkbox","formControlName","roundingOffCheckbox",3,"ngModelChange"],[1,"checkmark"],["type","text","formControlName","rounding",1,"form-control","form-control-sm","text-right",3,"keyup"],[1,"net"],[1,"net","text-right"],["class","box",4,"ngIf"],[3,"type"],[3,"type","doSuccess"],[1,"btn-group","text-right"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],["hActions",""],["hSno",""],["hItemName",""],["hRequiredDate",""],["hQuantity",""],["hOpenQty",""],["hUOM",""],["hUnitPrice",""],["hWarehouse",""],["hBin",""],["hHSN",""],["hDiscount",""],["hTaxCode",""],["hTax",""],["hTotal",""],["hDistRules",""],["hWeight",""],["bActions",""],["bSno",""],["bItemName",""],["bRequiredDate",""],["bQuantity",""],["bOpenQty",""],["bUOM",""],["bUnitPrice",""],["bWarehouse",""],["bBin",""],["bHSN",""],["bDiscount",""],["bTaxCode",""],["bTax",""],["bTotal",""],["bDistRules",""],["bWeight",""],[1,"fa","fa-print"],[1,"validation-error"],["formControlName","requesterTypeId",1,"form-control","form-control-sm",3,"change"],["value",""],[3,"value"],[1,"position-relative"],["formControlName","requesterId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["ng-option-tmp",""],["class","info-icon","container","body","tooltip","View Details",3,"click",4,"ngIf"],["container","body","tooltip","View Details",1,"info-icon",3,"click"],[1,"fa","fa-info-circle"],[1,"action-control"],["formControlName","vendorBpId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple","focus","change"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click"],[1,"fa","fa-plus"],[3,"click"],[1,"fa","fa-redo-alt"],["formControlName","vendorBpContactsId","bindLabel","contactName","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["formControlName","currencyId",1,"form-control","form-control-sm"],["type","text","formControlName","referenceNumber",1,"form-control","form-control-sm"],["formControlName","validUntil",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","deliveryDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","dueDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","buyerEmpId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"formGroupName"],["colspan","16"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],[1,"badge","badge-danger"],["formControlName","vendorShipToBpAddressId",1,"form-control","form-control-sm",3,"change"],["formControlName","vendorShipToAddress",1,"form-control","form-control-sm"],["formControlName","vendorPayToBpAddressId",1,"form-control","form-control-sm",3,"change"],["formControlName","vendorPayToAddress",1,"form-control","form-control-sm"],["formControlName","paymentTermsId",1,"form-control","form-control-sm",3,"change"],["formControlName","paymentMethodId",1,"form-control","form-control-sm"],["formControlName","cancellationDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["type","checkbox","formControlName","goodsInTransit"],["formControlName","requiredDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["type","text","formControlName","taxCode",1,"form-control","form-control-sm"],[1,"fa","fa-save"],[1,"fa","fa-broom"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[2,"min-width","80px"],[2,"min-width","30px"],[2,"min-width","200px"],["style","min-width:130px",4,"ngIf"],[2,"min-width","130px"],[2,"min-width","100px"],["class","mandatory",4,"ngIf"],[2,"min-width","120px"],[3,"formGroup"],["placement","top","container","body","tooltip","Delete",1,"action","red",3,"click"],[1,"fa","fa-minus-circle"],["formControlName","itemId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","virtualScroll","search","change"],[1,"small-text"],["formControlName","requiredDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["type","text","formControlName","quantity",1,"form-control","form-control-sm","text-right",3,"keyup"],["formControlName","uomId","bindLabel","uomName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["type","text","formControlName","unitPrice",1,"form-control","form-control-sm","text-right",3,"keyup"],["formControlName","warehouseId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","change"],["formControlName","binId","bindLabel","binName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["tooltip","Click to get stock details","container","body","placement","bottom",1,"info-icon",3,"click"],["popTemplate",""],["container","body","placement","bottom",3,"popover","outsideClick"],[1,"mb-1"],["formControlName","hsnId","bindLabel","hsnLabel","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["formControlName","taxId","bindLabel","taxCode","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","change"],[1,"text-right",3,"formGroupName"],["formControlName","distributionRulesId","bindLabel","distributionName","bindValue","id","placeholder","--SELECT--","appendTo","body","groupBy","dimensionDescription",3,"items","multiple","add"],["type","text","formControlName","itemWeight",1,"form-control","form-control-sm","text-right",3,"keyup"]],template:function(e,t){1&e&&s.Jc(0,Xi,230,63,"ng-container",0),2&e&&s.oc("ngIf",t.screenAcl.view)},directives:[m.m,u.n,u.i,ie.a,u.m,u.g,u.b,p.a,u.t,m.l,m.n,u.d,u.a,X.a,Z.a,re.a,u.p,u.v,ie.c,v.a,n.g,m.q,u.j,ne.a],styles:[""]}),er),rr=n.h.forChild([{path:"purchase-txn-list/:screenName",component:j},{path:"purchase-txn-add/:screenName",component:ir},{path:"purchase-txn-edit/:screenName/:id",component:ir},{path:"purchase-txn-edit-draft/:screenName/:draftId",component:ir},{path:"purchase-txn-copy/:screenName/:copyScreenName/:copyId",component:ir},{path:"purchase-txn-copy/:screenName/:copyScreenName/:copyId/:vendorId",component:ir},{path:"purchase-txn-duplicate/:screenName/:duplicateId",component:ir}]),nr=i("o+NB"),ar=i("7zUj"),sr=i("N5hj"),cr=i("dJ0z"),or=((tr=function e(){_classCallCheck(this,e)}).\u0275mod=s.Nb({type:tr}),tr.\u0275inj=s.Mb({factory:function(e){return new(e||tr)},providers:[b],imports:[[rr,nr.BranchModule,ar.a,sr.a,cr.a]]}),tr)}}]);