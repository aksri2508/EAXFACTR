function _classCallCheck(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(o,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(o,i.key,i)}}function _createClass(o,t,n){return t&&_defineProperties(o.prototype,t),n&&_defineProperties(o,n),o}(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{Li92:function(o,t,n){"use strict";n.r(t),n.d(t,"PageModule",(function(){return E}));var i,e=n("tyNb"),r=n("fXoL"),a=((i=function(){function o(){_classCallCheck(this,o)}return _createClass(o,[{key:"ngOnInit",value:function(){}}]),o}()).\u0275fac=function(o){return new(o||i)},i.\u0275cmp=r.Jb({type:i,selectors:[["app-page-container"]],decls:1,vars:0,template:function(o,t){1&o&&r.Qb(0,"router-outlet")},directives:[e.i],styles:[""]}),i),s=n("3Pt+"),c=n("ey9i"),l=n("oARB"),g=n("ofXK");function m(o,t){1&o&&(r.Vb(0,"h5"),r.Lc(1,"Login to your workspace"),r.Ub())}function d(o,t){1&o&&(r.Vb(0,"h5"),r.Lc(1,"Forgot Password"),r.Ub())}function p(o,t){if(1&o&&(r.Vb(0,"option",23),r.Lc(1),r.Ub()),2&o){var n=t.$implicit;r.oc("value",n.id),r.Cb(1),r.Mc(n.companyName)}}function u(o,t){if(1&o&&(r.Vb(0,"div",24),r.Lc(1),r.Ub()),2&o){var n=r.hc(2);r.Cb(1),r.Nc(" ",n.myFormErrors1.companyId," ")}}function b(o,t){if(1&o){var n=r.Wb();r.Vb(0,"div",8),r.Vb(1,"label",9),r.Lc(2,"Company"),r.Ub(),r.Vb(3,"select",20),r.dc("change",(function(){return r.Dc(n),r.hc().getBranchList()})),r.Vb(4,"option",21),r.Lc(5,"--SELECT--"),r.Ub(),r.Jc(6,p,2,2,"option",22),r.Ub(),r.Jc(7,u,2,1,"div",12),r.Ub()}if(2&o){var i=r.hc();r.Cb(6),r.oc("ngForOf",i.companyList),r.Cb(1),r.oc("ngIf",i.myFormErrors1.companyId)}}function h(o,t){if(1&o&&(r.Vb(0,"option",23),r.Lc(1),r.Ub()),2&o){var n=t.$implicit;r.oc("value",n.id),r.Cb(1),r.Mc(n.branchName)}}function f(o,t){if(1&o&&(r.Vb(0,"div",24),r.Lc(1),r.Ub()),2&o){var n=r.hc(2);r.Cb(1),r.Nc(" ",n.myFormErrors1.branchId," ")}}function y(o,t){if(1&o&&(r.Vb(0,"div",8),r.Vb(1,"label",9),r.Lc(2,"Branch"),r.Ub(),r.Vb(3,"select",25),r.Vb(4,"option",21),r.Lc(5,"--SELECT--"),r.Ub(),r.Jc(6,h,2,2,"option",22),r.Ub(),r.Jc(7,f,2,1,"div",12),r.Ub()),2&o){var n=r.hc();r.Cb(6),r.oc("ngForOf",n.branchList),r.Cb(1),r.oc("ngIf",n.myFormErrors1.branchId)}}function v(o,t){1&o&&r.Qb(0,"input",26)}function C(o,t){if(1&o){var n=r.Wb();r.Vb(0,"input",27),r.dc("keyup.enter",(function(){return r.Dc(n),r.hc().forgotPassword()})),r.Ub()}}function I(o,t){if(1&o&&(r.Vb(0,"div",24),r.Lc(1),r.Ub()),2&o){var n=r.hc();r.Cb(1),r.Nc(" ",n.myFormErrors1.emailId," ")}}function F(o,t){if(1&o&&(r.Vb(0,"div",24),r.Lc(1),r.Ub()),2&o){var n=r.hc(2);r.Cb(1),r.Nc(" ",n.myFormErrors1.password," ")}}var P=function(o,t){return{"fa-eye-slash":o,"fa-eye":t}};function w(o,t){if(1&o){var n=r.Wb();r.Vb(0,"div",8),r.Vb(1,"label",9),r.Lc(2,"Password"),r.Ub(),r.Vb(3,"div",28),r.Vb(4,"input",29),r.dc("keyup.enter",(function(){return r.Dc(n),r.hc().checkLogin()})),r.Ub(),r.Vb(5,"span",30),r.Vb(6,"i",31),r.dc("click",(function(){return r.Dc(n),r.hc().toggleFieldTextType()})),r.Ub(),r.Ub(),r.Ub(),r.Jc(7,F,2,1,"div",12),r.Ub()}if(2&o){var i=r.hc();r.Cb(4),r.oc("type",i.fieldTextType?"text":"password"),r.Cb(2),r.oc("ngClass",r.tc(3,P,!i.fieldTextType,i.fieldTextType)),r.Cb(1),r.oc("ngIf",i.myFormErrors1.password)}}function V(o,t){if(1&o&&(r.Vb(0,"a",32),r.Lc(1,"Forgot Password?"),r.Ub()),2&o){var n=r.hc();r.qc("routerLink","/page/forgot-password/",n.loginType,"/true")}}function T(o,t){if(1&o&&(r.Vb(0,"a",32),r.Lc(1,"Back to Login"),r.Ub()),2&o){var n=r.hc();r.qc("routerLink","/page/login/",n.loginType,"")}}function x(o,t){if(1&o){var n=r.Wb();r.Vb(0,"button",33),r.dc("click",(function(){return r.Dc(n),r.hc().checkLogin()})),r.Lc(1,"Sign In"),r.Ub()}}function L(o,t){if(1&o){var n=r.Wb();r.Vb(0,"button",33),r.dc("click",(function(){return r.Dc(n),r.hc().forgotPassword()})),r.Lc(1,"Verify and Proceed"),r.Ub()}}function M(o,t){1&o&&(r.Vb(0,"div",34),r.Lc(1,"Application Expired"),r.Ub())}var S,k,U,O=((S=function(){function o(t,n,i,e,r){_classCallCheck(this,o),this.formBuilder=t,this.utilsService=n,this.storageService=i,this.authorizationDataService=e,this.activatedRoute=r,this.appConstants=c.h,this.loginTypeList=["branch","company","org"],this.companyList=[],this.branchList=[],this.forgotPasswordFlag=!1,this.expiryFlag=!1,this.myForm1Data={},this.myFormErrors1={companyId:"",branchId:"",emailId:"",password:""},this.myFormValidationMsgs1={companyId:{required:"Company is required"},branchId:{required:"Branch is required"},emailId:{required:"Email ID is required",pattern:"Please enter valid Email ID"},password:{required:"Password is required"}}}return _createClass(o,[{key:"ngOnInit",value:function(){this.initializeForm1(),this.initializeSubscriptions()}},{key:"initializeSubscriptions",value:function(){var o=this;this.activatedRoute.params.subscribe((function(t){if(o.loginType=t.type?t.type:"branch",o.forgotPasswordFlag=!!t.isForgot,o.loginTypeList.indexOf(o.loginType)<0)return o.utilsService.redirect("/page/404"),!1;o.setValidations(),"org"!==o.loginType&&o.checkOrgExpiry()}))}},{key:"initializeForm1",value:function(){var o=this;this.myForm1=this.formBuilder.group({companyId:[""],branchId:[""],emailId:["",[s.u.required,s.u.pattern(this.appConstants.VALIDATION_PATTERNS.email)]],password:["",[s.u.required]]}),this.myForm1.valueChanges.subscribe((function(t){o.utilsService.validation(o.myForm1,o.myFormErrors1,o.myFormValidationMsgs1),o.myForm1Data=o.myForm1.getRawValue()})),this.myForm1Data=this.myForm1.getRawValue()}},{key:"setValidations",value:function(){"branch"===this.loginType?(this.myForm1.controls.companyId.setValidators(s.u.required),this.myForm1.controls.branchId.setValidators(s.u.required)):"company"===this.loginType?(this.myForm1.controls.companyId.setValidators(s.u.required),this.myForm1.controls.branchId.setValidators(null)):"org"===this.loginType&&(this.myForm1.controls.companyId.setValidators(null),this.myForm1.controls.branchId.setValidators(null)),this.myForm1.controls.password.setValidators(this.forgotPasswordFlag?null:s.u.required)}},{key:"checkOrgExpiry",value:function(){var o=this;this.authorizationDataService.checkOrgExpiry().subscribe((function(t){"SUCCESS"===t.status?o.getCompanyList():o.expiryFlag=!0}))}},{key:"toggleFieldTextType",value:function(){this.fieldTextType=!this.fieldTextType}},{key:"getCompanyList",value:function(){var o=this;this.authorizationDataService.getCompanyList().subscribe((function(t){"SUCCESS"===t.status?o.companyList=t.results:o.utilsService.showFailureMsg(t)}))}},{key:"getBranchList",value:function(){var o=this;return"branch"===this.loginType&&(this.branchList=[],this.myForm1Data.companyId?void this.authorizationDataService.getBranchList(this.myForm1Data.companyId).subscribe((function(t){"SUCCESS"===t.status?o.branchList=t.results:o.utilsService.showFailureMsg(t)})):(this.myForm1.patchValue({branchId:""}),!1))}},{key:"checkLogin",value:function(){var o=this;if(!this.myForm1.valid)return this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1,!0),!1;var t={loginType:this.loginType,username:this.myForm1Data.emailId,password:this.myForm1Data.password};"branch"===this.loginType?(t.companyId=this.myForm1Data.companyId,t.branchId=this.myForm1Data.branchId):"company"===this.loginType&&(t.companyId=this.myForm1Data.companyId),this.authorizationDataService.checkLogin(t).subscribe((function(t){if("SUCCESS"===t.status){var n=t.results,i={};i.token=n.token,i.identity=n.identity,i.modulePath=o.loginType,i.loggedInModule="branch"===o.loginType?"BRANCH":"COMPANY",i.toasterFreeze=n.toasterFreeze,i.toasterPosition=n.toasterPosition,"company"===o.loginType?(i.companyId=n.companyId,i.companyName=n.companyName):"branch"===o.loginType&&(i.branchId=n.branchId,i.userId=n.id,i.name=n.userName,i.userImageUrl=n.profileImgUrl,i.distRulesMode="1"===n.hierarchyMode,i.salesTaxId=n.settings.salesTaxId,i.purchaseTaxId=n.settings.purchaseTaxId,i.bpCreditLimitStrictMode=n.settings.bpCreditLimitStrictMode,i.isSap="1"===n.isSap,i.defaultWarehouseId=n.defaultWarehouse,i.branchList=n.branchList,i.worklogType=n.worklogSheetType,i.isSingleBranchUser=1===n.branchList.length,i.employeeTypeId=n.employeeTypeId,i.empCode=n.empCode,i.designationName=n.designationName?n.designationName:"-",i.customerBpId=n.businessPartnerId,i.lineItemConfig=n.lineItemConfig,i.branchAccessControlList=t.results.accessControlData),o.storageService.set(i),o.utilsService.showSuccessMsg(t),o.utilsService.showSuccessMsg("Creating workspace, Please wait..."),o.utilsService.redirectToModuleDashboard()}else o.utilsService.showFailureMsg(t)}))}},{key:"forgotPassword",value:function(){var o=this;if(!this.myForm1.valid)return this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1,!0),!1;var t={loginType:this.loginType,username:this.myForm1Data.emailId,password:this.myForm1Data.password};"branch"===this.loginType?(t.companyId=this.myForm1Data.companyId,t.branchId=this.myForm1Data.branchId):"company"===this.loginType&&(t.companyId=this.myForm1Data.companyId),this.authorizationDataService.forgotPassword(t).subscribe((function(t){"SUCCESS"===t.status?(o.utilsService.showSuccessMsg(t),o.utilsService.redirect("/page/login/"+o.loginType)):o.utilsService.showFailureMsg(t)}))}}]),o}()).\u0275fac=function(o){return new(o||S)(r.Pb(s.e),r.Pb(c.g),r.Pb(c.f),r.Pb(l.h),r.Pb(e.a))},S.\u0275cmp=r.Jb({type:S,selectors:[["app-login"]],decls:26,vars:14,consts:[[1,"login"],[1,"row"],[1,"col-sm-4","offset-sm-1"],[1,"login-box",3,"formGroup"],[1,"logo"],["src","/assets/images/logo.png","height","50px"],[4,"ngIf"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"form-label"],["type","text","formControlName","emailId","class","form-control",4,"ngIf"],["type","text","formControlName","emailId","class","form-control",3,"keyup.enter",4,"ngIf"],["class","validation-error",4,"ngIf"],[1,"form-group","text-right"],[3,"routerLink",4,"ngIf"],[1,"btn-group","text-center"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"col-sm-6"],["src","/assets/images/login-concept.png","width","100%"],["class","expiry",4,"ngIf"],["formControlName","companyId",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"validation-error"],["formControlName","branchId",1,"form-control"],["type","text","formControlName","emailId",1,"form-control"],["type","text","formControlName","emailId",1,"form-control",3,"keyup.enter"],[1,"position-relative"],["formControlName","password",1,"form-control",3,"type","keyup.enter"],[1,"password-icon"],[1,"fa",3,"ngClass","click"],[3,"routerLink"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"expiry"]],template:function(o,t){1&o&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Qb(5,"img",5),r.Ub(),r.Jc(6,m,2,0,"h5",6),r.Jc(7,d,2,0,"h5",6),r.Jc(8,b,8,2,"div",7),r.Jc(9,y,8,2,"div",7),r.Vb(10,"div",8),r.Vb(11,"label",9),r.Lc(12,"Email ID"),r.Ub(),r.Jc(13,v,1,0,"input",10),r.Jc(14,C,1,0,"input",11),r.Jc(15,I,2,1,"div",12),r.Ub(),r.Jc(16,w,8,6,"div",7),r.Vb(17,"div",13),r.Jc(18,V,2,1,"a",14),r.Jc(19,T,2,1,"a",14),r.Ub(),r.Vb(20,"div",15),r.Jc(21,x,2,0,"button",16),r.Jc(22,L,2,0,"button",16),r.Ub(),r.Ub(),r.Ub(),r.Vb(23,"div",17),r.Qb(24,"img",18),r.Ub(),r.Ub(),r.Jc(25,M,2,0,"div",19),r.Ub()),2&o&&(r.Cb(3),r.oc("formGroup",t.myForm1),r.Cb(3),r.oc("ngIf",!t.forgotPasswordFlag),r.Cb(1),r.oc("ngIf",t.forgotPasswordFlag),r.Cb(1),r.oc("ngIf","company"===t.loginType||"branch"===t.loginType),r.Cb(1),r.oc("ngIf","branch"===t.loginType),r.Cb(4),r.oc("ngIf",!t.forgotPasswordFlag),r.Cb(1),r.oc("ngIf",t.forgotPasswordFlag),r.Cb(1),r.oc("ngIf",t.myFormErrors1.emailId),r.Cb(1),r.oc("ngIf",!t.forgotPasswordFlag),r.Cb(2),r.oc("ngIf",!t.forgotPasswordFlag),r.Cb(1),r.oc("ngIf",t.forgotPasswordFlag),r.Cb(2),r.oc("ngIf",!t.forgotPasswordFlag),r.Cb(1),r.oc("ngIf",t.forgotPasswordFlag),r.Cb(3),r.oc("ngIf",t.expiryFlag))},directives:[s.n,s.i,g.m,s.t,s.m,s.g,s.p,s.v,g.l,s.b,g.k,e.g],styles:[".login[_ngcontent-%COMP%]{height:100%;margin-top:7%}.login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]{padding:16px}.login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:16px;text-align:center}.login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-family:Open-Sans-SemiBold}.login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#929292}.login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:#e8f0fe;border:1px solid #e8f0fe}.login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding-left:24px;padding-right:24px}.login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   .password-icon[_ngcontent-%COMP%]{position:absolute;top:6px;right:10px;font-size:14px;cursor:pointer}.login[_ngcontent-%COMP%]   .expiry[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;font-size:18px;padding:6px 0;text-align:center;color:#e20606;background:#ffd2d2}"]}),S),_=e.h.forChild([{path:"",component:a,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:O},{path:"login/:type",component:O},{path:"forgot-password/:type/:isForgot",component:O},{path:"404",component:(k=function(){function o(t){_classCallCheck(this,o),this.utilsService=t}return _createClass(o,[{key:"ngOnInit",value:function(){}}]),o}(),k.\u0275fac=function(o){return new(o||k)(r.Pb(c.g))},k.\u0275cmp=r.Jb({type:k,selectors:[["app-page-not-found"]],decls:10,vars:0,consts:[[1,"row"],[1,"col-sm-12","text-center"],["src","/assets/images/404.png","height","200px"]],template:function(o,t){1&o&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Qb(2,"br"),r.Qb(3,"br"),r.Qb(4,"img",2),r.Qb(5,"br"),r.Qb(6,"br"),r.Vb(7,"h5"),r.Lc(8,"Please make sure the url is correct. If still facing issues, contact administrator."),r.Ub(),r.Qb(9,"br"),r.Ub(),r.Ub())},styles:[""]}),k)}]}]),D=n("PCNd"),E=((U=function o(){_classCallCheck(this,o)}).\u0275mod=r.Nb({type:U}),U.\u0275inj=r.Mb({factory:function(o){return new(o||U)},imports:[[_,D.a]]}),U)}}]);