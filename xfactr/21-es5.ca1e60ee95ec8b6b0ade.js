function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{WfjI:function(t,e,i){"use strict";i.r(e),i.d(e,"RentalModule",(function(){return Us}));var r,n,a,o=i("tyNb"),s=i("ey9i"),c=i("fXoL"),u=i("oARB"),l=i("3Pt+"),m=i("HDdC"),b=i("LvDl"),d=i("IzNV"),h=((n=function(){function t(e,i,r,n,a,o,c,u,l,m){_classCallCheck(this,t),this.rentalQuoteDataService=e,this.rentalOrderDataService=i,this.rentalDeliveryDataService=r,this.rentalInvoiceDataService=n,this.rentalReturnDataService=a,this.inspectionOutDataService=o,this.branchUtilsService=c,this.utilsService=u,this.storageService=l,this.formBuilder=m,this.appConstants=s.h,this.initializeSubscriptions()}return _createClass(t,[{key:"initializeSubscriptions",value:function(){var t=this;this.branchUtilsService.spiTxnOptionsDownloadPdf.subscribe((function(e){t.downloadPDF(e)}))}},{key:"checkScreenNameValid",value:function(t){return!(!this.branchUtilsService.screenAttributes.hasOwnProperty(t)||"rentalQuote"!==t&&"rentalOrder"!==t&&"rentalDelivery"!==t&&"rentalReturn"!==t&&"rentalInvoice"!==t)}},{key:"getScreenDataService",value:function(t){return"rentalQuote"===t?this.rentalQuoteDataService:"rentalOrder"===t?this.rentalOrderDataService:"rentalDelivery"===t?this.rentalDeliveryDataService:"rentalInvoice"===t?this.rentalInvoiceDataService:"rentalReturn"===t?this.rentalReturnDataService:"inspectionOut"===t?this.inspectionOutDataService:void 0}},{key:"addFieldsVisibility",value:function(t,e){return!("rentalQuote"!==t&&"rentalOrder"!==t||"fnDeliveryDate"!==e&&"fnTaxFields"!==e&&"fnPaymentFields"!==e)||"rentalDelivery"===t&&"fnDeliveryDate"===e||"rentalInvoice"===t&&("fnDueDate"===e||"fnTaxFields"===e||"fnPaymentFields"===e)||"rentalReturn"===t&&"fnReturnDate"===e||void 0}},{key:"getFormErrors",value:function(t,e){if("mainFields"===e){var i={documentNumberingId:"",documentNumber:"",customerBpId:"",currencyId:"",postingDate:"",documentDate:"",status:"",empId:"",discountPercentage:"",rounding:"",totalAmount:"",itemListArray:[]};return"rentalQuote"===t||"rentalOrder"===t||"rentalDelivery"===t?i.deliveryDate="":"rentalInvoice"===t?i.dueDate="":"rentalReturn"===t&&(i.returnDate=""),i}if("itemFields"===e){var r={rentalItemId:"",rentalEquipmentId:"",taxId:"",quantity:""};return"rentalQuote"!==t&&(r.duration="",r.startDate="",r.endDate="",r.shipDate="",r.returnDate="",r.poExpiryDate=""),r}}},{key:"getFormValMsgs",value:function(t){var e={documentNumberingId:{required:"Document No is required"},documentNumber:{required:"Document No is required"},customerBpId:{required:"Business Partner Name is required"},currencyId:{required:"Currency is required"},postingDate:{required:"Posting Date is required"},documentDate:{required:"Document Date is required"},empId:{required:"Employee is required"},status:{required:"Status is required"},discountPercentage:{min:"Enter 0 to 100",max:"Enter 0 to 100",pattern:"Only positive numbers are allowed"},rounding:{pattern:"Only numbers are allowed"},totalAmount:{required:"Total Amount is required"}};return"rentalQuote"===t||"rentalOrder"===t||"rentalDelivery"===t?e.deliveryDate={required:"Delivery Date is required"}:"rentalInvoice"===t?e.dueDate={required:"Due Date is required"}:"rentalReturn"===t&&(e.returnDate={required:"Return Date is required"}),e.itemListArray={rentalItemId:{required:"Item Name is required"},rentalEquipmentId:{required:"Equipment is required"},taxId:{required:"Tax Code is required"},quantity:{min:"Minimum 1",pattern:"Only positive numbers are allowed"}},"rentalQuote"!==t&&(e.itemListArray.duration={required:"Duration is required"},e.itemListArray.startDate={required:"Start Date is required"},e.itemListArray.endDate={required:"End Date is required"},e.itemListArray.shipDate={required:"Ship Date is required"},e.itemListArray.returnDate={required:"Return Date is required"},e.itemListArray.poExpiryDate={required:"PO Expiry Date is required"}),e}},{key:"getFormMainFields",value:function(t){var e={documentNumberingId:[null,[l.u.required]],documentNumber:["",[l.u.required]],documentNumberingType:[""],customerBpId:[null,[l.u.required]],customerBpContactsId:[null],currencyId:["",[l.u.required]],referenceNumber:[""],postingDate:[new Date,[l.u.required]],documentDate:[new Date,[l.u.required]],empId:[null,[l.u.required]],status:["1",[l.u.required]],remarks:[""],totalBeforeDiscount:["0.00"],discountPercentage:["0.00",[l.u.min(0),l.u.max(100),l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],discountValue:["0.00"],taxPercentage:["0.00"],roundingOffCheckbox:[!1],rounding:[{value:"0.00",disabled:!0},[l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveNegativeFloatNumber)]],totalAmount:["0.00",[l.u.required]],customerShipToBpAddressId:[""],customerShipToAddress:[""],customerBillToBpAddressId:[""],customerBillToAddress:[""],deletedItemChildIds:[[]],termsAndConditionId:[""],itemsTotalAmount:["0.00"],editFlag:[!1]};"rentalQuote"===t||"rentalOrder"===t?(e.deliveryDate=["",[l.u.required]],e.taxCode=[""],e.paymentTermsId=[""],e.paymentMethodId=[""]):"rentalInvoice"===t?(e.dueDate=["",[l.u.required]],e.taxCode=[""],e.paymentTermsId=[""],e.paymentMethodId=[""]):"rentalReturn"===t?e.returnDate=["",[l.u.required]]:"rentalDelivery"===t&&(e.deliveryDate=["",[l.u.required]]),e.itemListArray=this.formBuilder.array([]);var i=this.formBuilder.group(e);return this.setMainFieldsCustomValidation(i,t),i}},{key:"setMainFieldsCustomValidation",value:function(t,e){var i=[];"rentalQuote"===e||"rentalOrder"===e||"rentalDelivery"===e?i.push(this.utilsService.startEndDateValidator("documentDate","deliveryDate","invalidDeliveryDate","Should => Document Date")):"rentalReturn"===e?i.push(this.utilsService.startEndDateValidator("documentDate","returnDate","invalidReturnDate","Should => Document Date")):"rentalInvoice"===e&&i.push(this.utilsService.startEndDateValidator("documentDate","dueDate","invalidDueDate","Should => Document Date")),i.push(this.utilsService.startEndDateValidator("postingDate","documentDate","invalidPostingDate","Should <= Document Date")),t.setValidators(l.u.compose(i)),t.updateValueAndValidity()}},{key:"getMainFieldsWithData",value:function(t,e){var i={};return this.utilsService.updateObject(i,"documentNumberingId",e.documentNumberingId),this.utilsService.updateObject(i,"documentNumber",e.documentNumber),e.documentNumberingInfo&&this.utilsService.updateObject(i,"documentNumberingType",e.documentNumberingInfo.length>0?e.documentNumberingInfo[0].documentNumberingType:""),this.utilsService.updateObject(i,"customerBpId",e.customerBpId),this.utilsService.updateObject(i,"customerBpContactsId",e.customerBpContactsId),this.utilsService.updateObject(i,"currencyId",e.currencyId),this.utilsService.updateObject(i,"referenceNumber",e.referenceNumber),this.utilsService.updateObject(i,"postingDate",e.postingDate,"date"),this.utilsService.updateObject(i,"documentDate",e.documentDate,"date"),this.utilsService.updateObject(i,"empId",e.empId),this.utilsService.updateObject(i,"status",e.status),this.utilsService.updateObject(i,"remarks",e.remarks),this.utilsService.updateObject(i,"totalBeforeDiscount",e.totalBeforeDiscount),this.utilsService.updateObject(i,"discountPercentage",e.discountPercentage),this.utilsService.updateObject(i,"discountValue",e.discountValue),this.utilsService.updateObject(i,"taxPercentage",e.taxPercentage),"1"===e.roundingFlag&&(i.roundingOffCheckbox=!0),this.utilsService.updateObject(i,"rounding",e.rounding),this.utilsService.updateObject(i,"totalAmount",e.totalAmount),this.utilsService.updateObject(i,"customerShipToBpAddressId",e.customerShipToBpAddressId),this.utilsService.updateObject(i,"customerShipToAddress",e.customerShipToAddress),this.utilsService.updateObject(i,"customerBillToBpAddressId",e.customerBillToBpAddressId),this.utilsService.updateObject(i,"customerBillToAddress",e.customerBillToAddress),this.utilsService.updateObject(i,"termsAndConditionId",e.termsAndConditionId),"rentalQuote"===t||"rentalOrder"===t||"rentalDelivery"===t?(this.utilsService.updateObject(i,"deliveryDate",e.deliveryDate,"date"),this.utilsService.updateObject(i,"taxCode",e.taxCode),this.utilsService.updateObject(i,"paymentTermsId",e.paymentTermsId),this.utilsService.updateObject(i,"paymentMethodId",e.paymentMethodId)):"rentalInvoice"===t?(this.utilsService.updateObject(i,"dueDate",e.dueDate,"date"),this.utilsService.updateObject(i,"taxCode",e.taxCode),this.utilsService.updateObject(i,"paymentTermsId",e.paymentTermsId),this.utilsService.updateObject(i,"paymentMethodId",e.paymentMethodId)):"rentalReturn"===t?this.utilsService.updateObject(i,"returnDate",e.returnDate,"date"):"rentalDelivery"===t&&this.utilsService.updateObject(i,"deliveryDate",e.deliveryDate,"date"),this.utilsService.updateObject(i,"editFlag",e.editFlag),i}},{key:"getFormItemFields",value:function(t,e,i){var r=[];this.storageService.get("distRulesMode")&&r.push(l.u.required);var n={rentalItemId:[null,[l.u.required]],quantity:[1,[l.u.min(1),l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveIntNumber)]],generalDetails:[""],duration:[""],startDate:[""],endDate:[""],shipDate:[""],returnDate:[""],poExpiryDate:[""],uomId:[null],unitPrice:["0.00",[l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],hsnId:[null],discountPercentage:["0.00",[l.u.min(0),l.u.max(100),l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],taxId:[this.storageService.get("salesTaxId")?this.storageService.get("salesTaxId"):null,[l.u.required]],itemTaxPercentage:["0.00"],itemTaxValue:["0.00"],totalItemAmount:["0.00"],distributionRulesId:[null,r],id:[""],copyFromType:[""],copyFromId:[""],equipmentList:[[]],rentalEquipmentId:[null],isUtilized:[""],showDeleteIcon:[!0]};"rentalQuote"!==t&&(n.duration[1]=l.u.required,n.startDate[1]=l.u.required,n.endDate[1]=l.u.required,n.shipDate[1]=l.u.required,n.returnDate[1]=l.u.required,n.poExpiryDate[1]=l.u.required,n.rentalEquipmentId[1]=l.u.required),"rentalOrder"===t?(n.openQuantity=[0],n.orderedQuantity=[0]):"rentalInvoice"===t&&(n.rentalWorklogId=[null],n.rentalWorklogList=[[]],n.copyFromOpenQuantity=[0],n.openQuantity=[0],n.orderedQuantity=[0]),e&&this.setDataToItemFields(t,n,e);var a=this.formBuilder.group(n);return this.setItemFieldsCustomValidations(a,t,i),a}},{key:"setItemFieldsCustomValidations",value:function(t,e,i){var r=[],n=t.getRawValue();n.startDate&&n.endDate&&r.push(this.utilsService.startEndDateValidator("startDate","endDate","invalidEndDate","Should >= Start Date")),n.shipDate&&n.startDate&&r.push(this.utilsService.startEndDateValidator("shipDate","startDate","invalidShipDate","Should <= Start Date")),n.endDate&&n.returnDate&&r.push(this.utilsService.startEndDateValidator("endDate","returnDate","invalidReturnDate","Should >= End Date")),"edit"!==i||"rentalOrder"!==e&&"rentalInvoice"!==e?"copy"!==i||"rentalOrder"!==e&&"rentalInvoice"!==e||r.push(this.utilsService.maxValidator("quantity",n.copyFromOpenQuantity,"invalidMaxQuantity","Maximum : "+n.copyFromOpenQuantity)):r.push(this.utilsService.minValidator("quantity",n.orderedQuantity,"invalidMinQuantity","Minimum : "+n.orderedQuantity)),t.setValidators(l.u.compose(r)),t.updateValueAndValidity()}},{key:"setDataToItemFields",value:function(t,e,i){this.utilsService.updateObject(e,"rentalItemId",i.rentalItemId),this.utilsService.updateObject(e,"rentalEquipmentId",i.rentalEquipmentId),this.utilsService.updateObject(e,"generalDetails",i.generalDetails),this.utilsService.updateObject(e,"quantity",i.quantity),this.utilsService.updateObject(e,"duration",i.duration),this.utilsService.updateObject(e,"startDate",i.startDate,"date"),this.utilsService.updateObject(e,"endDate",i.endDate,"date"),this.utilsService.updateObject(e,"shipDate",i.shipDate,"date"),this.utilsService.updateObject(e,"returnDate",i.returnDate,"date"),this.utilsService.updateObject(e,"poExpiryDate",i.poExpiryDate,"date"),this.utilsService.updateObject(e,"uomId",i.uomId),this.utilsService.updateObject(e,"unitPrice",i.unitPrice),this.utilsService.updateObject(e,"hsnId",i.hsnId),this.utilsService.updateObject(e,"discountPercentage",i.discountPercentage),this.utilsService.updateObject(e,"taxId",i.taxId),this.utilsService.updateObject(e,"itemTaxPercentage",i.itemTaxPercentage),this.utilsService.updateObject(e,"itemTaxValue",i.itemTaxValue),this.utilsService.updateObject(e,"totalItemAmount",i.totalItemAmount),this.utilsService.isEmpty(i.distributionRulesId)||(e.distributionRulesId[0]=this.branchUtilsService.distRulesRemoveZeroPatternOnEdit(i.distributionRulesId)),this.utilsService.updateObject(e,"id",i.id),this.utilsService.updateObject(e,"copyFromType",i.copyFromType),this.utilsService.updateObject(e,"copyFromId",i.copyFromId),this.utilsService.updateObject(e,"equipmentList",i.rentalItemInfo[0].rentalEquipmentList),this.utilsService.updateObject(e,"isUtilized",i.isUtilized),"rentalInvoice"===t&&(this.utilsService.updateObject(e,"rentalWorklogId",i.rentalWorklogId),this.utilsService.updateObject(e,"rentalWorklogList",i.rentalWorklogInfo),this.utilsService.updateObject(e,"orderedQuantity",i.orderedQuantity),this.utilsService.updateObject(e,"openQuantity",i.openQuantity),this.utilsService.updateObject(e,"copyFromOpenQuantity",i.copyFromOpenQuantity)),"rentalOrder"===t&&(this.utilsService.updateObject(e,"orderedQuantity",i.orderedQuantity),this.utilsService.updateObject(e,"openQuantity",i.openQuantity))}},{key:"getSaveUpdateDataFormation",value:function(t,e){var i=this,r=e.getRawValue(),n={documentNumberingId:r.documentNumberingId,documentNumber:r.documentNumber,documentNumberingType:r.documentNumberingType,postingDate:this.utilsService.getBackendDateFormat(r.postingDate),documentDate:this.utilsService.getBackendDateFormat(r.documentDate),status:r.status,remarks:r.remarks,totalBeforeDiscount:r.totalBeforeDiscount,discountPercentage:r.discountPercentage,discountValue:r.discountValue,taxPercentage:r.taxPercentage,roundingFlag:r.roundingOffCheckbox?1:0,rounding:r.rounding,totalAmount:r.totalAmount,customerBpId:r.customerBpId,customerBpContactsId:r.customerBpContactsId,currencyId:r.currencyId,referenceNumber:r.referenceNumber,empId:r.empId,roundingOffCheckbox:r.roundingOffCheckbox,customerShipToBpAddressId:r.customerShipToBpAddressId,customerShipToAddress:r.customerShipToAddress,customerBillToBpAddressId:r.customerBillToBpAddressId,customerBillToAddress:r.customerBillToAddress,itemListArray:[],deletedItemChildIds:r.deletedItemChildIds,termsAndConditionId:r.termsAndConditionId};return"rentalQuote"===t||"rentalOrder"===t?(n.deliveryDate=this.utilsService.getBackendDateFormat(r.deliveryDate),n.taxCode=r.taxCode,n.paymentTermsId=r.paymentTermsId,n.paymentMethodId=r.paymentMethodId):"rentalInvoice"===t?(n.dueDate=this.utilsService.getBackendDateFormat(r.dueDate),n.taxCode=r.taxCode,n.paymentTermsId=r.paymentTermsId,n.paymentMethodId=r.paymentMethodId):"rentalReturn"===t?n.returnDate=this.utilsService.getBackendDateFormat(r.returnDate):"rentalDelivery"===t&&(n.deliveryDate=this.utilsService.getBackendDateFormat(r.deliveryDate)),r.itemListArray.forEach((function(e){if("3"===r.status&&i.utilsService.isEmpty(e.id));else{var a={rentalItemId:e.rentalItemId,rentalEquipmentId:e.rentalEquipmentId,generalDetails:e.generalDetails,duration:e.duration,startDate:i.utilsService.getBackendDateFormat(e.startDate),endDate:i.utilsService.getBackendDateFormat(e.endDate),shipDate:i.utilsService.getBackendDateFormat(e.shipDate),returnDate:i.utilsService.getBackendDateFormat(e.returnDate),poExpiryDate:i.utilsService.getBackendDateFormat(e.poExpiryDate),quantity:e.quantity,uomId:e.uomId,unitPrice:e.unitPrice,hsnId:e.hsnId,discountPercentage:e.discountPercentage,taxId:e.taxId,itemTaxPercentage:e.itemTaxPercentage,itemTaxValue:e.itemTaxValue,totalItemAmount:e.totalItemAmount,distributionRulesId:Array.isArray(e.distributionRulesId)?e.distributionRulesId.join(","):"",id:e.id,copyFromType:e.copyFromType,copyFromId:e.copyFromId};"rentalInvoice"===t&&(a.rentalWorklogId=e.rentalWorklogId),n.itemListArray.push(a)}})),n}},{key:"manipulationsOnEdit",value:function(t,e){var i=this;"1"===e.value.status?(e.controls.documentNumberingId.disable(),e.controls.documentNumber.disable(),e.controls.customerBpId.disable(),e.controls.roundingOffCheckbox.disable(),e.controls.rounding.disable(),e.controls.itemListArray.controls.forEach((function(e){var r=e.getRawValue();e.controls.rentalItemId.disable(),i.utilsService.isEmpty(e.controls.rentalEquipmentId.value)?e.controls.rentalEquipmentId.enable():e.controls.rentalEquipmentId.disable(),"1"===r.isUtilized&&e.patchValue({showDeleteIcon:!1}),"rentalOrder"===t&&(parseInt(r.orderedQuantity,0)>0&&e.patchValue({showDeleteIcon:!1}),parseInt(r.openQuantity,0)<=0&&(e.disable(),e.patchValue({showDeleteIcon:!1}))),"rentalDelivery"!==t&&"rentalReturn"!==t&&"rentalInvoice"!==t||(e.disable(),e.patchValue({showDeleteIcon:!1}))})),"rentalDelivery"!==t&&"rentalReturn"!==t&&"rentalInvoice"!==t||(e.disable(),e.controls.customerBpContactsId.enable(),e.controls.empId.enable(),e.controls.remarks.enable(),e.controls.status.enable(),"rentalDelivery"===t?e.controls.deliveryDate.enable():"rentalInvoice"===t?e.controls.dueDate.enable():"rentalReturn"===t&&e.controls.returnDate.enable())):e.enable()}},{key:"manipulationsOnCopy",value:function(t,e){e.controls.customerBpId.disable(),e.controls.itemListArray.controls.forEach((function(t){t.controls.rentalItemId.disable(),t.controls.rentalEquipmentId.value?t.controls.rentalEquipmentId.disable():t.controls.rentalEquipmentId.enable()}))}},{key:"redirectToList",value:function(t){this.utilsService.redirect("/branch/rental/rental-txn-list/"+t)}},{key:"getFormSearchFields",value:function(t){return{fromDate:"",toDate:"",isDraft:!1,branchName:"",customerName:"",documentNumber:"",postingDate:"",DeliveryDate:"",status:1}}},{key:"getSearchDataFormation",value:function(t,e){return{fromDate:this.utilsService.getBackendDateFormat(e.fromDate),toDate:this.utilsService.getBackendDateFormat(e.toDate),isDraft:e.isDraft?1:0,branchName:e.branchName,customerName:e.customerName,documentNumber:e.documentNumber,postingDate:this.utilsService.getBackendDateFormat(e.postingDate),deliveryDate:this.utilsService.getBackendDateFormat(e.deliveryDate),status:e.status}}},{key:"redirectToAdd",value:function(t){this.utilsService.redirect("/branch/rental/rental-txn-add/"+t)}},{key:"redirectToEdit",value:function(t,e,i){this.utilsService.redirect("1"===i?"/branch/rental/rental-txn-edit-draft/"+t+"/"+this.utilsService.encrypt(e):"/branch/rental/rental-txn-edit/"+t+"/"+this.utilsService.encrypt(e))}},{key:"checkEquipmentDuplicateExist",value:function(t){var e=this,i=t.getRawValue(),r=[];return i.itemListArray.forEach((function(t){e.utilsService.isEmpty(t.rentalEquipmentId)||r.push({rentalEquipmentId:t.rentalEquipmentId})})),b.uniqWith(r,b.isEqual).length!==r.length}},{key:"checkWorklogDuplicateExist",value:function(t){var e=t.getRawValue(),i=[];return e.itemListArray.forEach((function(t){t.rentalWorklogId&&i.push({rentalWorklogId:t.rentalWorklogId})})),b.uniqWith(i,b.isEqual).length!==i.length}},{key:"checkWorklogUtilized",value:function(t){var e=this;return b.filter(t.itemListArray,(function(t){return!e.utilsService.isEmpty(t.rentalWorklogId)})).length>0}},{key:"getAnalyticsData",value:function(t){var e=this,i=this.getScreenDataService(t);return new m.a((function(t){i.getAnalyticsData().subscribe((function(i){if("SUCCESS"===i.status){var r=b.orderBy(i.results,["id"],["asc"]);t.next(r),t.complete()}else e.utilsService.showFailureMsg(i),t.error(),t.complete()}))}))}},{key:"downloadAsExcel",value:function(t,e){var i=this;this.utilsService.showSuccessMsg("Processing to download the Excel..."),this.getScreenDataService(t).downloadAsExcel(e).subscribe((function(t){"SUCCESS"===t.status?i.utilsService.externalRedirect(t.fileUrl):i.utilsService.showFailureMsg(t)}))}},{key:"downloadPDF",value:function(t){var e=this;t.spiName===this.branchUtilsService.spiTxnId.rental&&(this.utilsService.showSuccessMsg("Processing to download the PDF..."),this.getScreenDataService(t.screenName).downloadPDF(t.id).subscribe((function(t){e.utilsService.externalRedirect(t.url,!0)})))}}]),t}()).\u0275fac=function(t){return new(t||n)(c.Zb(u.R),c.Zb(u.Q),c.Zb(u.M),c.Zb(u.O),c.Zb(u.S),c.Zb(u.x),c.Zb(d.a),c.Zb(s.g),c.Zb(s.f),c.Zb(l.e))},n.\u0275prov=c.Lb({token:n,factory:n.\u0275fac}),n),p=((r=function(){function t(e,i,r,n,a,o,s,c){_classCallCheck(this,t),this.branchUtilsService=e,this.inspectionInDataService=i,this.inspectionOutDataService=r,this.rentalQuoteDataService=n,this.rentalOrderDataService=a,this.rentalReturnDataService=o,this.storageService=s,this.utilsService=c,this.initializeSubscriptions()}return _createClass(t,[{key:"initializeSubscriptions",value:function(){var t=this;this.branchUtilsService.spiTxnOptionsDownloadPdf.subscribe((function(e){t.downloadPDF(e)}))}},{key:"checkScreenNameValid",value:function(t){return!(!this.branchUtilsService.screenAttributes.hasOwnProperty(t)||"inspectionIn"!==t&&"inspectionOut"!==t)}},{key:"getScreenDataService",value:function(t){return"inspectionIn"===t?this.inspectionInDataService:"inspectionOut"===t?this.inspectionOutDataService:"rentalQuote"===t?this.rentalQuoteDataService:"rentalOrder"===t?this.rentalOrderDataService:"rentalReturn"===t?this.rentalReturnDataService:void 0}},{key:"getFormErrors",value:function(t,e){if("mainFields"===e)return{documentNumberingId:"",documentNumber:"",rentalItemId:"",rentalEquipmentId:"",customerBpId:"",status:"",distributionRulesId:"",itemListArray:[]}}},{key:"getFormValMsgs",value:function(t){return{documentNumberingId:{required:"Document No is required"},documentNumber:{required:"Document No is required"},rentalItemId:{required:"Item Name is required"},rentalEquipmentId:{required:"Equipment is required"},customerBpId:{required:"Business Partner Name is required"},status:{required:"Status is required"},distributionRulesId:{required:"Distribution Rules is required"},invalidItemStartDateTime:"Invalid Item Start Date Time",invalidItemEndDateTime:"Invalid Item End Date Time"}}},{key:"getFormMainFields",value:function(t){var e={documentNumberingId:[null,[l.u.required]],documentNumber:["",[l.u.required]],documentNumberingType:[""],rentalItemId:[null,[l.u.required]],rentalEquipmentId:[null,[l.u.required]],equipmentList:[[]],currencyId:["0"],customerBpId:[null,[l.u.required]],customerBpContactsId:[null],referenceNumber:[""],empId:[null],status:["1",[l.u.required]],remarks:[""],distributionRulesId:[null],inspectionOverallStatus:["0"],inspectionTemplateId:[{value:"",disabled:!1}],copyFromType:[""],copyFromId:[""],id:[""]};return this.storageService.get("distRulesMode")&&(e.distributionRulesId=["",[l.u.required]]),e}},{key:"getMainFieldsWithData",value:function(t,e){var i={};return this.utilsService.updateObject(i,"documentNumberingId",e.documentNumberingId),this.utilsService.updateObject(i,"documentNumber",e.documentNumber),e.documentNumberingInfo&&this.utilsService.updateObject(i,"documentNumberingType",e.documentNumberingInfo.length>0?e.documentNumberingInfo[0].documentNumberingType:""),this.utilsService.updateObject(i,"rentalItemId",e.rentalItemId),this.utilsService.updateObject(i,"rentalEquipmentId",e.rentalEquipmentId),this.utilsService.updateObject(i,"equipmentList",e.rentalEquipmentInfo),this.utilsService.updateObject(i,"customerBpId",e.customerBpId),this.utilsService.updateObject(i,"customerBpContactsId",e.customerBpContactsId),this.utilsService.updateObject(i,"referenceNumber",e.referenceNumber),this.utilsService.updateObject(i,"empId",e.empId),this.utilsService.updateObject(i,"status",e.status),this.utilsService.updateObject(i,"remarks",e.remarks),this.utilsService.updateObject(i,"inspectionOverallStatus",e.inspectionOverallStatus),this.utilsService.updateObject(i,"inspectionTemplateId",e.inspectionTemplateId),this.utilsService.updateObject(i,"copyFromType",e.itemListArray?e.itemListArray[0].copyFromType:""),this.utilsService.updateObject(i,"copyFromId",e.itemListArray?e.itemListArray[0].copyFromId:""),this.utilsService.updateObject(i,"currencyId",e.currencyId),this.utilsService.updateObject(i,"id",e.itemListArray?e.itemListArray[0].id:""),this.utilsService.isEmpty(e.distributionRulesId)||(i.distributionRulesId=this.branchUtilsService.distRulesRemoveZeroPatternOnEdit(e.distributionRulesId)),i}},{key:"getSaveUpdateDataFormation",value:function(t,e){var i=e.getRawValue();return{documentNumberingId:i.documentNumberingId,documentNumber:i.documentNumber,documentNumberingType:i.documentNumberingType,rentalItemId:i.rentalItemId,rentalEquipmentId:i.rentalEquipmentId,currencyId:i.currencyId,status:i.status,remarks:i.remarks,customerBpId:i.customerBpId,customerBpContactsId:i.customerBpContactsId,referenceNumber:i.referenceNumber,empId:i.empId,inspectionOverallStatus:this.inspectionOverallStatus(),inspectionTemplateId:i.inspectionTemplateId,distributionRulesId:Array.isArray(i.distributionRulesId)?i.distributionRulesId.join(","):"",itemListArray:[{templateDetails:JSON.stringify(this.branchUtilsService.inspectionListArray),copyFromType:i.copyFromType,copyFromId:i.copyFromId,id:i.id}]}}},{key:"inspectionOverallStatus",value:function(){var t=[];this.branchUtilsService.inspectionListArray.forEach((function(e){t.push({status:e[0].status})}));var e=b.filter(t,{status:"Not Ok"}),i=b.filter(t,{status:""});return e.length>0||i.length>0?"0":"1"}},{key:"manipulationsOnEdit",value:function(t,e){"1"===e.value.status?(e.controls.documentNumberingId.disable(),e.controls.documentNumber.disable(),e.controls.customerBpId.disable(),e.controls.rentalItemId.disable(),e.controls.rentalEquipmentId.disable()):e.enable()}},{key:"manipulationsOnCopy",value:function(t,e){e.controls.customerBpId.disable(),e.controls.rentalItemId.disable(),this.utilsService.isEmpty(e.controls.rentalEquipmentId.value)?e.controls.rentalEquipmentId.enable():e.controls.rentalEquipmentId.disable()}},{key:"redirectToList",value:function(t){this.utilsService.redirect("/branch/rental/inspection-txn-list/"+t)}},{key:"redirectToAdd",value:function(t){this.utilsService.redirect("/branch/rental/inspection-txn-add/"+t)}},{key:"redirectToEdit",value:function(t,e,i){this.utilsService.redirect("1"===i?"/branch/rental/inspection-txn-edit-draft/"+t+"/"+this.utilsService.encrypt(e):"/branch/rental/inspection-txn-edit/"+t+"/"+this.utilsService.encrypt(e))}},{key:"getFormSearchFields",value:function(t){return{fromDate:"",toDate:"",isDraft:!1,branchName:"",documentNumber:"",customerName:"",itemName:"",equipmentName:"",status:1}}},{key:"getSearchDataFormation",value:function(t,e){return{fromDate:this.utilsService.getBackendDateFormat(e.fromDate),toDate:this.utilsService.getBackendDateFormat(e.toDate),isDraft:e.isDraft?1:0,branchName:e.branchName,customerName:e.customerName,documentNumber:e.documentNumber,itemName:e.itemName,equipmentName:e.equipmentName,status:e.status}}},{key:"getAnalyticsData",value:function(t){var e=this,i=this.getScreenDataService(t);return new m.a((function(t){i.getAnalyticsData().subscribe((function(i){if("SUCCESS"===i.status){var r=b.orderBy(i.results,["id"],["asc"]);t.next(r),t.complete()}else e.utilsService.showFailureMsg(i),t.error(),t.complete()}))}))}},{key:"downloadAsExcel",value:function(t,e){var i=this;this.utilsService.showSuccessMsg("Processing to download the Excel..."),this.getScreenDataService(t).downloadAsExcel(e).subscribe((function(t){"SUCCESS"===t.status?i.utilsService.externalRedirect(t.fileUrl):i.utilsService.showFailureMsg(t)}))}},{key:"downloadPDF",value:function(t){var e=this;t.spiName===this.branchUtilsService.spiTxnId.inspection&&(this.utilsService.showSuccessMsg("Processing to download the PDF..."),this.getScreenDataService(t.screenName).downloadPDF(t.id).subscribe((function(t){e.utilsService.externalRedirect(t.url,!0)})))}}]),t}()).\u0275fac=function(t){return new(t||r)(c.Zb(d.a),c.Zb(u.w),c.Zb(u.x),c.Zb(u.R),c.Zb(u.Q),c.Zb(u.S),c.Zb(s.f),c.Zb(s.g))},r.\u0275prov=c.Lb({token:r,factory:r.\u0275fac}),r),f=i("wd/R"),g=((a=function(){function t(e,i,r,n,a){_classCallCheck(this,t),this.utilsService=e,this.formBuilder=i,this.storageService=r,this.branchUtilsService=n,this.rentalWorklogDataService=a,this.initializeSubscriptions()}return _createClass(t,[{key:"initializeSubscriptions",value:function(){var t=this;this.branchUtilsService.spiTxnOptionsDownloadPdf.subscribe((function(e){t.downloadPDF(e)}))}},{key:"checkScreenNameValid",value:function(t){return!(!this.branchUtilsService.screenAttributes.hasOwnProperty(t)||"worklog"!==t)}},{key:"getFormErrors",value:function(){return{documentNumberingId:"",documentNumber:"",rentalItemId:"",rentalEquipmentId:"",customerBpId:"",customerBpContactsId:"",startDate:"",endDate:"",shiftStartHour:"",shiftStartMinute:"",shiftEndMinute:"",shiftEndHour:"",documentDate:"",empId:"",status:"",distributionRulesId:"",itemListArray:[]}}},{key:"getFormValMsgs",value:function(){return{documentNumberingId:{required:"Document No is required"},documentNumber:{required:"Document No is required"},rentalItemId:{required:"Item Name is required"},rentalEquipmentId:{required:"Equipment is required"},customerBpId:{required:"Business Partner Name is required"},customerBpContactsId:{required:"Contact Person is required"},startDate:{required:"Start Date is required"},endDate:{required:"End Date is required"},shiftStartHour:{required:"Shift Start Time is required"},shiftStartMinute:{required:"Shift Start Time is required"},shiftEndMinute:{required:"Shift End Time is required"},shiftEndHour:{required:"Shift End Time is required"},documentDate:{required:"Document Date is required"},status:{required:"Status is required"},distributionRulesId:{required:"Dist. Rules is required"},itemListArray:{worklogItemTypeId:{required:"Work Type is required"},startDateTime:{required:"Start Date and Time is required"},endDateTime:{required:"End Date and Time is required"}}}}},{key:"getFormMainFields",value:function(){var t={documentNumberingId:[{value:null,disabled:!1},[l.u.required]],documentNumber:[{value:"",disabled:!1},[l.u.required]],documentNumberingType:[""],rentalItemId:[{value:null,disabled:!1},[l.u.required]],rentalEquipmentId:[{value:null,disabled:!1},[l.u.required]],equipmentList:[[]],customerBpId:[null,[l.u.required]],customerBpContactsId:[null],currencyId:[""],referenceNumber:[""],startDate:["",[l.u.required]],endDate:["",[l.u.required]],shiftStartHour:["00",[l.u.required]],shiftStartMinute:["00",[l.u.required]],shiftEndHour:["00",[l.u.required]],shiftEndMinute:["00",[l.u.required]],documentDate:["",[l.u.required]],empId:[null],status:["1",[l.u.required]],remarks:[""],deletedItemChildIds:[[]],totalWorkingHours:[0],totalBreakDownHours:[0],totalOverTimeHours:[0],distributionRulesId:[null],totalBillableHours:[0],copyFromType:[""],copyFromId:[""],itemListArray:this.formBuilder.array([])},e=this.formBuilder.group(t);return this.storageService.get("distRulesMode")&&e.controls.distributionRulesId.setValidators([l.u.required]),this.setCustomValidations(e),e}},{key:"setCustomValidations",value:function(t){var e=[];e.push(this.utilsService.startEndDateValidator("startDate","endDate","invalidEndDate","Should >= start date")),e.push(this.utilsService.startEndTimeValidator("shiftStartHour","shiftStartMinute","shiftEndHour","shiftEndMinute","invalidShiftEndTime","Should >= shift start time")),t.setValidators(l.u.compose(e)),t.updateValueAndValidity()}},{key:"setItemCustomValidation",value:function(t){var e=[];e.push(this.utilsService.startEndDateTimeValidator("startDate","startDateTime","invalidItemStartDateTime","should >= Basic info start Date")),e.push(this.utilsService.startEndDateTimeValidator("endDateTime","endDate","invalidItemEndDateTime","should =< Basic info end date")),e.push(this.utilsService.startEndDateTimeValidator("startDateTime","endDateTime","invalidEndDateTime","Should >= Start Date Time")),t.setValidators(l.u.compose(e)),t.updateValueAndValidity()}},{key:"getMainFieldsWithData",value:function(t){var e={};return this.utilsService.updateObject(e,"documentNumberingId",t.documentNumberingId),this.utilsService.updateObject(e,"documentNumber",t.documentNumber),t.documentNumberingInfo&&this.utilsService.updateObject(e,"documentNumberingType",t.documentNumberingInfo.length>0?t.documentNumberingInfo[0].documentNumberingType:""),this.utilsService.updateObject(e,"rentalItemId",t.rentalItemId),this.utilsService.updateObject(e,"rentalEquipmentId",t.rentalEquipmentId),this.utilsService.updateObject(e,"equipmentList",t.rentalEquipmentInfo),this.utilsService.updateObject(e,"customerBpId",t.customerBpId),this.utilsService.updateObject(e,"customerBpContactsId",t.customerBpContactsId),this.utilsService.updateObject(e,"referenceNumber",t.referenceNumber),this.utilsService.updateObject(e,"empId",t.empId),this.utilsService.updateObject(e,"status",t.status),this.utilsService.updateObject(e,"remarks",t.remarks),this.utilsService.updateObject(e,"copyFromType",t.copyFromType),this.utilsService.updateObject(e,"copyFromId",t.copyFromId),this.utilsService.updateObject(e,"startDate",t.startDate,"date"),this.utilsService.updateObject(e,"endDate",t.endDate,"date"),this.utilsService.updateObject(e,"documentDate",t.documentDate,"date"),t.shiftStartTime&&(this.utilsService.updateObject(e,"shiftStartHour",t.shiftStartTime.substring(0,2)),this.utilsService.updateObject(e,"shiftStartMinute",t.shiftStartTime.substring(3,5)),this.utilsService.updateObject(e,"shiftEndHour",t.shiftEndTime.substring(0,2)),this.utilsService.updateObject(e,"shiftEndMinute",t.shiftEndTime.substring(3,5))),this.utilsService.isEmpty(t.distributionRulesId)||(e.distributionRulesId=this.branchUtilsService.distRulesRemoveZeroPatternOnEdit(t.distributionRulesId)),e}},{key:"getSaveUpdateDataFormation",value:function(t){var e=this,i=t.getRawValue(),r={documentNumberingId:i.documentNumberingId,documentNumber:i.documentNumber,documentNumberingType:i.documentNumberingType,rentalItemId:i.rentalItemId,rentalEquipmentId:i.rentalEquipmentId,customerBpId:i.customerBpId,customerBpContactsId:i.customerBpContactsId,currencyId:i.currencyId,referenceNumber:i.referenceNumber,startDate:this.utilsService.getBackendDateFormat(i.startDate),endDate:this.utilsService.getBackendDateFormat(i.endDate),documentDate:this.utilsService.getBackendDateFormat(i.documentDate),empId:i.empId,status:i.status,remarks:i.remarks,distributionRulesId:Array.isArray(i.distributionRulesId)?i.distributionRulesId.join(","):"",totalBillableHours:i.totalBillableHours,copyFromType:i.copyFromType,copyFromId:i.copyFromId,shiftStartTime:"".concat(i.shiftStartHour,":").concat(i.shiftStartMinute),shiftEndTime:"".concat(i.shiftEndHour,":").concat(i.shiftEndMinute),deletedItemChildIds:i.deletedItemChildIds,itemListArray:[]};return"1"==this.storageService.get("worklogType")?i.itemListArray.forEach((function(t){var i={worklogItemTypeId:t.worklogItemTypeId,startDateTime:e.utilsService.getBackendDateFormat(t.startDateTime,!0),endDateTime:e.utilsService.getBackendDateFormat(t.endDateTime,!0),empId:t.empId,totalHours:t.totalHours,remarks:t.remarks,id:t.id};r.itemListArray.push(i)})):i.itemListArray.forEach((function(t){var i={entryDate:e.utilsService.getBackendDateFormat(t.date),entryDay:t.day,shiftStartTime:"".concat(t.shiftStartHour,":").concat(t.shiftStartMinute),shiftEndTime:"".concat(t.shiftEndHour,":").concat(t.shiftEndMinute),breakdownHours:"".concat(t.breakdownHour,":").concat(t.breakdownMinute),overtimeHours:"".concat(t.overtimeHour,":").concat(t.overtimeMinute),billableHours:t.billableHour,totalHours:t.totalHours,id:t.id};r.itemListArray.push(i)})),r}},{key:"downloadPDF",value:function(t){var e=this;t.spiName===this.branchUtilsService.spiTxnId.worklog&&(this.utilsService.showSuccessMsg("Processing to download the PDF..."),this.rentalWorklogDataService.downloadPDF(t.id).subscribe((function(t){e.utilsService.externalRedirect(t.url,!0)})))}},{key:"overAllTimeCalc",value:function(t){var e=t.getRawValue(),i=0,r=0,n=0;e.itemListArray.forEach((function(t){"1"===t.worklogItemTypeId?i+=parseFloat(t.totalHours):"2"===t.worklogItemTypeId?r+=parseFloat(t.totalHours):"3"===t.worklogItemTypeId&&(n+=parseFloat(t.totalHours))})),t.patchValue({totalBillableHours:i+n,totalWorkingHours:i,totalBreakDownHours:r,totalOverTimeHours:n})}},{key:"timeCalc",value:function(t){var e=t.getRawValue(),i=0,r=0,n=0,a=0;e.itemListArray.forEach((function(t){var e="".concat(t.breakdownHour,":").concat(t.breakdownMinute),o="".concat(t.overtimeHour,":").concat(t.overtimeMinute),s=f.duration(t.totalHours).asMinutes(),c=f.duration(o).asMinutes(),u=f.duration(e).asMinutes(),l=f.duration(t.billableHour).asMinutes();i+=s,r+=u,n+=c,a+=l})),t.patchValue({totalBillableHours:this.formatHourMinutes(a),totalWorkingHours:this.formatHourMinutes(i),totalBreakDownHours:this.formatHourMinutes(r),totalOverTimeHours:this.formatHourMinutes(n)})}},{key:"formatHourMinutes",value:function(t){var e=Math.floor(t/60),i=Math.floor(t%60);return"".concat(e<10&&e>0?"0"+e:e<0&&e>-10?"-0"+Math.abs(e):e<-10?"-"+Math.abs(e):e,":").concat(i<10&&i>=0?"0"+i:i<0&&i>-10?"0"+Math.abs(i):i<-10?Math.abs(i):i)}},{key:"totalHoursCalc",value:function(t,e){var i=f.duration(e.diff(t)).asMinutes();return this.formatHourMinutes(i)}},{key:"totalBillableHour",value:function(t,e,i){var r=f.duration(t).asMinutes(),n=f.duration(e).asMinutes(),a=f.duration(i).asMinutes();return this.formatHourMinutes(r+a-n)}}]),t}()).\u0275fac=function(t){return new(t||a)(c.Zb(s.g),c.Zb(l.e),c.Zb(s.f),c.Zb(d.a),c.Zb(u.T))},a.\u0275prov=c.Lb({token:a,factory:a.\u0275fac}),a),v=i("ofXK"),y=i("eO1q"),S=i("rEr+"),C=i("7zfz"),I=i("Mfq2"),U=["dataTable"];function L(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",24),c.dc("click",(function(){c.Dc(i);var t=c.hc(2);return t.rentalTxnUtilsService.downloadAsExcel(t.inputScreenName,t.listingProperties)})),c.Qb(1,"i",25),c.Vb(2,"span"),c.Lc(3,"Download as Excel"),c.Ub(),c.Ub()}}function V(t,e){if(1&t&&(c.Vb(0,"div",26),c.Vb(1,"div",27),c.Vb(2,"div",28),c.Lc(3),c.Ub(),c.Vb(4,"div",29),c.Lc(5),c.Ub(),c.Ub(),c.Ub()),2&t){var i=e.$implicit,r=c.hc(2);c.Cb(3),c.Nc(" ",i.name," "),c.Cb(1),c.oc("ngClass",r.appConstants.TXN_STATUS_COLOR_CLS[i.id]),c.Cb(1),c.Mc(i.count)}}function D(t,e){1&t&&(c.Vb(0,"th",36),c.Lc(1," Branch Name "),c.Qb(2,"p-sortIcon",33),c.Ub()),2&t&&(c.oc("pSortableColumn","branchName"),c.Cb(2),c.oc("field","branchName"))}function N(t,e){1&t&&(c.Vb(0,"th",36),c.Lc(1,"Delivery Date "),c.Qb(2,"p-sortIcon",33),c.Ub()),2&t&&(c.oc("pSortableColumn","deliveryDate"),c.Cb(2),c.oc("field","deliveryDate"))}function F(t,e){1&t&&(c.Vb(0,"th",46),c.Lc(1,"Due Date "),c.Qb(2,"p-sortIcon",33),c.Ub()),2&t&&(c.oc("pSortableColumn","dueDate"),c.Cb(2),c.oc("field","dueDate"))}function E(t,e){1&t&&(c.Vb(0,"th",46),c.Lc(1,"Return Date "),c.Qb(2,"p-sortIcon",33),c.Ub()),2&t&&(c.oc("pSortableColumn","returnDate"),c.Cb(2),c.oc("field","returnDate"))}function T(t,e){if(1&t){var i=c.Wb();c.Vb(0,"th"),c.Vb(1,"input",42),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(3).searchForm.branchName=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(3).resetListing()})),c.Ub(),c.Ub()}if(2&t){var r=c.hc(3);c.Cb(1),c.oc("ngModel",r.searchForm.branchName)}}function x(t,e){if(1&t&&(c.Vb(0,"option",47),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Nc(" ",i.name," ")}}function A(t,e){if(1&t){var i=c.Wb();c.Vb(0,"tr"),c.Vb(1,"th",30),c.Lc(2,"Actions"),c.Ub(),c.Jc(3,D,3,2,"th",31),c.Vb(4,"th",32),c.Lc(5,"Overdue "),c.Qb(6,"p-sortIcon",33),c.Ub(),c.Vb(7,"th",32),c.Lc(8,"Doc No "),c.Qb(9,"p-sortIcon",33),c.Ub(),c.Vb(10,"th",34),c.Lc(11,"Customer Name "),c.Qb(12,"p-sortIcon",33),c.Ub(),c.Vb(13,"th",35),c.Lc(14,"Line Items Count"),c.Ub(),c.Vb(15,"th",36),c.Lc(16,"Posting Date "),c.Qb(17,"p-sortIcon",33),c.Ub(),c.Jc(18,N,3,2,"th",31),c.Jc(19,F,3,2,"th",37),c.Jc(20,E,3,2,"th",37),c.Vb(21,"th",38),c.Lc(22,"Status "),c.Qb(23,"p-sortIcon",33),c.Ub(),c.Ub(),c.Vb(24,"tr",39),c.Vb(25,"th"),c.Vb(26,"a",40),c.dc("click",(function(){return c.Dc(i),c.hc(2).clearSearchForm()})),c.Qb(27,"i",41),c.Lc(28,"Clear"),c.Ub(),c.Ub(),c.Jc(29,T,2,1,"th",0),c.Qb(30,"th"),c.Vb(31,"th"),c.Vb(32,"input",42),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.documentNumber=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Vb(33,"th"),c.Vb(34,"input",42),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.customerName=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Qb(35,"th"),c.Vb(36,"th"),c.Vb(37,"p-calendar",12),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.postingDate=t}))("onSelect",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Vb(38,"th"),c.Vb(39,"p-calendar",12),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.deliveryDate=t}))("onSelect",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Vb(40,"th"),c.Vb(41,"select",43),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.status=t}))("change",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Vb(42,"option",44),c.Lc(43,"--SELECT--"),c.Ub(),c.Jc(44,x,2,2,"option",45),c.Ub(),c.Ub(),c.Ub()}if(2&t){var r=c.hc(2);c.Cb(3),c.oc("ngIf",!r.storageService.get("isSingleBranchUser")),c.Cb(1),c.oc("pSortableColumn","overDueValue"),c.Cb(2),c.oc("field","overDueValue"),c.Cb(1),c.oc("pSortableColumn","documentNumber"),c.Cb(2),c.oc("field","documentNumber"),c.Cb(1),c.oc("pSortableColumn","customerName"),c.Cb(2),c.oc("field","customerName"),c.Cb(3),c.oc("pSortableColumn","postingDate"),c.Cb(2),c.oc("field","postingDate"),c.Cb(1),c.oc("ngIf","rentalQuote"===r.inputScreenName||"rentalOrder"===r.inputScreenName||"rentalDelivery"===r.inputScreenName),c.Cb(1),c.oc("ngIf","rentalInvoice"===r.inputScreenName),c.Cb(1),c.oc("ngIf","rentalReturn"===r.inputScreenName),c.Cb(1),c.oc("pSortableColumn","status"),c.Cb(2),c.oc("field","status"),c.Cb(6),c.oc("ngIf",!r.storageService.get("isSingleBranchUser")),c.Cb(3),c.oc("ngModel",r.searchForm.documentNumber),c.Cb(2),c.oc("ngModel",r.searchForm.customerName),c.Cb(3),c.oc("ngModel",r.searchForm.postingDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),c.Cb(2),c.oc("ngModel",r.searchForm.deliveryDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),c.Cb(2),c.oc("ngModel",r.searchForm.status),c.Cb(3),c.oc("ngForOf",r.statusList)}}function k(t,e){if(1&t&&(c.Vb(0,"td"),c.Lc(1),c.Ub()),2&t){var i=c.hc().$implicit;c.Cb(1),c.Mc(i.branchName)}}function R(t,e){if(1&t&&(c.Vb(0,"span",52),c.Lc(1),c.Ub()),2&t){var i=c.hc().$implicit;c.Cb(1),c.Nc("",i.overDueValue," Days")}}function M(t,e){if(1&t){var i=c.Wb();c.Vb(0,"tr"),c.Vb(1,"td"),c.Vb(2,"a",48),c.dc("click",(function(){c.Dc(i);var t=e.$implicit,r=c.hc(2);return r.rentalTxnUtilsService.redirectToEdit(r.inputScreenName,t.id,t.isDraft)})),c.Qb(3,"i",49),c.Ub(),c.Ub(),c.Jc(4,k,2,1,"td",0),c.Vb(5,"td"),c.Jc(6,R,2,1,"span",50),c.Ub(),c.Vb(7,"td"),c.Lc(8),c.Ub(),c.Vb(9,"td"),c.Lc(10),c.Ub(),c.Vb(11,"td"),c.Lc(12),c.Ub(),c.Vb(13,"td"),c.Lc(14),c.Ub(),c.Vb(15,"td"),c.Lc(16),c.Ub(),c.Vb(17,"td"),c.Vb(18,"span",51),c.Lc(19),c.Ub(),c.Ub(),c.Ub()}if(2&t){var r=e.$implicit,n=c.hc(2);c.Cb(4),c.oc("ngIf",!n.storageService.get("isSingleBranchUser")),c.Cb(2),c.oc("ngIf",1==r.status&&r.overDueValue<0),c.Cb(2),c.Mc(r.documentNumber),c.Cb(2),c.Oc("",r.customerBpCode," - ",r.customerBpName,""),c.Cb(2),c.Mc(r.lineItemInfo.length),c.Cb(2),c.Mc(r.postingDate),c.Cb(2),c.Mc(r.deliveryDate),c.Cb(2),c.oc("ngClass",n.appConstants.TXN_STATUS_COLOR_CLS[r.status]),c.Cb(1),c.Mc(r.statusName)}}function w(t,e){if(1&t){var i=c.Wb();c.Tb(0),c.Vb(1,"div",1),c.Vb(2,"span"),c.Lc(3),c.Ub(),c.Lc(4),c.Vb(5,"div",2),c.Jc(6,L,4,0,"button",3),c.Vb(7,"button",4),c.dc("click",(function(){c.Dc(i);var t=c.hc();return t.rentalTxnUtilsService.redirectToAdd(t.inputScreenName)})),c.Qb(8,"i",5),c.Vb(9,"span"),c.Lc(10),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(11,"div",6),c.Vb(12,"div",7),c.Vb(13,"div",8),c.Jc(14,V,6,3,"div",9),c.Ub(),c.Ub(),c.Vb(15,"div",8),c.Vb(16,"div",10),c.Vb(17,"label",11),c.Vb(18,"strong"),c.Lc(19,"From Date"),c.Ub(),c.Ub(),c.Vb(20,"p-calendar",12),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().searchForm.fromDate=t}))("onSelect",(function(){return c.Dc(i),c.hc().resetListing()})),c.Ub(),c.Ub(),c.Vb(21,"div",10),c.Vb(22,"label",11),c.Vb(23,"strong"),c.Lc(24,"To Date"),c.Ub(),c.Ub(),c.Vb(25,"p-calendar",13),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().searchForm.toDate=t}))("onSelect",(function(){return c.Dc(i),c.hc().resetListing()})),c.Ub(),c.Ub(),c.Vb(26,"div",14),c.Vb(27,"label",15),c.Vb(28,"input",16),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().searchForm.isDraft=t}))("change",(function(){return c.Dc(i),c.hc().resetListing()})),c.Ub(),c.Qb(29,"span",17),c.Lc(30," Show Only Drafts "),c.Ub(),c.Ub(),c.Ub(),c.Vb(31,"div",8),c.Vb(32,"div",18),c.Vb(33,"div",19),c.Vb(34,"p-table",20,21),c.dc("onLazyLoad",(function(t){return c.Dc(i),c.hc().getListing(t)})),c.Jc(36,A,45,29,"ng-template",22),c.Jc(37,M,20,10,"ng-template",23),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Sb()}if(2&t){var r=c.hc();c.Cb(3),c.Mc(r.branchUtilsService.txnGetTitle(r.screenAttributes.title,!0)),c.Cb(1),c.Nc("",r.branchUtilsService.txnGetTitle(r.screenAttributes.title)," - List "),c.Cb(2),c.oc("ngIf",r.screenAcl.download),c.Cb(4),c.Nc("Add ",r.screenAttributes.title,""),c.Cb(4),c.oc("ngForOf",r.analyticsData),c.Cb(6),c.oc("ngModel",r.searchForm.fromDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),c.Cb(5),c.oc("ngModel",r.searchForm.toDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT)("minDate",r.searchForm.fromDate),c.Cb(3),c.oc("ngModel",r.searchForm.isDraft),c.Cb(6),c.oc("value",r.listing.data)("lazy",!0)("paginator",!0)("rows",r.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",r.listing.totalRecords)}}var O,q=((O=function(){function t(e,i,r,n,a,o,c){_classCallCheck(this,t),this.utilsService=e,this.storageService=i,this.authGuardService=r,this.commonDataService=n,this.activatedRoute=a,this.rentalTxnUtilsService=o,this.branchUtilsService=c,this.appConstants=s.h,this.screenAcl={},this.analyticsData=[],this.statusList=[],this.screenAttributes={},this.screenDataService={},this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}return _createClass(t,[{key:"ngOnInit",value:function(){this.initializeSubscriptions()}},{key:"initializeSubscriptions",value:function(){var t=this;this.activatedRoute.params.subscribe((function(e){return t.rentalTxnUtilsService.checkScreenNameValid(e.screenName)?(t.screenAcl=t.authGuardService.getScreenAcl(t.branchUtilsService.screenAttributes[e.screenName].documentTypeId),t.screenAcl.view?(t.reInitializeGlobalVariables(),t.inputScreenName=e.screenName,void t.transactionInitialization()):(t.utilsService.showFailureMsg(s.h.ACL_UNAUTHORIZED_MSG),t.utilsService.goBack(),!1)):(t.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),t.utilsService.goBack(),!1)}))}},{key:"reInitializeGlobalVariables",value:function(){this.inputScreenName="",this.screenAttributes={},this.screenDataService={},this.analyticsData=[],this.statusList=[],this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}},{key:"transactionInitialization",value:function(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.inputScreenName],this.screenDataService=this.rentalTxnUtilsService.getScreenDataService(this.inputScreenName),this.searchForm=this.rentalTxnUtilsService.getFormSearchFields(this.inputScreenName),this.getAutoSuggestionList("getRentalTransStatusList"),this.getAnalyticsData(),this.dataTable&&this.resetListing()}},{key:"getListing",value:function(t){var e=this,i=this.rentalTxnUtilsService.getSearchDataFormation(this.inputScreenName,this.searchForm),r=this.utilsService.dataTableParameterFormation(t,i);this.listingProperties=r,this.screenDataService.getList(r).subscribe((function(t){"SUCCESS"===t.status?(e.listing.data=t.results.searchResults,e.listing.totalRecords=t.results.totalRecords):e.utilsService.showFailureMsg(t)}))}},{key:"clearSearchForm",value:function(){this.searchForm=this.rentalTxnUtilsService.getFormSearchFields(this.inputScreenName),this.resetListing()}},{key:"resetListing",value:function(){this.dataTable.reset()}},{key:"getAutoSuggestionList",value:function(t){var e=this;this.commonDataService.getAutoSuggestionList(t).subscribe((function(t){"SUCCESS"===t.status?e.statusList=t.results:e.utilsService.showFailureMsg(t)}))}},{key:"getAnalyticsData",value:function(){var t=this;this.rentalTxnUtilsService.getAnalyticsData(this.inputScreenName).subscribe((function(e){t.analyticsData=e}))}}]),t}()).\u0275fac=function(t){return new(t||O)(c.Pb(s.g),c.Pb(s.f),c.Pb(s.a),c.Pb(u.l),c.Pb(o.a),c.Pb(h),c.Pb(d.a))},O.\u0275cmp=c.Jb({type:O,selectors:[["app-rental-txn-list"]],viewQuery:function(t,e){var i;1&t&&c.Pc(U,!0),2&t&&c.zc(i=c.ec())&&(e.dataTable=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-plus"],[1,"working-container"],[1,"analytics"],[1,"row"],["class","col-lg-2 col-md-3 col-sm-4 col-xs-12",4,"ngFor","ngForOf"],[1,"form-group","col-sm-3"],[1,"form-label"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","ngModelChange","onSelect"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","minDate","ngModelChange","onSelect"],[1,"form-group","col-sm-6","text-right"],[1,"checkbox","mt-3"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"checkmark"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-file-excel"],[1,"col-lg-2","col-md-3","col-sm-4","col-xs-12"],[1,"item"],[1,"name"],[1,"count",3,"ngClass"],[2,"width","80px"],["style","width:150px",3,"pSortableColumn",4,"ngIf"],[2,"width","100px",3,"pSortableColumn"],[3,"field"],[2,"width","200px",3,"pSortableColumn"],[2,"width","130px"],[2,"width","150px",3,"pSortableColumn"],[3,"pSortableColumn",4,"ngIf"],[2,"width","120px",3,"pSortableColumn"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"value"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"click"],[1,"fa","fa-edit"],["class","badge badge-danger",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&c.Jc(0,w,38,22,"ng-container",0),2&t&&c.oc("ngIf",e.screenAcl.view)},directives:[v.m,v.l,y.a,l.m,l.o,l.a,S.c,C.b,v.k,S.b,S.a,I.a,l.b,l.t,l.p,l.v],styles:[""]}),O),P=i("Kj3r"),B=i("/uUt"),K=i("vkgz"),J=i("TlXv"),Q=i("w9rb"),_=i("fIZe"),W=i("K3ix"),H=i("ZOsW"),G=i("umDy"),z=["hActions"],j=["hSno"],Y=["hItemName"],$=["hGeneralDetails"],Z=["hWorkLogRef"],X=["hQuantity"],tt=["hOpenQuantity"],et=["hDuration"],it=["hUOM"],rt=["hStartDate"],nt=["hEndDate"],at=["hShipDate"],ot=["hReturnDate"],st=["hPoExpiryDate"],ct=["hUnitPrice"],ut=["hHSN"],lt=["hDiscount"],mt=["hTaxCode"],bt=["hTax"],dt=["hTotal"],ht=["hDistRules"],pt=["hEquipmentName"],ft=["bActions"],gt=["bSno"],vt=["bItemName"],yt=["bGeneralDetails"],St=["bWorkLogRef"],Ct=["bQuantity"],It=["bOpenQuantity"],Ut=["bDuration"],Lt=["bUOM"],Vt=["bStartDate"],Dt=["bEndDate"],Nt=["bShipDate"],Ft=["bReturnDate"],Et=["bPoExpiryDate"],Tt=["bUnitPrice"],xt=["bHSN"],At=["bDiscount"],kt=["bTaxCode"],Rt=["bTax"],Mt=["bTotal"],wt=["bDistRules"],Ot=["bEquipmentName"];function qt(t,e){1&t&&(c.Tb(0),c.Lc(1,"Add"),c.Sb())}function Pt(t,e){1&t&&(c.Tb(0),c.Lc(1,"Edit"),c.Sb())}function Bt(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",5),c.dc("click",(function(){return c.Dc(i),c.hc(2).downloadPdf()})),c.Qb(1,"i",118),c.Vb(2,"span"),c.Lc(3,"Print"),c.Ub(),c.Ub()}}function Kt(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.documentNumberingId?i.myFormErrors.documentNumberingId:i.myFormErrors.documentNumber," ")}}function Jt(t,e){if(1&t&&(c.Vb(0,"div"),c.Lc(1),c.Vb(2,"small"),c.Lc(3),c.Ub(),c.Ub()),2&t){var i=e.item;c.Cb(1),c.Nc("",i.partnerName,"\xa0"),c.Cb(2),c.Nc("(",i.partnerCode,")")}}function Qt(t,e){if(1&t){var i=c.Wb();c.Vb(0,"a",120),c.dc("click",(function(){return c.Dc(i),c.hc(2).bizRefreshFlag=!0})),c.Qb(1,"i",121),c.Ub()}}function _t(t,e){if(1&t){var i=c.Wb();c.Vb(0,"a",122),c.dc("click",(function(){c.Dc(i);var t=c.hc(2);return t.getCustomerBpList(),t.bizRefreshFlag=!1})),c.Qb(1,"i",123),c.Ub()}}function Wt(t,e){if(1&t){var i=c.Wb();c.Vb(0,"span",124),c.dc("click",(function(){c.Dc(i);var t=c.hc(2);return t.popupExternalService.showDetailPopup("biz-partner",t.myFormData.customerBpId)})),c.Qb(1,"i",125),c.Ub()}}function Ht(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.customerBpId," ")}}function Gt(t,e){if(1&t&&(c.Vb(0,"div"),c.Lc(1),c.Ub(),c.Vb(2,"small"),c.Lc(3),c.Ub()),2&t){var i=e.item;c.Cb(1),c.Mc(i.contactName),c.Cb(2),c.Oc("",i.contactTypeName," / ",i.contactNumber,"")}}function zt(t,e){if(1&t&&(c.Vb(0,"option",126),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Mc(i.currencyName)}}function jt(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.currencyId," ")}}function Yt(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.postingDate," ")}}function $t(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",null==i.myForm.errors?null:i.myForm.errors.invalidPostingDate," ")}}function Zt(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(3);c.Cb(1),c.Nc(" ",i.myFormErrors.deliveryDate," ")}}function Xt(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(3);c.Cb(1),c.Nc(" ",null==i.myForm.errors?null:i.myForm.errors.invalidDeliveryDate," ")}}function te(t,e){if(1&t&&(c.Vb(0,"div",15),c.Vb(1,"label",16),c.Lc(2," Delivery Date"),c.Vb(3,"span",17),c.Lc(4,"*"),c.Ub(),c.Ub(),c.Qb(5,"p-calendar",127),c.Jc(6,Zt,2,1,"div",21),c.Jc(7,Xt,2,1,"div",21),c.Ub()),2&t){var i=c.hc(2);c.Cb(5),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.appConstants.PICKER_YEAR_RANGE)("dateFormat",i.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",i.myFormErrors.deliveryDate),c.Cb(1),c.oc("ngIf",null==i.myForm.errors?null:i.myForm.errors.invalidDeliveryDate)}}function ee(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(3);c.Cb(1),c.Nc(" ",i.myFormErrors.dueDate," ")}}function ie(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(3);c.Cb(1),c.Nc(" ",null==i.myForm.errors?null:i.myForm.errors.invalidDueDate," ")}}function re(t,e){if(1&t&&(c.Vb(0,"div",15),c.Vb(1,"label",16),c.Lc(2," Due Date"),c.Vb(3,"span",17),c.Lc(4,"*"),c.Ub(),c.Ub(),c.Qb(5,"p-calendar",128),c.Jc(6,ee,2,1,"div",21),c.Jc(7,ie,2,1,"div",21),c.Ub()),2&t){var i=c.hc(2);c.Cb(5),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.appConstants.PICKER_YEAR_RANGE)("dateFormat",i.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",i.myFormErrors.dueDate),c.Cb(1),c.oc("ngIf",null==i.myForm.errors?null:i.myForm.errors.invalidDueDate)}}function ne(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(3);c.Cb(1),c.Nc(" ",i.myFormErrors.returnDate," ")}}function ae(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(3);c.Cb(1),c.Nc(" ",null==i.myForm.errors?null:i.myForm.errors.invalidReturnDate," ")}}function oe(t,e){if(1&t&&(c.Vb(0,"div",15),c.Vb(1,"label",16),c.Lc(2," Return Date"),c.Vb(3,"span",17),c.Lc(4,"*"),c.Ub(),c.Ub(),c.Qb(5,"p-calendar",129),c.Jc(6,ne,2,1,"div",21),c.Jc(7,ae,2,1,"div",21),c.Ub()),2&t){var i=c.hc(2);c.Cb(5),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.appConstants.PICKER_YEAR_RANGE)("dateFormat",i.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",i.myFormErrors.returnDate),c.Cb(1),c.oc("ngIf",null==i.myForm.errors?null:i.myForm.errors.invalidReturnDate)}}function se(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.documentDate," ")}}function ce(t,e){if(1&t&&(c.Vb(0,"div"),c.Lc(1),c.Vb(2,"small"),c.Lc(3),c.Ub(),c.Ub()),2&t){var i=e.item;c.Cb(1),c.Nc("",i.employeeName,"\xa0"),c.Cb(2),c.Nc("(",i.empCode,")")}}function ue(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.empId," ")}}function le(t,e){if(1&t&&(c.Vb(0,"option",126),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Mc(i.name)}}function me(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.status," ")}}var be=function(t){return{data:t}};function de(t,e){if(1&t&&(c.Tb(0),c.Qb(1,"template",130),c.Sb()),2&t){var i=e.$implicit,r=c.hc(2);c.Cb(1),c.oc("ngTemplateOutlet",r[i.headerRef])("ngTemplateOutletContext",c.sc(2,be,i))}}var he=function(t,e){return{formItemListRow:t,i:e}};function pe(t,e){if(1&t&&(c.Tb(0),c.Qb(1,"template",130),c.Sb()),2&t){var i=e.$implicit,r=c.hc(),n=r.$implicit,a=r.index,o=c.hc(2);c.Cb(1),c.oc("ngTemplateOutlet",o[i.bodyRef])("ngTemplateOutletContext",c.tc(2,he,n,a))}}function fe(t,e){if(1&t&&(c.Vb(0,"tr",131),c.Jc(1,pe,2,5,"ng-container",44),c.Ub()),2&t){var i=e.index,r=c.hc(2);c.oc("formGroupName",i),c.Cb(1),c.oc("ngForOf",r.itemListColumnOrder)}}function ge(t,e){if(1&t){var i=c.Wb();c.Vb(0,"tfoot"),c.Vb(1,"tr"),c.Vb(2,"td",132),c.Vb(3,"button",133),c.dc("click",(function(){return c.Dc(i),c.hc(2).addItemFields()})),c.Qb(4,"i",121),c.Vb(5,"span"),c.Lc(6,"Add Item"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()}}function ve(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.discountPercentage," ")}}function ye(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.rounding," ")}}function Se(t,e){if(1&t&&(c.Vb(0,"option",126),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Oc(" ",i.address," - ",i.city," ")}}function Ce(t,e){if(1&t&&(c.Vb(0,"option",126),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Oc(" ",i.address," - ",i.city," ")}}function Ie(t,e){if(1&t&&(c.Vb(0,"option",126),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Nc(" ",i.paymentTermName," ")}}function Ue(t,e){if(1&t&&(c.Vb(0,"option",126),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Nc(" ",i.paymentMethodName," ")}}function Le(t,e){if(1&t){var i=c.Wb();c.Vb(0,"div",10),c.Vb(1,"div",11),c.Qb(2,"i",12),c.Lc(3,"Accounting Info "),c.Ub(),c.Vb(4,"div",13),c.Vb(5,"div",14),c.Vb(6,"div",15),c.Vb(7,"label",16),c.Lc(8,"Payment Terms"),c.Ub(),c.Vb(9,"select",134),c.dc("change",(function(){c.Dc(i);var t=c.hc(2);return t.branchUtilsService.txnPaymentTermsChange(t.txnKeys.inputScreenName,t.paymentTermsList,t.myForm,"paymentTermsId")})),c.Vb(10,"option",30),c.Lc(11,"--SELECT--"),c.Ub(),c.Jc(12,Ie,2,2,"option",31),c.Ub(),c.Ub(),c.Vb(13,"div",15),c.Vb(14,"label",16),c.Lc(15,"Payment Method"),c.Ub(),c.Vb(16,"select",135),c.Vb(17,"option",30),c.Lc(18,"--SELECT--"),c.Ub(),c.Jc(19,Ue,2,2,"option",31),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()}if(2&t){var r=c.hc(2);c.Cb(12),c.oc("ngForOf",r.paymentTermsList),c.Cb(7),c.oc("ngForOf",r.paymentMethodsList)}}function Ve(t,e){1&t&&(c.Vb(0,"div",10),c.Vb(1,"div",11),c.Qb(2,"i",12),c.Lc(3,"Tax Info "),c.Ub(),c.Vb(4,"div",13),c.Vb(5,"div",14),c.Vb(6,"div",15),c.Vb(7,"label",16),c.Lc(8,"Tax code / GST / VAT"),c.Ub(),c.Qb(9,"input",136),c.Ub(),c.Ub(),c.Ub(),c.Ub())}function De(t,e){if(1&t&&(c.Vb(0,"option",126),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Nc(" ",i.heading," ")}}function Ne(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",5),c.dc("click",(function(){return c.Dc(i),c.hc(2).confirmSaveUpdate()})),c.Qb(1,"i",137),c.Vb(2,"span"),c.Lc(3,"Save"),c.Ub(),c.Ub()}}function Fe(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",5),c.dc("click",(function(){return c.Dc(i),c.hc(2).addUpdateDraft()})),c.Qb(1,"i",137),c.Vb(2,"span"),c.Lc(3,"Save as Draft"),c.Ub(),c.Ub()}}function Ee(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",3),c.dc("click",(function(){return c.Dc(i),c.hc(2).clearForm()})),c.Qb(1,"i",138),c.Vb(2,"span"),c.Lc(3,"Clear"),c.Ub(),c.Ub()}}function Te(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",5),c.dc("click",(function(){return c.Dc(i),c.hc(2).confirmSaveUpdate()})),c.Qb(1,"i",123),c.Vb(2,"span"),c.Lc(3,"Update"),c.Ub(),c.Ub()}}function xe(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",3),c.dc("click",(function(){c.Dc(i);var t=c.hc(2);return t.rentalTxnUtilsService.redirectToList(t.txnKeys.inputScreenName)})),c.Qb(1,"i",139),c.Vb(2,"span"),c.Lc(3,"Cancel"),c.Ub(),c.Ub()}}function Ae(t,e){1&t&&(c.Vb(0,"div",142),c.Vb(1,"span",143),c.Lc(2,"Note:"),c.Ub(),c.Lc(3," You are unauthorized to "),c.Vb(4,"strong"),c.Lc(5,"update"),c.Ub(),c.Lc(6," this transaction! "),c.Ub())}function ke(t,e){1&t&&(c.Vb(0,"div",142),c.Vb(1,"span",143),c.Lc(2,"Note:"),c.Ub(),c.Lc(3," Cannot update "),c.Vb(4,"strong"),c.Lc(5,"Cancelled"),c.Ub(),c.Lc(6," / "),c.Vb(7,"strong"),c.Lc(8,"Closed"),c.Ub(),c.Lc(9," transactions! "),c.Ub())}function Re(t,e){if(1&t&&(c.Vb(0,"div",140),c.Vb(1,"div"),c.Vb(2,"strong"),c.Lc(3,"Created By:"),c.Ub(),c.Lc(4),c.Ub(),c.Jc(5,Ae,7,0,"div",141),c.Jc(6,ke,10,0,"div",141),c.Ub()),2&t){var i=c.hc(2);c.Cb(4),c.Nc(" ",i.txnKeys.editCreatedName,""),c.Cb(1),c.oc("ngIf",i.branchUtilsService.txnValidateBtn(i.myForm,i.txnKeys,"updateAclNote")),c.Cb(1),c.oc("ngIf",i.branchUtilsService.txnValidateBtn(i.myForm,i.txnKeys,"updateNote"))}}function Me(t,e){1&t&&(c.Vb(0,"div",140),c.Vb(1,"span",143),c.Lc(2,"Note:"),c.Ub(),c.Lc(3," You are unauthorized to "),c.Vb(4,"strong"),c.Lc(5,"add"),c.Ub(),c.Lc(6," this transaction!. "),c.Ub())}function we(t,e){if(1&t&&(c.Vb(0,"th",144),c.Lc(1),c.Ub()),2&t){var i=e.data;c.Cb(1),c.Mc(i.name)}}function Oe(t,e){if(1&t&&(c.Vb(0,"th",145),c.Lc(1),c.Ub()),2&t){var i=e.data;c.Cb(1),c.Mc(i.name)}}function qe(t,e){if(1&t&&(c.Vb(0,"th",146),c.Lc(1),c.Vb(2,"span",17),c.Lc(3,"*"),c.Ub(),c.Ub()),2&t){var i=e.data;c.Cb(1),c.Mc(i.name)}}function Pe(t,e){if(1&t&&(c.Vb(0,"th",146),c.Lc(1),c.Ub()),2&t){var i=e.data;c.Cb(1),c.Mc(i.name)}}function Be(t,e){if(1&t&&(c.Vb(0,"th",147),c.Lc(1),c.Ub()),2&t){var i=e.data;c.Cb(1),c.Mc(i.name)}}function Ke(t,e){if(1&t&&(c.Vb(0,"th",147),c.Lc(1),c.Ub()),2&t){var i=e.data;c.Cb(1),c.Mc(i.name)}}function Je(t,e){if(1&t&&(c.Vb(0,"th",147),c.Lc(1),c.Ub()),2&t){var i=e.data;c.Cb(1),c.Mc(i.name)}}function Qe(t,e){1&t&&(c.Vb(0,"span",17),c.Lc(1,"*"),c.Ub())}function _e(t,e){if(1&t&&(c.Vb(0,"th",147),c.Lc(1),c.Jc(2,Qe,2,0,"span",148),c.Ub()),2&t){var i=e.data,r=c.hc(2);c.Cb(1),c.Mc(i.name),c.Cb(1),c.oc("ngIf","rentalQuote"!=r.txnKeys.inputScreenName)}}function We(t,e){1&t&&(c.Vb(0,"span",17),c.Lc(1,"*"),c.Ub())}function He(t,e){if(1&t&&(c.Vb(0,"th",147),c.Lc(1),c.Jc(2,We,2,0,"span",148),c.Ub()),2&t){var i=e.data,r=c.hc(2);c.Cb(1),c.Mc(i.name),c.Cb(1),c.oc("ngIf","rentalQuote"!=r.txnKeys.inputScreenName)}}function Ge(t,e){1&t&&(c.Vb(0,"span",17),c.Lc(1,"*"),c.Ub())}function ze(t,e){if(1&t&&(c.Vb(0,"th",147),c.Lc(1),c.Jc(2,Ge,2,0,"span",148),c.Ub()),2&t){var i=e.data,r=c.hc(2);c.Cb(1),c.Mc(i.name),c.Cb(1),c.oc("ngIf","rentalQuote"!=r.txnKeys.inputScreenName)}}function je(t,e){1&t&&(c.Vb(0,"span",17),c.Lc(1,"*"),c.Ub())}function Ye(t,e){if(1&t&&(c.Vb(0,"th",147),c.Lc(1),c.Jc(2,je,2,0,"span",148),c.Ub()),2&t){var i=e.data,r=c.hc(2);c.Cb(1),c.Mc(i.name),c.Cb(1),c.oc("ngIf","rentalQuote"!=r.txnKeys.inputScreenName)}}function $e(t,e){1&t&&(c.Vb(0,"span",17),c.Lc(1,"*"),c.Ub())}function Ze(t,e){if(1&t&&(c.Vb(0,"th",147),c.Lc(1),c.Jc(2,$e,2,0,"span",148),c.Ub()),2&t){var i=e.data,r=c.hc(2);c.Cb(1),c.Mc(i.name),c.Cb(1),c.oc("ngIf","rentalQuote"!=r.txnKeys.inputScreenName)}}function Xe(t,e){1&t&&(c.Vb(0,"span",17),c.Lc(1,"*"),c.Ub())}function ti(t,e){if(1&t&&(c.Vb(0,"th",149),c.Lc(1),c.Jc(2,Xe,2,0,"span",148),c.Ub()),2&t){var i=e.data,r=c.hc(2);c.Cb(1),c.Mc(i.name),c.Cb(1),c.oc("ngIf","rentalQuote"!=r.txnKeys.inputScreenName)}}function ei(t,e){if(1&t&&(c.Vb(0,"th",147),c.Lc(1),c.Ub()),2&t){var i=e.data;c.Cb(1),c.Mc(i.name)}}function ii(t,e){1&t&&(c.Vb(0,"span",17),c.Lc(1,"*"),c.Ub())}function ri(t,e){if(1&t&&(c.Vb(0,"th",150),c.Lc(1),c.Jc(2,ii,2,0,"span",148),c.Ub()),2&t){var i=e.data,r=c.hc(2);c.Cb(1),c.Mc(i.name),c.Cb(1),c.oc("ngIf","rentalQuote"!=r.txnKeys.inputScreenName)}}function ni(t,e){if(1&t&&(c.Vb(0,"th",147),c.Lc(1),c.Ub()),2&t){var i=e.data;c.Cb(1),c.Mc(i.name)}}function ai(t,e){if(1&t&&(c.Vb(0,"th",147),c.Lc(1),c.Ub()),2&t){var i=e.data;c.Cb(1),c.Mc(i.name)}}function oi(t,e){if(1&t&&(c.Vb(0,"th",147),c.Lc(1),c.Ub()),2&t){var i=e.data;c.Cb(1),c.Mc(i.name)}}function si(t,e){if(1&t&&(c.Vb(0,"th",151),c.Lc(1),c.Vb(2,"span",17),c.Lc(3,"*"),c.Ub(),c.Ub()),2&t){var i=e.data;c.Cb(1),c.Mc(i.name)}}function ci(t,e){if(1&t&&(c.Vb(0,"th",147),c.Lc(1),c.Ub()),2&t){var i=e.data;c.Cb(1),c.Mc(i.name)}}function ui(t,e){if(1&t&&(c.Vb(0,"th",152),c.Lc(1),c.Vb(2,"small"),c.Lc(3,"(Auto Fill)"),c.Ub(),c.Ub()),2&t){var i=e.data;c.Cb(1),c.Mc(i.name)}}function li(t,e){1&t&&(c.Vb(0,"span",17),c.Lc(1,"*"),c.Ub())}function mi(t,e){if(1&t&&(c.Vb(0,"th",146),c.Lc(1),c.Jc(2,li,2,0,"span",148),c.Ub()),2&t){var i=e.data,r=c.hc(2);c.Cb(1),c.Mc(i.name),c.Cb(1),c.oc("ngIf",r.storageService.get("distRulesMode"))}}function bi(t,e){if(1&t){var i=c.Wb();c.Tb(0),c.Vb(1,"a",154),c.dc("click",(function(){c.Dc(i);var t=c.hc().i,e=c.hc(2);return e.removeItemFields(t),e.branchUtilsService.txnCalcItemsTotal(e.myForm)})),c.Qb(2,"i",155),c.Ub(),c.Sb()}}function di(t,e){if(1&t&&(c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Jc(3,bi,3,0,"ng-container",0),c.Ub(),c.Sb(),c.Sb()),2&t){var i=e.i,r=c.hc(2);c.oc("formGroup",r.myForm),c.Cb(2),c.oc("formGroupName",i),c.Cb(1),c.oc("ngIf",r.myFormData.itemListArray[i].showDeleteIcon)}}function hi(t,e){if(1&t&&(c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Lc(3),c.Ub(),c.Sb(),c.Sb()),2&t){var i=e.i,r=c.hc(2);c.oc("formGroup",r.myForm),c.Cb(2),c.oc("formGroupName",i),c.Cb(1),c.Mc(i+1)}}function pi(t,e){if(1&t&&(c.Vb(0,"div"),c.Lc(1),c.Vb(2,"small"),c.Lc(3),c.Ub(),c.Ub()),2&t){var i=e.item;c.Cb(1),c.Nc("",i.rentalItemName,"\xa0"),c.Cb(2),c.Nc("(",i.rentalItemCode,")")}}function fi(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().i,r=c.hc(2);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].rentalItemId," ")}}function gi(t,e){if(1&t){var i=c.Wb();c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Vb(3,"div",36),c.Vb(4,"ng-select",156),c.dc("search",(function(t){return c.Dc(i),c.hc(2).onItemSearch(t)}))("change",(function(){c.Dc(i);var t=e.i;return c.hc(2).onItemChange(t)})),c.Jc(5,pi,4,2,"ng-template",24),c.Ub(),c.Ub(),c.Jc(6,fi,2,1,"div",21),c.Ub(),c.Sb(),c.Sb()}if(2&t){var r=e.i,n=c.hc(2);c.oc("formGroup",n.myForm),c.Cb(2),c.oc("formGroupName",r),c.Cb(2),c.oc("items",n.itemList)("multiple",!1)("virtualScroll",!0),c.Cb(2),c.oc("ngIf",n.myFormErrors.itemListArray[r].rentalItemId)}}function vi(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().formItemListRow;c.Cb(1),c.Nc(" ",null==i.errors?null:i.errors.invalidMaxQuantity," ")}}function yi(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().formItemListRow;c.Cb(1),c.Nc(" ",null==i.errors?null:i.errors.invalidMinQuantity," ")}}function Si(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().i,r=c.hc(2);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].quantity," ")}}function Ci(t,e){if(1&t){var i=c.Wb();c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Vb(3,"input",157),c.dc("keyup",(function(){c.Dc(i);var t=c.hc(2);return t.branchUtilsService.txnCalcItemsTotal(t.myForm)})),c.Ub(),c.Jc(4,vi,2,1,"div",21),c.Jc(5,yi,2,1,"div",21),c.Jc(6,Si,2,1,"div",21),c.Ub(),c.Sb(),c.Sb()}if(2&t){var r=e.formItemListRow,n=e.i,a=c.hc(2);c.oc("formGroup",a.myForm),c.Cb(2),c.oc("formGroupName",n),c.Cb(2),c.oc("ngIf",null==r.errors?null:r.errors.invalidMaxQuantity),c.Cb(1),c.oc("ngIf",null==r.errors?null:r.errors.invalidMinQuantity),c.Cb(1),c.oc("ngIf",a.myFormErrors.itemListArray[n].quantity)}}function Ii(t,e){if(1&t&&(c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Lc(3),c.Ub(),c.Sb(),c.Sb()),2&t){var i=e.formItemListRow,r=e.i,n=c.hc(2);c.oc("formGroup",n.myForm),c.Cb(2),c.oc("formGroupName",r),c.Cb(1),c.Nc(" ",i.value.openQuantity," ")}}function Ui(t,e){if(1&t){var i=c.Wb();c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Vb(3,"ng-select",158),c.dc("change",(function(){c.Dc(i);var t=e.i;return c.hc(2).onWorkLogRefChange(t)})),c.Ub(),c.Ub(),c.Sb(),c.Sb()}if(2&t){var r=e.i,n=c.hc(2);c.oc("formGroup",n.myForm),c.Cb(2),c.oc("formGroupName",r),c.Cb(1),c.oc("items",n.myFormData.itemListArray[r].rentalWorklogList)("multiple",!1)("virtualScroll",!0)}}function Li(t,e){if(1&t&&(c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Tb(3),c.Lc(4," - "),c.Sb(),c.Ub(),c.Sb(),c.Sb()),2&t){var i=e.i,r=c.hc(2);c.oc("formGroup",r.myForm),c.Cb(2),c.oc("formGroupName",i)}}function Vi(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().i,r=c.hc(2);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].duration," ")}}function Di(t,e){if(1&t&&(c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Tb(3),c.Qb(4,"input",159),c.Sb(),c.Jc(5,Vi,2,1,"div",21),c.Ub(),c.Sb(),c.Sb()),2&t){var i=e.i,r=c.hc(2);c.oc("formGroup",r.myForm),c.Cb(2),c.oc("formGroupName",i),c.Cb(3),c.oc("ngIf",r.myFormErrors.itemListArray[i].duration)}}function Ni(t,e){if(1&t&&(c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Qb(3,"ng-select",160),c.Ub(),c.Sb(),c.Sb()),2&t){var i=e.i,r=c.hc(2);c.oc("formGroup",r.myForm),c.Cb(2),c.oc("formGroupName",i),c.Cb(1),c.oc("items",r.uomList)("multiple",!1)}}function Fi(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().i,r=c.hc(2);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].startDate," ")}}function Ei(t,e){if(1&t){var i=c.Wb();c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Tb(3),c.Vb(4,"p-calendar",161),c.dc("onSelect",(function(){c.Dc(i);var t=e.i;return c.hc(2).onDateChange(t)})),c.Ub(),c.Jc(5,Fi,2,1,"div",21),c.Sb(),c.Ub(),c.Sb(),c.Sb()}if(2&t){var r=e.i,n=c.hc(2);c.oc("formGroup",n.myForm),c.Cb(2),c.oc("formGroupName",r),c.Cb(2),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",n.appConstants.PICKER_YEAR_RANGE)("dateFormat",n.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",n.myFormErrors.itemListArray[r].startDate)}}function Ti(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().i,r=c.hc(2);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].endDate," ")}}function xi(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().formItemListRow;c.Cb(1),c.Nc(" ",null==i.errors?null:i.errors.invalidEndDate," ")}}function Ai(t,e){if(1&t){var i=c.Wb();c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Tb(3),c.Vb(4,"p-calendar",162),c.dc("onSelect",(function(){c.Dc(i);var t=e.i;return c.hc(2).onDateChange(t)})),c.Ub(),c.Jc(5,Ti,2,1,"div",21),c.Jc(6,xi,2,1,"div",21),c.Sb(),c.Ub(),c.Sb(),c.Sb()}if(2&t){var r=e.formItemListRow,n=e.i,a=c.hc(2);c.oc("formGroup",a.myForm),c.Cb(2),c.oc("formGroupName",n),c.Cb(2),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",a.appConstants.PICKER_YEAR_RANGE)("dateFormat",a.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",a.myFormErrors.itemListArray[n].endDate),c.Cb(1),c.oc("ngIf",null==r.errors?null:r.errors.invalidEndDate)}}function ki(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().i,r=c.hc(2);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].shipDate," ")}}function Ri(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().formItemListRow;c.Cb(1),c.Nc(" ",null==i.errors?null:i.errors.invalidShipDate," ")}}function Mi(t,e){if(1&t){var i=c.Wb();c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Tb(3),c.Vb(4,"p-calendar",163),c.dc("onSelect",(function(){c.Dc(i);var t=e.i;return c.hc(2).onDateChange(t)})),c.Ub(),c.Jc(5,ki,2,1,"div",21),c.Jc(6,Ri,2,1,"div",21),c.Sb(),c.Ub(),c.Sb(),c.Sb()}if(2&t){var r=e.formItemListRow,n=e.i,a=c.hc(2);c.oc("formGroup",a.myForm),c.Cb(2),c.oc("formGroupName",n),c.Cb(2),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",a.appConstants.PICKER_YEAR_RANGE)("dateFormat",a.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",a.myFormErrors.itemListArray[n].shipDate),c.Cb(1),c.oc("ngIf",null==r.errors?null:r.errors.invalidShipDate)}}function wi(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().i,r=c.hc(2);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].returnDate," ")}}function Oi(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().formItemListRow;c.Cb(1),c.Nc(" ",null==i.errors?null:i.errors.invalidReturnDate," ")}}function qi(t,e){if(1&t){var i=c.Wb();c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Tb(3),c.Vb(4,"p-calendar",164),c.dc("onSelect",(function(){c.Dc(i);var t=e.i;return c.hc(2).onDateChange(t)})),c.Ub(),c.Jc(5,wi,2,1,"div",21),c.Jc(6,Oi,2,1,"div",21),c.Sb(),c.Ub(),c.Sb(),c.Sb()}if(2&t){var r=e.formItemListRow,n=e.i,a=c.hc(2);c.oc("formGroup",a.myForm),c.Cb(2),c.oc("formGroupName",n),c.Cb(2),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",a.appConstants.PICKER_YEAR_RANGE)("dateFormat",a.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",a.myFormErrors.itemListArray[n].returnDate),c.Cb(1),c.oc("ngIf",null==r.errors?null:r.errors.invalidReturnDate)}}function Pi(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().i,r=c.hc(2);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].poExpiryDate," ")}}function Bi(t,e){if(1&t){var i=c.Wb();c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Tb(3),c.Vb(4,"p-calendar",165),c.dc("onSelect",(function(){c.Dc(i);var t=e.i;return c.hc(2).onDateChange(t)})),c.Ub(),c.Jc(5,Pi,2,1,"div",21),c.Sb(),c.Ub(),c.Sb(),c.Sb()}if(2&t){var r=e.i,n=c.hc(2);c.oc("formGroup",n.myForm),c.Cb(2),c.oc("formGroupName",r),c.Cb(2),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",n.appConstants.PICKER_YEAR_RANGE)("dateFormat",n.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",n.myFormErrors.itemListArray[r].poExpiryDate)}}function Ki(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().i,r=c.hc(2);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].rentalEquipmentId," ")}}function Ji(t,e){if(1&t){var i=c.Wb();c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Vb(3,"ng-select",166),c.dc("change",(function(){c.Dc(i);var t=e.i;return c.hc(2).onEquipmentChange(t)})),c.Ub(),c.Jc(4,Ki,2,1,"div",21),c.Ub(),c.Sb(),c.Sb()}if(2&t){var r=e.i,n=c.hc(2);c.oc("formGroup",n.myForm),c.Cb(2),c.oc("formGroupName",r),c.Cb(1),c.oc("items",n.myFormData.itemListArray[r].equipmentList)("multiple",!1),c.Cb(1),c.oc("ngIf",n.myFormErrors.itemListArray[r].rentalEquipmentId)}}function Qi(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().i,r=c.hc(2);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].unitPrice," ")}}function _i(t,e){if(1&t){var i=c.Wb();c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Vb(3,"input",167),c.dc("keyup",(function(){c.Dc(i);var t=c.hc(2);return t.branchUtilsService.txnCalcItemsTotal(t.myForm)})),c.Ub(),c.Jc(4,Qi,2,1,"div",21),c.Ub(),c.Sb(),c.Sb()}if(2&t){var r=e.i,n=c.hc(2);c.oc("formGroup",n.myForm),c.Cb(2),c.oc("formGroupName",r),c.Cb(2),c.oc("ngIf",n.myFormErrors.itemListArray[r].unitPrice)}}function Wi(t,e){if(1&t&&(c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Qb(3,"ng-select",168),c.Ub(),c.Sb(),c.Sb()),2&t){var i=e.i,r=c.hc(2);c.oc("formGroup",r.myForm),c.Cb(2),c.oc("formGroupName",i),c.Cb(1),c.oc("items",r.hsnList)("multiple",!1)}}function Hi(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().i,r=c.hc(2);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].discountPercentage," ")}}function Gi(t,e){if(1&t){var i=c.Wb();c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Vb(3,"input",55),c.dc("keyup",(function(){c.Dc(i);var t=c.hc(2);return t.branchUtilsService.txnCalcItemsTotal(t.myForm)})),c.Ub(),c.Jc(4,Hi,2,1,"div",21),c.Ub(),c.Sb(),c.Sb()}if(2&t){var r=e.i,n=c.hc(2);c.oc("formGroup",n.myForm),c.Cb(2),c.oc("formGroupName",r),c.Cb(2),c.oc("ngIf",n.myFormErrors.itemListArray[r].discountPercentage)}}function zi(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().i,r=c.hc(2);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].taxId," ")}}function ji(t,e){if(1&t){var i=c.Wb();c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Vb(3,"ng-select",169),c.dc("change",(function(){c.Dc(i);var t=e.i,r=c.hc(2);return r.branchUtilsService.txnTaxChange(r.taxList,r.myForm,t)})),c.Ub(),c.Jc(4,zi,2,1,"div",21),c.Ub(),c.Sb(),c.Sb()}if(2&t){var r=e.i,n=c.hc(2);c.oc("formGroup",n.myForm),c.Cb(2),c.oc("formGroupName",r),c.Cb(1),c.oc("items",n.taxList)("multiple",!1),c.Cb(1),c.oc("ngIf",n.myFormErrors.itemListArray[r].taxId)}}function Yi(t,e){if(1&t&&(c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Lc(3),c.Ub(),c.Sb(),c.Sb()),2&t){var i=e.formItemListRow,r=e.i,n=c.hc(2);c.oc("formGroup",n.myForm),c.Cb(2),c.oc("formGroupName",r),c.Cb(1),c.Nc(" ",i.value.itemTaxPercentage," ")}}function $i(t,e){if(1&t&&(c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",170),c.Lc(3),c.Ub(),c.Sb(),c.Sb()),2&t){var i=e.formItemListRow,r=e.i,n=c.hc(2);c.oc("formGroup",n.myForm),c.Cb(2),c.oc("formGroupName",r),c.Cb(1),c.Nc(" ",i.value.totalItemAmount," ")}}function Zi(t,e){if(1&t&&(c.Vb(0,"div",119),c.Lc(1),c.Ub()),2&t){var i=c.hc().i,r=c.hc(2);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].distributionRulesId," ")}}function Xi(t,e){if(1&t){var i=c.Wb();c.Tb(0,153),c.Tb(1,45),c.Vb(2,"td",131),c.Vb(3,"ng-select",171),c.dc("add",(function(){c.Dc(i);var t=e.i;return c.hc(2).onDistRuleAdd(t)})),c.Ub(),c.Jc(4,Zi,2,1,"div",21),c.Ub(),c.Sb(),c.Sb()}if(2&t){var r=e.i,n=c.hc(2);c.oc("formGroup",n.myForm),c.Cb(2),c.oc("formGroupName",r),c.Cb(1),c.oc("items",n.distributionList)("multiple",!0),c.Cb(1),c.oc("ngIf",n.myFormErrors.itemListArray[r].distributionRulesId)}}var tr=function(){return{"max-height.px":300}};function er(t,e){if(1&t){var i=c.Wb();c.Tb(0),c.Vb(1,"div",1),c.Vb(2,"span"),c.Lc(3),c.Ub(),c.Lc(4),c.Jc(5,qt,2,0,"ng-container",0),c.Jc(6,Pt,2,0,"ng-container",0),c.Vb(7,"div",2),c.Vb(8,"button",3),c.dc("click",(function(){return c.Dc(i),c.hc().utilsService.goBack()})),c.Qb(9,"i",4),c.Vb(10,"span"),c.Lc(11,"Back"),c.Ub(),c.Ub(),c.Vb(12,"button",5),c.dc("click",(function(){c.Dc(i);var t=c.hc();return t.popupExternalService.showManageColumnsPopup(t.txnKeys.inputScreenName)})),c.Qb(13,"i",6),c.Vb(14,"span"),c.Lc(15,"Manage Item Columns"),c.Ub(),c.Ub(),c.Jc(16,Bt,4,0,"button",7),c.Vb(17,"button",5),c.dc("click",(function(){return c.Dc(i),c.hc().showTxnOptionsSidebar()})),c.Qb(18,"i",8),c.Vb(19,"span"),c.Lc(20,"More"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(21,"div",9),c.Vb(22,"div",10),c.Vb(23,"div",11),c.Qb(24,"i",12),c.Lc(25,"Basic Info "),c.Ub(),c.Vb(26,"div",13),c.Vb(27,"div",14),c.Vb(28,"div",15),c.Vb(29,"label",16),c.Lc(30,"Doc No"),c.Vb(31,"span",17),c.Lc(32,"*"),c.Ub(),c.Ub(),c.Vb(33,"div",14),c.Vb(34,"div",18),c.Vb(35,"ng-select",19),c.dc("change",(function(){c.Dc(i);var t=c.hc();return t.branchUtilsService.onDocumentNumberingChange(t.documentNumberingList,t.myForm)})),c.Ub(),c.Ub(),c.Vb(36,"div",18),c.Qb(37,"input",20),c.Ub(),c.Ub(),c.Jc(38,Kt,2,1,"div",21),c.Ub(),c.Vb(39,"div",15),c.Vb(40,"label",16),c.Lc(41,"Business Partner Name"),c.Vb(42,"span",17),c.Lc(43,"*"),c.Ub(),c.Ub(),c.Vb(44,"div",22),c.Vb(45,"ng-select",23),c.dc("focus",(function(){return c.Dc(i),c.hc().onCustomerNameChange()}))("change",(function(){return c.Dc(i),c.hc().onCustomerChange()})),c.Jc(46,Jt,4,2,"ng-template",24),c.Ub(),c.Vb(47,"span"),c.Jc(48,Qt,2,0,"a",25),c.Jc(49,_t,2,0,"a",26),c.Ub(),c.Jc(50,Wt,2,0,"span",27),c.Ub(),c.Jc(51,Ht,2,1,"div",21),c.Ub(),c.Vb(52,"div",15),c.Vb(53,"label",16),c.Lc(54,"Contact Person"),c.Ub(),c.Vb(55,"ng-select",28),c.Jc(56,Gt,4,3,"ng-template",24),c.Ub(),c.Ub(),c.Vb(57,"div",15),c.Vb(58,"label",16),c.Lc(59,"Currency"),c.Vb(60,"span",17),c.Lc(61,"*"),c.Ub(),c.Ub(),c.Vb(62,"select",29),c.Vb(63,"option",30),c.Lc(64,"--SELECT--"),c.Ub(),c.Jc(65,zt,2,2,"option",31),c.Ub(),c.Jc(66,jt,2,1,"div",21),c.Ub(),c.Vb(67,"div",15),c.Vb(68,"label",16),c.Lc(69,"Reference No"),c.Ub(),c.Qb(70,"input",32),c.Ub(),c.Vb(71,"div",15),c.Vb(72,"label",16),c.Lc(73,"Posting Date"),c.Vb(74,"span",17),c.Lc(75,"*"),c.Ub(),c.Ub(),c.Qb(76,"p-calendar",33),c.Jc(77,Yt,2,1,"div",21),c.Jc(78,$t,2,1,"div",21),c.Ub(),c.Jc(79,te,8,6,"div",34),c.Jc(80,re,8,6,"div",34),c.Jc(81,oe,8,6,"div",34),c.Vb(82,"div",15),c.Vb(83,"label",16),c.Lc(84,"Document Date"),c.Vb(85,"span",17),c.Lc(86,"*"),c.Ub(),c.Ub(),c.Qb(87,"p-calendar",35),c.Jc(88,se,2,1,"div",21),c.Ub(),c.Vb(89,"div",15),c.Vb(90,"label",16),c.Lc(91,"Employee"),c.Vb(92,"span",17),c.Lc(93,"*"),c.Ub(),c.Ub(),c.Vb(94,"div",36),c.Vb(95,"ng-select",37),c.Jc(96,ce,4,2,"ng-template",24),c.Ub(),c.Ub(),c.Jc(97,ue,2,1,"div",21),c.Ub(),c.Vb(98,"div",15),c.Vb(99,"label",16),c.Lc(100,"Status"),c.Vb(101,"span",17),c.Lc(102,"*"),c.Ub(),c.Ub(),c.Vb(103,"select",38),c.Jc(104,le,2,2,"option",31),c.Ub(),c.Jc(105,me,2,1,"div",21),c.Ub(),c.Vb(106,"div",39),c.Vb(107,"label",16),c.Lc(108,"Remarks"),c.Ub(),c.Qb(109,"textarea",40),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(110,"div",10),c.Vb(111,"div",11),c.Qb(112,"i",12),c.Lc(113,"Content Info "),c.Ub(),c.Vb(114,"div",41),c.Vb(115,"div",42),c.Vb(116,"table",43),c.Vb(117,"thead"),c.Vb(118,"tr"),c.Jc(119,de,2,4,"ng-container",44),c.Ub(),c.Ub(),c.Vb(120,"tbody",45),c.Jc(121,fe,2,2,"tr",46),c.Ub(),c.Jc(122,ge,7,0,"tfoot",0),c.Ub(),c.Ub(),c.Vb(123,"div",14),c.Vb(124,"div",47),c.Qb(125,"div",48),c.Ub(),c.Vb(126,"div",49),c.Vb(127,"table",50),c.Vb(128,"tbody"),c.Vb(129,"tr"),c.Vb(130,"td",51),c.Vb(131,"strong"),c.Lc(132,"Total Before Discount"),c.Ub(),c.Ub(),c.Qb(133,"td",52),c.Vb(134,"td",53),c.Vb(135,"strong"),c.Lc(136),c.Ub(),c.Ub(),c.Ub(),c.Vb(137,"tr"),c.Vb(138,"td"),c.Lc(139,"Discount %"),c.Ub(),c.Vb(140,"td",54),c.Vb(141,"input",55),c.dc("keyup",(function(){c.Dc(i);var t=c.hc();return t.branchUtilsService.txnCalcTotal(t.myForm)})),c.Ub(),c.Jc(142,ve,2,1,"div",21),c.Ub(),c.Vb(143,"td",54),c.Lc(144),c.Ub(),c.Ub(),c.Vb(145,"tr"),c.Vb(146,"td"),c.Lc(147,"Tax"),c.Ub(),c.Qb(148,"td"),c.Vb(149,"td",54),c.Lc(150),c.Ub(),c.Ub(),c.Vb(151,"tr"),c.Vb(152,"td"),c.Lc(153," Rounding "),c.Vb(154,"div"),c.Vb(155,"label",56),c.Vb(156,"input",57),c.dc("ngModelChange",(function(){c.Dc(i);var t=c.hc();return t.branchUtilsService.txnRoundingOffChange(t.myForm)})),c.Ub(),c.Qb(157,"span",58),c.Lc(158,"Edit "),c.Ub(),c.Ub(),c.Ub(),c.Vb(159,"td"),c.Vb(160,"input",59),c.dc("keyup",(function(){c.Dc(i);var t=c.hc();return t.branchUtilsService.txnCalcTotal(t.myForm,!0)})),c.Ub(),c.Jc(161,ye,2,1,"div",21),c.Ub(),c.Vb(162,"td",54),c.Lc(163),c.Ub(),c.Ub(),c.Vb(164,"tr"),c.Vb(165,"td",60),c.Lc(166,"Total "),c.Vb(167,"small"),c.Lc(168,"(Rounded off):"),c.Ub(),c.Ub(),c.Qb(169,"td"),c.Vb(170,"td",61),c.Lc(171),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(172,"div",10),c.Vb(173,"div",11),c.Qb(174,"i",12),c.Lc(175,"Logistics Info "),c.Ub(),c.Vb(176,"div",13),c.Vb(177,"div",14),c.Vb(178,"div",15),c.Vb(179,"label",16),c.Lc(180,"Ship From"),c.Ub(),c.Vb(181,"select",62),c.dc("change",(function(){c.Dc(i);var t=c.hc();return t.branchUtilsService.txnBpAddressChange(t.customerShipToAddressList,t.myForm,"customerShipToBpAddressId","customerShipToAddress")})),c.Vb(182,"option",30),c.Lc(183,"--SELECT--"),c.Ub(),c.Jc(184,Se,2,3,"option",31),c.Ub(),c.Qb(185,"textarea",63),c.Ub(),c.Vb(186,"div",15),c.Vb(187,"label",16),c.Lc(188,"Pay To"),c.Ub(),c.Vb(189,"select",64),c.dc("change",(function(){c.Dc(i);var t=c.hc();return t.branchUtilsService.txnBpAddressChange(t.customerBillToAddressList,t.myForm,"customerBillToBpAddressId","customerBillToAddress"),t.branchUtilsService.txnSetTaxCode(t.customerBillToAddressList,t.myForm,"customerBillToBpAddressId")})),c.Vb(190,"option",30),c.Lc(191,"--SELECT--"),c.Ub(),c.Jc(192,Ce,2,3,"option",31),c.Ub(),c.Qb(193,"textarea",65),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Jc(194,Le,20,2,"div",66),c.Jc(195,Ve,10,0,"div",66),c.Qb(196,"app-udf-viewer",67),c.Vb(197,"app-attachments",68),c.dc("doSuccess",(function(){c.Dc(i);var t=c.hc();return t.rentalTxnUtilsService.redirectToList(t.txnKeys.inputScreenName)})),c.Ub(),c.Vb(198,"div",10),c.Vb(199,"div",11),c.Qb(200,"i",12),c.Lc(201,"Terms and Conditions "),c.Ub(),c.Vb(202,"div",13),c.Vb(203,"div",14),c.Vb(204,"div",15),c.Vb(205,"label",16),c.Lc(206,"Select Template"),c.Ub(),c.Vb(207,"select",69),c.Vb(208,"option",30),c.Lc(209,"--SELECT--"),c.Ub(),c.Jc(210,De,2,2,"option",31),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(211,"div",70),c.Jc(212,Ne,4,0,"button",7),c.Jc(213,Fe,4,0,"button",7),c.Jc(214,Ee,4,0,"button",71),c.Jc(215,Te,4,0,"button",7),c.Jc(216,xe,4,0,"button",72),c.Ub(),c.Jc(217,Re,7,3,"div",73),c.Jc(218,Me,7,0,"div",73),c.Ub(),c.Qb(219,"app-spi-txn-options"),c.Jc(220,we,2,1,"ng-template",null,74,c.Kc),c.Jc(222,Oe,2,1,"ng-template",null,75,c.Kc),c.Jc(224,qe,4,1,"ng-template",null,76,c.Kc),c.Jc(226,Pe,2,1,"ng-template",null,77,c.Kc),c.Jc(228,Be,2,1,"ng-template",null,78,c.Kc),c.Jc(230,Ke,2,1,"ng-template",null,79,c.Kc),c.Jc(232,Je,2,1,"ng-template",null,80,c.Kc),c.Jc(234,_e,3,2,"ng-template",null,81,c.Kc),c.Jc(236,He,3,2,"ng-template",null,82,c.Kc),c.Jc(238,ze,3,2,"ng-template",null,83,c.Kc),c.Jc(240,Ye,3,2,"ng-template",null,84,c.Kc),c.Jc(242,Ze,3,2,"ng-template",null,85,c.Kc),c.Jc(244,ti,3,2,"ng-template",null,86,c.Kc),c.Jc(246,ei,2,1,"ng-template",null,87,c.Kc),c.Jc(248,ri,3,2,"ng-template",null,88,c.Kc),c.Jc(250,ni,2,1,"ng-template",null,89,c.Kc),c.Jc(252,ai,2,1,"ng-template",null,90,c.Kc),c.Jc(254,oi,2,1,"ng-template",null,91,c.Kc),c.Jc(256,si,4,1,"ng-template",null,92,c.Kc),c.Jc(258,ci,2,1,"ng-template",null,93,c.Kc),c.Jc(260,ui,4,1,"ng-template",null,94,c.Kc),c.Jc(262,mi,3,2,"ng-template",null,95,c.Kc),c.Jc(264,di,4,3,"ng-template",null,96,c.Kc),c.Jc(266,hi,4,3,"ng-template",null,97,c.Kc),c.Jc(268,gi,7,6,"ng-template",null,98,c.Kc),c.Jc(270,Ci,7,5,"ng-template",null,99,c.Kc),c.Jc(272,Ii,4,3,"ng-template",null,100,c.Kc),c.Jc(274,Ui,4,5,"ng-template",null,101,c.Kc),c.Jc(276,Li,5,2,"ng-template",null,102,c.Kc),c.Jc(278,Di,6,3,"ng-template",null,103,c.Kc),c.Jc(280,Ni,4,4,"ng-template",null,104,c.Kc),c.Jc(282,Ei,6,7,"ng-template",null,105,c.Kc),c.Jc(284,Ai,7,8,"ng-template",null,106,c.Kc),c.Jc(286,Mi,7,8,"ng-template",null,107,c.Kc),c.Jc(288,qi,7,8,"ng-template",null,108,c.Kc),c.Jc(290,Bi,6,7,"ng-template",null,109,c.Kc),c.Jc(292,Ji,5,5,"ng-template",null,110,c.Kc),c.Jc(294,_i,5,3,"ng-template",null,111,c.Kc),c.Jc(296,Wi,4,4,"ng-template",null,112,c.Kc),c.Jc(298,Gi,5,3,"ng-template",null,113,c.Kc),c.Jc(300,ji,5,5,"ng-template",null,114,c.Kc),c.Jc(302,Yi,4,3,"ng-template",null,115,c.Kc),c.Jc(304,$i,4,3,"ng-template",null,116,c.Kc),c.Jc(306,Xi,5,5,"ng-template",null,117,c.Kc),c.Sb()}if(2&t){var r=c.hc();c.Cb(3),c.Mc(r.branchUtilsService.txnGetTitle(r.screenAttributes.title,!0)),c.Cb(1),c.Nc("",r.branchUtilsService.txnGetTitle(r.screenAttributes.title)," - "),c.Cb(1),c.oc("ngIf",!r.txnKeys.inputEditId),c.Cb(1),c.oc("ngIf",r.txnKeys.inputEditId),c.Cb(10),c.oc("ngIf",r.txnKeys.inputEditId),c.Cb(5),c.oc("formGroup",r.myForm),c.Cb(14),c.oc("items",r.documentNumberingList),c.Cb(3),c.oc("ngIf",r.myFormErrors.documentNumberingId||r.myFormErrors.documentNumber),c.Cb(7),c.oc("items",r.businessPartnerList)("multiple",!1),c.Cb(3),c.oc("ngIf",!r.bizRefreshFlag),c.Cb(1),c.oc("ngIf",r.bizRefreshFlag),c.Cb(1),c.oc("ngIf",r.myFormData.customerBpId),c.Cb(1),c.oc("ngIf",r.myFormErrors.customerBpId),c.Cb(4),c.oc("items",r.bpContactList)("multiple",!1),c.Cb(10),c.oc("ngForOf",r.currencyList),c.Cb(1),c.oc("ngIf",r.myFormErrors.currencyId),c.Cb(10),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",r.myFormErrors.postingDate),c.Cb(1),c.oc("ngIf",null==r.myForm.errors?null:r.myForm.errors.invalidPostingDate),c.Cb(1),c.oc("ngIf",r.rentalTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnDeliveryDate")),c.Cb(1),c.oc("ngIf",r.rentalTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnDueDate")),c.Cb(1),c.oc("ngIf",r.rentalTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnReturnDate")),c.Cb(6),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",r.myFormErrors.documentDate),c.Cb(7),c.oc("items",r.employeeList)("multiple",!1),c.Cb(2),c.oc("ngIf",r.myFormErrors.empId),c.Cb(7),c.oc("ngForOf",r.rentalStatusList),c.Cb(1),c.oc("ngIf",r.myFormErrors.status),c.Cb(10),c.oc("ngStyle",c.rc(67,tr)),c.Cb(4),c.oc("ngForOf",r.itemListColumnOrder),c.Cb(2),c.oc("ngForOf",r.myForm.controls.itemListArray.controls),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnAddItemAccess(r.txnKeys.inputScreenName,r.myForm,r.txnKeys.inputEditId)),c.Cb(14),c.Oc(" ",r.myFormData.totalBeforeDiscount," ",r.branchUtilsService.txnGetActiveCurrency(r.currencyList,r.myForm,"currencyId")," "),c.Cb(6),c.oc("ngIf",r.myFormErrors.discountPercentage),c.Cb(2),c.Oc(" ",r.myFormData.discountValue," ",r.branchUtilsService.txnGetActiveCurrency(r.currencyList,r.myForm,"currencyId")," "),c.Cb(6),c.Oc(" ",r.myFormData.taxPercentage," ",r.branchUtilsService.txnGetActiveCurrency(r.currencyList,r.myForm,"currencyId")," "),c.Cb(11),c.oc("ngIf",r.myFormErrors.rounding),c.Cb(2),c.Oc(" ",r.myFormData.rounding," ",r.branchUtilsService.txnGetActiveCurrency(r.currencyList,r.myForm,"currencyId")," "),c.Cb(8),c.Oc(" ",r.myFormData.totalAmount," ",r.branchUtilsService.txnGetActiveCurrency(r.currencyList,r.myForm,"currencyId")," "),c.Cb(13),c.oc("ngForOf",r.customerShipToAddressList),c.Cb(8),c.oc("ngForOf",r.customerBillToAddressList),c.Cb(2),c.oc("ngIf",r.rentalTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnPaymentFields")),c.Cb(1),c.oc("ngIf",r.rentalTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnTaxFields")),c.Cb(1),c.oc("type",r.screenAttributes.backendKey),c.Cb(1),c.oc("type",r.screenAttributes.backendKey),c.Cb(13),c.oc("ngForOf",r.termsAndConditionList),c.Cb(2),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"save")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"saveDraft")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"clear")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"update")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"cancel")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"editMsgContainer")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"addAclNote"))}}var ir,rr=((ir=function(){function t(e,i,r,n,a,o,c,u,l,m,b){_classCallCheck(this,t),this.utilsService=e,this.storageService=i,this.authGuardService=r,this.commonDataService=n,this.branchUtilsService=a,this.formBuilder=o,this.activatedRoute=c,this.rentalTxnUtilsService=u,this.popupExternalService=l,this.changeDetectorRef=m,this.modalService=b,this.appConstants=s.h,this.screenAcl={},this.txnKeys={inputScreenName:"",inputEditId:"",inputDraftId:"",inputCopyIds:"",inputCopyScreenName:"",inputDuplicateId:"",editStatusId:"",editCreatedName:""},this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.documentNumberingList=[],this.rentalStatusList=[],this.currencyList=[],this.paymentTermsList=[],this.paymentMethodsList=[],this.taxList=[],this.uomList=[],this.hsnList=[],this.itemList=[],this.distributionList=[],this.termsAndConditionList=[],this.businessPartnerList=[],this.bpContactList=[],this.employeeList=[],this.customerShipToAddressList=[],this.customerBillToAddressList=[],this.bizRefreshFlag=!1,this.rentalWorklogList=[],this.myFormData={},this.myFormErrors={},this.myFormValidationMsgs={}}return _createClass(t,[{key:"ngOnInit",value:function(){this.initializeSubscriptions()}},{key:"ngAfterViewInit",value:function(){this.attachmentsComponent&&this.udfViewerComponent&&(this.attachmentsComponent.loadAttachments(this.txnKeys.inputEditId||this.txnKeys.inputDraftId),this.udfViewerComponent.getFields(this.txnKeys.inputEditId||this.txnKeys.inputDuplicateId||this.txnKeys.inputDraftId),this.changeDetectorRef.detectChanges())}},{key:"initializeSubscriptions",value:function(){var t=this;this.activatedRoute.params.subscribe((function(e){if(!t.rentalTxnUtilsService.checkScreenNameValid(e.screenName))return t.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),t.utilsService.goBack(),!1;if(t.screenAcl=t.authGuardService.getScreenAcl(t.branchUtilsService.screenAttributes[e.screenName].documentTypeId),!t.screenAcl.view)return t.utilsService.showFailureMsg(s.h.ACL_UNAUTHORIZED_MSG),t.utilsService.goBack(),!1;if(t.reInitializeGlobalVariables(),t.txnKeys.inputScreenName=e.screenName,t.transactionInitialization(),e.id&&(t.txnKeys.inputEditId=t.utilsService.decrypt(e.id),t.get()),e.copyScreenName&&e.copyId){var i=t.utilsService.decrypt(e.copyId);t.txnKeys.inputCopyIds=i.split(","),t.txnKeys.inputCopyScreenName=e.copyScreenName,t.copyFrom()}e.duplicateId&&(t.txnKeys.inputDuplicateId=t.utilsService.decrypt(e.duplicateId),t.getDuplicate()),e.draftId&&(t.txnKeys.inputDraftId=t.utilsService.decrypt(e.draftId),t.getDraft()),t.txnKeys.inputEditId||t.txnKeys.inputCopyIds||t.txnKeys.inputDuplicateId||t.txnKeys.inputDraftId||(t.branchUtilsService.getMasterDocumentNumbering(t.myForm,t.screenAttributes.documentTypeId).subscribe((function(e){t.documentNumberingList=e})),t.getCustomerBpList(),t.getEmployeeList(),t.getAutoSuggestionList("getCurrencyList"),t.getAutoSuggestionList("getHsnList"),t.getAutoSuggestionList("getTaxList"),t.getAutoSuggestionList("getUomList"),t.getDistributionList())})),this.branchUtilsService.itemSearch.pipe(Object(P.a)(700),Object(B.a)(),Object(K.a)((function(e){t.getItemList(e)}))).subscribe(),this.itemListColumnOrderChangesSubscription=this.branchUtilsService.itemListColumnOrderChanges.subscribe((function(e){"rentalQuote"!==e.triggerType&&"rentalOrder"!==e.triggerType&&"rentalDelivery"!==e.triggerType&&"rentalReturn"!==e.triggerType&&"rentalInvoice"!==e.triggerType||(t.itemListColumnOrder=t.branchUtilsService.getSelectedItemColumnDataByTxn(t.txnKeys.inputScreenName))}))}},{key:"reInitializeGlobalVariables",value:function(){this.txnKeys.inputScreenName="",this.txnKeys.inputEditId="",this.txnKeys.inputCopyIds="",this.txnKeys.inputCopyScreenName="",this.txnKeys.inputDuplicateId="",this.txnKeys.editStatusId="",this.txnKeys.editCreatedName="",this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.documentNumberingList=[],this.rentalStatusList=[],this.itemList=[],this.taxList=[],this.uomList=[],this.hsnList=[],this.distributionList=[],this.businessPartnerList=[],this.bpContactList=[],this.employeeList=[],this.termsAndConditionList=[],this.currencyList=[],this.paymentTermsList=[],this.paymentMethodsList=[],this.customerShipToAddressList=[],this.customerBillToAddressList=[]}},{key:"transactionInitialization",value:function(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.txnKeys.inputScreenName],this.screenDataService=this.rentalTxnUtilsService.getScreenDataService(this.txnKeys.inputScreenName),this.myFormErrors=this.rentalTxnUtilsService.getFormErrors(this.txnKeys.inputScreenName,"mainFields"),this.myFormValidationMsgs=this.rentalTxnUtilsService.getFormValMsgs(this.txnKeys.inputScreenName),this.itemListColumnOrder=this.branchUtilsService.getSelectedItemColumnDataByTxn(this.txnKeys.inputScreenName),this.initializeForm(),this.getAutoSuggestionList("getRentalTransStatusList"),this.getAutoSuggestionList("getTermsandConditionsList"),"rentalQuote"!==this.txnKeys.inputScreenName&&"rentalOrder"!==this.txnKeys.inputScreenName&&"rentalInvoice"!==this.txnKeys.inputScreenName||(this.getAutoSuggestionList("getPaymentTermsList"),this.getAutoSuggestionList("getPaymentMethodsList"))}},{key:"initializeForm",value:function(){var t=this;this.myForm=this.rentalTxnUtilsService.getFormMainFields(this.txnKeys.inputScreenName),this.myForm.valueChanges.subscribe((function(e){t.utilsService.validation(t.myForm,t.myFormErrors,t.myFormValidationMsgs),t.myFormData=t.myForm.getRawValue()})),this.myFormData=this.myForm.getRawValue()}},{key:"addItemFields",value:function(t,e){var i=this.myForm.controls.itemListArray;i.push(this.initItemFields(t,e)),t||this.branchUtilsService.txnTaxChange(this.taxList,this.myForm,i.length-1)}},{key:"initItemFields",value:function(t,e){return this.myFormErrors.itemListArray.push(this.rentalTxnUtilsService.getFormErrors(this.txnKeys.inputScreenName,"itemFields")),this.rentalTxnUtilsService.getFormItemFields(this.txnKeys.inputScreenName,t,e)}},{key:"removeItemFields",value:function(t){var e=this.myFormData.itemListArray[t].id;if(e){var i=this.myFormData.deletedItemChildIds;i.push(e),this.myForm.patchValue({deletedItemChildIds:i})}this.myForm.controls.itemListArray.removeAt(t)}},{key:"confirmSaveUpdate",value:function(){var t=this,e=this.myForm.getRawValue(),i=b.findIndex(this.documentNumberingList,{id:e.documentNumberingId});return"DRAFT"===this.documentNumberingList[i].documentNumberingType?(this.utilsService.showFailureMsg("Cannot Proceed - Select other than draft document numbering from Doc No field!"),!1):this.myForm.valid&&this.udfViewerComponent.valid()?0===e.itemListArray.length?(this.utilsService.showFailureMsg("Cannot save / update - No item added!"),!1):this.rentalTxnUtilsService.checkEquipmentDuplicateExist(this.myForm)?(this.utilsService.showFailureMsg("Cannot Proceed - Duplicate equipment in the list!"),!1):"rentalInvoice"===this.txnKeys.inputScreenName&&this.rentalTxnUtilsService.checkWorklogDuplicateExist(this.myForm)?(this.utilsService.showFailureMsg("Cannot Proceed - Duplicate work log ref in the list!"),!1):void("rentalInvoice"===this.txnKeys.inputScreenName&&this.rentalTxnUtilsService.checkWorklogUtilized(this.myFormData)?this.utilsService.confirmDialog("Confirmation","Saving the document will close the referenced worklogs. Confirm to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe((function(e){e&&t.saveUpdate()})):this.saveUpdate()):(this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs,!0),this.udfViewerComponent.checkValidations(),!1)}},{key:"saveUpdate",value:function(){var t,e=this,i=this.rentalTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm);i.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),i.isDraft=this.txnKeys.inputDraftId?"2":"0",this.txnKeys.inputEditId||this.txnKeys.inputDraftId?(t="update",i.id=this.txnKeys.inputEditId||this.txnKeys.inputDraftId):t="save",this.screenDataService[t](i).subscribe((function(i){"SUCCESS"===i.status?(e.utilsService.showSuccessMsg(i),e.attachmentsComponent.save("save"===t?i.sId:e.txnKeys.inputEditId||e.txnKeys.inputDraftId)):e.utilsService.showFailureMsg(i)}))}},{key:"addUpdateDraft",value:function(){var t=this,e=this.myForm.getRawValue(),i=b.findIndex(this.documentNumberingList,{id:e.documentNumberingId});if("DRAFT"!==this.documentNumberingList[i].documentNumberingType)return this.utilsService.showFailureMsg("Cannot Proceed - Select draft document numbering from Doc No field!"),!1;if(0===e.itemListArray.length)return this.utilsService.showFailureMsg("Cannot save / update draft - No item added!"),!1;var r,n=this.rentalTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm);n.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),n.isDraft="1",this.txnKeys.inputDraftId?(r="update",n.id=this.txnKeys.inputDraftId):r="save",this.screenDataService[r](n).subscribe((function(e){"SUCCESS"===e.status?(t.utilsService.showSuccessMsg(e),t.attachmentsComponent.save("save"===r?e.sId:t.txnKeys.inputDraftId)):t.utilsService.showFailureMsg(e)}))}},{key:"get",value:function(){var t=this;this.screenDataService.get(this.txnKeys.inputEditId).subscribe((function(e){if("SUCCESS"===e.status){var i=e.results;i.editFlag=!0;var r=t.rentalTxnUtilsService.getMainFieldsWithData(t.txnKeys.inputScreenName,i);t.myForm.patchValue(r),t.branchUtilsService.getMasterDocumentNumbering(t.myForm,t.screenAttributes.documentTypeId,"edit",i.documentNumberingInfo).subscribe((function(e){t.documentNumberingList=e})),t.getCustomerBpList(!0,i.customerBpInfo),t.getEmployeeList(i.empInfo),t.getAutoSuggestionList("getCurrencyList",i.currencyInfo),t.getCustomerBpContactList(!0,i.customerBpContactsInfo),t.getCustomerShipToAddressList(!0,i.customerShipToBpAddressInfo),t.getCustomerBillToAddressList(!0,i.customerBillToBpAddressInfo);var n=[],a=[],o=[],s=[],c=[];i.itemListArray.forEach((function(e,i){t.addItemFields(e,"edit"),e.rentalItemInfo[0]&&n.push(e.rentalItemInfo[0]),e.uomInfo[0]&&a.push(e.uomInfo[0]),e.hsnInfo[0]&&o.push(e.hsnInfo[0]),e.taxInfo[0]&&s.push(e.taxInfo[0]),e.distributionRulesInfo.forEach((function(t){c.push(t)}))})),t.getAutoSuggestionList("getUomList",a),t.getAutoSuggestionList("getHsnList",o),t.getAutoSuggestionList("getTaxList",s),t.getItemList("",!0,n),t.getDistributionList(c),t.txnKeys.editStatusId=i.status,t.txnKeys.editCreatedName=i.createdByInfo[0].employeeName,t.branchUtilsService.txnCalcItemsTotal(t.myForm),t.rentalTxnUtilsService.manipulationsOnEdit(t.txnKeys.inputScreenName,t.myForm)}else t.utilsService.showFailureMsg(e),t.utilsService.goBack()}))}},{key:"copyFrom",value:function(){var t=this,e=this.rentalTxnUtilsService.getScreenDataService(this.txnKeys.inputCopyScreenName),i=this.branchUtilsService.screenAttributes[this.txnKeys.inputCopyScreenName];e.copy(this.txnKeys.inputCopyIds).subscribe((function(e){if("SUCCESS"===e.status){var r=e.results;delete r.documentNumberingId,delete r.documentNumber,delete r.documentNumberingInfo;var n=t.rentalTxnUtilsService.getMainFieldsWithData(t.txnKeys.inputScreenName,r);t.myForm.patchValue(n),t.branchUtilsService.getMasterDocumentNumbering(t.myForm,t.screenAttributes.documentTypeId).subscribe((function(e){t.documentNumberingList=e})),t.getCustomerBpList(!0,r.customerBpInfo),t.getEmployeeList(r.empInfo),t.getAutoSuggestionList("getCurrencyList",r.currencyInfo),t.getCustomerBpContactList(!0,r.customerBpContactsInfo),t.getCustomerShipToAddressList(!0,r.customerShipToBpAddressInfo),t.getCustomerBillToAddressList(!0,r.customerBillToBpAddressInfo);var a=[],o=[],s=[],c=[],u=[],l=r.itemListArray.filter((function(e){return"rentalInvoice"===t.txnKeys.inputScreenName&&"0"!==e.openQuantity||"1"!==e.isUtilized&&"rentalInvoice"!==t.txnKeys.inputScreenName}));r.itemListArray=l,r.itemListArray.forEach((function(e,n){e.copyFromId=e.id,e.copyFromType=i.backendKey,delete e.id,"rentalInvoice"===t.txnKeys.inputScreenName&&(e.copyFromOpenQuantity=e.openQuantity,e.quantity=e.openQuantity,delete e.openQuantity,delete e.orderedQuantity),t.addItemFields(e,"copy"),e.rentalItemInfo[0]&&a.push(e.rentalItemInfo[0]),e.uomInfo&&e.uomInfo[0]&&o.push(e.uomInfo[0]),e.hsnInfo&&e.hsnInfo[0]&&s.push(e.hsnInfo[0]),e.taxInfo&&e.taxInfo[0]&&c.push(e.taxInfo[0]),e.distributionRulesInfo&&e.distributionRulesInfo.forEach((function(t){u.push(t)})),"rentalInvoice"===t.txnKeys.inputScreenName&&t.getRentalWorkLogList(r.customerBpId,e.rentalItemId,e.rentalEquipmentId,n)})),t.getAutoSuggestionList("getUomList",o),t.getAutoSuggestionList("getHsnList",s),t.getAutoSuggestionList("getTaxList",c),t.getItemList("",!0,a),t.getDistributionList(u),t.branchUtilsService.txnCalcItemsTotal(t.myForm),t.rentalTxnUtilsService.manipulationsOnCopy(t.txnKeys.inputScreenName,t.myForm)}else t.utilsService.showFailureMsg(e),t.utilsService.goBack()}))}},{key:"getDraft",value:function(){var t=this;this.screenDataService.get(this.txnKeys.inputDraftId).subscribe((function(e){if("SUCCESS"===e.status){var i=e.results,r=t.rentalTxnUtilsService.getMainFieldsWithData(t.txnKeys.inputScreenName,i);t.myForm.patchValue(r),t.branchUtilsService.getMasterDocumentNumbering(t.myForm,t.screenAttributes.documentTypeId,"draft",i.documentNumberingInfo).subscribe((function(e){t.documentNumberingList=e})),t.getCustomerBpList(!0,i.customerBpInfo),t.getEmployeeList(i.empInfo),t.getAutoSuggestionList("getCurrencyList",i.currencyInfo),t.getCustomerBpContactList(!0,i.customerBpContactsInfo),t.getCustomerShipToAddressList(!0,i.customerShipToBpAddressInfo),t.getCustomerBillToAddressList(!0,i.customerBillToBpAddressInfo);var n=[],a=[],o=[],s=[],c=[];i.itemListArray.forEach((function(e,i){t.addItemFields(e,"edit"),e.rentalItemInfo[0]&&n.push(e.rentalItemInfo[0]),e.uomInfo[0]&&a.push(e.uomInfo[0]),e.hsnInfo[0]&&o.push(e.hsnInfo[0]),e.taxInfo[0]&&s.push(e.taxInfo[0]),e.distributionRulesInfo.forEach((function(t){c.push(t)}))})),t.getAutoSuggestionList("getUomList",a),t.getAutoSuggestionList("getHsnList",o),t.getAutoSuggestionList("getTaxList",s),t.getItemList("",!0,n),t.getDistributionList(c),t.branchUtilsService.txnCalcItemsTotal(t.myForm),t.txnKeys.editStatusId=i.status,t.txnKeys.editCreatedName=i.createdByInfo[0].employeeName}else t.utilsService.showFailureMsg(e),t.utilsService.goBack()}))}},{key:"getDuplicate",value:function(){var t=this;this.screenDataService.get(this.txnKeys.inputDuplicateId).subscribe((function(e){if("SUCCESS"===e.status){var i=e.results;delete i.documentNumberingId,delete i.documentNumber,delete i.documentNumberingInfo,delete i.status;var r=t.rentalTxnUtilsService.getMainFieldsWithData(t.txnKeys.inputScreenName,i);t.myForm.patchValue(r),t.branchUtilsService.getMasterDocumentNumbering(t.myForm,t.screenAttributes.documentTypeId).subscribe((function(e){t.documentNumberingList=e})),t.getCustomerBpList(!0,i.customerBpInfo),t.getEmployeeList(i.empInfo),t.getAutoSuggestionList("getCurrencyList",i.currencyInfo),t.getCustomerBpContactList(!0,i.customerBpContactsInfo),t.getCustomerShipToAddressList(!0,i.customerShipToBpAddressInfo),t.getCustomerBillToAddressList(!0,i.customerBillToBpAddressInfo);var n=[],a=[],o=[],s=[],c=[];i.itemListArray.forEach((function(e,r){delete e.id,delete e.openQuantity,delete e.orderedQuantity,delete e.copyFromType,delete e.copyFromId,t.addItemFields(e),e.rentalItemInfo[0]&&n.push(e.rentalItemInfo[0]),e.uomInfo&&e.uomInfo[0]&&a.push(e.uomInfo[0]),e.hsnInfo&&e.hsnInfo[0]&&o.push(e.hsnInfo[0]),e.taxInfo&&e.taxInfo[0]&&s.push(e.taxInfo[0]),e.distributionRulesInfo&&e.distributionRulesInfo.forEach((function(t){c.push(t)})),"rentalInvoice"===t.txnKeys.inputScreenName&&t.getRentalWorkLogList(i.customerBpId,e.rentalItemId,e.rentalEquipmentId,r)})),t.getAutoSuggestionList("getUomList",a),t.getAutoSuggestionList("getHsnList",o),t.getAutoSuggestionList("getTaxList",s),t.getItemList("",!0,n),t.getDistributionList(c),t.branchUtilsService.txnCalcItemsTotal(t.myForm)}else t.utilsService.showFailureMsg(e),t.utilsService.goBack()}))}},{key:"clearForm",value:function(){this.initializeForm()}},{key:"onDateChange",value:function(t){var e=this.myForm.controls.itemListArray.at(t);this.rentalTxnUtilsService.setItemFieldsCustomValidations(e,this.txnKeys.inputScreenName)}},{key:"onCustomerChange",value:function(){this.getCustomerBpContactList(),this.branchUtilsService.txnSetCurrency(this.businessPartnerList,this.myForm,"customerBpId","currencyId"),this.branchUtilsService.txnSetTermsAndMethods(this.businessPartnerList,this.myForm,"customerBpId"),this.branchUtilsService.txnPaymentTermsChange(this.txnKeys.inputScreenName,this.paymentTermsList,this.myForm,"paymentTermsId"),this.getCustomerShipToAddressList(),this.getCustomerBillToAddressList(),this.showTxnOptionsSidebar(!1)}},{key:"onCustomerNameChange",value:function(){var t=this;if(this.myFormData.customerBpId){var e=this.myForm.controls.itemListArray;e.length>0&&this.utilsService.confirmDialog("Confirmation","If changing the customer leads to remove the items. Do you want to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe((function(i){i&&(t.myForm.patchValue({customerBpId:null}),e.clear())}))}}},{key:"onItemChange",value:function(t){var e=this,i=this.myForm.controls.itemListArray.at(t);i.patchValue({equipmentList:[],rentalEquipmentId:null,unitPrice:"0.00",rentalWorklogId:null,rentalWorklogList:[]}),this.branchUtilsService.txnSetUom(this.itemList,this.myForm,t,"rentalItemId"),this.branchUtilsService.txnSetHsn(this.itemList,this.myForm,t,"rentalItemId");var r=b.findIndex(this.itemList,(function(i){return e.myFormData.itemListArray[t].rentalItemId===i.id}));r>=0&&i.patchValue({equipmentList:this.itemList[r].rentalEquipmentList})}},{key:"onDistRuleAdd",value:function(t){this.branchUtilsService.distRulesCheckUnique(this.distributionList,this.myForm.controls.itemListArray.controls[t],"distributionRulesId")}},{key:"onItemSearch",value:function(t){this.branchUtilsService.itemSearch.next(t)}},{key:"onEquipmentChange",value:function(t){var e=this,i=this.myForm.controls.itemListArray.at(t);if(i.patchValue({unitPrice:"0.00",rentalWorklogId:null,rentalWorklogList:[]}),this.myFormData.itemListArray[t].rentalItemId&&this.myFormData.itemListArray[t].rentalEquipmentId){var r=b.findIndex(this.myFormData.itemListArray[t].equipmentList,(function(i){return e.myFormData.itemListArray[t].rentalEquipmentId===i.id}));i.patchValue({unitPrice:this.myFormData.itemListArray[t].equipmentList[r].unitPrice}),"rentalInvoice"===this.txnKeys.inputScreenName&&this.getRentalWorkLogList(this.myFormData.customerBpId,this.myFormData.itemListArray[t].rentalItemId,this.myFormData.itemListArray[t].rentalEquipmentId,t),this.branchUtilsService.txnCalcItemsTotal(this.myForm)}}},{key:"onWorkLogRefChange",value:function(t){var e=this.myForm.controls.itemListArray.at(t);if(this.myFormData.itemListArray[t].rentalWorklogId){var i=b.findIndex(this.myFormData.itemListArray[t].rentalWorklogList,{id:this.myFormData.itemListArray[t].rentalWorklogId});if(i>=0){var r=f.duration(this.myFormData.itemListArray[t].rentalWorklogList[i].totalBillableHours).asHours().toFixed(2);e.patchValue({quantity:r,startDate:this.utilsService.getFrontendDateFormat(this.myFormData.itemListArray[t].rentalWorklogList[i].startDate),endDate:this.utilsService.getFrontendDateFormat(this.myFormData.itemListArray[t].rentalWorklogList[i].endDate)}),e.controls.quantity.disable()}}else e.patchValue({quantity:"",startDate:"",endDate:""}),e.controls.quantity.enable();this.branchUtilsService.txnCalcItemsTotal(this.myForm)}},{key:"getRentalWorkLogList",value:function(t,e,i,r){var n=this;this.commonDataService.getRentalWorkLogList(t,e,i).subscribe((function(t){"SUCCESS"===t.status?n.myForm.controls.itemListArray.at(r).patchValue({rentalWorklogId:null,rentalWorklogList:t.results}):n.utilsService.showFailureMsg(t)}))}},{key:"getAutoSuggestionList",value:function(t,e){var i=this;this.commonDataService.getAutoSuggestionList(t).subscribe((function(r){"SUCCESS"===r.status?(i.utilsService.ifNotPushToList(r.results,e),"getRentalTransStatusList"===t?(i.txnKeys.inputEditId||(r.results=r.results.filter((function(t){return"1"===t.id}))),i.txnKeys.inputEditId&&("rentalOrder"!==i.txnKeys.inputScreenName&&"rentalDelivery"!==i.txnKeys.inputScreenName&&"rentalReturn"!==i.txnKeys.inputScreenName&&"rentalInvoice"!==i.txnKeys.inputScreenName||(r.results=r.results.filter((function(t){return"2"!==t.id})))),i.rentalStatusList=r.results):"getCurrencyList"===t?i.currencyList=r.results:"getUomList"===t?i.uomList=r.results:"getHsnList"===t?i.hsnList=r.results.map((function(t){return t.hsnLabel=t.chapter+"."+t.heading+"."+t.subHeading,t})):"getTaxList"===t?i.taxList=r.results:"getPaymentTermsList"===t?i.paymentTermsList=r.results:"getPaymentMethodsList"===t?i.paymentMethodsList=r.results:"getTermsandConditionsList"===t&&(i.termsAndConditionList=r.results)):i.utilsService.showFailureMsg(r)}))}},{key:"getDistributionList",value:function(t){var e=this;this.commonDataService.getDistributionList(!0).subscribe((function(i){"SUCCESS"===i.status?(e.utilsService.ifNotPushToList(i.results,t),e.distributionList=i.results):e.utilsService.showFailureMsg(i)}))}},{key:"getItemList",value:function(t,e,i,r){var n=this;return e?(this.itemList=i.map((function(t){return t.searchText=t.rentalItemName+" - "+t.rentalItemCode,t})),!1):!t.term||t.term.length<3?(this.itemList=[],!1):void this.commonDataService.getRentalItemList(t.term).subscribe((function(t){"SUCCESS"===t.status?n.itemList=t.results.map((function(t){return t.searchText=t.rentalItemName+" - "+t.rentalItemCode,t})):n.utilsService.showFailureMsg(t)}))}},{key:"getEmployeeList",value:function(t){var e=this;this.commonDataService.getEmployeeList(1).subscribe((function(i){"SUCCESS"===i.status?(e.utilsService.ifNotPushToList(i.results,t),e.employeeList=i.results.map((function(t){return t.searchText=t.employeeName+" - "+t.empCode,t}))):e.utilsService.showFailureMsg(i)}))}},{key:"getCustomerBpList",value:function(t,e){var i=this;this.commonDataService.getBusinessPartnerList([1,3]).subscribe((function(t){"SUCCESS"===t.status?(i.utilsService.ifNotPushToList(t.results,e),i.businessPartnerList=t.results.map((function(t){return t.searchText=t.partnerName+" - "+t.partnerCode,t}))):i.utilsService.showFailureMsg(t)}))}},{key:"getCustomerBpContactList",value:function(t,e){var i=this;this.bpContactList=[],this.branchUtilsService.getBpContactListAndSet(this.myForm,"customerBpContactsId","customerBpId",t,e).subscribe((function(t){i.bpContactList=t}))}},{key:"getCustomerShipToAddressList",value:function(t,e){var i=this;this.customerShipToAddressList=[],this.branchUtilsService.txnGetBpAddressListAndSet("1",this.myForm,"customerShipToBpAddressId","customerShipToAddress","customerBpId",t,e).subscribe((function(t){i.customerShipToAddressList=t}))}},{key:"getCustomerBillToAddressList",value:function(t,e){var i=this;this.customerBillToAddressList=[],this.branchUtilsService.txnGetBpAddressListAndSet("3",this.myForm,"customerBillToBpAddressId","customerBillToAddress","customerBpId",t,e).subscribe((function(t){i.customerBillToAddressList=t}))}},{key:"showTxnOptionsSidebar",value:function(t){this.branchUtilsService.spiTxnOptions.next(!1===t?{show:!1}:{show:!0,spiName:this.branchUtilsService.spiTxnId.rental,screenName:this.txnKeys.inputScreenName,editId:this.txnKeys.inputEditId,bpId:this.myFormData.customerBpId,status:this.myFormData.status})}},{key:"downloadPdf",value:function(){this.branchUtilsService.spiTxnOptionsDownloadPdf.next({spiName:this.branchUtilsService.spiTxnId.rental,screenName:this.txnKeys.inputScreenName,id:this.txnKeys.inputEditId})}},{key:"onKeydownHandler",value:function(t){t.ctrlKey&&"s"===t.key.toLowerCase()&&(this.txnKeys.inputEditId&&"1"===this.txnKeys.editStatusId||!this.txnKeys.inputEditId)&&(this.confirmSaveUpdate(),t.preventDefault()),this.txnKeys.inputEditId&&t.ctrlKey&&-1!=="p".indexOf(t.key)&&(this.downloadPdf(),t.preventDefault())}},{key:"ngOnDestroy",value:function(){this.reInitializeGlobalVariables(),this.itemListColumnOrderChangesSubscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||ir)(c.Pb(s.g),c.Pb(s.f),c.Pb(s.a),c.Pb(u.l),c.Pb(d.a),c.Pb(l.e),c.Pb(o.a),c.Pb(h),c.Pb(_.a),c.Pb(c.h),c.Pb(W.b))},ir.\u0275cmp=c.Jb({type:ir,selectors:[["app-rental-txn-add"]],viewQuery:function(t,e){var i;1&t&&(c.Pc(J.a,!0),c.Pc(Q.a,!0),c.Pc(z,!0),c.Pc(j,!0),c.Pc(Y,!0),c.Pc($,!0),c.Pc(Z,!0),c.Pc(X,!0),c.Pc(tt,!0),c.Pc(et,!0),c.Pc(it,!0),c.Pc(rt,!0),c.Pc(nt,!0),c.Pc(at,!0),c.Pc(ot,!0),c.Pc(st,!0),c.Pc(ct,!0),c.Pc(ut,!0),c.Pc(lt,!0),c.Pc(mt,!0),c.Pc(bt,!0),c.Pc(dt,!0),c.Pc(ht,!0),c.Pc(pt,!0),c.Pc(ft,!0),c.Pc(gt,!0),c.Pc(vt,!0),c.Pc(yt,!0),c.Pc(St,!0),c.Pc(Ct,!0),c.Pc(It,!0),c.Pc(Ut,!0),c.Pc(Lt,!0),c.Pc(Vt,!0),c.Pc(Dt,!0),c.Pc(Nt,!0),c.Pc(Ft,!0),c.Pc(Et,!0),c.Pc(Tt,!0),c.Pc(xt,!0),c.Pc(At,!0),c.Pc(kt,!0),c.Pc(Rt,!0),c.Pc(Mt,!0),c.Pc(wt,!0),c.Pc(Ot,!0)),2&t&&(c.zc(i=c.ec())&&(e.udfViewerComponent=i.first),c.zc(i=c.ec())&&(e.attachmentsComponent=i.first),c.zc(i=c.ec())&&(e.hActions=i.first),c.zc(i=c.ec())&&(e.hSno=i.first),c.zc(i=c.ec())&&(e.hItemName=i.first),c.zc(i=c.ec())&&(e.hGeneralDetails=i.first),c.zc(i=c.ec())&&(e.hWorkLogRef=i.first),c.zc(i=c.ec())&&(e.hQuantity=i.first),c.zc(i=c.ec())&&(e.hOpenQuantity=i.first),c.zc(i=c.ec())&&(e.hDuration=i.first),c.zc(i=c.ec())&&(e.hUOM=i.first),c.zc(i=c.ec())&&(e.hStartDate=i.first),c.zc(i=c.ec())&&(e.hEndDate=i.first),c.zc(i=c.ec())&&(e.hShipDate=i.first),c.zc(i=c.ec())&&(e.hReturnDate=i.first),c.zc(i=c.ec())&&(e.hPoExpiryDate=i.first),c.zc(i=c.ec())&&(e.hUnitPrice=i.first),c.zc(i=c.ec())&&(e.hHSN=i.first),c.zc(i=c.ec())&&(e.hDiscount=i.first),c.zc(i=c.ec())&&(e.hTaxCode=i.first),c.zc(i=c.ec())&&(e.hTax=i.first),c.zc(i=c.ec())&&(e.hTotal=i.first),c.zc(i=c.ec())&&(e.hDistRules=i.first),c.zc(i=c.ec())&&(e.hEquipmentName=i.first),c.zc(i=c.ec())&&(e.bActions=i.first),c.zc(i=c.ec())&&(e.bSno=i.first),c.zc(i=c.ec())&&(e.bItemName=i.first),c.zc(i=c.ec())&&(e.bGeneralDetails=i.first),c.zc(i=c.ec())&&(e.bWorkLogRef=i.first),c.zc(i=c.ec())&&(e.bQuantity=i.first),c.zc(i=c.ec())&&(e.bOpenQuantity=i.first),c.zc(i=c.ec())&&(e.bDuration=i.first),c.zc(i=c.ec())&&(e.bUOM=i.first),c.zc(i=c.ec())&&(e.bStartDate=i.first),c.zc(i=c.ec())&&(e.bEndDate=i.first),c.zc(i=c.ec())&&(e.bShipDate=i.first),c.zc(i=c.ec())&&(e.bReturnDate=i.first),c.zc(i=c.ec())&&(e.bPoExpiryDate=i.first),c.zc(i=c.ec())&&(e.bUnitPrice=i.first),c.zc(i=c.ec())&&(e.bHSN=i.first),c.zc(i=c.ec())&&(e.bDiscount=i.first),c.zc(i=c.ec())&&(e.bTaxCode=i.first),c.zc(i=c.ec())&&(e.bTax=i.first),c.zc(i=c.ec())&&(e.bTotal=i.first),c.zc(i=c.ec())&&(e.bDistRules=i.first),c.zc(i=c.ec())&&(e.bEquipmentName=i.first))},hostBindings:function(t,e){1&t&&c.dc("keydown",(function(t){return e.onKeydownHandler(t)}),!1,c.Bc)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-columns"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"fa","fa-plus-square"],[1,"working-container","spi-txn-add",3,"formGroup"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row"],[1,"form-group","col-sm-3"],[1,"form-label"],[1,"mandatory"],[1,"col-sm-6"],["formControlName","documentNumberingId","bindLabel","documentNumberingName","bindValue","id","placeholder","--SELECT--",3,"items","change"],["type","text","formControlName","documentNumber",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],[1,"action-control"],["formControlName","customerBpId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple","focus","change"],["ng-option-tmp",""],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["class","info-icon","container","body","tooltip","View Details",3,"click",4,"ngIf"],["formControlName","customerBpContactsId","bindLabel","contactName","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["formControlName","currencyId",1,"form-control","form-control-sm"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","referenceNumber",1,"form-control","form-control-sm"],["formControlName","postingDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["class","form-group col-sm-3",4,"ngIf"],["formControlName","documentDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],[1,"position-relative"],["formControlName","empId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["formControlName","status",1,"form-control","form-control-sm"],[1,"form-group","col-sm-6"],["formControlName","remarks","rows","2",1,"form-control","form-control-sm"],[1,"box-body","box-table"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-striped","table-bordered"],[4,"ngFor","ngForOf"],["formArrayName","itemListArray"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-sm-7","text-center"],[1,"calc-img"],[1,"col-sm-5"],[1,"table","table-striped","table-bordered","calculation"],[2,"min-width","150px"],[2,"width","100px"],[1,"text-right",2,"min-width","150px"],[1,"text-right"],["type","text","formControlName","discountPercentage",1,"form-control","form-control-sm","text-right",3,"keyup"],[1,"checkbox"],["type","checkbox","formControlName","roundingOffCheckbox",3,"ngModelChange"],[1,"checkmark"],["type","text","formControlName","rounding",1,"form-control","form-control-sm","text-right",3,"keyup"],[1,"net"],[1,"net","text-right"],["formControlName","customerShipToBpAddressId",1,"form-control","form-control-sm",3,"change"],["formControlName","customerShipToAddress",1,"form-control","form-control-sm"],["formControlName","customerBillToBpAddressId",1,"form-control","form-control-sm",3,"change"],["formControlName","customerBillToAddress",1,"form-control","form-control-sm"],["class","box",4,"ngIf"],[3,"type"],[3,"type","doSuccess"],["formControlName","termsAndConditionId",1,"form-control","form-control-sm"],[1,"btn-group","text-right"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class"," btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],["hActions",""],["hSno",""],["hItemName",""],["hGeneralDetails",""],["hQuantity",""],["hOpenQuantity",""],["hWorkLogRef",""],["hDuration",""],["hStartDate",""],["hEndDate",""],["hShipDate",""],["hReturnDate",""],["hPoExpiryDate",""],["hUOM",""],["hEquipmentName",""],["hUnitPrice",""],["hHSN",""],["hDiscount",""],["hTaxCode",""],["hTax",""],["hTotal",""],["hDistRules",""],["bActions",""],["bSno",""],["bItemName",""],["bQuantity",""],["bOpenQuantity",""],["bWorkLogRef",""],["bGeneralDetails",""],["bDuration",""],["bUOM",""],["bStartDate",""],["bEndDate",""],["bShipDate",""],["bReturnDate",""],["bPoExpiryDate",""],["bEquipmentName",""],["bUnitPrice",""],["bHSN",""],["bDiscount",""],["bTaxCode",""],["bTax",""],["bTotal",""],["bDistRules",""],[1,"fa","fa-print"],[1,"validation-error"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click"],[1,"fa","fa-plus"],[3,"click"],[1,"fa","fa-redo-alt"],["container","body","tooltip","View Details",1,"info-icon",3,"click"],[1,"fa","fa-info-circle"],[3,"value"],["formControlName","deliveryDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","dueDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","returnDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"formGroupName"],["colspan","16"],[1,"btn","btn-success","btn-sm",3,"click"],["formControlName","paymentTermsId",1,"form-control","form-control-sm",3,"change"],["formControlName","paymentMethodId",1,"form-control","form-control-sm"],["type","text","formControlName","taxCode",1,"form-control","form-control-sm"],[1,"fa","fa-save"],[1,"fa","fa-broom"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"badge","badge-danger"],[2,"min-width","80px"],[2,"min-width","30px"],[2,"min-width","200px"],[2,"min-width","100px"],["class","mandatory",4,"ngIf"],[2,"min-width","110px"],[2,"min-width","160px"],[2,"min-width","120px"],[2,"min-width","130px"],[3,"formGroup"],["placement","top","container","body","tooltip","Delete",1,"action","red",3,"click"],[1,"fa","fa-minus-circle"],["formControlName","rentalItemId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","virtualScroll","search","change"],["type","text","formControlName","quantity",1,"form-control","form-control-sm","text-right",3,"keyup"],["formControlName","rentalWorklogId","bindLabel","documentNumber","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","virtualScroll","change"],["type","text","formControlName","duration",1,"form-control","form-control-sm","text-right"],["formControlName","uomId","bindLabel","uomName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["formControlName","startDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onSelect"],["formControlName","endDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onSelect"],["formControlName","shipDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onSelect"],["formControlName","returnDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onSelect"],["formControlName","poExpiryDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onSelect"],["formControlName","rentalEquipmentId","bindLabel","equipmentName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","change"],["type","text","formControlName","unitPrice",1,"form-control","form-control-sm","text-right",3,"keyup"],["formControlName","hsnId","bindLabel","hsnLabel","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["formControlName","taxId","bindLabel","taxCode","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","change"],[1,"text-right",3,"formGroupName"],["formControlName","distributionRulesId","bindLabel","distributionName","bindValue","id","placeholder","--SELECT--","appendTo","body","groupBy","dimensionDescription",3,"items","multiple","add"]],template:function(t,e){1&t&&c.Jc(0,er,308,68,"ng-container",0),2&t&&c.oc("ngIf",e.screenAcl.view)},directives:[v.m,l.n,l.i,H.a,l.m,l.g,l.b,H.c,l.t,l.p,l.v,v.l,y.a,v.n,l.d,l.a,J.a,Q.a,G.a,o.g,I.a,v.q,l.j],styles:[""]}),ir),nr=["dataTable"];function ar(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",24),c.dc("click",(function(){c.Dc(i);var t=c.hc(2);return t.inspectionTxnUtilsService.downloadAsExcel(t.inputScreenName,t.listingProperties)})),c.Qb(1,"i",25),c.Vb(2,"span"),c.Lc(3,"Download as Excel"),c.Ub(),c.Ub()}}function or(t,e){if(1&t&&(c.Vb(0,"div",26),c.Vb(1,"div",27),c.Vb(2,"div",28),c.Lc(3),c.Ub(),c.Vb(4,"div",29),c.Lc(5),c.Ub(),c.Ub(),c.Ub()),2&t){var i=e.$implicit,r=c.hc(2);c.Cb(3),c.Nc(" ",i.name," "),c.Cb(1),c.oc("ngClass",r.appConstants.TXN_STATUS_COLOR_CLS[i.id]),c.Cb(1),c.Mc(i.count)}}function sr(t,e){1&t&&(c.Vb(0,"th",35),c.Lc(1," Branch Name "),c.Qb(2,"p-sortIcon",33),c.Ub()),2&t&&(c.oc("pSortableColumn","branchName"),c.Cb(2),c.oc("field","branchName"))}function cr(t,e){if(1&t){var i=c.Wb();c.Vb(0,"th"),c.Vb(1,"input",40),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(3).searchForm.branchName=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(3).resetListing()})),c.Ub(),c.Ub()}if(2&t){var r=c.hc(3);c.Cb(1),c.oc("ngModel",r.searchForm.branchName)}}function ur(t,e){if(1&t&&(c.Vb(0,"option",44),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Nc(" ",i.name," ")}}function lr(t,e){if(1&t){var i=c.Wb();c.Vb(0,"tr"),c.Vb(1,"th",30),c.Lc(2,"Actions"),c.Ub(),c.Jc(3,sr,3,2,"th",31),c.Vb(4,"th",32),c.Lc(5,"Doc No "),c.Qb(6,"p-sortIcon",33),c.Ub(),c.Vb(7,"th",34),c.Lc(8,"Customer Name "),c.Qb(9,"p-sortIcon",33),c.Ub(),c.Vb(10,"th",35),c.Lc(11,"Item Name "),c.Qb(12,"p-sortIcon",33),c.Ub(),c.Vb(13,"th",35),c.Lc(14,"Equipment Name "),c.Qb(15,"p-sortIcon",33),c.Ub(),c.Vb(16,"th",36),c.Lc(17,"Status "),c.Qb(18,"p-sortIcon",33),c.Ub(),c.Ub(),c.Vb(19,"tr",37),c.Vb(20,"th"),c.Vb(21,"a",38),c.dc("click",(function(){return c.Dc(i),c.hc(2).clearSearchForm()})),c.Qb(22,"i",39),c.Lc(23,"Clear"),c.Ub(),c.Ub(),c.Jc(24,cr,2,1,"th",0),c.Vb(25,"th"),c.Vb(26,"input",40),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.documentNumber=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Vb(27,"th"),c.Vb(28,"input",40),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.customerBpName=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Vb(29,"th"),c.Vb(30,"input",40),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.itemName=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Vb(31,"th"),c.Vb(32,"input",40),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.equipmentName=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Vb(33,"th"),c.Vb(34,"select",41),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.status=t}))("change",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Vb(35,"option",42),c.Lc(36,"--SELECT--"),c.Ub(),c.Jc(37,ur,2,2,"option",43),c.Ub(),c.Ub(),c.Ub()}if(2&t){var r=c.hc(2);c.Cb(3),c.oc("ngIf",!r.storageService.get("isSingleBranchUser")),c.Cb(1),c.oc("pSortableColumn","documentNumber"),c.Cb(2),c.oc("field","documentNumber"),c.Cb(1),c.oc("pSortableColumn","customerBpName"),c.Cb(2),c.oc("field","customerBpName"),c.Cb(1),c.oc("pSortableColumn","itemName"),c.Cb(2),c.oc("field","itemName"),c.Cb(1),c.oc("pSortableColumn","equipmentName"),c.Cb(2),c.oc("field","equipmentName"),c.Cb(1),c.oc("pSortableColumn","status"),c.Cb(2),c.oc("field","status"),c.Cb(6),c.oc("ngIf",!r.storageService.get("isSingleBranchUser")),c.Cb(2),c.oc("ngModel",r.searchForm.documentNumber),c.Cb(2),c.oc("ngModel",r.searchForm.customerBpName),c.Cb(2),c.oc("ngModel",r.searchForm.itemName),c.Cb(2),c.oc("ngModel",r.searchForm.equipmentName),c.Cb(2),c.oc("ngModel",r.searchForm.status),c.Cb(3),c.oc("ngForOf",r.statusList)}}function mr(t,e){if(1&t&&(c.Vb(0,"td"),c.Lc(1),c.Ub()),2&t){var i=c.hc().$implicit;c.Cb(1),c.Mc(i.branchName)}}function br(t,e){if(1&t){var i=c.Wb();c.Vb(0,"tr"),c.Vb(1,"td"),c.Vb(2,"a",45),c.dc("click",(function(){c.Dc(i);var t=e.$implicit,r=c.hc(2);return r.inspectionTxnUtilsService.redirectToEdit(r.inputScreenName,t.id,t.isDraft)})),c.Qb(3,"i",46),c.Ub(),c.Ub(),c.Jc(4,mr,2,1,"td",0),c.Vb(5,"td"),c.Lc(6),c.Ub(),c.Vb(7,"td"),c.Lc(8),c.Ub(),c.Vb(9,"td"),c.Lc(10),c.Ub(),c.Vb(11,"td"),c.Lc(12),c.Ub(),c.Vb(13,"td"),c.Vb(14,"span",47),c.Lc(15),c.Ub(),c.Ub(),c.Ub()}if(2&t){var r=e.$implicit,n=c.hc(2);c.Cb(4),c.oc("ngIf",!n.storageService.get("isSingleBranchUser")),c.Cb(2),c.Mc(r.documentNumber),c.Cb(2),c.Oc("",r.customerBpCode," - ",r.customerBpName,""),c.Cb(2),c.Oc(" ",r.rentalItemCode," - ",r.rentalItemName," "),c.Cb(2),c.Oc(" ",r.equipmentCode," - ",r.equipmentName," "),c.Cb(2),c.oc("ngClass",n.appConstants.TXN_STATUS_COLOR_CLS[r.status]),c.Cb(1),c.Mc(r.statusName)}}function dr(t,e){if(1&t){var i=c.Wb();c.Tb(0),c.Vb(1,"div",1),c.Vb(2,"span"),c.Lc(3),c.Ub(),c.Lc(4),c.Vb(5,"div",2),c.Jc(6,ar,4,0,"button",3),c.Vb(7,"button",4),c.dc("click",(function(){c.Dc(i);var t=c.hc();return t.inspectionTxnUtilsService.redirectToAdd(t.inputScreenName)})),c.Qb(8,"i",5),c.Vb(9,"span"),c.Lc(10),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(11,"div",6),c.Vb(12,"div",7),c.Vb(13,"div",8),c.Jc(14,or,6,3,"div",9),c.Ub(),c.Ub(),c.Vb(15,"div",8),c.Vb(16,"div",10),c.Vb(17,"label",11),c.Vb(18,"strong"),c.Lc(19,"From Date"),c.Ub(),c.Ub(),c.Vb(20,"p-calendar",12),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().searchForm.fromDate=t}))("onSelect",(function(){return c.Dc(i),c.hc().resetListing()})),c.Ub(),c.Ub(),c.Vb(21,"div",10),c.Vb(22,"label",11),c.Vb(23,"strong"),c.Lc(24,"To Date"),c.Ub(),c.Ub(),c.Vb(25,"p-calendar",13),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().searchForm.toDate=t}))("onSelect",(function(){return c.Dc(i),c.hc().resetListing()})),c.Ub(),c.Ub(),c.Vb(26,"div",14),c.Vb(27,"label",15),c.Vb(28,"input",16),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().searchForm.isDraft=t}))("change",(function(){return c.Dc(i),c.hc().resetListing()})),c.Ub(),c.Qb(29,"span",17),c.Lc(30," Show Only Drafts "),c.Ub(),c.Ub(),c.Ub(),c.Vb(31,"div",8),c.Vb(32,"div",18),c.Vb(33,"div",19),c.Vb(34,"p-table",20,21),c.dc("onLazyLoad",(function(t){return c.Dc(i),c.hc().getListing(t)})),c.Jc(36,lr,38,18,"ng-template",22),c.Jc(37,br,16,10,"ng-template",23),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Sb()}if(2&t){var r=c.hc();c.Cb(3),c.Mc(r.branchUtilsService.txnGetTitle(r.screenAttributes.title,!0)),c.Cb(1),c.Nc("",r.branchUtilsService.txnGetTitle(r.screenAttributes.title)," - List "),c.Cb(2),c.oc("ngIf",r.screenAcl.download),c.Cb(4),c.Nc("Add ",r.screenAttributes.title,""),c.Cb(4),c.oc("ngForOf",r.analyticsData),c.Cb(6),c.oc("ngModel",r.searchForm.fromDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),c.Cb(5),c.oc("ngModel",r.searchForm.toDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT)("minDate",r.searchForm.fromDate),c.Cb(3),c.oc("ngModel",r.searchForm.isDraft),c.Cb(6),c.oc("value",r.listing.data)("lazy",!0)("paginator",!0)("rows",r.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",r.listing.totalRecords)}}var hr,pr=((hr=function(){function t(e,i,r,n,a,o,c){_classCallCheck(this,t),this.utilsService=e,this.storageService=i,this.authGuardService=r,this.commonDataService=n,this.activatedRoute=a,this.inspectionTxnUtilsService=o,this.branchUtilsService=c,this.appConstants=s.h,this.screenAcl={},this.analyticsData=[],this.statusList=[],this.screenAttributes={},this.screenDataService={},this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}return _createClass(t,[{key:"ngOnInit",value:function(){this.initializeSubscriptions()}},{key:"initializeSubscriptions",value:function(){var t=this;this.activatedRoute.params.subscribe((function(e){return t.inspectionTxnUtilsService.checkScreenNameValid(e.screenName)?(t.screenAcl=t.authGuardService.getScreenAcl(t.branchUtilsService.screenAttributes[e.screenName].documentTypeId),t.screenAcl.view?(t.reInitializeGlobalVariables(),t.inputScreenName=e.screenName,void t.transactionInitialization()):(t.utilsService.showFailureMsg(s.h.ACL_UNAUTHORIZED_MSG),t.utilsService.goBack(),!1)):(t.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),t.utilsService.goBack(),!1)}))}},{key:"reInitializeGlobalVariables",value:function(){this.inputScreenName="",this.screenAttributes={},this.screenDataService={},this.analyticsData=[],this.statusList=[],this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}},{key:"transactionInitialization",value:function(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.inputScreenName],this.screenDataService=this.inspectionTxnUtilsService.getScreenDataService(this.inputScreenName),this.searchForm=this.inspectionTxnUtilsService.getFormSearchFields(this.inputScreenName),this.getAutoSuggestionList("getRentalTransStatusList"),this.getAnalyticsData(),this.dataTable&&this.resetListing()}},{key:"getListing",value:function(t){var e=this,i=this.inspectionTxnUtilsService.getSearchDataFormation(this.inputScreenName,this.searchForm),r=this.utilsService.dataTableParameterFormation(t,i);this.listingProperties=r,this.screenDataService.getList(r).subscribe((function(t){"SUCCESS"===t.status?(e.listing.data=t.results.searchResults,e.listing.totalRecords=t.results.totalRecords):e.utilsService.showFailureMsg(t)}))}},{key:"clearSearchForm",value:function(){this.searchForm=this.inspectionTxnUtilsService.getFormSearchFields(this.inputScreenName),this.resetListing()}},{key:"resetListing",value:function(){this.dataTable.reset()}},{key:"getAutoSuggestionList",value:function(t){var e=this;this.commonDataService.getAutoSuggestionList(t).subscribe((function(t){"SUCCESS"===t.status?e.statusList=t.results:e.utilsService.showFailureMsg(t)}))}},{key:"getAnalyticsData",value:function(){var t=this;this.inspectionTxnUtilsService.getAnalyticsData(this.inputScreenName).subscribe((function(e){t.analyticsData=e}))}}]),t}()).\u0275fac=function(t){return new(t||hr)(c.Pb(s.g),c.Pb(s.f),c.Pb(s.a),c.Pb(u.l),c.Pb(o.a),c.Pb(p),c.Pb(d.a))},hr.\u0275cmp=c.Jb({type:hr,selectors:[["app-inspection-txn-list"]],viewQuery:function(t,e){var i;1&t&&c.Pc(nr,!0),2&t&&c.zc(i=c.ec())&&(e.dataTable=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-plus"],[1,"working-container"],[1,"analytics"],[1,"row"],["class","col-lg-2 col-md-3 col-sm-4 col-xs-12",4,"ngFor","ngForOf"],[1,"form-group","col-sm-3"],[1,"form-label"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","ngModelChange","onSelect"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","minDate","ngModelChange","onSelect"],[1,"form-group","col-sm-6","text-right"],[1,"checkbox","mt-3"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"checkmark"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-file-excel"],[1,"col-lg-2","col-md-3","col-sm-4","col-xs-12"],[1,"item"],[1,"name"],[1,"count",3,"ngClass"],[2,"width","80px"],["style","width:150px",3,"pSortableColumn",4,"ngIf"],[2,"width","100px",3,"pSortableColumn"],[3,"field"],[2,"width","200px",3,"pSortableColumn"],[2,"width","150px",3,"pSortableColumn"],[2,"width","120px",3,"pSortableColumn"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"click"],[1,"fa","fa-edit"],[1,"badge",3,"ngClass"]],template:function(t,e){1&t&&c.Jc(0,dr,38,22,"ng-container",0),2&t&&c.oc("ngIf",e.screenAcl.view)},directives:[v.m,v.l,y.a,l.m,l.o,l.a,S.c,C.b,v.k,S.b,S.a,I.a,l.b,l.t,l.p,l.v],styles:[""]}),hr);function fr(t,e){if(1&t){var i=c.Wb();c.Vb(0,"div",16),c.Vb(1,"label",7),c.Lc(2,"Are you want to create new?"),c.Ub(),c.Vb(3,"label",17),c.Vb(4,"input",18),c.dc("change",(function(){return c.Dc(i),c.hc().onCreateTempalte()})),c.Ub(),c.Qb(5,"span",19),c.Ub(),c.Ub()}}function gr(t,e){if(1&t&&(c.Vb(0,"div",20),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.templateName," ")}}function vr(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",21),c.dc("click",(function(){return c.Dc(i),c.hc().saveUpdate()})),c.Qb(1,"i",22),c.Vb(2,"span"),c.Lc(3,"Save"),c.Ub(),c.Ub()}}function yr(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",21),c.dc("click",(function(){return c.Dc(i),c.hc().saveUpdate()})),c.Qb(1,"i",22),c.Vb(2,"span"),c.Lc(3,"Update"),c.Ub(),c.Ub()}}var Sr,Cr=((Sr=function(){function t(e,i,r,n,a,o){_classCallCheck(this,t),this.utilsService=e,this.commonDataService=i,this.branchUtilsService=r,this.activeModal=n,this.formBuilder=a,this.inspectionTemplateDataService=o,this.myFormData={},this.myFormErrors={templateName:""},this.myFormValidationMsgs={templateName:{required:"Template Name is required"}}}return _createClass(t,[{key:"ngOnInit",value:function(){this.initializeForm(),this.templateDetails.inputEditId&&(this.myForm.patchValue({templateName:this.templateDetails.templateName,isSave:!1}),this.myForm.controls.templateName.disable())}},{key:"initializeForm",value:function(){var t=this;this.myForm=this.formBuilder.group({templateName:[{value:"",disabled:!1},[l.u.required]],isSave:[!0]}),this.myForm.valueChanges.subscribe((function(e){t.utilsService.validation(t.myForm,t.myFormErrors,t.myFormValidationMsgs),t.myFormData=t.myForm.getRawValue()})),this.myFormData=this.myForm.getRawValue()}},{key:"saveUpdate",value:function(){var t=this;if(!this.myForm.valid)return this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs,!0),!1;var e=[];this.templateDetails.templateList.forEach((function(t){var i=[];t.forEach((function(t){var e={name:t.name,status:"Ok",remarks:""};t.header&&(e.header=t.header),i.push(e)})),e.push(i)}));var i,r={templateName:this.myFormData.templateName,templateDetails:e};this.myFormData.isSave?i="save":(i="update",r.id=this.templateDetails.inputEditId),this.inspectionTemplateDataService[i](r).subscribe((function(e){"SUCCESS"===e.status?(t.utilsService.showSuccessMsg(e),t.activeModal.hide()):t.utilsService.showFailureMsg(e)}))}},{key:"onCreateTempalte",value:function(){this.myFormData.isSave?(this.myForm.controls.templateName.enable(),this.myForm.patchValue({templateName:""})):(this.myForm.controls.templateName.disable(),this.myForm.patchValue({templateName:this.templateDetails.templateName}))}},{key:"closePopup",value:function(){this.activeModal.hide()}},{key:"clearForm",value:function(){this.initializeForm()}}]),t}()).\u0275fac=function(t){return new(t||Sr)(c.Pb(s.g),c.Pb(u.l),c.Pb(d.a),c.Pb(W.a),c.Pb(l.e),c.Pb(u.y))},Sr.\u0275cmp=c.Jb({type:Sr,selectors:[["app-inspection-template-popup"]],inputs:{templateDetails:"templateDetails"},decls:24,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],[1,"close",3,"click"],[1,"modal-body"],[1,"row",3,"formGroup"],["class","form-group col-sm-12",4,"ngIf"],[1,"form-group","col-sm-6"],[1,"form-label"],[1,"mandatory"],["type","text","formControlName","templateName",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],[1,"modal-footer"],[1,"btn-group","text-right"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-times"],[1,"form-group","col-sm-12"],[1,"checkbox"],["type","checkbox","formControlName","isSave",3,"change"],[1,"checkmark"],[1,"validation-error"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"h5",1),c.Lc(2,"Add Template"),c.Ub(),c.Vb(3,"button",2),c.dc("click",(function(){return e.activeModal.hide()})),c.Vb(4,"span"),c.Lc(5,"\xd7"),c.Ub(),c.Ub(),c.Ub(),c.Vb(6,"div",3),c.Vb(7,"div",4),c.Jc(8,fr,6,0,"div",5),c.Vb(9,"div",6),c.Vb(10,"label",7),c.Lc(11,"Template Name"),c.Vb(12,"span",8),c.Lc(13,"*"),c.Ub(),c.Ub(),c.Qb(14,"input",9),c.Jc(15,gr,2,1,"div",10),c.Ub(),c.Ub(),c.Ub(),c.Vb(16,"div",11),c.Vb(17,"div",12),c.Jc(18,vr,4,0,"button",13),c.Jc(19,yr,4,0,"button",13),c.Vb(20,"button",14),c.dc("click",(function(){return e.activeModal.hide()})),c.Qb(21,"i",15),c.Vb(22,"span"),c.Lc(23,"Cancel"),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t&&(c.Cb(7),c.oc("formGroup",e.myForm),c.Cb(1),c.oc("ngIf",e.templateDetails.inputEditId),c.Cb(7),c.oc("ngIf",e.myFormErrors.templateName),c.Cb(3),c.oc("ngIf",e.myFormData.isSave),c.Cb(1),c.oc("ngIf",!e.myFormData.isSave))},directives:[l.n,l.i,v.m,l.b,l.m,l.g,l.a],styles:[""]}),Sr);function Ir(t,e){if(1&t){var i=c.Wb();c.Tb(0),c.Vb(1,"td"),c.Lc(2),c.Ub(),c.Vb(3,"td"),c.Lc(4),c.Ub(),c.Vb(5,"td"),c.Lc(6),c.Ub(),c.Vb(7,"td"),c.Vb(8,"div",14),c.Vb(9,"label",15),c.Vb(10,"input",16),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).itemIndex=t})),c.Ub(),c.Qb(11,"span",17),c.Ub(),c.Ub(),c.Ub(),c.Sb()}if(2&t){var r=c.hc(),n=r.$implicit,a=r.index,o=c.hc();c.Cb(2),c.Oc("",n.rentalItemInfo[0].rentalItemCode," - ",n.rentalItemInfo[0].rentalItemName," "),c.Cb(2),c.Oc("",null==n.rentalEquipmentInfo[0]?null:n.rentalEquipmentInfo[0].equipmentCode," - ",null==n.rentalEquipmentInfo[0]?null:n.rentalEquipmentInfo[0].equipmentName," "),c.Cb(2),c.Mc(n.quantity),c.Cb(4),c.oc("ngModel",o.itemIndex)("value",a)}}function Ur(t,e){if(1&t&&(c.Vb(0,"tr"),c.Jc(1,Ir,12,7,"ng-container",8),c.Ub()),2&t){var i=e.$implicit,r=c.hc();c.Cb(1),c.oc("ngIf","worklog"===r.inputScreenName||"0"===i.isUtilized)}}function Lr(t,e){1&t&&(c.Vb(0,"tfoot"),c.Vb(1,"tr"),c.Vb(2,"td",18),c.Lc(3," There is no equipment to select. "),c.Ub(),c.Ub(),c.Ub())}function Vr(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",19),c.dc("click",(function(){return c.Dc(i),c.hc().next()})),c.Qb(1,"i",20),c.Vb(2,"span"),c.Lc(3,"Ok"),c.Ub(),c.Ub()}}var Dr,Nr=function(){return{"max-height.px":300}},Fr=((Dr=function(){function t(e,i,r){_classCallCheck(this,t),this.branchUtilsService=e,this.utilsService=i,this.activeModal=r,this.isEquipmentUtilized=!1}return _createClass(t,[{key:"ngOnInit",value:function(){b.filter(this.list.itemListArray,{isUtilized:"1"}).length===this.list.itemListArray.length&&"worklog"!==this.inputScreenName&&(this.isEquipmentUtilized=!0)}},{key:"next",value:function(){var t=this.formatItemdata();this.branchUtilsService.inspectionItemData.next(t),this.activeModal.hide()}},{key:"formatItemdata",value:function(){return{customerBpId:this.list.customerBpId,customerBpContactsId:this.list.customerBpContactsId,referenceNumber:this.list.referenceNumber,empId:this.list.empId,status:this.list.status,remarks:this.list.remarks,currencyId:this.list.currencyId,id:this.list.itemListArray[this.itemIndex].id,rentalItemId:this.list.itemListArray[this.itemIndex].rentalItemId,rentalEquipmentId:this.list.itemListArray[this.itemIndex].rentalEquipmentId,distributionRulesId:this.list.itemListArray[this.itemIndex].distributionRulesId,startDate:this.list.itemListArray[this.itemIndex].startDate,endDate:this.list.itemListArray[this.itemIndex].endDate,inspectionOverallStatus:"",inspectionTemplateId:"",itemListArray:[{copyFromId:this.list.itemListArray[this.itemIndex].copyFromId,copyFromType:this.list.itemListArray[this.itemIndex].copyFromType}],rentalItemInfo:this.list.itemListArray[this.itemIndex].rentalItemInfo,rentalEquipmentInfo:this.list.itemListArray[this.itemIndex].rentalEquipmentInfo,distributionRulesInfo:this.list.itemListArray[this.itemIndex].distributionRulesInfo,customerBpInfo:this.list.customerBpInfo,empInfo:this.list.empInfo,currencyInfo:this.list.currencyInfo,statusInfo:this.list.statusInfo,termsandConditionsInfo:this.list.termsandConditionsInfo,customerBpContactsInfo:this.list.customerBpContactsInfo}}},{key:"cancel",value:function(){this.utilsService.goBack(),this.activeModal.hide()}}]),t}()).\u0275fac=function(t){return new(t||Dr)(c.Pb(d.a),c.Pb(s.g),c.Pb(W.a))},Dr.\u0275cmp=c.Jb({type:Dr,selectors:[["app-inspection-worklog-select-item-popup"]],inputs:{list:"list",inputScreenName:"inputScreenName"},decls:25,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-striped","table-bordered"],[2,"width","200px"],[2,"width","100px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"modal-footer"],[1,"btn-group","text-right"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-times"],[1,"form-group"],[1,"radiobox"],["type","radio",3,"ngModel","value","ngModelChange"],[1,"checkmark"],["colspan","4"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"h5",1),c.Lc(2,"Select Item"),c.Ub(),c.Ub(),c.Vb(3,"div",2),c.Vb(4,"div",3),c.Vb(5,"table",4),c.Vb(6,"thead"),c.Vb(7,"tr"),c.Vb(8,"th",5),c.Lc(9,"Rental Item Name"),c.Ub(),c.Vb(10,"th",5),c.Lc(11,"Rental Equipment Name"),c.Ub(),c.Vb(12,"th",6),c.Lc(13,"Quantity"),c.Ub(),c.Qb(14,"th"),c.Ub(),c.Ub(),c.Vb(15,"tbody"),c.Jc(16,Ur,2,1,"tr",7),c.Ub(),c.Jc(17,Lr,4,0,"tfoot",8),c.Ub(),c.Ub(),c.Ub(),c.Vb(18,"div",9),c.Vb(19,"div",10),c.Jc(20,Vr,4,0,"button",11),c.Vb(21,"button",12),c.dc("click",(function(){return e.cancel()})),c.Qb(22,"i",13),c.Vb(23,"span"),c.Lc(24,"Cancel"),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t&&(c.Cb(4),c.oc("ngStyle",c.rc(4,Nr)),c.Cb(12),c.oc("ngForOf",e.list.itemListArray),c.Cb(1),c.oc("ngIf",e.isEquipmentUtilized),c.Cb(3),c.oc("ngIf",!e.isEquipmentUtilized))},directives:[v.n,v.l,v.m,l.r,l.b,l.m,l.o],styles:[""]}),Dr);function Er(t,e){1&t&&(c.Tb(0),c.Lc(1,"Add"),c.Sb())}function Tr(t,e){1&t&&(c.Tb(0),c.Lc(1,"Edit"),c.Sb())}function xr(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",6),c.dc("click",(function(){return c.Dc(i),c.hc(2).downloadPdf()})),c.Qb(1,"i",56),c.Vb(2,"span"),c.Lc(3,"Print"),c.Ub(),c.Ub()}}function Ar(t,e){if(1&t&&(c.Vb(0,"div",57),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.documentNumberingId?i.myFormErrors.documentNumberingId:i.myFormErrors.documentNumber," ")}}function kr(t,e){if(1&t&&(c.Vb(0,"div"),c.Lc(1),c.Vb(2,"small"),c.Lc(3),c.Ub(),c.Ub()),2&t){var i=e.item;c.Cb(1),c.Nc("",i.rentalItemName,"\xa0"),c.Cb(2),c.Nc("(",i.rentalItemCode,")")}}function Rr(t,e){if(1&t&&(c.Vb(0,"div",57),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.rentalItemId," ")}}function Mr(t,e){if(1&t&&(c.Vb(0,"div"),c.Lc(1),c.Vb(2,"small"),c.Lc(3),c.Ub(),c.Ub()),2&t){var i=e.item;c.Cb(1),c.Nc("",i.partnerName,"\xa0"),c.Cb(2),c.Nc("(",i.partnerCode,")")}}function wr(t,e){if(1&t){var i=c.Wb();c.Vb(0,"a",58),c.dc("click",(function(){return c.Dc(i),c.hc(2).bizRefreshFlag=!0})),c.Qb(1,"i",59),c.Ub()}}function Or(t,e){if(1&t){var i=c.Wb();c.Vb(0,"a",60),c.dc("click",(function(){c.Dc(i);var t=c.hc(2);return t.getCustomerBpList(),t.bizRefreshFlag=!1})),c.Qb(1,"i",61),c.Ub()}}function qr(t,e){if(1&t){var i=c.Wb();c.Vb(0,"span",62),c.dc("click",(function(){c.Dc(i);var t=c.hc(2);return t.popupExternalService.showDetailPopup("biz-partner",t.myFormData.customerBpId)})),c.Qb(1,"i",63),c.Ub()}}function Pr(t,e){if(1&t&&(c.Vb(0,"div",57),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.customerBpId," ")}}function Br(t,e){if(1&t&&(c.Vb(0,"div"),c.Lc(1),c.Ub(),c.Vb(2,"small"),c.Lc(3),c.Ub()),2&t){var i=e.item;c.Cb(1),c.Mc(i.contactName),c.Cb(2),c.Oc("",i.contactTypeName," / ",i.contactNumber,"")}}function Kr(t,e){if(1&t&&(c.Vb(0,"div"),c.Lc(1),c.Vb(2,"small"),c.Lc(3),c.Ub(),c.Ub()),2&t){var i=e.item;c.Cb(1),c.Nc("",i.employeeName,"\xa0"),c.Cb(2),c.Nc("(",i.empCode,")")}}function Jr(t,e){if(1&t&&(c.Vb(0,"div",57),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.empId," ")}}function Qr(t,e){if(1&t&&(c.Vb(0,"option",64),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Mc(i.name)}}function _r(t,e){if(1&t&&(c.Vb(0,"div",57),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.status," ")}}function Wr(t,e){1&t&&(c.Vb(0,"span",16),c.Lc(1,"*"),c.Ub())}function Hr(t,e){if(1&t&&(c.Vb(0,"option",64),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Mc(i.templateName)}}var Gr=function(){return{standalone:!0}};function zr(t,e){if(1&t){var i=c.Wb();c.Tb(0),c.Vb(1,"td"),c.Vb(2,"a",65),c.dc("click",(function(){c.Dc(i);var t=c.hc(2).index;return c.hc(2).showAddTaskPopup("body",t)})),c.Qb(3,"i",59),c.Ub(),c.Vb(4,"a",66),c.dc("click",(function(){c.Dc(i);var t=c.hc(2).index;return c.hc(2).deleteTemplateHeader(t)})),c.Qb(5,"i",67),c.Ub(),c.Ub(),c.Vb(6,"td"),c.Lc(7),c.Ub(),c.Vb(8,"td"),c.Vb(9,"input",68),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().$implicit.name=t})),c.Ub(),c.Ub(),c.Vb(10,"td"),c.Vb(11,"select",68),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().$implicit.status=t})),c.Vb(12,"option"),c.Lc(13,"Ok"),c.Ub(),c.Vb(14,"option"),c.Lc(15,"Conditional Approved"),c.Ub(),c.Vb(16,"option"),c.Lc(17,"Not Ok"),c.Ub(),c.Ub(),c.Ub(),c.Vb(18,"td"),c.Vb(19,"input",68),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().$implicit.remarks=t})),c.Ub(),c.Ub(),c.Sb()}if(2&t){var r=c.hc().$implicit,n=c.hc().index;c.Cb(7),c.Mc(n+1),c.Cb(2),c.oc("ngModel",r.name)("ngModelOptions",c.rc(7,Gr)),c.Cb(2),c.oc("ngModel",r.status)("ngModelOptions",c.rc(8,Gr)),c.Cb(8),c.oc("ngModel",r.remarks)("ngModelOptions",c.rc(9,Gr))}}function jr(t,e){if(1&t){var i=c.Wb();c.Tb(0),c.Qb(1,"td"),c.Vb(2,"td"),c.Vb(3,"a",66),c.dc("click",(function(){c.Dc(i);var t=c.hc().index,e=c.hc().index;return c.hc(2).deleteTemplateBody(e,t)})),c.Qb(4,"i",67),c.Ub(),c.Ub(),c.Vb(5,"td"),c.Vb(6,"input",68),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().$implicit.name=t})),c.Ub(),c.Ub(),c.Vb(7,"td"),c.Vb(8,"select",68),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().$implicit.status=t})),c.Vb(9,"option"),c.Lc(10,"Ok"),c.Ub(),c.Vb(11,"option"),c.Lc(12,"Conditional Approved"),c.Ub(),c.Vb(13,"option"),c.Lc(14,"Not Ok"),c.Ub(),c.Ub(),c.Ub(),c.Vb(15,"td"),c.Vb(16,"input",68),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().$implicit.remarks=t})),c.Ub(),c.Ub(),c.Sb()}if(2&t){var r=c.hc().$implicit;c.Cb(6),c.oc("ngModel",r.name)("ngModelOptions",c.rc(6,Gr)),c.Cb(2),c.oc("ngModel",r.status)("ngModelOptions",c.rc(7,Gr)),c.Cb(8),c.oc("ngModel",r.remarks)("ngModelOptions",c.rc(8,Gr))}}function Yr(t,e){if(1&t&&(c.Vb(0,"tr"),c.Jc(1,zr,20,10,"ng-container",0),c.Jc(2,jr,17,9,"ng-container",0),c.Ub()),2&t){var i=e.$implicit;c.Cb(1),c.oc("ngIf",i.header),c.Cb(1),c.oc("ngIf",!i.header)}}function $r(t,e){if(1&t&&(c.Tb(0),c.Jc(1,Yr,3,2,"tr",49),c.Sb()),2&t){var i=e.$implicit;c.Cb(1),c.oc("ngForOf",i)}}function Zr(t,e){if(1&t){var i=c.Wb();c.Vb(0,"tfoot"),c.Vb(1,"tr"),c.Vb(2,"td",69),c.Vb(3,"div",70),c.Vb(4,"button",71),c.dc("click",(function(){return c.Dc(i),c.hc(2).showAddTaskPopup("header")})),c.Qb(5,"i",59),c.Vb(6,"span"),c.Lc(7,"Add Task"),c.Ub(),c.Ub(),c.Vb(8,"button",6),c.dc("click",(function(){return c.Dc(i),c.hc(2).showAddTemplatePopup()})),c.Qb(9,"i",72),c.Vb(10,"span"),c.Lc(11,"Save Template"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()}}function Xr(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",6),c.dc("click",(function(){return c.Dc(i),c.hc(2).saveUpdate()})),c.Qb(1,"i",72),c.Vb(2,"span"),c.Lc(3,"Save"),c.Ub(),c.Ub()}}function tn(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",6),c.dc("click",(function(){return c.Dc(i),c.hc(2).addUpdateDraft()})),c.Qb(1,"i",72),c.Vb(2,"span"),c.Lc(3,"Save as Draft"),c.Ub(),c.Ub()}}function en(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",3),c.dc("click",(function(){return c.Dc(i),c.hc(2).clearForm()})),c.Qb(1,"i",73),c.Vb(2,"span"),c.Lc(3,"Clear"),c.Ub(),c.Ub()}}function rn(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",6),c.dc("click",(function(){return c.Dc(i),c.hc(2).saveUpdate()})),c.Qb(1,"i",61),c.Vb(2,"span"),c.Lc(3,"Update"),c.Ub(),c.Ub()}}function nn(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",3),c.dc("click",(function(){c.Dc(i);var t=c.hc(2);return t.inspectionTxnUtilsService.redirectToList(t.txnKeys.inputScreenName)})),c.Qb(1,"i",74),c.Vb(2,"span"),c.Lc(3,"Cancel"),c.Ub(),c.Ub()}}function an(t,e){1&t&&(c.Vb(0,"div",77),c.Vb(1,"span",78),c.Lc(2,"Note:"),c.Ub(),c.Lc(3," You are unauthorized to "),c.Vb(4,"strong"),c.Lc(5,"update"),c.Ub(),c.Lc(6," this transaction! "),c.Ub())}function on(t,e){1&t&&(c.Vb(0,"div",77),c.Vb(1,"span",78),c.Lc(2,"Note:"),c.Ub(),c.Lc(3," Cannot update "),c.Vb(4,"strong"),c.Lc(5,"Cancelled"),c.Ub(),c.Lc(6," / "),c.Vb(7,"strong"),c.Lc(8,"Closed"),c.Ub(),c.Lc(9," transactions! "),c.Ub())}function sn(t,e){if(1&t&&(c.Vb(0,"div",75),c.Vb(1,"div"),c.Vb(2,"strong"),c.Lc(3,"Created By:"),c.Ub(),c.Lc(4),c.Ub(),c.Jc(5,an,7,0,"div",76),c.Jc(6,on,10,0,"div",76),c.Ub()),2&t){var i=c.hc(2);c.Cb(4),c.Nc(" ",i.txnKeys.editCreatedName,""),c.Cb(1),c.oc("ngIf",i.branchUtilsService.txnValidateBtn(i.myForm,i.txnKeys,"updateAclNote")),c.Cb(1),c.oc("ngIf",i.branchUtilsService.txnValidateBtn(i.myForm,i.txnKeys,"updateNote"))}}function cn(t,e){1&t&&(c.Vb(0,"div",75),c.Vb(1,"span",78),c.Lc(2,"Note:"),c.Ub(),c.Lc(3," You are unauthorized to "),c.Vb(4,"strong"),c.Lc(5,"add"),c.Ub(),c.Lc(6," this transaction!. "),c.Ub())}var un=function(){return{"max-height.px":300}};function ln(t,e){if(1&t){var i=c.Wb();c.Tb(0),c.Vb(1,"div",1),c.Vb(2,"span"),c.Lc(3),c.Ub(),c.Lc(4),c.Jc(5,Er,2,0,"ng-container",0),c.Jc(6,Tr,2,0,"ng-container",0),c.Vb(7,"div",2),c.Vb(8,"button",3),c.dc("click",(function(){return c.Dc(i),c.hc().utilsService.goBack()})),c.Qb(9,"i",4),c.Vb(10,"span"),c.Lc(11,"Back"),c.Ub(),c.Ub(),c.Jc(12,xr,4,0,"button",5),c.Vb(13,"button",6),c.dc("click",(function(){return c.Dc(i),c.hc().showTxnOptionsSidebar()})),c.Qb(14,"i",7),c.Vb(15,"span"),c.Lc(16,"More"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(17,"div",8),c.Vb(18,"div",9),c.Vb(19,"div",10),c.Qb(20,"i",11),c.Lc(21,"Basic Info "),c.Ub(),c.Vb(22,"div",12),c.Vb(23,"div",13),c.Vb(24,"div",14),c.Vb(25,"label",15),c.Lc(26,"Doc No"),c.Vb(27,"span",16),c.Lc(28,"*"),c.Ub(),c.Ub(),c.Vb(29,"div",13),c.Vb(30,"div",17),c.Vb(31,"ng-select",18),c.dc("change",(function(){c.Dc(i);var t=c.hc();return t.branchUtilsService.onDocumentNumberingChange(t.documentNumberingList,t.myForm)})),c.Ub(),c.Ub(),c.Vb(32,"div",17),c.Qb(33,"input",19),c.Ub(),c.Ub(),c.Jc(34,Ar,2,1,"div",20),c.Ub(),c.Vb(35,"div",14),c.Vb(36,"label",15),c.Lc(37,"Item Name"),c.Vb(38,"span",16),c.Lc(39,"*"),c.Ub(),c.Ub(),c.Vb(40,"ng-select",21),c.dc("search",(function(t){return c.Dc(i),c.hc().onItemSearch(t)}))("change",(function(){return c.Dc(i),c.hc().onItemChange()})),c.Jc(41,kr,4,2,"ng-template",22),c.Ub(),c.Jc(42,Rr,2,1,"div",20),c.Ub(),c.Vb(43,"div",14),c.Vb(44,"label",15),c.Lc(45,"Equipment card"),c.Vb(46,"span",16),c.Lc(47,"*"),c.Ub(),c.Ub(),c.Qb(48,"ng-select",23),c.Ub(),c.Vb(49,"div",14),c.Vb(50,"label",15),c.Lc(51,"Business Partner Name"),c.Vb(52,"span",16),c.Lc(53,"*"),c.Ub(),c.Ub(),c.Vb(54,"div",24),c.Vb(55,"ng-select",25),c.dc("focus",(function(){return c.Dc(i),c.hc().onCustomerNameChange()}))("change",(function(){return c.Dc(i),c.hc().getCustomerBpContactList()})),c.Jc(56,Mr,4,2,"ng-template",22),c.Ub(),c.Vb(57,"span"),c.Jc(58,wr,2,0,"a",26),c.Jc(59,Or,2,0,"a",27),c.Ub(),c.Jc(60,qr,2,0,"span",28),c.Ub(),c.Jc(61,Pr,2,1,"div",20),c.Ub(),c.Vb(62,"div",14),c.Vb(63,"label",15),c.Lc(64,"Contact Person"),c.Ub(),c.Vb(65,"ng-select",29),c.Jc(66,Br,4,3,"ng-template",22),c.Ub(),c.Ub(),c.Vb(67,"div",14),c.Vb(68,"label",15),c.Lc(69,"Reference No"),c.Ub(),c.Qb(70,"input",30),c.Ub(),c.Vb(71,"div",14),c.Vb(72,"label",15),c.Lc(73,"Employee"),c.Ub(),c.Vb(74,"div",31),c.Vb(75,"ng-select",32),c.Jc(76,Kr,4,2,"ng-template",22),c.Ub(),c.Ub(),c.Jc(77,Jr,2,1,"div",20),c.Ub(),c.Vb(78,"div",14),c.Vb(79,"label",15),c.Lc(80,"Status"),c.Vb(81,"span",16),c.Lc(82,"*"),c.Ub(),c.Ub(),c.Vb(83,"select",33),c.Jc(84,Qr,2,2,"option",34),c.Ub(),c.Jc(85,_r,2,1,"div",20),c.Ub(),c.Vb(86,"div",35),c.Vb(87,"label",15),c.Lc(88,"Remarks"),c.Ub(),c.Qb(89,"textarea",36),c.Ub(),c.Vb(90,"div",14),c.Vb(91,"label",15),c.Lc(92,"Distribution Rules"),c.Jc(93,Wr,2,0,"span",37),c.Ub(),c.Vb(94,"ng-select",38),c.dc("add",(function(){return c.Dc(i),c.hc().onDistRuleAdd()})),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(95,"div",9),c.Vb(96,"div",10),c.Qb(97,"i",11),c.Lc(98,"Content Info "),c.Ub(),c.Vb(99,"div",39),c.Vb(100,"div",13),c.Vb(101,"div",14),c.Vb(102,"label",15),c.Lc(103,"Assign Inspection Template"),c.Ub(),c.Vb(104,"select",40),c.dc("change",(function(){return c.Dc(i),c.hc().onTemplateChange()})),c.Vb(105,"option",41),c.Lc(106,"--SELECT--"),c.Ub(),c.Jc(107,Hr,2,2,"option",34),c.Ub(),c.Ub(),c.Ub(),c.Vb(108,"div",42),c.Vb(109,"table",43),c.Vb(110,"thead"),c.Vb(111,"tr"),c.Vb(112,"th",44),c.Lc(113,"Action"),c.Ub(),c.Vb(114,"th",45),c.Lc(115,"#"),c.Ub(),c.Vb(116,"th",46),c.Lc(117,"Inspection Details"),c.Vb(118,"span",16),c.Lc(119,"*"),c.Ub(),c.Ub(),c.Vb(120,"th",47),c.Lc(121,"Inspection Status"),c.Vb(122,"span",16),c.Lc(123,"*"),c.Ub(),c.Ub(),c.Vb(124,"th",48),c.Lc(125,"Inspection Remarks"),c.Ub(),c.Ub(),c.Ub(),c.Vb(126,"tbody"),c.Jc(127,$r,2,1,"ng-container",49),c.Ub(),c.Jc(128,Zr,12,0,"tfoot",0),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Qb(129,"app-udf-viewer",50),c.Vb(130,"app-attachments",51),c.dc("doSuccess",(function(){c.Dc(i);var t=c.hc();return t.inspectionTxnUtilsService.redirectToList(t.txnKeys.inputScreenName)})),c.Ub(),c.Vb(131,"div",52),c.Jc(132,Xr,4,0,"button",5),c.Jc(133,tn,4,0,"button",5),c.Jc(134,en,4,0,"button",53),c.Jc(135,rn,4,0,"button",5),c.Jc(136,nn,4,0,"button",54),c.Ub(),c.Jc(137,sn,7,3,"div",55),c.Jc(138,cn,7,0,"div",55),c.Ub(),c.Qb(139,"app-spi-txn-options"),c.Sb()}if(2&t){var r=c.hc();c.Cb(3),c.Mc(r.branchUtilsService.txnGetTitle(r.screenAttributes.title,!0)),c.Cb(1),c.Nc("",r.branchUtilsService.txnGetTitle(r.screenAttributes.title)," - "),c.Cb(1),c.oc("ngIf",!r.txnKeys.inputEditId),c.Cb(1),c.oc("ngIf",r.txnKeys.inputEditId),c.Cb(6),c.oc("ngIf",r.txnKeys.inputEditId),c.Cb(5),c.oc("formGroup",r.myForm),c.Cb(14),c.oc("items",r.documentNumberingList),c.Cb(3),c.oc("ngIf",r.myFormErrors.documentNumberingId||r.myFormErrors.documentNumber),c.Cb(6),c.oc("items",r.itemList)("multiple",!1)("virtualScroll",!0),c.Cb(2),c.oc("ngIf",r.myFormErrors.rentalItemId),c.Cb(6),c.oc("items",r.myFormData.equipmentList)("multiple",!1),c.Cb(7),c.oc("items",r.businessPartnerList)("multiple",!1),c.Cb(3),c.oc("ngIf",!r.bizRefreshFlag),c.Cb(1),c.oc("ngIf",r.bizRefreshFlag),c.Cb(1),c.oc("ngIf",r.myFormData.customerBpId),c.Cb(1),c.oc("ngIf",r.myFormErrors.customerBpId),c.Cb(4),c.oc("items",r.bpContactList)("multiple",!1),c.Cb(10),c.oc("items",r.employeeList)("multiple",!1),c.Cb(2),c.oc("ngIf",r.myFormErrors.empId),c.Cb(7),c.oc("ngForOf",r.rentalStatusList),c.Cb(1),c.oc("ngIf",r.myFormErrors.status),c.Cb(8),c.oc("ngIf",r.storageService.get("distRulesMode")),c.Cb(1),c.oc("items",r.distributionList)("multiple",!0),c.Cb(13),c.oc("ngForOf",r.inspectionTemplateList),c.Cb(1),c.oc("ngStyle",c.rc(43,un)),c.Cb(19),c.oc("ngForOf",r.branchUtilsService.inspectionListArray),c.Cb(1),c.oc("ngIf","inspectionOut"===r.txnKeys.inputScreenName||"inspectionIn"===r.txnKeys.inputScreenName&&r.txnKeys.inputCopyIds),c.Cb(1),c.oc("type",r.screenAttributes.backendKey),c.Cb(1),c.oc("type",r.screenAttributes.backendKey),c.Cb(2),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"save")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"saveDraft")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"clear")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"update")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"cancel")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"editMsgContainer")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"addAclNote"))}}var mn,bn=((mn=function(){function t(e,i,r,n,a,o,c,u,l,m,b){_classCallCheck(this,t),this.utilsService=e,this.storageService=i,this.authGuardService=r,this.commonDataService=n,this.branchUtilsService=a,this.formBuilder=o,this.activatedRoute=c,this.inspectionTxnUtilsService=u,this.popupExternalService=l,this.changeDetectorRef=m,this.modalService=b,this.appConstants=s.h,this.screenAcl={},this.txnKeys={inputScreenName:"",inputEditId:"",inputDraftId:"",inputCopyIds:"",inputCopyScreenName:"",inputDuplicateId:"",editStatusId:"",editCreatedName:""},this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.documentNumberingList=[],this.rentalStatusList=[],this.currencyList=[],this.paymentTermsList=[],this.paymentMethodsList=[],this.taxList=[],this.uomList=[],this.hsnList=[],this.itemList=[],this.distributionList=[],this.termsAndConditionList=[],this.businessPartnerList=[],this.bpContactList=[],this.employeeList=[],this.customerShipToAddressList=[],this.customerBillToAddressList=[],this.bizRefreshFlag=!1,this.workLogRefList=[],this.inspectionTemplateList=[],this.myFormData={},this.myFormErrors={},this.myFormValidationMsgs={}}return _createClass(t,[{key:"ngOnInit",value:function(){this.initializeSubscriptions()}},{key:"ngAfterViewInit",value:function(){this.attachmentsComponent&&this.udfViewerComponent&&(this.attachmentsComponent.loadAttachments(this.txnKeys.inputEditId||this.txnKeys.inputDraftId),this.udfViewerComponent.getFields(this.txnKeys.inputEditId||this.txnKeys.inputDuplicateId||this.txnKeys.inputDraftId),this.changeDetectorRef.detectChanges())}},{key:"initializeSubscriptions",value:function(){var t=this;this.activatedRoute.params.subscribe((function(e){if(!t.inspectionTxnUtilsService.checkScreenNameValid(e.screenName))return t.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),t.utilsService.goBack(),!1;if(t.screenAcl=t.authGuardService.getScreenAcl(t.branchUtilsService.screenAttributes[e.screenName].documentTypeId),!t.screenAcl.view)return t.utilsService.showFailureMsg(s.h.ACL_UNAUTHORIZED_MSG),t.utilsService.goBack(),!1;if(t.reInitializeGlobalVariables(),t.txnKeys.inputScreenName=e.screenName,t.transactionInitialization(),e.id&&(t.txnKeys.inputEditId=t.utilsService.decrypt(e.id),t.get()),e.copyScreenName&&e.copyId){var i=t.utilsService.decrypt(e.copyId);t.txnKeys.inputCopyIds=i.split(","),t.txnKeys.inputCopyScreenName=e.copyScreenName,t.copyFrom()}e.duplicateId&&(t.txnKeys.inputDuplicateId=t.utilsService.decrypt(e.duplicateId),t.getDuplicate()),e.draftId&&(t.txnKeys.inputDraftId=t.utilsService.decrypt(e.draftId),t.getDraft()),t.txnKeys.inputEditId||t.txnKeys.inputCopyIds||t.txnKeys.inputDuplicateId||t.txnKeys.inputDraftId||(t.branchUtilsService.getMasterDocumentNumbering(t.myForm,t.screenAttributes.documentTypeId).subscribe((function(e){t.documentNumberingList=e})),t.getCustomerBpList(),t.getEmployeeList(),t.getDistributionList(),"inspectionIn"===t.txnKeys.inputScreenName&&t.myForm.controls.inspectionTemplateId.disable())})),this.inspectionItemDataSubscription=this.branchUtilsService.inspectionItemData.subscribe((function(e){t.copyInspectionItem(e)})),this.branchUtilsService.itemSearch.pipe(Object(P.a)(700),Object(B.a)(),Object(K.a)((function(e){t.getItemList(e)}))).subscribe()}},{key:"reInitializeGlobalVariables",value:function(){this.txnKeys.inputScreenName="",this.txnKeys.inputEditId="",this.txnKeys.inputCopyIds="",this.txnKeys.inputDuplicateId="",this.txnKeys.inputCopyScreenName="",this.txnKeys.editStatusId="",this.txnKeys.editCreatedName="",this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.documentNumberingList=[],this.rentalStatusList=[],this.itemList=[],this.taxList=[],this.uomList=[],this.hsnList=[],this.distributionList=[],this.businessPartnerList=[],this.bpContactList=[],this.employeeList=[],this.termsAndConditionList=[],this.currencyList=[],this.paymentTermsList=[],this.paymentMethodsList=[],this.customerShipToAddressList=[],this.customerBillToAddressList=[],this.branchUtilsService.inspectionListArray=[]}},{key:"transactionInitialization",value:function(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.txnKeys.inputScreenName],this.screenDataService=this.inspectionTxnUtilsService.getScreenDataService(this.txnKeys.inputScreenName),this.myFormErrors=this.inspectionTxnUtilsService.getFormErrors(this.txnKeys.inputScreenName,"mainFields"),this.myFormValidationMsgs=this.inspectionTxnUtilsService.getFormValMsgs(this.txnKeys.inputScreenName),this.initializeForm(),this.getAutoSuggestionList("getRentalTransStatusList"),this.getAutoSuggestionList("getInspectionTemplateList")}},{key:"initializeForm",value:function(){var t=this,e=this.inspectionTxnUtilsService.getFormMainFields(this.txnKeys.inputScreenName);e.itemListArray=this.formBuilder.array([]),this.myForm=this.formBuilder.group(e),this.myForm.valueChanges.subscribe((function(e){t.utilsService.validation(t.myForm,t.myFormErrors,t.myFormValidationMsgs),t.myFormData=t.myForm.getRawValue()})),this.myFormData=this.myForm.getRawValue()}},{key:"saveUpdate",value:function(){var t=this,e=this.myForm.getRawValue(),i=b.findIndex(this.documentNumberingList,{id:e.documentNumberingId});if("DRAFT"===this.documentNumberingList[i].documentNumberingType)return this.utilsService.showFailureMsg("Cannot Proceed - Select other than draft document numbering from Doc No field!"),!1;if(!this.myForm.valid||!this.udfViewerComponent.valid())return this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs,!0),this.udfViewerComponent.checkValidations(),!1;if(this.checkInspectionTemplate())return this.utilsService.showFailureMsg("Inspection details are empty"),!1;var r,n=this.inspectionTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm);n.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),n.isDraft=this.txnKeys.inputDraftId?"2":"0",this.txnKeys.inputEditId||this.txnKeys.inputDraftId?(r="update",n.id=this.txnKeys.inputEditId||this.txnKeys.inputDraftId):r="save",this.screenDataService[r](n).subscribe((function(e){"SUCCESS"===e.status?(t.utilsService.showSuccessMsg(e),t.attachmentsComponent.save("save"===r?e.sId:t.txnKeys.inputEditId||t.txnKeys.inputDraftId)):t.utilsService.showFailureMsg(e)}))}},{key:"addUpdateDraft",value:function(){var t=this,e=this.myForm.getRawValue(),i=b.findIndex(this.documentNumberingList,{id:e.documentNumberingId});if("DRAFT"!==this.documentNumberingList[i].documentNumberingType)return this.utilsService.showFailureMsg("Cannot Proceed - Select draft document numbering from Doc No field!"),!1;if(this.checkInspectionTemplate())return this.utilsService.showFailureMsg("Inspection details are empty"),!1;var r,n=this.inspectionTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm);n.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),n.isDraft="1",this.txnKeys.inputDraftId?(r="update",n.id=this.txnKeys.inputDraftId):r="save",this.screenDataService[r](n).subscribe((function(e){"SUCCESS"===e.status?(t.utilsService.showSuccessMsg(e),t.attachmentsComponent.save("save"===r?e.sId:t.txnKeys.inputDraftId)):t.utilsService.showFailureMsg(e)}))}},{key:"get",value:function(){var t=this;this.screenDataService.get(this.txnKeys.inputEditId).subscribe((function(e){if("SUCCESS"===e.status){var i=e.results;i.editFlag=!0;var r=t.inspectionTxnUtilsService.getMainFieldsWithData(t.txnKeys.inputScreenName,i);t.myForm.patchValue(r),t.branchUtilsService.getMasterDocumentNumbering(t.myForm,t.screenAttributes.documentTypeId,"edit",i.documentNumberingInfo).subscribe((function(e){t.documentNumberingList=e})),t.getCustomerBpList(!0,i.customerBpInfo),t.getEmployeeList(i.empInfo),t.getCustomerBpContactList(!0,i.customerBpContactsInfo),t.getItemList("",!0,i.rentalItemInfo),t.getDistributionList(i.distributionRulesInfo),t.branchUtilsService.inspectionListArray=JSON.parse(i.itemListArray[0].templateDetails),t.myForm.controls.inspectionTemplateId.disable(),t.txnKeys.editStatusId=i.status,t.txnKeys.editCreatedName=i.createdByInfo[0].employeeName,t.inspectionTxnUtilsService.manipulationsOnEdit(t.txnKeys.inputScreenName,t.myForm)}else t.utilsService.showFailureMsg(e)}))}},{key:"copyFrom",value:function(){var t=this;this.inspectionTxnUtilsService.getScreenDataService(this.txnKeys.inputCopyScreenName).copy(this.txnKeys.inputCopyIds).subscribe((function(e){if("SUCCESS"===e.status){var i={backdrop:"static"};i.initialState={list:e.results},t.modalService.show(Fr,i)}else t.utilsService.showFailureMsg(e)}))}},{key:"copyInspectionItem",value:function(t){var e=this,i=this.branchUtilsService.screenAttributes[this.txnKeys.inputCopyScreenName];delete t.documentNumberingId,delete t.documentNumber,delete t.documentNumberingInfo,t.itemListArray[0].copyFromId=t.id,t.itemListArray[0].copyFromType=i.backendKey,delete t.id;var r=this.inspectionTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,t);this.myForm.patchValue(r),this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId).subscribe((function(t){e.documentNumberingList=t})),this.getItemList("",!0,t.rentalItemInfo),this.getDistributionList(t.distributionRulesInfo),this.getCustomerBpList(!0,t.customerBpInfo),this.getEmployeeList(t.empInfo),this.getAutoSuggestionList("getCurrencyList",t.currencyInfo),this.getAutoSuggestionList("getTermsandConditionsList",t.termsandConditionsInfo),this.getCustomerBpContactList(!0,t.customerBpContactsInfo),this.utilsService.isEmpty(t.rentalEquipmentId)&&this.onItemChange(),this.inspectionTxnUtilsService.manipulationsOnCopy(this.txnKeys.inputScreenName,this.myForm)}},{key:"getDraft",value:function(){var t=this;this.screenDataService.get(this.txnKeys.inputDraftId).subscribe((function(e){if("SUCCESS"===e.status){var i=e.results,r=t.inspectionTxnUtilsService.getMainFieldsWithData(t.txnKeys.inputScreenName,i);t.myForm.patchValue(r),t.branchUtilsService.getMasterDocumentNumbering(t.myForm,t.screenAttributes.documentTypeId,"draft",i.documentNumberingInfo).subscribe((function(e){t.documentNumberingList=e})),t.getCustomerBpList(!0,i.customerBpInfo),t.getEmployeeList(i.empInfo),t.getCustomerBpContactList(!0,i.customerBpContactsInfo),t.getItemList("",!0,i.rentalItemInfo),t.getDistributionList(i.distributionRulesInfo),t.branchUtilsService.inspectionListArray=JSON.parse(i.itemListArray[0].templateDetails),t.txnKeys.editStatusId=i.status,t.txnKeys.editCreatedName=i.createdByInfo[0].employeeName}else t.utilsService.showFailureMsg(e),t.utilsService.goBack()}))}},{key:"getDuplicate",value:function(){var t=this;this.screenDataService.get(this.txnKeys.inputDuplicateId).subscribe((function(e){if("SUCCESS"===e.status){var i=e.results;delete i.documentNumberingId,delete i.documentNumber,delete i.documentNumberingInfo,delete i.status,delete i.itemListArray[0].id,delete i.itemListArray[0].copyFromType,delete i.itemListArray[0].copyFromId;var r=t.inspectionTxnUtilsService.getMainFieldsWithData(t.txnKeys.inputScreenName,i);t.myForm.patchValue(r),t.branchUtilsService.getMasterDocumentNumbering(t.myForm,t.screenAttributes.documentTypeId).subscribe((function(e){t.documentNumberingList=e})),t.getItemList("",!0,i.rentalItemInfo),t.getDistributionList(i.distributionRulesInfo),t.getCustomerBpList(!0,i.customerBpInfo),t.getEmployeeList(i.empInfo),t.getAutoSuggestionList("getCurrencyList",i.currencyInfo),t.getAutoSuggestionList("getTermsandConditionsList",i.termsandConditionsInfo),t.getCustomerBpContactList(!0,i.customerBpContactsInfo),t.branchUtilsService.inspectionListArray=JSON.parse(i.itemListArray[0].templateDetails)}else t.utilsService.showFailureMsg(e),t.utilsService.goBack()}))}},{key:"deleteTemplateHeader",value:function(t){var e=this;this.utilsService.confirmDialog("Confirmation","Are you Sure, want to delete?").content.confirmation.subscribe((function(i){i&&e.branchUtilsService.inspectionListArray.splice(t,1)}))}},{key:"deleteTemplateBody",value:function(t,e){var i=this;this.utilsService.confirmDialog("Confirmation","Are you Sure, want to delete?").content.confirmation.subscribe((function(r){r&&i.branchUtilsService.inspectionListArray[t].splice(e,1)}))}},{key:"checkInspectionTemplate",value:function(){var t=this,e=!1;return 0===this.branchUtilsService.inspectionListArray.length?e=!0:this.branchUtilsService.inspectionListArray.forEach((function(i){b.filter(i,(function(e){return t.utilsService.isEmpty(e.name)})).length>0&&(e=!0)})),e}},{key:"clearForm",value:function(){this.initializeForm()}},{key:"onItemSearch",value:function(t){this.branchUtilsService.itemSearch.next(t)}},{key:"onItemChange",value:function(){var t=this;if(this.myFormData.rentalItemId){var e=b.findIndex(this.itemList,(function(e){return t.myFormData.rentalItemId===e.id}));this.myForm.patchValue({equipmentList:this.itemList[e].rentalEquipmentList})}else this.myForm.patchValue({equipmentList:[],rentalEquipmentId:null})}},{key:"onCustomerNameChange",value:function(){var t=this;if(this.myFormData.customerBpId){var e=this.myForm.controls.itemListArray;e.length>0&&this.utilsService.confirmDialog("Confirmation","If changing the customer leads to remove the items. Do you want to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe((function(i){i&&(t.myForm.patchValue({customerBpId:null}),e.clear())}))}}},{key:"onDistRuleAdd",value:function(){this.branchUtilsService.distRulesCheckUnique(this.distributionList,this.myForm,"distributionRulesId")}},{key:"onTemplateChange",value:function(){var t=this;if(this.myFormData.inspectionTemplateId){var e=b.findIndex(this.inspectionTemplateList,(function(e){return t.myFormData.inspectionTemplateId===e.id}));this.branchUtilsService.inspectionListArray=JSON.parse(this.inspectionTemplateList[e].templateDetails)}}},{key:"getAutoSuggestionList",value:function(t,e){var i=this;this.commonDataService.getAutoSuggestionList(t).subscribe((function(r){"SUCCESS"===r.status?(i.utilsService.ifNotPushToList(r.results,e),"getRentalTransStatusList"===t?(i.txnKeys.inputEditId||(r.results=r.results.filter((function(t){return"1"===t.id}))),i.txnKeys.inputEditId&&"inspectionIn"===i.txnKeys.inputScreenName&&(r.results=r.results.filter((function(t){return"2"!==t.id}))),i.rentalStatusList=r.results):"getCurrencyList"===t?i.currencyList=r.results:"getUomList"===t?i.uomList=r.results:"getHsnList"===t?i.hsnList=r.results.map((function(t){return t.hsnLabel=t.chapter+"."+t.heading+"."+t.subHeading,t})):"getTaxList"===t?i.taxList=r.results:"getPaymentTermsList"===t?i.paymentTermsList=r.results:"getPaymentMethodsList"===t?i.paymentMethodsList=r.results:"getTermsandConditionsList"===t?i.termsAndConditionList=r.results:"getRentalWorklogList"===t?i.workLogRefList=r.results:"getInspectionTemplateList"===t&&(i.inspectionTemplateList=r.results)):i.utilsService.showFailureMsg(r)}))}},{key:"getDistributionList",value:function(t){var e=this;this.commonDataService.getDistributionList(!0).subscribe((function(i){"SUCCESS"===i.status?(e.utilsService.ifNotPushToList(i.results,t),e.distributionList=i.results):e.utilsService.showFailureMsg(i)}))}},{key:"getItemList",value:function(t,e,i,r){var n=this;return e?(this.itemList=i.map((function(t){return t.searchText=t.rentalItemName+" - "+t.rentalItemCode,t})),!1):!t.term||t.term.length<3?(this.itemList=[],!1):void this.commonDataService.getRentalItemList(t.term).subscribe((function(t){"SUCCESS"===t.status?n.itemList=t.results.map((function(t){return t.searchText=t.rentalItemName+" - "+t.rentalItemCode,t})):n.utilsService.showFailureMsg(t)}))}},{key:"getEmployeeList",value:function(t){var e=this;this.commonDataService.getEmployeeList(1).subscribe((function(i){"SUCCESS"===i.status?(e.utilsService.ifNotPushToList(i.results,t),e.employeeList=i.results.map((function(t){return t.searchText=t.employeeName+" - "+t.empCode,t}))):e.utilsService.showFailureMsg(i)}))}},{key:"getCustomerBpList",value:function(t,e){var i=this;this.commonDataService.getBusinessPartnerList([1,3]).subscribe((function(t){"SUCCESS"===t.status?(i.utilsService.ifNotPushToList(t.results,e),i.businessPartnerList=t.results.map((function(t){return t.searchText=t.partnerName+" - "+t.partnerCode,t}))):i.utilsService.showFailureMsg(t)}))}},{key:"getCustomerBpContactList",value:function(t,e){var i=this;this.bpContactList=[],this.branchUtilsService.getBpContactListAndSet(this.myForm,"customerBpContactsId","customerBpId",t,e).subscribe((function(t){i.bpContactList=t}))}},{key:"showAddTemplatePopup",value:function(){var t=this;if(this.branchUtilsService.inspectionListArray[0]){var e="";if(this.myFormData.inspectionTemplateId){var i=b.findIndex(this.inspectionTemplateList,(function(e){return t.myFormData.inspectionTemplateId===e.id}));e=this.inspectionTemplateList[i].templateName}var r={backdrop:"static"};r.initialState={templateDetails:{inputEditId:this.myFormData.inspectionTemplateId?this.myFormData.inspectionTemplateId:"",templateName:e,templateList:this.branchUtilsService.inspectionListArray}},this.modalService.show(Cr,r)}else this.utilsService.showFailureMsg("Please add template.")}},{key:"showAddTaskPopup",value:function(t,e){var i={name:"",status:"Ok",remarks:""};"header"===t?(i.header=!0,this.branchUtilsService.inspectionListArray.push([i])):"body"===t&&this.branchUtilsService.inspectionListArray[e].push(i)}},{key:"showTxnOptionsSidebar",value:function(t){this.branchUtilsService.spiTxnOptions.next(!1===t?{show:!1}:{show:!0,spiName:this.branchUtilsService.spiTxnId.inspection,screenName:this.txnKeys.inputScreenName,editId:this.txnKeys.inputEditId,bpId:this.myFormData.customerBpId,status:this.myFormData.status})}},{key:"downloadPdf",value:function(){this.branchUtilsService.spiTxnOptionsDownloadPdf.next({spiName:this.branchUtilsService.spiTxnId.inspection,screenName:this.txnKeys.inputScreenName,id:this.txnKeys.inputEditId})}},{key:"onKeydownHandler",value:function(t){t.ctrlKey&&"s"===t.key.toLowerCase()&&(this.txnKeys.inputEditId&&"1"===this.txnKeys.editStatusId||!this.txnKeys.inputEditId)&&(this.saveUpdate(),t.preventDefault()),this.txnKeys.inputEditId&&t.ctrlKey&&-1!=="p".indexOf(t.key)&&(this.downloadPdf(),t.preventDefault())}},{key:"ngOnDestroy",value:function(){this.reInitializeGlobalVariables(),this.inspectionItemDataSubscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||mn)(c.Pb(s.g),c.Pb(s.f),c.Pb(s.a),c.Pb(u.l),c.Pb(d.a),c.Pb(l.e),c.Pb(o.a),c.Pb(p),c.Pb(_.a),c.Pb(c.h),c.Pb(W.b))},mn.\u0275cmp=c.Jb({type:mn,selectors:[["app-inspection-txn-add-employee-add"]],viewQuery:function(t,e){var i;1&t&&(c.Pc(J.a,!0),c.Pc(Q.a,!0)),2&t&&(c.zc(i=c.ec())&&(e.udfViewerComponent=i.first),c.zc(i=c.ec())&&(e.attachmentsComponent=i.first))},hostBindings:function(t,e){1&t&&c.dc("keydown",(function(t){return e.onKeydownHandler(t)}),!1,c.Bc)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-plus-square"],[1,"working-container",3,"formGroup"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row"],[1,"form-group","col-sm-3"],[1,"form-label"],[1,"mandatory"],[1,"col-sm-6"],["formControlName","documentNumberingId","bindLabel","documentNumberingName","bindValue","id","placeholder","--SELECT--",3,"items","change"],["type","text","formControlName","documentNumber",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],["formControlName","rentalItemId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","virtualScroll","search","change"],["ng-option-tmp",""],["formControlName","rentalEquipmentId","bindLabel","equipmentName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],[1,"action-control"],["formControlName","customerBpId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple","focus","change"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["class","info-icon","container","body","tooltip","View Details",3,"click",4,"ngIf"],["formControlName","customerBpContactsId","bindLabel","contactName","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["type","text","formControlName","referenceNumber",1,"form-control","form-control-sm"],[1,"position-relative"],["formControlName","empId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["formControlName","status",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","col-sm-6"],["formControlName","remarks","rows","2",1,"form-control","form-control-sm"],["class","mandatory",4,"ngIf"],["formControlName","distributionRulesId","bindLabel","distributionName","bindValue","id","placeholder","--SELECT--","groupBy","dimensionDescription",3,"items","multiple","add"],[1,"box-body","box-table"],["formControlName","inspectionTemplateId",1,"form-control","form-control-sm",3,"change"],["value",""],[1,"table-responsive",3,"ngStyle"],[1,"table","table-striped","table-bordered"],[2,"min-width","80px"],[2,"min-width","30px"],[2,"min-width","200px"],[2,"min-width","150px"],[2,"min-width","100px"],[4,"ngFor","ngForOf"],[3,"type"],[3,"type","doSuccess"],[1,"btn-group","text-right"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class"," btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[1,"fa","fa-print"],[1,"validation-error"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click"],[1,"fa","fa-plus"],[3,"click"],[1,"fa","fa-redo-alt"],["container","body","tooltip","View Details",1,"info-icon",3,"click"],[1,"fa","fa-info-circle"],[3,"value"],["placement","top","container","body","tooltip","Add Sub Task",1,"action","blue",3,"click"],["placement","top","container","body","tooltip","Delete",1,"action","red",3,"click"],[1,"fa","fa-minus-circle"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"],["colspan","5"],[1,"btn-group","text-left","mb-0"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-save"],[1,"fa","fa-broom"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&c.Jc(0,ln,140,44,"ng-container",0),2&t&&c.oc("ngIf",e.screenAcl.view)},directives:[v.m,l.n,l.i,H.a,l.m,l.g,l.b,H.c,l.t,v.l,l.p,l.v,v.n,J.a,Q.a,G.a,o.g,I.a,l.o],styles:[""]}),mn),dn=["dataTable"];function hn(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",23),c.dc("click",(function(){return c.Dc(i),c.hc().downloadAsExcel()})),c.Qb(1,"i",24),c.Vb(2,"span"),c.Lc(3,"Download as Excel"),c.Ub(),c.Ub()}}function pn(t,e){if(1&t&&(c.Vb(0,"div",25),c.Vb(1,"div",26),c.Vb(2,"div",27),c.Lc(3),c.Ub(),c.Vb(4,"div",28),c.Lc(5),c.Ub(),c.Ub(),c.Ub()),2&t){var i=e.$implicit,r=c.hc();c.Cb(3),c.Nc(" ",i.name," "),c.Cb(1),c.oc("ngClass",r.appConstants.TXN_STATUS_COLOR_CLS[i.id]),c.Cb(1),c.Mc(i.count)}}function fn(t,e){1&t&&(c.Vb(0,"th",34),c.Lc(1," Branch Name "),c.Qb(2,"p-sortIcon",32),c.Ub()),2&t&&(c.oc("pSortableColumn","branchName"),c.Cb(2),c.oc("field","branchName"))}function gn(t,e){if(1&t){var i=c.Wb();c.Vb(0,"th"),c.Vb(1,"input",40),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.branchName=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub()}if(2&t){var r=c.hc(2);c.Cb(1),c.oc("ngModel",r.searchForm.branchName)}}function vn(t,e){if(1&t&&(c.Vb(0,"option",44),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Nc(" ",i.name," ")}}function yn(t,e){if(1&t){var i=c.Wb();c.Vb(0,"tr"),c.Vb(1,"th",29),c.Lc(2,"Actions"),c.Ub(),c.Jc(3,fn,3,2,"th",30),c.Vb(4,"th",31),c.Lc(5,"Overdue "),c.Qb(6,"p-sortIcon",32),c.Ub(),c.Vb(7,"th",31),c.Lc(8,"Doc No "),c.Qb(9,"p-sortIcon",32),c.Ub(),c.Vb(10,"th",33),c.Lc(11,"Customer Name "),c.Qb(12,"p-sortIcon",32),c.Ub(),c.Vb(13,"th",34),c.Lc(14,"Item Name "),c.Qb(15,"p-sortIcon",32),c.Ub(),c.Vb(16,"th",35),c.Lc(17,"Start Date "),c.Qb(18,"p-sortIcon",32),c.Ub(),c.Vb(19,"th",35),c.Lc(20,"End Date "),c.Qb(21,"p-sortIcon",32),c.Ub(),c.Vb(22,"th",35),c.Lc(23,"Status "),c.Qb(24,"p-sortIcon",32),c.Ub(),c.Ub(),c.Vb(25,"tr",36),c.Vb(26,"th"),c.Vb(27,"a",37),c.dc("click",(function(){return c.Dc(i),c.hc().clearSearchForm()})),c.Qb(28,"i",38),c.Lc(29,"Clear"),c.Ub(),c.Ub(),c.Jc(30,gn,2,1,"th",39),c.Qb(31,"th"),c.Vb(32,"th"),c.Vb(33,"input",40),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().searchForm.documentNumber=t}))("keyup.enter",(function(){return c.Dc(i),c.hc().resetListing()})),c.Ub(),c.Ub(),c.Vb(34,"th"),c.Vb(35,"input",40),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().searchForm.customerBpName=t}))("keyup.enter",(function(){return c.Dc(i),c.hc().resetListing()})),c.Ub(),c.Ub(),c.Vb(36,"th"),c.Vb(37,"input",40),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().searchForm.rentalItemName=t}))("keyup.enter",(function(){return c.Dc(i),c.hc().resetListing()})),c.Ub(),c.Ub(),c.Vb(38,"th"),c.Vb(39,"p-calendar",11),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().searchForm.startDate=t}))("onSelect",(function(){return c.Dc(i),c.hc().resetListing()})),c.Ub(),c.Ub(),c.Vb(40,"th"),c.Vb(41,"p-calendar",11),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().searchForm.endDate=t}))("onSelect",(function(){return c.Dc(i),c.hc().resetListing()})),c.Ub(),c.Ub(),c.Vb(42,"th"),c.Vb(43,"select",41),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc().searchForm.status=t}))("change",(function(){return c.Dc(i),c.hc().resetListing()})),c.Vb(44,"option",42),c.Lc(45,"--SELECT--"),c.Ub(),c.Jc(46,vn,2,2,"option",43),c.Ub(),c.Ub(),c.Ub()}if(2&t){var r=c.hc();c.Cb(3),c.oc("ngIf",!r.storageService.get("isSingleBranchUser")),c.Cb(1),c.oc("pSortableColumn","overDueValue"),c.Cb(2),c.oc("field","overDueValue"),c.Cb(1),c.oc("pSortableColumn","documentNumber"),c.Cb(2),c.oc("field","documentNumber"),c.Cb(1),c.oc("pSortableColumn","customerBpName"),c.Cb(2),c.oc("field","customerBpName"),c.Cb(1),c.oc("pSortableColumn","itemName"),c.Cb(2),c.oc("field","rentalItemName"),c.Cb(1),c.oc("pSortableColumn","startDate"),c.Cb(2),c.oc("field","startDate"),c.Cb(1),c.oc("pSortableColumn","endDate"),c.Cb(2),c.oc("field","endDate"),c.Cb(1),c.oc("pSortableColumn","status"),c.Cb(2),c.oc("field","status"),c.Cb(6),c.oc("ngIf",!r.storageService.get("isSingleBranchUser")),c.Cb(3),c.oc("ngModel",r.searchForm.documentNumber),c.Cb(2),c.oc("ngModel",r.searchForm.customerBpName),c.Cb(2),c.oc("ngModel",r.searchForm.rentalItemName),c.Cb(2),c.oc("ngModel",r.searchForm.startDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),c.Cb(2),c.oc("ngModel",r.searchForm.endDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),c.Cb(2),c.oc("ngModel",r.searchForm.status),c.Cb(3),c.oc("ngForOf",r.statusList)}}function Sn(t,e){if(1&t&&(c.Vb(0,"td"),c.Lc(1),c.Ub()),2&t){var i=c.hc().$implicit;c.Cb(1),c.Mc(i.branchName)}}function Cn(t,e){if(1&t&&(c.Vb(0,"span",49),c.Lc(1),c.Ub()),2&t){var i=c.hc().$implicit;c.Cb(1),c.Nc("",i.overDueValue," Days")}}function In(t,e){if(1&t){var i=c.Wb();c.Vb(0,"tr"),c.Vb(1,"td"),c.Vb(2,"a",45),c.dc("click",(function(){c.Dc(i);var t=e.$implicit;return c.hc().redirectToEdit(t.id,t.isDraft)})),c.Qb(3,"i",46),c.Ub(),c.Ub(),c.Jc(4,Sn,2,1,"td",39),c.Vb(5,"td"),c.Jc(6,Cn,2,1,"span",47),c.Ub(),c.Vb(7,"td"),c.Lc(8),c.Ub(),c.Vb(9,"td"),c.Lc(10),c.Ub(),c.Vb(11,"td"),c.Lc(12),c.Ub(),c.Vb(13,"td"),c.Lc(14),c.Ub(),c.Vb(15,"td"),c.Lc(16),c.Ub(),c.Vb(17,"td"),c.Vb(18,"span",48),c.Lc(19),c.Ub(),c.Ub(),c.Ub()}if(2&t){var r=e.$implicit,n=c.hc();c.Cb(4),c.oc("ngIf",!n.storageService.get("isSingleBranchUser")),c.Cb(2),c.oc("ngIf",1==r.status&&r.overDueValue<0),c.Cb(2),c.Mc(r.documentNumber),c.Cb(2),c.Oc("",r.customerBpCode," - ",r.customerBpName,""),c.Cb(2),c.Oc(" ",r.rentalItemCode," - ",r.rentalItemName," "),c.Cb(2),c.Mc(r.startDate),c.Cb(2),c.Mc(r.endDate),c.Cb(2),c.oc("ngClass",n.appConstants.TXN_STATUS_COLOR_CLS[r.status]),c.Cb(1),c.Mc(r.statusName)}}var Un,Ln=((Un=function(){function t(e,i,r,n,a,o,c){_classCallCheck(this,t),this.utilsService=e,this.storageService=i,this.authGuardService=r,this.commonDataService=n,this.rentalWorklogDataService=a,this.branchUtilsService=o,this.worklogUtilsService=c,this.appConstants=s.h,this.screenAcl={},this.statusList=[],this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={fromDate:"",toDate:"",isDraft:!1,branchName:"",documentNumber:"",customerBpName:"",rentalItemName:"",startDate:"",endDate:"",status:1}}return _createClass(t,[{key:"ngOnInit",value:function(){if(this.screenAcl=this.authGuardService.getScreenAcl("25"),!this.screenAcl.view)return this.utilsService.showFailureMsg(s.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;this.getAutoSuggestionList("getRentalTransStatusList"),this.getAnalyticsData()}},{key:"getListing",value:function(t){var e=this,i=Object.assign({},this.searchForm);i.fromDate=this.utilsService.getBackendDateFormat(this.searchForm.fromDate),i.toDate=this.utilsService.getBackendDateFormat(this.searchForm.toDate),i.isDraft=i.isDraft?1:0,i.startDate=this.utilsService.getBackendDateFormat(this.searchForm.startDate),i.endDate=this.utilsService.getBackendDateFormat(this.searchForm.endDate);var r=this.utilsService.dataTableParameterFormation(t,i);this.listingProperties=r,this.rentalWorklogDataService.getList(r).subscribe((function(t){"SUCCESS"===t.status?(e.listing.data=t.results.searchResults,e.listing.totalRecords=t.results.totalRecords):e.utilsService.showFailureMsg(t)}))}},{key:"clearSearchForm",value:function(){this.searchForm={fromDate:"",toDate:"",isDraft:!1,branchName:"",documentNumber:"",customerBpName:"",rentalItemName:"",startDate:"",endDate:"",status:1},this.resetListing()}},{key:"resetListing",value:function(){this.dataTable.reset()}},{key:"redirectToEdit",value:function(t,e){this.utilsService.redirect("1"===e?"/branch/rental/worklog-edit-draft/worklog/"+this.utilsService.encrypt(t):"/branch/rental/worklog-edit/worklog/"+this.utilsService.encrypt(t))}},{key:"getAutoSuggestionList",value:function(t){var e=this;this.commonDataService.getAutoSuggestionList(t).subscribe((function(t){"SUCCESS"===t.status?e.statusList=t.results:e.utilsService.showFailureMsg(t)}))}},{key:"getAnalyticsData",value:function(){var t=this;this.rentalWorklogDataService.getAnalyticsData().subscribe((function(e){t.analyticsData=e.results}))}},{key:"downloadAsExcel",value:function(){var t=this;this.rentalWorklogDataService.downloadAsExcel(this.listingProperties).subscribe((function(e){"SUCCESS"===e.status?t.utilsService.externalRedirect(e.fileUrl):t.utilsService.showFailureMsg(e)}))}}]),t}()).\u0275fac=function(t){return new(t||Un)(c.Pb(s.g),c.Pb(s.f),c.Pb(s.a),c.Pb(u.l),c.Pb(u.T),c.Pb(d.a),c.Pb(g))},Un.\u0275cmp=c.Jb({type:Un,selectors:[["app-worklog-list"]],viewQuery:function(t,e){var i;1&t&&c.Pc(dn,!0),2&t&&c.zc(i=c.ec())&&(e.dataTable=i.first)},decls:37,vars:19,consts:[[1,"page-title"],[1,"btn-group"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],["routerLink","/branch/rental/worklog-add/worklog",1,"btn","btn-primary","btn-sm"],[1,"fa","fa-plus"],[1,"working-container"],[1,"analytics"],[1,"row"],["class","col-lg-2 col-md-3 col-sm-4 col-xs-12",4,"ngFor","ngForOf"],[1,"form-group","col-sm-3"],[1,"form-label"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","ngModelChange","onSelect"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","minDate","ngModelChange","onSelect"],[1,"form-group","col-sm-6","text-right"],[1,"checkbox","mt-3"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"checkmark"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-file-excel"],[1,"col-lg-2","col-md-3","col-sm-4","col-xs-12"],[1,"item"],[1,"name"],[1,"count",3,"ngClass"],[2,"width","80px"],["style","width:150px",3,"pSortableColumn",4,"ngIf"],[2,"width","100px",3,"pSortableColumn"],[3,"field"],[2,"width","200px",3,"pSortableColumn"],[2,"width","150px",3,"pSortableColumn"],[2,"width","120px",3,"pSortableColumn"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],[4,"ngIf"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"click"],[1,"fa","fa-edit"],["class","badge badge-danger",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"span"),c.Lc(2,"W"),c.Ub(),c.Lc(3,"orklog - List "),c.Vb(4,"div",1),c.Jc(5,hn,4,0,"button",2),c.Vb(6,"button",3),c.Qb(7,"i",4),c.Vb(8,"span"),c.Lc(9,"Add Worklog"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(10,"div",5),c.Vb(11,"div",6),c.Vb(12,"div",7),c.Jc(13,pn,6,3,"div",8),c.Ub(),c.Ub(),c.Vb(14,"div",7),c.Vb(15,"div",9),c.Vb(16,"label",10),c.Vb(17,"strong"),c.Lc(18,"From Date"),c.Ub(),c.Ub(),c.Vb(19,"p-calendar",11),c.dc("ngModelChange",(function(t){return e.searchForm.startDate=t}))("onSelect",(function(){return e.resetListing()})),c.Ub(),c.Ub(),c.Vb(20,"div",9),c.Vb(21,"label",10),c.Vb(22,"strong"),c.Lc(23,"To Date"),c.Ub(),c.Ub(),c.Vb(24,"p-calendar",12),c.dc("ngModelChange",(function(t){return e.searchForm.endDate=t}))("onSelect",(function(){return e.resetListing()})),c.Ub(),c.Ub(),c.Vb(25,"div",13),c.Vb(26,"label",14),c.Vb(27,"input",15),c.dc("ngModelChange",(function(t){return e.searchForm.isDraft=t}))("change",(function(){return e.resetListing()})),c.Ub(),c.Qb(28,"span",16),c.Lc(29," Show Only Drafts "),c.Ub(),c.Ub(),c.Ub(),c.Vb(30,"div",7),c.Vb(31,"div",17),c.Vb(32,"div",18),c.Vb(33,"p-table",19,20),c.dc("onLazyLoad",(function(t){return e.getListing(t)})),c.Jc(35,yn,47,31,"ng-template",21),c.Jc(36,In,20,11,"ng-template",22),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t&&(c.Cb(5),c.oc("ngIf",e.screenAcl.download),c.Cb(8),c.oc("ngForOf",e.analyticsData),c.Cb(6),c.oc("ngModel",e.searchForm.startDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),c.Cb(5),c.oc("ngModel",e.searchForm.endDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT)("minDate",e.searchForm.startDate),c.Cb(3),c.oc("ngModel",e.searchForm.isDraft),c.Cb(6),c.oc("value",e.listing.data)("lazy",!0)("paginator",!0)("rows",e.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",e.listing.totalRecords))},directives:[v.m,o.e,v.l,y.a,l.m,l.o,l.a,S.c,C.b,v.k,S.b,S.a,I.a,l.b,l.t,l.p,l.v],styles:[""]}),Un),Vn=["fileUpload"];function Dn(t,e){1&t&&(c.Tb(0),c.Lc(1,"Add"),c.Sb())}function Nn(t,e){1&t&&(c.Tb(0),c.Lc(1,"Edit"),c.Sb())}function Fn(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",6),c.dc("click",(function(){return c.Dc(i),c.hc(2).downloadPdf()})),c.Qb(1,"i",54),c.Vb(2,"span"),c.Lc(3,"Print"),c.Ub(),c.Ub()}}function En(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.documentNumberingId?i.myFormErrors.documentNumberingId:i.myFormErrors.documentNumber," ")}}function Tn(t,e){if(1&t&&(c.Vb(0,"div"),c.Lc(1),c.Vb(2,"small"),c.Lc(3),c.Ub(),c.Ub()),2&t){var i=e.item;c.Cb(1),c.Nc("",i.rentalItemName,"\xa0"),c.Cb(2),c.Nc("(",i.rentalItemCode,")")}}function xn(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.rentalItemId," ")}}function An(t,e){if(1&t&&(c.Vb(0,"div"),c.Lc(1),c.Vb(2,"small"),c.Lc(3),c.Ub(),c.Ub()),2&t){var i=e.item;c.Cb(1),c.Nc("",i.partnerName,"\xa0"),c.Cb(2),c.Nc("(",i.partnerCode,")")}}function kn(t,e){if(1&t){var i=c.Wb();c.Vb(0,"a",56),c.dc("click",(function(){return c.Dc(i),c.hc(2).bizRefreshFlag=!0})),c.Qb(1,"i",57),c.Ub()}}function Rn(t,e){if(1&t){var i=c.Wb();c.Vb(0,"a",58),c.dc("click",(function(){c.Dc(i);var t=c.hc(2);return t.getCustomerBpList(),t.bizRefreshFlag=!1})),c.Qb(1,"i",59),c.Ub()}}function Mn(t,e){if(1&t){var i=c.Wb();c.Vb(0,"span",60),c.dc("click",(function(){c.Dc(i);var t=c.hc(2);return t.popupExternalService.showDetailPopup("biz-partner",t.myFormData.customerBpId)})),c.Qb(1,"i",61),c.Ub()}}function wn(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.customerBpId," ")}}function On(t,e){if(1&t&&(c.Vb(0,"div"),c.Lc(1),c.Ub(),c.Vb(2,"small"),c.Lc(3),c.Ub()),2&t){var i=e.item;c.Cb(1),c.Mc(i.contactName),c.Cb(2),c.Oc("",i.contactTypeName," / ",i.contactNumber,"")}}function qn(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.startDate," ")}}function Pn(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.endDate," ")}}function Bn(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",null==i.myForm.errors?null:i.myForm.errors.invalidEndDate," ")}}function Kn(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.shiftStartHour?i.myFormErrors.shiftStartHour:i.myFormErrors.shiftStartMinute," ")}}function Jn(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.shiftEndHour?i.myFormErrors.shiftEndHour:i.myFormErrors.shiftEndMinute," ")}}function Qn(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",null==i.myForm.errors?null:i.myForm.errors.invalidShiftEndTime," ")}}function _n(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.documentDate," ")}}function Wn(t,e){if(1&t&&(c.Vb(0,"div"),c.Lc(1),c.Vb(2,"small"),c.Lc(3),c.Ub(),c.Ub()),2&t){var i=e.item;c.Cb(1),c.Nc("",i.employeeName,"\xa0"),c.Cb(2),c.Nc("(",i.empCode,")")}}function Hn(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.empId," ")}}function Gn(t,e){if(1&t&&(c.Vb(0,"option",62),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Mc(i.name)}}function zn(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc(2);c.Cb(1),c.Nc(" ",i.myFormErrors.status," ")}}function jn(t,e){1&t&&(c.Vb(0,"span",16),c.Lc(1,"*"),c.Ub())}function Yn(t,e){if(1&t){var i=c.Wb();c.Vb(0,"a",91),c.dc("click",(function(){c.Dc(i);var t=c.hc().index;return c.hc(3).removeItemFields(t)})),c.Qb(1,"i",92),c.Ub()}}function $n(t,e){if(1&t&&(c.Vb(0,"option",62),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Mc(i.name)}}function Zn(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc().index,r=c.hc(3);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].worklogItemTypeId," ")}}function Xn(t,e){if(1&t&&(c.Vb(0,"div"),c.Lc(1),c.Vb(2,"small"),c.Lc(3),c.Ub(),c.Ub()),2&t){var i=e.item;c.Cb(1),c.Nc("",i.employeeName,"\xa0"),c.Cb(2),c.Nc("(",i.empCode,")")}}function ta(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc().index,r=c.hc(3);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].startDateTime," ")}}function ea(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc().$implicit;c.Cb(1),c.Nc(" ",null==i.errors?null:i.errors.invalidItemStartDateTime," ")}}function ia(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc().index,r=c.hc(3);c.Cb(1),c.Nc(" ",r.myFormErrors.itemListArray[i].endDateTime," ")}}function ra(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc().$implicit;c.Cb(1),c.Nc(" ",null==i.errors?null:i.errors.invalidEndDateTime," ")}}function na(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc().$implicit;c.Cb(1),c.Nc(" ",null==i.errors?null:i.errors.invalidItemEndDateTime," ")}}function aa(t,e){if(1&t){var i=c.Wb();c.Vb(0,"tr",83),c.Vb(1,"td"),c.Jc(2,Yn,2,0,"a",84),c.Ub(),c.Vb(3,"td"),c.Lc(4),c.Ub(),c.Vb(5,"td"),c.Vb(6,"select",85),c.dc("change",(function(){c.Dc(i);var t=c.hc(3);return t.worklogUtilsService.overAllTimeCalc(t.myForm)})),c.Vb(7,"option",86),c.Lc(8,"--SELECT--"),c.Ub(),c.Jc(9,$n,2,2,"option",43),c.Ub(),c.Jc(10,Zn,2,1,"div",20),c.Ub(),c.Vb(11,"td"),c.Vb(12,"ng-select",87),c.Jc(13,Xn,4,2,"ng-template",22),c.Ub(),c.Ub(),c.Vb(14,"td"),c.Vb(15,"p-calendar",88),c.dc("onSelect",(function(){c.Dc(i);var t=e.index;return c.hc(3).onDateChange(t)})),c.Ub(),c.Jc(16,ta,2,1,"div",20),c.Jc(17,ea,2,1,"div",20),c.Ub(),c.Vb(18,"td"),c.Vb(19,"p-calendar",89),c.dc("onSelect",(function(){c.Dc(i);var t=e.index;return c.hc(3).onDateChange(t)})),c.Ub(),c.Jc(20,ia,2,1,"div",20),c.Jc(21,ra,2,1,"div",20),c.Jc(22,na,2,1,"div",20),c.Ub(),c.Vb(23,"td"),c.Lc(24),c.Ub(),c.Vb(25,"td"),c.Qb(26,"input",90),c.Ub(),c.Ub()}if(2&t){var r=e.$implicit,n=e.index,a=c.hc(3);c.oc("formGroupName",n),c.Cb(2),c.oc("ngIf",a.myFormData.itemListArray.length>1),c.Cb(2),c.Mc(n+1),c.Cb(5),c.oc("ngForOf",a.workLogItemList),c.Cb(1),c.oc("ngIf",a.myFormErrors.itemListArray[n].worklogItemTypeId),c.Cb(2),c.oc("items",a.employeeList)("multiple",!1),c.Cb(3),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",a.appConstants.PICKER_YEAR_RANGE)("dateFormat",a.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",a.myFormErrors.itemListArray[n].startDateTime),c.Cb(1),c.oc("ngIf",null==r.errors?null:r.errors.invalidItemStartDateTime),c.Cb(2),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",a.appConstants.PICKER_YEAR_RANGE)("dateFormat",a.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",a.myFormErrors.itemListArray[n].endDateTime),c.Cb(1),c.oc("ngIf",null==r.errors?null:r.errors.invalidEndDateTime),c.Cb(1),c.oc("ngIf",null==r.errors?null:r.errors.invalidItemEndDateTime),c.Cb(2),c.Mc(r.value.totalHours)}}function oa(t,e){if(1&t){var i=c.Wb();c.Vb(0,"div"),c.Vb(1,"div",63),c.Vb(2,"div",64),c.Lc(3," Select file \xa0 "),c.Qb(4,"input",65,66),c.Lc(6," \xa0 "),c.Vb(7,"button",6),c.dc("click",(function(){return c.Dc(i),c.hc(2).upload()})),c.Lc(8,"Upload"),c.Ub(),c.Lc(9," \xa0 "),c.Vb(10,"button",6),c.dc("click",(function(){return c.Dc(i),c.hc(2).utilsService.externalRedirect("http://sapservice.smileshopy.com/public/project_assets/Worklog_upload_template.xlsx")})),c.Lc(11," Download Template"),c.Ub(),c.Ub(),c.Ub(),c.Vb(12,"div",63),c.Vb(13,"div",67),c.Vb(14,"table",68),c.Vb(15,"thead"),c.Vb(16,"tr"),c.Vb(17,"th",69),c.Lc(18,"Action"),c.Ub(),c.Vb(19,"th",70),c.Lc(20,"#"),c.Ub(),c.Vb(21,"th",71),c.Lc(22,"Type"),c.Vb(23,"span",16),c.Lc(24,"*"),c.Ub(),c.Ub(),c.Vb(25,"th",72),c.Lc(26,"Resource"),c.Ub(),c.Vb(27,"th",72),c.Lc(28,"Start Date/Time"),c.Vb(29,"span",16),c.Lc(30,"*"),c.Ub(),c.Ub(),c.Vb(31,"th",72),c.Lc(32,"End Date/Time"),c.Vb(33,"span",16),c.Lc(34,"*"),c.Ub(),c.Ub(),c.Vb(35,"th",73),c.Lc(36,"Total Time"),c.Ub(),c.Vb(37,"th",73),c.Lc(38,"Remarks"),c.Ub(),c.Ub(),c.Ub(),c.Vb(39,"tbody",74),c.Jc(40,aa,27,21,"tr",75),c.Ub(),c.Vb(41,"tfoot"),c.Vb(42,"tr"),c.Vb(43,"td",76),c.Vb(44,"button",77),c.dc("click",(function(){return c.Dc(i),c.hc(2).addItemFields()})),c.Qb(45,"i",57),c.Vb(46,"span"),c.Lc(47,"Add Log"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(48,"div",13),c.Vb(49,"div",78),c.Qb(50,"div",79),c.Ub(),c.Vb(51,"div",34),c.Vb(52,"table",80),c.Vb(53,"tbody"),c.Vb(54,"tr"),c.Vb(55,"td",72),c.Vb(56,"strong"),c.Lc(57,"Total Working Hours"),c.Ub(),c.Ub(),c.Vb(58,"td",81),c.Vb(59,"strong"),c.Lc(60),c.Ub(),c.Ub(),c.Ub(),c.Vb(61,"tr"),c.Vb(62,"td"),c.Lc(63,"Total Breakdown Hours "),c.Ub(),c.Vb(64,"td",82),c.Lc(65),c.Ub(),c.Ub(),c.Vb(66,"tr"),c.Vb(67,"td"),c.Lc(68,"Total Overtime Hours"),c.Ub(),c.Vb(69,"td",82),c.Lc(70),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()}if(2&t){var r=c.hc(2);c.Cb(40),c.oc("ngForOf",r.myForm.controls.itemListArray.controls),c.Cb(20),c.Nc(" ",r.myForm.controls.totalWorkingHours.value," "),c.Cb(5),c.Nc(" ",r.myForm.controls.totalBreakDownHours.value," "),c.Cb(5),c.Nc(" ",r.myForm.controls.totalOverTimeHours.value," ")}}function sa(t,e){if(1&t){var i=c.Wb();c.Vb(0,"a",91),c.dc("click",(function(){c.Dc(i);var t=c.hc().index;return c.hc(4).removeItemFields(t)})),c.Qb(1,"i",92),c.Ub()}}function ca(t,e){if(1&t&&(c.Vb(0,"option",62),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i),c.Cb(1),c.Mc(i)}}function ua(t,e){if(1&t&&(c.Vb(0,"option",62),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i),c.Cb(1),c.Mc(i)}}function la(t,e){if(1&t&&(c.Vb(0,"option",62),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i),c.Cb(1),c.Mc(i)}}function ma(t,e){if(1&t&&(c.Vb(0,"option",62),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i),c.Cb(1),c.Mc(i)}}function ba(t,e){if(1&t&&(c.Vb(0,"div",55),c.Lc(1),c.Ub()),2&t){var i=c.hc().$implicit;c.Cb(1),c.Nc(" ",null==i.errors?null:i.errors.invalidShiftEndTime," ")}}function da(t,e){if(1&t&&(c.Vb(0,"option",62),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i),c.Cb(1),c.Mc(i)}}function ha(t,e){if(1&t&&(c.Vb(0,"option",62),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i),c.Cb(1),c.Mc(i)}}function pa(t,e){if(1&t&&(c.Vb(0,"option",62),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i),c.Cb(1),c.Mc(i)}}function fa(t,e){if(1&t&&(c.Vb(0,"option",62),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i),c.Cb(1),c.Mc(i)}}function ga(t,e){if(1&t){var i=c.Wb();c.Vb(0,"tr",83),c.Vb(1,"td"),c.Jc(2,sa,2,0,"a",84),c.Ub(),c.Vb(3,"td"),c.Lc(4),c.Ub(),c.Vb(5,"td"),c.Lc(6),c.Ub(),c.Vb(7,"td"),c.Lc(8),c.Ub(),c.Vb(9,"td"),c.Vb(10,"span"),c.Vb(11,"select",94),c.dc("change",(function(){c.Dc(i);var t=e.index;return c.hc(4).onShiftTimeChange(t)})),c.Jc(12,ca,2,2,"option",43),c.Ub(),c.Vb(13,"div"),c.Lc(14,":"),c.Ub(),c.Vb(15,"select",95),c.dc("change",(function(){c.Dc(i);var t=e.index;return c.hc(4).onShiftTimeChange(t)})),c.Jc(16,ua,2,2,"option",43),c.Ub(),c.Ub(),c.Ub(),c.Vb(17,"td"),c.Vb(18,"span"),c.Vb(19,"select",96),c.dc("change",(function(){c.Dc(i);var t=e.index;return c.hc(4).onShiftTimeChange(t)})),c.Jc(20,la,2,2,"option",43),c.Ub(),c.Vb(21,"div"),c.Lc(22,":"),c.Ub(),c.Vb(23,"select",97),c.dc("change",(function(){c.Dc(i);var t=e.index;return c.hc(4).onShiftTimeChange(t)})),c.Jc(24,ma,2,2,"option",43),c.Ub(),c.Ub(),c.Jc(25,ba,2,1,"div",20),c.Ub(),c.Vb(26,"td",82),c.Lc(27),c.Ub(),c.Vb(28,"td"),c.Vb(29,"span"),c.Vb(30,"select",98),c.dc("change",(function(){c.Dc(i);var t=e.index;return c.hc(4).onShiftTimeChange(t)})),c.Jc(31,da,2,2,"option",43),c.Ub(),c.Vb(32,"div"),c.Lc(33,":"),c.Ub(),c.Vb(34,"select",99),c.dc("change",(function(){c.Dc(i);var t=e.index;return c.hc(4).onShiftTimeChange(t)})),c.Jc(35,ha,2,2,"option",43),c.Ub(),c.Ub(),c.Ub(),c.Vb(36,"td"),c.Vb(37,"span"),c.Vb(38,"select",100),c.dc("change",(function(){c.Dc(i);var t=e.index;return c.hc(4).onShiftTimeChange(t)})),c.Jc(39,pa,2,2,"option",43),c.Ub(),c.Vb(40,"select",101),c.dc("change",(function(){c.Dc(i);var t=e.index;return c.hc(4).onShiftTimeChange(t)})),c.Jc(41,fa,2,2,"option",43),c.Ub(),c.Ub(),c.Ub(),c.Vb(42,"td",82),c.Lc(43),c.Ub(),c.Ub()}if(2&t){var r=e.$implicit,n=e.index,a=c.hc(4);c.oc("formGroupName",n),c.Cb(2),c.oc("ngIf",a.myFormData.itemListArray.length>1),c.Cb(2),c.Mc(n+1),c.Cb(2),c.Nc(" ",r.value.day," "),c.Cb(2),c.Nc(" ",r.value.date," "),c.Cb(4),c.oc("ngForOf",a.appConstants.HOURS_ARRAY),c.Cb(4),c.oc("ngForOf",a.appConstants.MINUTES_ARRAY),c.Cb(4),c.oc("ngForOf",a.appConstants.HOURS_ARRAY),c.Cb(4),c.oc("ngForOf",a.appConstants.MINUTES_ARRAY),c.Cb(1),c.oc("ngIf",null==r.errors?null:r.errors.invalidShiftEndTime),c.Cb(2),c.Mc(r.value.totalHours),c.Cb(4),c.oc("ngForOf",a.appConstants.HOURS_ARRAY),c.Cb(4),c.oc("ngForOf",a.appConstants.MINUTES_ARRAY),c.Cb(4),c.oc("ngForOf",a.appConstants.HOURS_ARRAY),c.Cb(2),c.oc("ngForOf",a.appConstants.MINUTES_ARRAY),c.Cb(2),c.Nc(" ",r.value.billableHour," ")}}function va(t,e){if(1&t&&(c.Tb(0),c.Jc(1,ga,44,16,"tr",75),c.Sb()),2&t){var i=c.hc(3);c.Cb(1),c.oc("ngForOf",i.myForm.controls.itemListArray.controls)}}function ya(t,e){if(1&t){var i=c.Wb();c.Vb(0,"div"),c.Vb(1,"div",63),c.Qb(2,"div",64),c.Ub(),c.Vb(3,"div",63),c.Vb(4,"div",67),c.Vb(5,"table",68),c.Vb(6,"thead"),c.Vb(7,"tr"),c.Vb(8,"th",69),c.Lc(9,"Action"),c.Ub(),c.Vb(10,"th",70),c.Lc(11,"#"),c.Ub(),c.Vb(12,"th",73),c.Lc(13,"Day"),c.Ub(),c.Vb(14,"th",72),c.Lc(15,"Date"),c.Ub(),c.Vb(16,"th",72),c.Lc(17,"Shift Start Time"),c.Vb(18,"span",16),c.Lc(19,"*"),c.Ub(),c.Ub(),c.Vb(20,"th",72),c.Lc(21,"Shift End Time"),c.Vb(22,"span",16),c.Lc(23,"*"),c.Ub(),c.Ub(),c.Vb(24,"th",73),c.Lc(25,"Total Hours"),c.Ub(),c.Vb(26,"th",72),c.Lc(27,"Breakdown Hours"),c.Ub(),c.Vb(28,"th",72),c.Lc(29,"Overtime Hours"),c.Ub(),c.Vb(30,"th",72),c.Lc(31,"Billable Hours"),c.Ub(),c.Ub(),c.Ub(),c.Vb(32,"tbody",74),c.Jc(33,va,2,1,"ng-container",0),c.Ub(),c.Vb(34,"tfoot"),c.Vb(35,"tr"),c.Vb(36,"td",93),c.Vb(37,"button",77),c.dc("click",(function(){return c.Dc(i),c.hc(2).generateWorklogFields()})),c.Lc(38," Generate"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(39,"div",13),c.Vb(40,"div",78),c.Qb(41,"div",79),c.Ub(),c.Vb(42,"div",34),c.Vb(43,"table",80),c.Vb(44,"tbody"),c.Vb(45,"tr"),c.Vb(46,"td",72),c.Vb(47,"strong"),c.Lc(48,"Total Working Hours"),c.Ub(),c.Ub(),c.Vb(49,"td",81),c.Vb(50,"strong"),c.Lc(51),c.Ub(),c.Ub(),c.Ub(),c.Vb(52,"tr"),c.Vb(53,"td"),c.Lc(54,"Total Breakdown Hours "),c.Ub(),c.Vb(55,"td",82),c.Lc(56),c.Ub(),c.Ub(),c.Vb(57,"tr"),c.Vb(58,"td"),c.Lc(59,"Total Overtime Hours"),c.Ub(),c.Vb(60,"td",82),c.Lc(61),c.Ub(),c.Ub(),c.Vb(62,"tr"),c.Vb(63,"td"),c.Lc(64,"Total Billable Hours"),c.Ub(),c.Vb(65,"td",82),c.Lc(66),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()}if(2&t){var r=c.hc(2);c.Cb(33),c.oc("ngIf",r.myForm.controls.itemListArray.controls.length>0),c.Cb(18),c.Nc(" ",r.myForm.controls.totalWorkingHours.value," "),c.Cb(5),c.Nc(" ",r.myForm.controls.totalBreakDownHours.value," "),c.Cb(5),c.Nc(" ",r.myForm.controls.totalOverTimeHours.value," "),c.Cb(5),c.Nc(" ",r.myForm.controls.totalBillableHours.value," ")}}function Sa(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",6),c.dc("click",(function(){return c.Dc(i),c.hc(2).saveUpdate()})),c.Qb(1,"i",102),c.Vb(2,"span"),c.Lc(3,"Save"),c.Ub(),c.Ub()}}function Ca(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",6),c.dc("click",(function(){return c.Dc(i),c.hc(2).addUpdateDraft()})),c.Qb(1,"i",102),c.Vb(2,"span"),c.Lc(3,"Save as Draft"),c.Ub(),c.Ub()}}function Ia(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",3),c.dc("click",(function(){return c.Dc(i),c.hc(2).clearForm()})),c.Qb(1,"i",103),c.Vb(2,"span"),c.Lc(3,"Clear"),c.Ub(),c.Ub()}}function Ua(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",6),c.dc("click",(function(){return c.Dc(i),c.hc(2).saveUpdate()})),c.Qb(1,"i",59),c.Vb(2,"span"),c.Lc(3,"Update"),c.Ub(),c.Ub()}}function La(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",3),c.dc("click",(function(){return c.Dc(i),c.hc(2).utilsService.redirect("/branch/rental/worklog-list")})),c.Qb(1,"i",104),c.Vb(2,"span"),c.Lc(3,"Cancel"),c.Ub(),c.Ub()}}function Va(t,e){1&t&&(c.Vb(0,"div",107),c.Vb(1,"span",108),c.Lc(2,"Note:"),c.Ub(),c.Lc(3," You are unauthorized to "),c.Vb(4,"strong"),c.Lc(5,"update"),c.Ub(),c.Lc(6," this transaction! "),c.Ub())}function Da(t,e){1&t&&(c.Vb(0,"div",107),c.Vb(1,"span",108),c.Lc(2,"Note:"),c.Ub(),c.Lc(3," Cannot update "),c.Vb(4,"strong"),c.Lc(5,"Cancelled"),c.Ub(),c.Lc(6," / "),c.Vb(7,"strong"),c.Lc(8,"Closed"),c.Ub(),c.Lc(9," transactions! "),c.Ub())}function Na(t,e){if(1&t&&(c.Vb(0,"div",105),c.Vb(1,"div"),c.Vb(2,"strong"),c.Lc(3,"Created By:"),c.Ub(),c.Lc(4),c.Ub(),c.Jc(5,Va,7,0,"div",106),c.Jc(6,Da,10,0,"div",106),c.Ub()),2&t){var i=c.hc(2);c.Cb(4),c.Nc(" ",i.txnKeys.editCreatedName,""),c.Cb(1),c.oc("ngIf",i.branchUtilsService.txnValidateBtn(i.myForm,i.txnKeys,"updateAclNote")),c.Cb(1),c.oc("ngIf",i.branchUtilsService.txnValidateBtn(i.myForm,i.txnKeys,"updateNote"))}}function Fa(t,e){1&t&&(c.Vb(0,"div",105),c.Vb(1,"span",108),c.Lc(2,"Note:"),c.Ub(),c.Lc(3," You are unauthorized to "),c.Vb(4,"strong"),c.Lc(5,"add"),c.Ub(),c.Lc(6," this transaction!. "),c.Ub())}function Ea(t,e){if(1&t){var i=c.Wb();c.Tb(0),c.Vb(1,"div",1),c.Vb(2,"span"),c.Lc(3),c.Ub(),c.Lc(4),c.Jc(5,Dn,2,0,"ng-container",0),c.Jc(6,Nn,2,0,"ng-container",0),c.Vb(7,"div",2),c.Vb(8,"button",3),c.dc("click",(function(){return c.Dc(i),c.hc().utilsService.goBack()})),c.Qb(9,"i",4),c.Vb(10,"span"),c.Lc(11,"Back"),c.Ub(),c.Ub(),c.Jc(12,Fn,4,0,"button",5),c.Vb(13,"button",6),c.dc("click",(function(){return c.Dc(i),c.hc().showTxnOptionsSidebar()})),c.Qb(14,"i",7),c.Vb(15,"span"),c.Lc(16,"More"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(17,"div",8),c.Vb(18,"div",9),c.Vb(19,"div",10),c.Qb(20,"i",11),c.Lc(21,"Basic Info "),c.Ub(),c.Vb(22,"div",12),c.Vb(23,"div",13),c.Vb(24,"div",14),c.Vb(25,"label",15),c.Lc(26,"Doc No"),c.Vb(27,"span",16),c.Lc(28,"*"),c.Ub(),c.Ub(),c.Vb(29,"div",13),c.Vb(30,"div",17),c.Vb(31,"ng-select",18),c.dc("change",(function(){c.Dc(i);var t=c.hc();return t.branchUtilsService.onDocumentNumberingChange(t.documentNumberingList,t.myForm)})),c.Ub(),c.Ub(),c.Vb(32,"div",17),c.Qb(33,"input",19),c.Ub(),c.Ub(),c.Jc(34,En,2,1,"div",20),c.Ub(),c.Vb(35,"div",14),c.Vb(36,"label",15),c.Lc(37,"Item Name"),c.Vb(38,"span",16),c.Lc(39,"*"),c.Ub(),c.Ub(),c.Vb(40,"ng-select",21),c.dc("search",(function(t){return c.Dc(i),c.hc().onItemSearch(t)}))("change",(function(){return c.Dc(i),c.hc().onItemChange()})),c.Jc(41,Tn,4,2,"ng-template",22),c.Ub(),c.Jc(42,xn,2,1,"div",20),c.Ub(),c.Vb(43,"div",14),c.Vb(44,"label",15),c.Lc(45,"Equipment card"),c.Vb(46,"span",16),c.Lc(47,"*"),c.Ub(),c.Ub(),c.Qb(48,"ng-select",23),c.Ub(),c.Vb(49,"div",14),c.Vb(50,"label",15),c.Lc(51,"Business Partner Name"),c.Vb(52,"span",16),c.Lc(53,"*"),c.Ub(),c.Ub(),c.Vb(54,"div",24),c.Vb(55,"ng-select",25),c.dc("focus",(function(){return c.Dc(i),c.hc().onCustomerNameChange()}))("change",(function(){c.Dc(i);var t=c.hc();return t.getCustomerBpContactList(),t.showTxnOptionsSidebar(!1)})),c.Jc(56,An,4,2,"ng-template",22),c.Ub(),c.Vb(57,"span"),c.Jc(58,kn,2,0,"a",26),c.Jc(59,Rn,2,0,"a",27),c.Ub(),c.Jc(60,Mn,2,0,"span",28),c.Ub(),c.Jc(61,wn,2,1,"div",20),c.Ub(),c.Vb(62,"div",14),c.Vb(63,"label",15),c.Lc(64,"Contact Person"),c.Ub(),c.Vb(65,"ng-select",29),c.Jc(66,On,4,3,"ng-template",22),c.Ub(),c.Ub(),c.Vb(67,"div",14),c.Vb(68,"label",15),c.Lc(69,"Reference No"),c.Ub(),c.Qb(70,"input",30),c.Ub(),c.Vb(71,"div",14),c.Vb(72,"label",15),c.Lc(73,"Start Date"),c.Vb(74,"span",16),c.Lc(75,"*"),c.Ub(),c.Ub(),c.Vb(76,"p-calendar",31),c.dc("onFocus",(function(){return c.Dc(i),c.hc().onBasicDateChange()})),c.Ub(),c.Jc(77,qn,2,1,"div",32),c.Ub(),c.Vb(78,"div",14),c.Vb(79,"label",15),c.Lc(80,"End Date"),c.Vb(81,"span",16),c.Lc(82,"*"),c.Ub(),c.Ub(),c.Vb(83,"p-calendar",33),c.dc("onFocus",(function(){return c.Dc(i),c.hc().onBasicDateChange()})),c.Ub(),c.Jc(84,Pn,2,1,"div",20),c.Jc(85,Bn,2,1,"div",20),c.Ub(),c.Vb(86,"div",14),c.Vb(87,"label",15),c.Lc(88,"Shift Start Time"),c.Vb(89,"span",16),c.Lc(90,"*"),c.Ub(),c.Ub(),c.Vb(91,"div",13),c.Vb(92,"div",34),c.Vb(93,"ng-select",35),c.dc("focus",(function(){return c.Dc(i),c.hc().onBasicDateChange()})),c.Ub(),c.Ub(),c.Vb(94,"div",34),c.Vb(95,"ng-select",36),c.dc("focus",(function(){return c.Dc(i),c.hc().onBasicDateChange()})),c.Ub(),c.Ub(),c.Ub(),c.Jc(96,Kn,2,1,"div",20),c.Ub(),c.Vb(97,"div",14),c.Vb(98,"label",15),c.Lc(99,"Shift End Time"),c.Vb(100,"span",16),c.Lc(101,"*"),c.Ub(),c.Ub(),c.Vb(102,"div",13),c.Vb(103,"div",34),c.Vb(104,"ng-select",37),c.dc("focus",(function(){return c.Dc(i),c.hc().onBasicDateChange()})),c.Ub(),c.Ub(),c.Vb(105,"div",34),c.Vb(106,"ng-select",38),c.dc("focus",(function(){return c.Dc(i),c.hc().onBasicDateChange()})),c.Ub(),c.Ub(),c.Ub(),c.Jc(107,Jn,2,1,"div",32),c.Jc(108,Qn,2,1,"div",20),c.Ub(),c.Vb(109,"div",14),c.Vb(110,"label",15),c.Lc(111,"Document Date"),c.Vb(112,"span",16),c.Lc(113,"*"),c.Ub(),c.Ub(),c.Qb(114,"p-calendar",39),c.Jc(115,_n,2,1,"div",20),c.Ub(),c.Vb(116,"div",14),c.Vb(117,"label",15),c.Lc(118,"Employee"),c.Ub(),c.Vb(119,"div",40),c.Vb(120,"ng-select",41),c.Jc(121,Wn,4,2,"ng-template",22),c.Ub(),c.Ub(),c.Jc(122,Hn,2,1,"div",20),c.Ub(),c.Vb(123,"div",14),c.Vb(124,"label",15),c.Lc(125,"Status"),c.Vb(126,"span",16),c.Lc(127,"*"),c.Ub(),c.Ub(),c.Vb(128,"select",42),c.Jc(129,Gn,2,2,"option",43),c.Ub(),c.Jc(130,zn,2,1,"div",20),c.Ub(),c.Vb(131,"div",14),c.Vb(132,"label",15),c.Lc(133,"Distribution Rules"),c.Jc(134,jn,2,0,"span",44),c.Ub(),c.Vb(135,"ng-select",45),c.dc("add",(function(){return c.Dc(i),c.hc().onDistRuleAdd()})),c.Ub(),c.Ub(),c.Vb(136,"div",46),c.Vb(137,"label",15),c.Lc(138,"Remarks"),c.Ub(),c.Qb(139,"textarea",47),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(140,"div",9),c.Vb(141,"div",10),c.Qb(142,"i",11),c.Lc(143,"Content Info "),c.Ub(),c.Jc(144,oa,71,4,"div",0),c.Jc(145,ya,67,5,"div",0),c.Ub(),c.Qb(146,"app-udf-viewer",48),c.Vb(147,"app-attachments",49),c.dc("doSuccess",(function(){return c.Dc(i),c.hc().utilsService.redirect("/branch/rental/worklog-list")})),c.Ub(),c.Vb(148,"div",50),c.Jc(149,Sa,4,0,"button",5),c.Jc(150,Ca,4,0,"button",5),c.Jc(151,Ia,4,0,"button",51),c.Jc(152,Ua,4,0,"button",5),c.Jc(153,La,4,0,"button",52),c.Ub(),c.Jc(154,Na,7,3,"div",53),c.Jc(155,Fa,7,0,"div",53),c.Ub(),c.Qb(156,"app-spi-txn-options"),c.Sb()}if(2&t){var r=c.hc();c.Cb(3),c.Mc(r.branchUtilsService.txnGetTitle(r.screenAttributes.title,!0)),c.Cb(1),c.Nc("",r.branchUtilsService.txnGetTitle(r.screenAttributes.title)," - "),c.Cb(1),c.oc("ngIf",!r.txnKeys.inputEditId),c.Cb(1),c.oc("ngIf",r.txnKeys.inputEditId),c.Cb(6),c.oc("ngIf",r.txnKeys.inputEditId),c.Cb(5),c.oc("formGroup",r.myForm),c.Cb(14),c.oc("items",r.documentNumberingList),c.Cb(3),c.oc("ngIf",r.myFormErrors.documentNumberingId||r.myFormErrors.documentNumber),c.Cb(6),c.oc("items",r.itemList)("multiple",!1)("virtualScroll",!0),c.Cb(2),c.oc("ngIf",r.myFormErrors.rentalItemId),c.Cb(6),c.oc("items",r.myFormData.equipmentList)("multiple",!1),c.Cb(7),c.oc("items",r.businessPartnerList)("multiple",!1),c.Cb(3),c.oc("ngIf",!r.bizRefreshFlag),c.Cb(1),c.oc("ngIf",r.bizRefreshFlag),c.Cb(1),c.oc("ngIf",r.myFormData.customerBpId),c.Cb(1),c.oc("ngIf",r.myFormErrors.customerBpId),c.Cb(4),c.oc("items",r.bpContactList)("multiple",!1),c.Cb(11),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",r.myFormErrors.startDate),c.Cb(6),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",r.myFormErrors.endDate),c.Cb(1),c.oc("ngIf",null==r.myForm.errors?null:r.myForm.errors.invalidEndDate),c.Cb(8),c.oc("items",r.appConstants.HOURS_ARRAY)("multiple",!1)("clearable",!1),c.Cb(2),c.oc("items",r.appConstants.MINUTES_ARRAY)("multiple",!1)("clearable",!1),c.Cb(1),c.oc("ngIf",r.myFormErrors.shiftStartHour||r.myFormErrors.shiftStartMinute),c.Cb(8),c.oc("items",r.appConstants.HOURS_ARRAY)("multiple",!1),c.Cb(2),c.oc("items",r.appConstants.MINUTES_ARRAY)("multiple",!1),c.Cb(1),c.oc("ngIf",r.myFormErrors.shiftEndHour||r.myFormErrors.shiftEndMinute),c.Cb(1),c.oc("ngIf",null==r.myForm.errors?null:r.myForm.errors.invalidShiftEndTime),c.Cb(6),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",r.myFormErrors.documentDate),c.Cb(5),c.oc("items",r.employeeList)("multiple",!1),c.Cb(2),c.oc("ngIf",r.myFormErrors.empId),c.Cb(7),c.oc("ngForOf",r.rentalStatusList),c.Cb(1),c.oc("ngIf",r.myFormErrors.status),c.Cb(4),c.oc("ngIf",r.storageService.get("distRulesMode")),c.Cb(1),c.oc("items",r.distributionList)("multiple",!0),c.Cb(9),c.oc("ngIf","1"===r.storageService.get("worklogType")),c.Cb(1),c.oc("ngIf","2"===r.storageService.get("worklogType")),c.Cb(1),c.oc("type","RENTAL_WORKLOG"),c.Cb(1),c.oc("type","RENTAL_WORKLOG"),c.Cb(2),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"save")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"saveDraft")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"clear")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"update")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"cancel")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"editMsgContainer")),c.Cb(1),c.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm,r.txnKeys,"addAclNote"))}}var Ta,xa=((Ta=function(){function t(e,i,r,n,a,o,c,u,l,m,b,d,h){_classCallCheck(this,t),this.utilsService=e,this.storageService=i,this.authGuardService=r,this.worklogUtilsService=n,this.commonDataService=a,this.branchUtilsService=o,this.formBuilder=c,this.activatedRoute=u,this.popupExternalService=l,this.rentalWorklogDataService=m,this.rentalOrderDataService=b,this.modalService=d,this.changeDetectorRef=h,this.appConstants=s.h,this.screenAcl={},this.txnKeys={inputScreenName:"",inputEditId:"",inputDraftId:"",inputCopyIds:"",inputCopyScreenName:"",inputDuplicateId:"",editStatusId:"",editCreatedName:""},this.screenAttributes={},this.rentalStatusList=[],this.bpContactList=[],this.businessPartnerList=[],this.employeeList=[],this.documentNumberingList=[],this.itemList=[],this.bizRefreshFlag=!1,this.workLogItemList=[],this.distributionList=[],this.myFormData={},this.myFormErrors={},this.myFormItemErrors={worklogItemTypeId:"",startDateTime:"",endDateTime:""},this.myFormValidationMsgs={}}return _createClass(t,[{key:"ngOnInit",value:function(){this.initializeSubscriptions()}},{key:"ngAfterViewInit",value:function(){this.attachmentsComponent&&this.udfViewerComponent&&(this.attachmentsComponent.loadAttachments(this.txnKeys.inputEditId||this.txnKeys.inputDraftId),this.udfViewerComponent.getFields(this.txnKeys.inputEditId||this.txnKeys.inputDuplicateId||this.txnKeys.inputDraftId),this.changeDetectorRef.detectChanges())}},{key:"initializeSubscriptions",value:function(){var t=this;this.activatedRoute.params.subscribe((function(e){if(!t.worklogUtilsService.checkScreenNameValid(e.screenName))return t.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),t.utilsService.goBack(),!1;if(t.screenAcl=t.authGuardService.getScreenAcl(t.branchUtilsService.screenAttributes[e.screenName].documentTypeId),!t.screenAcl.view)return t.utilsService.showFailureMsg(s.h.ACL_UNAUTHORIZED_MSG),t.utilsService.goBack(),!1;if(t.reInitializeGlobalVariables(),t.txnKeys.inputScreenName=e.screenName,t.transactionInitialization(),e.id&&(t.txnKeys.inputEditId=t.utilsService.decrypt(e.id),t.get()),e.copyScreenName&&e.copyId){var i=t.utilsService.decrypt(e.copyId);t.txnKeys.inputCopyIds=i.split(","),t.txnKeys.inputCopyScreenName=e.copyScreenName,t.copyFrom()}e.duplicateId&&(t.txnKeys.inputDuplicateId=t.utilsService.decrypt(e.duplicateId),t.getDuplicate()),e.draftId&&(t.txnKeys.inputDraftId=t.utilsService.decrypt(e.draftId),t.getDraft()),t.txnKeys.inputEditId||t.txnKeys.inputCopyIds||t.txnKeys.inputDuplicateId||t.txnKeys.inputDraftId||(t.branchUtilsService.getMasterDocumentNumbering(t.myForm,t.screenAttributes.documentTypeId).subscribe((function(e){t.documentNumberingList=e})),t.getCustomerBpList(),t.getEmployeeList(),t.getAutoSuggestionList("getRentalTransStatusList"),t.getAutoSuggestionList("getRentalItemList"),t.getAutoSuggestionList("getWorklogItemTypeList"),t.getDistributionList())})),this.inspectionItemDataSubscription=this.branchUtilsService.inspectionItemData.subscribe((function(e){t.copyWorklogItem(e)})),this.branchUtilsService.itemSearch.pipe(Object(P.a)(700),Object(B.a)(),Object(K.a)((function(e){t.getItemList(e)}))).subscribe()}},{key:"reInitializeGlobalVariables",value:function(){this.txnKeys.inputEditId="",this.txnKeys.inputScreenName="",this.txnKeys.inputCopyIds="",this.txnKeys.inputDuplicateId="",this.txnKeys.inputCopyScreenName="",this.txnKeys.editStatusId="",this.txnKeys.editCreatedName="",this.screenAttributes={},this.rentalStatusList=[],this.bpContactList=[],this.businessPartnerList=[],this.employeeList=[],this.documentNumberingList=[],this.itemList=[],this.bizRefreshFlag=!1,this.workLogItemList=[],this.distributionList=[]}},{key:"transactionInitialization",value:function(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.txnKeys.inputScreenName],this.myFormErrors=this.worklogUtilsService.getFormErrors(),this.myFormValidationMsgs=this.worklogUtilsService.getFormValMsgs(),this.initializeForm()}},{key:"initializeForm",value:function(){var t=this;this.myForm=this.worklogUtilsService.getFormMainFields(),this.myForm.valueChanges.subscribe((function(e){t.utilsService.validation(t.myForm,t.myFormErrors,t.myFormValidationMsgs),t.myFormData=t.myForm.getRawValue()})),this.myFormData=this.myForm.getRawValue()}},{key:"saveUpdate",value:function(){var t=this,e=this.myForm.getRawValue(),i=b.findIndex(this.documentNumberingList,{id:e.documentNumberingId});if("DRAFT"===this.documentNumberingList[i].documentNumberingType)return this.utilsService.showFailureMsg("Cannot Proceed - Select other than draft document numbering from Doc No field!"),!1;if(!this.myForm.valid||!this.udfViewerComponent.valid())return this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs,!0),this.udfViewerComponent.checkValidations(),!1;if(0===this.myFormData.itemListArray.length)return this.utilsService.showFailureMsg("Cannot save / update - No item added!"),!1;var r,n=this.worklogUtilsService.getSaveUpdateDataFormation(this.myForm);n.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),n.isDraft=this.txnKeys.inputDraftId?"2":"0",this.txnKeys.inputEditId||this.txnKeys.inputDraftId?(r="update",n.id=this.txnKeys.inputEditId||this.txnKeys.inputDraftId):r="save",this.rentalWorklogDataService[r](n).subscribe((function(e){"SUCCESS"===e.status?(t.utilsService.showSuccessMsg(e),t.attachmentsComponent.save("save"===r?e.sId:t.txnKeys.inputEditId||t.txnKeys.inputDraftId)):t.utilsService.showFailureMsg(e)}))}},{key:"addUpdateDraft",value:function(){var t=this,e=this.myForm.getRawValue(),i=b.findIndex(this.documentNumberingList,{id:e.documentNumberingId});if("DRAFT"!==this.documentNumberingList[i].documentNumberingType)return this.utilsService.showFailureMsg("Cannot Proceed - Select draft document numbering from Doc No field!"),!1;if(0===e.itemListArray.length)return this.utilsService.showFailureMsg("Cannot save / update draft - No item added!"),!1;var r,n=this.worklogUtilsService.getSaveUpdateDataFormation(this.myForm);n.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),n.isDraft="1",this.txnKeys.inputDraftId?(r="update",n.id=this.txnKeys.inputDraftId):r="save",this.rentalWorklogDataService[r](n).subscribe((function(e){"SUCCESS"===e.status?(t.utilsService.showSuccessMsg(e),t.attachmentsComponent.save("save"===r?e.sId:t.txnKeys.inputDraftId)):t.utilsService.showFailureMsg(e)}))}},{key:"get",value:function(){var t=this;this.rentalWorklogDataService.get(this.txnKeys.inputEditId).subscribe((function(e){if("SUCCESS"===e.status){var i=e.results,r=t.worklogUtilsService.getMainFieldsWithData(i);t.myForm.patchValue(r),t.myForm.controls.documentNumberingId.disable(),t.myForm.controls.documentNumber.disable(),t.myForm.controls.rentalItemId.disable(),t.myForm.controls.rentalEquipmentId.disable(),t.myForm.controls.customerBpId.disable(),t.branchUtilsService.getMasterDocumentNumbering(t.myForm,t.branchUtilsService.screenAttributes.worklog.documentTypeId,"edit",i.documentNumberingInfo).subscribe((function(e){t.documentNumberingList=e})),t.getCustomerBpList(!0,i.customerBpInfo),t.getEmployeeList(i.empInfo),t.getAutoSuggestionList("getRentalTransStatusList",i.statusInfo),t.getItemList("",!0,i.rentalItemInfo),t.getAutoSuggestionList("getWorklogItemTypeList"),t.getDistributionList(i.distributionRulesInfo),i.itemListArray.forEach((function(e){"1"===t.storageService.get("worklogType")?t.addItemFields(e):t.addItemFieldsType2("","",e)})),"1"===t.storageService.get("worklogType")?t.worklogUtilsService.overAllTimeCalc(t.myForm):t.worklogUtilsService.timeCalc(t.myForm),t.txnKeys.editStatusId=i.status,t.txnKeys.editCreatedName=i.createdByInfo[0].employeeName}else t.utilsService.showFailureMsg(e)}))}},{key:"copyFrom",value:function(){var t=this;this.rentalOrderDataService.copy(this.txnKeys.inputCopyIds).subscribe((function(e){if("SUCCESS"===e.status){var i={backdrop:"static"};i.initialState={list:e.results,inputScreenName:t.txnKeys.inputScreenName},t.modalService.show(Fr,i)}else t.utilsService.showFailureMsg(e)}))}},{key:"copyWorklogItem",value:function(t){var e=this;delete t.documentNumberingId,delete t.documentNumber,delete t.documentNumberingInfo;var i=this.worklogUtilsService.getMainFieldsWithData(t);this.myForm.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId).subscribe((function(t){e.documentNumberingList=t})),this.myForm.controls.rentalItemId.disable(),this.myForm.controls.rentalEquipmentId.disable(),this.myForm.controls.customerBpId.disable(),this.getCustomerBpList(!0,t.customerBpInfo),this.getEmployeeList(t.empInfo),this.getAutoSuggestionList("getRentalTransStatusList",t.statusInfo),this.getItemList("",!0,t.rentalItemInfo),this.getAutoSuggestionList("getWorklogItemTypeList"),this.getDistributionList(t.distributionRulesInfo)}},{key:"getDraft",value:function(){var t=this;this.rentalWorklogDataService.get(this.txnKeys.inputDraftId).subscribe((function(e){if("SUCCESS"===e.status){var i=e.results,r=t.worklogUtilsService.getMainFieldsWithData(i);t.myForm.patchValue(r),t.branchUtilsService.getMasterDocumentNumbering(t.myForm,t.screenAttributes.documentTypeId,"draft",i.documentNumberingInfo).subscribe((function(e){t.documentNumberingList=e})),t.getCustomerBpList(!0,i.customerBpInfo),t.getEmployeeList(i.empInfo),t.getAutoSuggestionList("getRentalTransStatusList",i.statusInfo),t.getItemList("",!0,i.rentalItemInfo),t.getAutoSuggestionList("getWorklogItemTypeList"),t.getDistributionList(i.distributionRulesInfo),i.itemListArray.forEach((function(e){"1"===t.storageService.get("worklogType")?t.addItemFields(e):t.addItemFieldsType2("","",e)})),"1"===t.storageService.get("worklogType")?t.worklogUtilsService.overAllTimeCalc(t.myForm):t.worklogUtilsService.timeCalc(t.myForm),t.txnKeys.editStatusId=i.status,t.txnKeys.editCreatedName=i.createdByInfo[0].employeeName}else t.utilsService.showFailureMsg(e),t.utilsService.goBack()}))}},{key:"getDuplicate",value:function(){var t=this;this.rentalWorklogDataService.get(this.txnKeys.inputDuplicateId).subscribe((function(e){if("SUCCESS"===e.status){var i=e.results;delete i.documentNumberingId,delete i.documentNumber,delete i.documentNumberingInfo,delete i.status;var r=t.worklogUtilsService.getMainFieldsWithData(i);t.myForm.patchValue(r),t.branchUtilsService.getMasterDocumentNumbering(t.myForm,t.screenAttributes.documentTypeId).subscribe((function(e){t.documentNumberingList=e})),t.getCustomerBpList(!0,i.customerBpInfo),t.getEmployeeList(i.empInfo),t.getAutoSuggestionList("getRentalTransStatusList",i.statusInfo),t.getItemList("",!0,i.rentalItemInfo),t.getAutoSuggestionList("getWorklogItemTypeList"),t.getDistributionList(i.distributionRulesInfo),i.itemListArray.forEach((function(e){"1"===t.storageService.get("worklogType")?t.addItemFields(e):t.addItemFieldsType2("","",e)})),"1"===t.storageService.get("worklogType")?t.worklogUtilsService.overAllTimeCalc(t.myForm):t.worklogUtilsService.timeCalc(t.myForm)}else t.utilsService.showFailureMsg(e),t.utilsService.goBack()}))}},{key:"addItemFields",value:function(t){this.myForm.controls.itemListArray.push(this.initItemFields(t))}},{key:"initItemFields",value:function(t){var e=f(this.myFormData.endDate).add(1,"days"),i={totalHours:0,worklogItemTypeId:"",startDateTime:"",endDateTime:"",empId:null,startDate:this.utilsService.getFrontendDateFormat(this.myFormData.startDate,!0),endDate:this.utilsService.getFrontendDateFormat(e,!0),remarks:"",id:""};t&&(i.worklogItemTypeId=t.worklogItemTypeId,i.startDateTime=this.utilsService.getFrontendDateFormat(t.startDateTime,!0),i.endDateTime=this.utilsService.getFrontendDateFormat(t.endDateTime,!0),i.empId=this.utilsService.isEmpty(t.empId)?null:t.empId,i.startDate=this.utilsService.getFrontendDateFormat(this.myFormData.startDate,!0),i.endDate=this.utilsService.getFrontendDateFormat(e,!0),i.totalHours=t.totalHours,i.remarks=t.remarks,i.id=t.id),this.myFormErrors.itemListArray.push(this.myFormItemErrors);var r=this.formBuilder.group({totalHours:[i.totalHours],worklogItemTypeId:[i.worklogItemTypeId,[l.u.required]],startDateTime:[i.startDateTime,[l.u.required]],endDateTime:[i.endDateTime,[l.u.required]],empId:[i.empId],startDate:[i.startDate],endDate:[i.endDate],remarks:[i.remarks],id:[i.id]});return this.setItemCustomValidation(r),r}},{key:"setItemCustomValidation",value:function(t){var e=[];e.push(this.utilsService.startEndDateTimeValidator("startDate","startDateTime","invalidItemStartDateTime","should >= Basic info start Date")),e.push(this.utilsService.startEndDateTimeValidator("endDateTime","endDate","invalidItemEndDateTime","should =< Basic info end date")),e.push(this.utilsService.startEndDateTimeValidator("startDateTime","endDateTime","invalidEndDateTime","Should >= Start Date Time")),t.setValidators(l.u.compose(e)),t.updateValueAndValidity()}},{key:"generateWorklogFields",value:function(){var t=this;this.myFormData.startDate&&this.myFormData.endDate?this.myFormData.itemListArray.length>1?this.utilsService.confirmDialog("Confirmation","Regenerate leads to remove the items. Do you want to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe((function(e){e&&(t.myForm.controls.itemListArray.clear(),t.workLogGeneration())})):this.workLogGeneration():this.utilsService.showFailureMsg("Please add start date and end date to generate fields")}},{key:"workLogGeneration",value:function(){for(var t=f(this.myFormData.startDate,"YYYY-MM-DD"),e=f(this.myFormData.endDate,"YYYY-MM-DD").diff(t,"days"),i=0;i<=e;i++){var r=f(this.myFormData.startDate).add(i,"days"),n=r.day(),a=this.appConstants.WEEK_DAY[n],o=this.utilsService.getFrontendDateFormat(r);this.addItemFieldsType2(o,a),this.onShiftTimeChange(i)}}},{key:"addItemFieldsType2",value:function(t,e,i){this.myForm.controls.itemListArray.push(t?this.initItemFieldsType2(t,e):this.initItemFieldsType2("","",i))}},{key:"initItemFieldsType2",value:function(t,e,i){var r={day:e,date:t,shiftStartHour:this.myFormData.shiftStartHour?this.myFormData.shiftStartHour:"00",shiftStartMinute:this.myFormData.shiftStartMinute?this.myFormData.shiftStartMinute:"00",shiftEndHour:this.myFormData.shiftEndHour?this.myFormData.shiftEndHour:"00",shiftEndMinute:this.myFormData.shiftEndMinute?this.myFormData.shiftEndMinute:"00",totalHours:0,breakdownHour:"00",breakdownMinute:"00",overtimeHour:"00",overtimeMinute:"00",billableHour:0,id:""};i&&(r.day=i.entryDay,r.date=this.utilsService.getFrontendDateFormat(i.entryDate),r.shiftStartHour=i.shiftStartTime.substring(0,2),r.shiftStartMinute=i.shiftStartTime.substring(3,5),r.shiftEndHour=i.shiftEndTime.substring(0,2),r.shiftEndMinute=i.shiftEndTime.substring(3,5),r.totalHours=i.totalHours,r.breakdownHour=i.breakdownHours.substring(0,2),r.breakdownMinute=i.breakdownHours.substring(3,5),r.overtimeHour=i.overtimeHours.substring(0,2),r.overtimeMinute=i.overtimeHours.substring(3,5),r.billableHour=i.billableHours,r.id=i.id);var n=this.formBuilder.group({day:[r.day],date:[r.date],shiftStartHour:[r.shiftStartHour],shiftStartMinute:[r.shiftStartMinute],shiftEndHour:[r.shiftEndHour],shiftEndMinute:[r.shiftEndMinute],totalHours:[r.totalHours],breakdownHour:[r.breakdownHour],breakdownMinute:[r.breakdownMinute],overtimeHour:[r.overtimeHour],overtimeMinute:[r.overtimeMinute],billableHour:[r.billableHour],id:[r.id]});return this.setItemCustomValidationType2(n),n}},{key:"setItemCustomValidationType2",value:function(t){t.getRawValue();var e=[];e.push(this.utilsService.startEndTimeValidator("shiftStartHour","shiftStartMinute","shiftEndHour","shiftEndMinute","invalidShiftEndTime","Should >= shift start time")),t.setValidators(l.u.compose(e)),t.updateValueAndValidity()}},{key:"removeItemFields",value:function(t){var e=this.myFormData.itemListArray[t].id;if(e){var i=this.myFormData.deletedItemChildIds;i.push(e),this.myForm.patchValue({deletedItemChildIds:i})}this.myForm.controls.itemListArray.removeAt(t),"1"===this.storageService.get("worklogType")?this.worklogUtilsService.overAllTimeCalc(this.myForm):this.worklogUtilsService.timeCalc(this.myForm)}},{key:"clearForm",value:function(){this.initializeForm()}},{key:"onItemSearch",value:function(t){this.branchUtilsService.itemSearch.next(t)}},{key:"onItemChange",value:function(){var t=this;if(this.myFormData.rentalItemId){var e=b.findIndex(this.itemList,(function(e){return t.myFormData.rentalItemId===e.id}));this.myForm.patchValue({equipmentList:this.itemList[e].rentalEquipmentList})}else this.myForm.patchValue({equipmentList:[],rentalEquipmentId:null})}},{key:"onCustomerNameChange",value:function(){var t=this;if(this.myFormData.customerBpId){var e=this.myForm.controls.itemListArray;e.length>0&&this.utilsService.confirmDialog("Confirmation","If changing the customer leads to remove the items. Do you want to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe((function(i){i&&(t.myForm.patchValue({customerBpId:null}),e.clear())}))}}},{key:"onBasicDateChange",value:function(){var t=this;if(this.myFormData.startDate&&this.myFormData.endDate&&this.myFormData.shiftStartHour&&this.myFormData.shiftStartMinute&&this.myFormData.shiftEndHour&&this.myFormData.shiftEndMinute){var e=this.myForm.controls.itemListArray;e.length>0&&this.utilsService.confirmDialog("Confirmation","If start date and end date leads to remove the items. Do you want to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe((function(i){i&&(t.myFormData.itemListArray.forEach((function(e){if(e.id){var i=t.myFormData.deletedItemChildIds;i.push(e.id),t.myForm.patchValue({deletedItemChildIds:i})}})),e.clear())}))}}},{key:"onDateChange",value:function(t){if(this.myFormData.startDate&&this.myFormData.endDate){if(this.myFormData.itemListArray[t].startDateTime&&this.myFormData.itemListArray[t].endDateTime){var e=this.myForm.controls.itemListArray.at(t),i=f(this.myFormData.itemListArray[t].startDateTime,"YYYY-MM-DD HH:mm"),r=f(this.myFormData.itemListArray[t].endDateTime,"YYYY-MM-DD HH:mm"),n=this.worklogUtilsService.totalHoursCalc(i,r);e.patchValue({totalHours:n}),this.worklogUtilsService.overAllTimeCalc(this.myForm)}}else this.utilsService.showFailureMsg("Please select start date, end date to add start time and end time"),this.myForm.controls.itemListArray.at(t).patchValue({startDateTime:"",endDateTime:""})}},{key:"onShiftTimeChange",value:function(t){var e=this.myForm.controls.itemListArray.at(t),i="".concat(this.myFormData.itemListArray[t].shiftEndHour,":").concat(this.myFormData.itemListArray[t].shiftEndMinute),r=f("".concat(this.myFormData.itemListArray[t].shiftStartHour,":").concat(this.myFormData.itemListArray[t].shiftStartMinute),"HH:mm"),n=f(i,"HH:mm"),a=this.worklogUtilsService.totalHoursCalc(r,n),o=this.worklogUtilsService.totalBillableHour(a,"".concat(this.myFormData.itemListArray[t].breakdownHour,":").concat(this.myFormData.itemListArray[t].breakdownMinute),"".concat(this.myFormData.itemListArray[t].overtimeHour,":").concat(this.myFormData.itemListArray[t].overtimeMinute));e.patchValue({totalHours:a,billableHour:o}),this.worklogUtilsService.timeCalc(this.myForm)}},{key:"onDistRuleAdd",value:function(){this.branchUtilsService.distRulesCheckUnique(this.distributionList,this.myForm,"distributionRulesId")}},{key:"getItemList",value:function(t,e,i,r){var n=this;return e?(this.itemList=i.map((function(t){return t.searchText=t.rentalItemName+" - "+t.rentalItemCode,t})),!1):!t.term||t.term.length<3?(this.itemList=[],!1):void this.commonDataService.getRentalItemList(t.term).subscribe((function(t){"SUCCESS"===t.status?n.itemList=t.results.map((function(t){return t.searchText=t.rentalItemName+" - "+t.rentalItemCode,t})):n.utilsService.showFailureMsg(t)}))}},{key:"getEmployeeList",value:function(t){var e=this;this.commonDataService.getEmployeeList(1).subscribe((function(i){"SUCCESS"===i.status?(e.utilsService.ifNotPushToList(i.results,t),e.employeeList=i.results.map((function(t){return t.searchText=t.employeeName+" - "+t.empCode,t}))):e.utilsService.showFailureMsg(i)}))}},{key:"getCustomerBpList",value:function(t,e){var i=this;this.commonDataService.getBusinessPartnerList([1,3]).subscribe((function(t){"SUCCESS"===t.status?(i.utilsService.ifNotPushToList(t.results,e),i.businessPartnerList=t.results.map((function(t){return t.searchText=t.partnerName+" - "+t.partnerCode,t}))):i.utilsService.showFailureMsg(t)}))}},{key:"getCustomerBpContactList",value:function(t,e){var i=this;this.bpContactList=[],this.branchUtilsService.getBpContactListAndSet(this.myForm,"customerBpContactsId","customerBpId",t,e).subscribe((function(t){i.bpContactList=t}))}},{key:"getAutoSuggestionList",value:function(t,e){var i=this;this.commonDataService.getAutoSuggestionList(t).subscribe((function(r){"SUCCESS"===r.status?(i.utilsService.ifNotPushToList(r.results,e),"getRentalTransStatusList"===t?(i.txnKeys.inputEditId||(r.results=r.results.filter((function(t){return"1"===t.id}))),i.txnKeys.inputEditId&&(r.results=r.results.filter((function(t){return"2"!==t.id}))),i.rentalStatusList=r.results):"getWorklogItemTypeList"===t&&(i.workLogItemList=r.results)):i.utilsService.showFailureMsg(r)}))}},{key:"getDistributionList",value:function(t){var e=this;this.commonDataService.getDistributionList(!0).subscribe((function(i){"SUCCESS"===i.status?(e.utilsService.ifNotPushToList(i.results,t),e.distributionList=i.results):e.utilsService.showFailureMsg(i)}))}},{key:"upload",value:function(){var t=this;if(!this.myFormData.startDate&&!this.myFormData.endDate)return this.utilsService.showFailureMsg("Please select start date and end date!"),!1;var e=this.fileUpload.nativeElement.files||this.fileUpload.srcElement.files;if(0===e.length)return this.utilsService.showFailureMsg("Please select the file!"),!1;0===this.myFormData.itemListArray.length?this.uploadContentInfo(e):this.utilsService.confirmDialog("Confirmation","Excel upload will append the items, Do you want to continue?").content.confirmation.subscribe((function(i){i&&t.uploadContentInfo(e)}))}},{key:"uploadContentInfo",value:function(t){var e=this;this.rentalWorklogDataService.upload(t).subscribe((function(t){"SUCCESS"===t.status?(e.formatExcelData(t.data).forEach((function(t){e.addItemFields(t)})),e.worklogUtilsService.overAllTimeCalc(e.myForm)):e.utilsService.showFailureMsg(t),e.fileUpload.nativeElement.value=""}))}},{key:"formatExcelData",value:function(t){var e=this,i=[];return t.forEach((function(t){var r={worklogItemTypeId:"Working"===t.type?"1":"Breakdown"===t.type?"2":"3",startDateTime:t.startDateTime?f(t.startDateTime,"DD-MMM-YY HH.mm").format(e.appConstants.FRONTEND_DATE_TIME_FORMAT):"",endDateTime:t.endDateTime?f(t.endDateTime,"DD-MMM-YY HH.mm").format(e.appConstants.FRONTEND_DATE_TIME_FORMAT):"",totalHours:"",empId:null},n=f(r.startDateTime,"YYYY-MM-DD HH:mm"),a=f(r.endDateTime,"YYYY-MM-DD HH:mm");r.totalHours=e.worklogUtilsService.totalHoursCalc(n,a),i.push(r)})),i}},{key:"showTxnOptionsSidebar",value:function(t){this.branchUtilsService.spiTxnOptions.next(!1===t?{show:!1}:{show:!0,spiName:this.branchUtilsService.spiTxnId.worklog,screenName:this.txnKeys.inputScreenName,editId:this.txnKeys.inputEditId,bpId:this.myFormData.customerBpId,status:this.myFormData.status})}},{key:"downloadPdf",value:function(){this.branchUtilsService.spiTxnOptionsDownloadPdf.next({spiName:this.branchUtilsService.spiTxnId.worklog,screenName:this.txnKeys.inputScreenName,id:this.txnKeys.inputEditId})}},{key:"onKeydownHandler",value:function(t){t.ctrlKey&&"s"===t.key.toLowerCase()&&(this.txnKeys.inputEditId&&"1"===this.txnKeys.editStatusId||!this.txnKeys.inputEditId)&&(this.saveUpdate(),t.preventDefault()),this.txnKeys.inputEditId&&t.ctrlKey&&-1!=="p".indexOf(t.key)&&(this.downloadPdf(),t.preventDefault())}},{key:"ngOnDestroy",value:function(){this.inspectionItemDataSubscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||Ta)(c.Pb(s.g),c.Pb(s.f),c.Pb(s.a),c.Pb(g),c.Pb(u.l),c.Pb(d.a),c.Pb(l.e),c.Pb(o.a),c.Pb(_.a),c.Pb(u.T),c.Pb(u.Q),c.Pb(W.b),c.Pb(c.h))},Ta.\u0275cmp=c.Jb({type:Ta,selectors:[["app-worklog-add-employee-add"]],viewQuery:function(t,e){var i;1&t&&(c.Pc(Vn,!0),c.Pc(J.a,!0),c.Pc(Q.a,!0)),2&t&&(c.zc(i=c.ec())&&(e.fileUpload=i.first),c.zc(i=c.ec())&&(e.udfViewerComponent=i.first),c.zc(i=c.ec())&&(e.attachmentsComponent=i.first))},hostBindings:function(t,e){1&t&&c.dc("keydown",(function(t){return e.onKeydownHandler(t)}),!1,c.Bc)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-plus-square"],[1,"working-container",3,"formGroup"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row"],[1,"form-group","col-sm-3"],[1,"form-label"],[1,"mandatory"],[1,"col-sm-6"],["formControlName","documentNumberingId","bindLabel","documentNumberingName","bindValue","id","placeholder","--SELECT--",3,"items","change"],["type","text","formControlName","documentNumber",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],["formControlName","rentalItemId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","virtualScroll","search","change"],["ng-option-tmp",""],["formControlName","rentalEquipmentId","bindLabel","equipmentName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],[1,"action-control"],["formControlName","customerBpId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple","focus","change"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["class","info-icon","container","body","tooltip","View Details",3,"click",4,"ngIf"],["formControlName","customerBpContactsId","bindLabel","contactName","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["type","text","formControlName","referenceNumber",1,"form-control","form-control-sm"],["formControlName","startDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onFocus"],["class"," validation-error",4,"ngIf"],["formControlName","endDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onFocus"],[1,"col-sm-5"],["formControlName","shiftStartHour","placeholder","--",3,"items","multiple","clearable","focus"],["formControlName","shiftStartMinute",3,"items","multiple","clearable","focus"],["formControlName","shiftEndHour","placeholder","--",3,"items","multiple","focus"],["formControlName","shiftEndMinute","placeholder","--",3,"items","multiple","focus"],["formControlName","documentDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],[1,"position-relative"],["formControlName","empId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["formControlName","status",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],["class","mandatory",4,"ngIf"],["formControlName","distributionRulesId","bindLabel","distributionName","bindValue","id","placeholder","--SELECT--","groupBy","dimensionDescription",3,"items","multiple","add"],[1,"form-group","col-sm-6"],["formControlName","remarks","rows","2",1,"form-control","form-control-sm"],[3,"type"],[3,"type","doSuccess"],[1,"btn-group","text-right"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class"," btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[1,"fa","fa-print"],[1,"validation-error"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click"],[1,"fa","fa-plus"],[3,"click"],[1,"fa","fa-redo-alt"],["container","body","tooltip","View Details",1,"info-icon",3,"click"],[1,"fa","fa-info-circle"],[3,"value"],[1,"box-body","box-table"],["colspan","12"],["type","file",1,"btn","btn-success","btn-sm"],["fileUpload",""],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],[2,"min-width","80px"],[2,"min-width","30px"],[2,"min-width","200px"],[2,"min-width","150px"],[2,"min-width","100px"],["formArrayName","itemListArray"],[3,"formGroupName",4,"ngFor","ngForOf"],["colspan","2"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"col-sm-7","text-center"],[1,"calc-img"],[1,"table","table-striped","table-bordered","calculation"],[1,"text-right",2,"min-width","150px"],[1,"text-right"],[3,"formGroupName"],["class","action red","placement","top","container","body","tooltip","Delete",3,"click",4,"ngIf"],["formControlName","worklogItemTypeId",1,"form-control","form-control-sm",3,"change"],["value",""],["formControlName","empId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["formControlName","startDateTime","showTime","true","hourFormat","24","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onSelect"],["formControlName","endDateTime","showTime","true","hourFormat","24","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onSelect"],["type","text","formControlName","remarks",1,"form-control","form-control-sm"],["placement","top","container","body","tooltip","Delete",1,"action","red",3,"click"],[1,"fa","fa-minus-circle"],["colspan","10"],["formControlName","shiftStartHour",1,"form-control","form-control-sm",3,"change"],["formControlName","shiftStartMinute",1,"form-control","form-control-sm",3,"change"],["formControlName","shiftEndHour",1,"form-control","form-control-sm",3,"change"],["formControlName","shiftEndMinute",1,"form-control","form-control-sm",3,"change"],["formControlName","breakdownHour",1,"form-control","form-control-sm",3,"change"],["formControlName","breakdownMinute",1,"form-control","form-control-sm",3,"change"],["formControlName","overtimeHour",1,"form-control","form-control-sm",3,"change"],["formControlName","overtimeMinute",1,"form-control","form-control-sm",3,"change"],[1,"fa","fa-save"],[1,"fa","fa-broom"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&c.Jc(0,Ea,157,70,"ng-container",0),2&t&&c.oc("ngIf",e.screenAcl.view)},directives:[v.m,l.n,l.i,H.a,l.m,l.g,l.b,H.c,y.a,l.t,v.l,J.a,Q.a,G.a,o.g,I.a,l.p,l.v,l.d,l.j],styles:["td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-flex}td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-right:8px}"]}),Ta),Aa=["dataTable"];function ka(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",15),c.dc("click",(function(){return c.Dc(i),c.hc(2).downloadAsExcel()})),c.Qb(1,"i",16),c.Vb(2,"span"),c.Lc(3,"Download as Excel"),c.Ub(),c.Ub()}}function Ra(t,e){1&t&&(c.Vb(0,"colgroup"),c.Qb(1,"col",17),c.Qb(2,"col",17),c.Qb(3,"col",18),c.Qb(4,"col",19),c.Qb(5,"col",19),c.Qb(6,"col",19),c.Ub())}function Ma(t,e){if(1&t&&(c.Vb(0,"option",29),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Nc(" ",i.name," ")}}function wa(t,e){if(1&t){var i=c.Wb();c.Vb(0,"tr"),c.Vb(1,"th",17),c.Lc(2,"Actions"),c.Ub(),c.Vb(3,"th"),c.Lc(4,"Item Image"),c.Ub(),c.Vb(5,"th",20),c.Lc(6,"Item Name"),c.Qb(7,"p-sortIcon",21),c.Ub(),c.Vb(8,"th",20),c.Lc(9,"Stock"),c.Qb(10,"p-sortIcon",21),c.Ub(),c.Vb(11,"th",20),c.Lc(12,"Item Group"),c.Qb(13,"p-sortIcon",21),c.Ub(),c.Vb(14,"th",20),c.Lc(15,"Status"),c.Qb(16,"p-sortIcon",21),c.Ub(),c.Ub(),c.Vb(17,"tr",22),c.Vb(18,"th"),c.Vb(19,"a",23),c.dc("click",(function(){return c.Dc(i),c.hc(2).clearSearchForm()})),c.Qb(20,"i",24),c.Lc(21,"Clear"),c.Ub(),c.Ub(),c.Qb(22,"th"),c.Vb(23,"th"),c.Vb(24,"input",25),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.rentalItemName=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Vb(25,"th"),c.Vb(26,"input",25),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.stock=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Vb(27,"th"),c.Vb(28,"input",25),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.itemGroupId=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Vb(29,"th"),c.Vb(30,"select",26),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.status=t}))("change",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Vb(31,"option",27),c.Lc(32,"--SELECT--"),c.Ub(),c.Jc(33,Ma,2,2,"option",28),c.Ub(),c.Ub(),c.Ub()}if(2&t){var r=c.hc(2);c.Cb(5),c.oc("pSortableColumn","rentalItemName"),c.Cb(2),c.oc("field","rentalItemName"),c.Cb(1),c.oc("pSortableColumn","stock"),c.Cb(2),c.oc("field","stock"),c.Cb(1),c.oc("pSortableColumn","itemGroupId"),c.Cb(2),c.oc("field","itemGroupId"),c.Cb(1),c.oc("pSortableColumn","status"),c.Cb(2),c.oc("field","status"),c.Cb(8),c.oc("ngModel",r.searchForm.rentalItemName),c.Cb(2),c.oc("ngModel",r.searchForm.stock),c.Cb(2),c.oc("ngModel",r.searchForm.itemGroupId),c.Cb(2),c.oc("ngModel",r.searchForm.status),c.Cb(3),c.oc("ngForOf",r.statusList)}}function Oa(t,e){if(1&t&&(c.Vb(0,"tr"),c.Vb(1,"td"),c.Vb(2,"a",30),c.Qb(3,"i",31),c.Ub(),c.Ub(),c.Vb(4,"td"),c.Qb(5,"img",32),c.Ub(),c.Vb(6,"td"),c.Lc(7),c.Ub(),c.Vb(8,"td"),c.Lc(9),c.Ub(),c.Vb(10,"td"),c.Lc(11),c.Ub(),c.Vb(12,"td"),c.Vb(13,"span",33),c.Lc(14),c.Ub(),c.Ub(),c.Ub()),2&t){var i=e.$implicit,r=c.hc(2);c.Cb(2),c.qc("routerLink","/branch/rental/rental-item-edit/",r.utilsService.encrypt(i.id),""),c.Cb(3),c.oc("src",i.rentalItemImgUrl?i.rentalItemImgUrl:r.appConstants.DEFAULT_IMAGE_ICON,c.Fc),c.Cb(2),c.Oc(" ",i.rentalItemCode," - ",i.rentalItemName," "),c.Cb(2),c.Mc(i.stock),c.Cb(2),c.Oc("",i.groupCode," - ",i.groupName,""),c.Cb(2),c.oc("ngClass",r.appConstants.TXN_STATUS_COLOR_CLS[i.status]),c.Cb(1),c.Mc(i.statusName)}}function qa(t,e){if(1&t){var i=c.Wb();c.Tb(0),c.Vb(1,"div",1),c.Vb(2,"span"),c.Lc(3,"R"),c.Ub(),c.Lc(4,"ental Item Master Data - List "),c.Vb(5,"div",2),c.Jc(6,ka,4,0,"button",3),c.Vb(7,"button",4),c.Qb(8,"i",5),c.Vb(9,"span"),c.Lc(10,"Add Rental Item"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(11,"div",6),c.Vb(12,"div",7),c.Vb(13,"div",8),c.Vb(14,"div",9),c.Vb(15,"p-table",10,11),c.dc("onLazyLoad",(function(t){return c.Dc(i),c.hc().getListing(t)})),c.Jc(17,Ra,7,0,"ng-template",12),c.Jc(18,wa,34,13,"ng-template",13),c.Jc(19,Oa,15,9,"ng-template",14),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Sb()}if(2&t){var r=c.hc();c.Cb(6),c.oc("ngIf",r.screenAcl.download),c.Cb(9),c.oc("value",r.listing.data)("lazy",!0)("paginator",!0)("rows",r.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",r.listing.totalRecords)}}var Pa,Ba=((Pa=function(){function t(e,i,r,n){_classCallCheck(this,t),this.utilsService=e,this.authGuardService=i,this.commonDataService=r,this.rentalItemDataService=n,this.appConstants=s.h,this.screenAcl={},this.statusList=[],this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={rentalItemName:"",stock:"",itemGroupId:"",status:1}}return _createClass(t,[{key:"ngOnInit",value:function(){if(this.screenAcl=this.authGuardService.getScreenAcl("35"),!this.screenAcl.view)return this.utilsService.showFailureMsg(s.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;this.getAutoSuggestionList("getCommonStatusList")}},{key:"getListing",value:function(t){var e=this,i=this.utilsService.dataTableParameterFormation(t,this.searchForm);this.listingProperties=i,this.rentalItemDataService.getList(i).subscribe((function(t){"SUCCESS"===t.status?(e.listing.data=t.results.searchResults,e.listing.totalRecords=t.results.totalRecords):e.utilsService.showFailureMsg(t)}))}},{key:"clearSearchForm",value:function(){this.searchForm={rentalItemName:"",stock:"",itemGroupId:"",status:1},this.resetListing()}},{key:"resetListing",value:function(){this.dataTable.reset()}},{key:"downloadAsExcel",value:function(){var t=this;this.rentalItemDataService.downloadAsExcel(this.listingProperties).subscribe((function(e){"SUCCESS"===e.status?t.utilsService.externalRedirect(e.fileUrl):t.utilsService.showFailureMsg(e)}))}},{key:"getAutoSuggestionList",value:function(t){var e=this;this.commonDataService.getAutoSuggestionList(t).subscribe((function(t){"SUCCESS"===t.status?e.statusList=t.results:e.utilsService.showFailureMsg(t)}))}}]),t}()).\u0275fac=function(t){return new(t||Pa)(c.Pb(s.g),c.Pb(s.a),c.Pb(u.l),c.Pb(u.P))},Pa.\u0275cmp=c.Jb({type:Pa,selectors:[["app-rental-item-list"]],viewQuery:function(t,e){var i;1&t&&c.Pc(Aa,!0),2&t&&c.zc(i=c.ec())&&(e.dataTable=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],["routerLink","/branch/rental/rental-item-add",1,"btn","btn-primary","btn-sm"],[1,"fa","fa-plus"],[1,"working-container"],[1,"row"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-file-excel"],[2,"width","100px"],[2,"width","200px"],[2,"width","120px"],[3,"pSortableColumn"],[3,"field"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"routerLink"],[1,"fa","fa-edit"],["height","20px",3,"src"],[1,"badge",3,"ngClass"]],template:function(t,e){1&t&&c.Jc(0,qa,20,6,"ng-container",0),2&t&&c.oc("ngIf",e.screenAcl.view)},directives:[v.m,o.e,S.c,C.b,S.b,S.a,I.a,l.b,l.m,l.o,l.t,l.p,l.v,v.l,o.g,v.k],styles:[""]}),Pa);function Ka(t,e){1&t&&(c.Tb(0),c.Lc(1,"Add"),c.Sb())}function Ja(t,e){1&t&&(c.Tb(0),c.Lc(1,"Edit"),c.Sb())}function Qa(t,e){if(1&t&&(c.Vb(0,"div",51),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.rentalItemCode," ")}}function _a(t,e){if(1&t&&(c.Vb(0,"div",51),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.rentalItemName," ")}}function Wa(t,e){if(1&t&&(c.Vb(0,"option",52),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Mc(i.groupName)}}function Ha(t,e){if(1&t&&(c.Vb(0,"div",51),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.itemGroupId," ")}}function Ga(t,e){if(1&t&&(c.Vb(0,"option",52),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Mc(i.uomName)}}function za(t,e){if(1&t&&(c.Vb(0,"div",51),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.uomId," ")}}function ja(t,e){if(1&t&&(c.Vb(0,"tr"),c.Vb(1,"td"),c.Lc(2),c.Ub(),c.Vb(3,"td"),c.Lc(4),c.Ub(),c.Vb(5,"td"),c.Lc(6),c.Ub(),c.Vb(7,"td"),c.Lc(8),c.Ub(),c.Vb(9,"td"),c.Lc(10," - "),c.Ub(),c.Vb(11,"td"),c.Lc(12),c.Ub(),c.Vb(13,"td"),c.Lc(14),c.Ub(),c.Vb(15,"td"),c.Lc(16),c.Ub(),c.Vb(17,"td"),c.Lc(18),c.Ub(),c.Vb(19,"td"),c.Lc(20),c.Ub(),c.Vb(21,"td"),c.Lc(22),c.Ub(),c.Ub()),2&t){var i=e.$implicit,r=e.index;c.Cb(2),c.Mc(r+1),c.Cb(2),c.Oc("",i.equipmentCode," - ",i.equipmentName,""),c.Cb(2),c.Nc(" ",i.mfrSerialNumber," "),c.Cb(2),c.Nc(" ",i.serialNumber," "),c.Cb(4),c.Nc(" ",i.ownership," "),c.Cb(2),c.Nc(" ",i.warehouseName," "),c.Cb(2),c.Nc(" ",i.rentalEquipmentStatusInfo[0].equipmentStatusName,""),c.Cb(2),c.Nc(" ",i.rentalStatusInfo[0].name," "),c.Cb(2),c.Nc(" ",null==i.documentTypeInfo[0]?null:i.documentTypeInfo[0].name," "),c.Cb(2),c.Nc(" ",null==i.documentInfo[0]?null:i.documentInfo[0].documentNumber," ")}}function Ya(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",53),c.dc("click",(function(){return c.Dc(i),c.hc().saveUpdate()})),c.Qb(1,"i",54),c.Vb(2,"span"),c.Lc(3,"Save"),c.Ub(),c.Ub()}}function $a(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",3),c.dc("click",(function(){return c.Dc(i),c.hc().clearForm()})),c.Qb(1,"i",55),c.Vb(2,"span"),c.Lc(3,"Clear"),c.Ub(),c.Ub()}}function Za(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",53),c.dc("click",(function(){return c.Dc(i),c.hc().saveUpdate()})),c.Qb(1,"i",56),c.Vb(2,"span"),c.Lc(3,"Update"),c.Ub(),c.Ub()}}function Xa(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",3),c.dc("click",(function(){return c.Dc(i),c.hc().utilsService.goBack()})),c.Qb(1,"i",57),c.Vb(2,"span"),c.Lc(3,"Cancel"),c.Ub(),c.Ub()}}function to(t,e){1&t&&(c.Vb(0,"div",58),c.Vb(1,"span",59),c.Lc(2,"Note:"),c.Ub(),c.Lc(3," You are unauthorized to "),c.Vb(4,"strong"),c.Lc(5,"update"),c.Ub(),c.Lc(6," this transaction! "),c.Ub())}function eo(t,e){1&t&&(c.Vb(0,"div",58),c.Vb(1,"span",59),c.Lc(2,"Note:"),c.Ub(),c.Lc(3," You are unauthorized to "),c.Vb(4,"strong"),c.Lc(5,"add"),c.Ub(),c.Lc(6," this transaction!. "),c.Ub())}var io,ro=function(){return{"max-height.px":300}},no=((io=function(){function t(e,i,r,n,a,o,c,u,l){_classCallCheck(this,t),this.utilsService=e,this.authGuardService=i,this.commonDataService=r,this.branchUtilsService=n,this.formBuilder=a,this.activatedRoute=o,this.rentalItemDataService=c,this.modalService=u,this.popupExternalService=l,this.appConstants=s.h,this.screenAcl={},this.uomList=[],this.itemGroupList=[],this.equipmentDetails=[],this.hsnList=[],this.photoUrl="",this.myFormData={},this.myFormErrors={rentalItemCode:"",rentalItemName:"",itemGroupId:"",uomId:""},this.myFormValidationMsgs={rentalItemCode:{required:"Item Code is required"},rentalItemName:{required:"Item Name is required"},itemGroupId:{required:"Item Group is required"},uomId:{required:"UOM is required"}}}return _createClass(t,[{key:"ngOnInit",value:function(){if(this.screenAcl=this.authGuardService.getScreenAcl("35"),!this.screenAcl.view)return this.utilsService.showFailureMsg(s.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;this.initializeForm(),this.initializeSubscriptions()}},{key:"ngAfterViewInit",value:function(){this.attachmentsComponent.loadAttachments(this.inputEditId)}},{key:"initializeSubscriptions",value:function(){var t=this;this.activatedRoute.params.subscribe((function(e){e.id?(t.inputEditId=t.utilsService.decrypt(e.id),t.get(),t.getEquipmentDetails()):(t.getAutoSuggestionList("getItemGroupList"),t.getAutoSuggestionList("getUomList"),t.getAutoSuggestionList("getHsnList"))})),this.branchUtilsService.actionSaveUpdate.subscribe((function(e){"item-group"===e.triggerType?t.getAutoSuggestionList("getItemGroupList"):"uom"===e.triggerType?t.getAutoSuggestionList("getUomList"):"hsn"===e.triggerType&&t.getAutoSuggestionList("getHsnList")}))}},{key:"initializeForm",value:function(){var t=this;this.myForm=this.formBuilder.group({rentalItemCode:["",[l.u.required]],rentalItemName:["",[l.u.required]],foreignName:[""],stock:[{value:"",disabled:!0}],itemGroupId:["",[l.u.required]],uomId:["",[l.u.required]],rentalItemImage:[""],hsnId:[null]}),this.myForm.valueChanges.subscribe((function(e){t.utilsService.validation(t.myForm,t.myFormErrors,t.myFormValidationMsgs),t.myFormData=t.myForm.getRawValue()})),this.myFormData=this.myForm.getRawValue()}},{key:"saveUpdate",value:function(){var t=this;if(!this.myForm.valid)return this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs,!0),!1;var e,i={rentalItemCode:this.myFormData.rentalItemCode,rentalItemName:this.myFormData.rentalItemName,foreignName:this.myFormData.foreignName,stock:this.myFormData.stock,itemGroupId:this.myFormData.itemGroupId,uomId:this.myFormData.uomId,rentalItemImage:this.myFormData.rentalItemImage,hsnId:this.myFormData.hsnId};this.inputEditId?(e="update",i.id=this.inputEditId):e="save",this.rentalItemDataService[e](i).subscribe((function(i){"SUCCESS"===i.status?(t.utilsService.showSuccessMsg(i),t.attachmentsComponent.save("save"===e?i.sId:t.inputEditId)):t.utilsService.showFailureMsg(i)}))}},{key:"get",value:function(){var t=this;this.rentalItemDataService.get(this.inputEditId).subscribe((function(e){if("SUCCESS"===e.status){var i=e.results[0];t.photoUrl=i.itemImgUrl,t.myForm.patchValue({rentalItemCode:i.rentalItemCode,rentalItemName:i.rentalItemName,foreignName:i.foreignName,stock:i.stock,itemGroupId:i.itemGroupId,uomId:i.uomId,rentalItemImage:i.rentalItemImage,hsnId:t.utilsService.isEmpty(i.hsnId)?null:i.hsnId}),t.getAutoSuggestionList("getItemGroupList",i.itemGroupInfo[0]),t.getAutoSuggestionList("getUomList",i.uomInfo[0]),t.getAutoSuggestionList("getHsnList",i.hsnInfo[0])}else t.utilsService.showFailureMsg(e)}))}},{key:"uploadImage",value:function(t){var e=this;this.rentalItemDataService.imageUpload(t.target.files||t.srcElement.files).subscribe((function(t){"SUCCESS"===t.status?(e.myForm.patchValue({rentalItemImage:t.results.fileName}),e.photoUrl=t.results.fullUrl):e.utilsService.showFailureMsg(t)}))}},{key:"clearForm",value:function(){this.initializeForm()}},{key:"getAutoSuggestionList",value:function(t,e){var i=this;this.commonDataService.getAutoSuggestionList(t).subscribe((function(r){"SUCCESS"===r.status?(i.utilsService.ifNotPushToList(r.results,e),"getItemGroupList"===t?i.itemGroupList=r.results:"getUomList"===t?i.uomList=r.results:"getHsnList"===t&&(i.hsnList=r.results.map((function(t){return t.hsnLabel=t.chapter+"."+t.heading+"."+t.subHeading,t})))):i.utilsService.showFailureMsg(r)}))}},{key:"getEquipmentDetails",value:function(){var t=this;this.commonDataService.getEquipmentDetailsByItemId(this.inputEditId).subscribe((function(e){"SUCCESS"===e.status?(t.utilsService.showSuccessMsg(e),t.equipmentDetails=e.results):t.utilsService.showFailureMsg(e)}))}}]),t}()).\u0275fac=function(t){return new(t||io)(c.Pb(s.g),c.Pb(s.a),c.Pb(u.l),c.Pb(d.a),c.Pb(l.e),c.Pb(o.a),c.Pb(u.P),c.Pb(W.b),c.Pb(_.a))},io.\u0275cmp=c.Jb({type:io,selectors:[["app-rental-item-add"]],viewQuery:function(t,e){var i;1&t&&c.Pc(Q.a,!0),2&t&&c.zc(i=c.ec())&&(e.attachmentsComponent=i.first)},decls:129,vars:22,consts:[[1,"page-title"],[4,"ngIf"],[1,"btn-group"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],[1,"working-container",3,"formGroup"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row"],[1,"col-sm-3"],[1,"form-group"],[1,"form-label"],[1,"image-container"],[3,"src"],["type","file",3,"change"],["type","hidden","formControlName","rentalItemImage"],[1,"small-text"],[1,"col-sm-9"],[1,"form-group","col-sm-4"],[1,"mandatory"],["type","text","formControlName","rentalItemCode",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],["type","text","formControlName","rentalItemName",1,"form-control","form-control-sm"],["type","text","formControlName","foreignName",1,"form-control","form-control-sm"],["type","text","formControlName","stock",1,"form-control","form-control-sm"],[1,"action-control"],["formControlName","itemGroupId",1,"form-control","form-control-sm"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"click"],[1,"fa","fa-plus"],["formControlName","uomId",1,"form-control","form-control-sm"],[1,"form-group","col-sm-3"],["formControlName","hsnId","bindLabel","hsnCode","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],[1,"box-body","box-table"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-striped","table-bordered"],[2,"min-width","30px"],[2,"min-width","150px"],[2,"min-width","130px"],[2,"min-width","120px"],[2,"min-width","100px"],[4,"ngFor","ngForOf"],[3,"type","doSuccess"],[1,"btn-group","text-right"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class"," btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[1,"validation-error"],[3,"value"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save"],[1,"fa","fa-broom"],[1,"fa","fa-redo-alt"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"span"),c.Lc(2,"R"),c.Ub(),c.Lc(3,"ental Item Master Data - "),c.Jc(4,Ka,2,0,"ng-container",1),c.Jc(5,Ja,2,0,"ng-container",1),c.Vb(6,"div",2),c.Vb(7,"button",3),c.dc("click",(function(){return e.utilsService.goBack()})),c.Qb(8,"i",4),c.Vb(9,"span"),c.Lc(10,"Back"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(11,"div",5),c.Vb(12,"div",6),c.Vb(13,"div",7),c.Qb(14,"i",8),c.Lc(15,"Basic Info "),c.Ub(),c.Vb(16,"div",9),c.Vb(17,"div",10),c.Vb(18,"div",11),c.Vb(19,"div",12),c.Vb(20,"label",13),c.Lc(21,"Item Image"),c.Ub(),c.Vb(22,"div",14),c.Qb(23,"img",15),c.Ub(),c.Vb(24,"input",16),c.dc("change",(function(t){return e.uploadImage(t)})),c.Ub(),c.Qb(25,"input",17),c.Vb(26,"div",18),c.Lc(27,"Only jpg, png are allowed. Maximum 2 Mb"),c.Ub(),c.Ub(),c.Ub(),c.Vb(28,"div",19),c.Vb(29,"div",10),c.Vb(30,"div",20),c.Vb(31,"label",13),c.Lc(32,"Item Code"),c.Vb(33,"span",21),c.Lc(34,"*"),c.Ub(),c.Ub(),c.Qb(35,"input",22),c.Jc(36,Qa,2,1,"div",23),c.Ub(),c.Vb(37,"div",20),c.Vb(38,"label",13),c.Lc(39,"Item Name"),c.Vb(40,"span",21),c.Lc(41,"*"),c.Ub(),c.Ub(),c.Qb(42,"input",24),c.Jc(43,_a,2,1,"div",23),c.Ub(),c.Vb(44,"div",20),c.Vb(45,"label",13),c.Lc(46,"Foreign Name"),c.Ub(),c.Qb(47,"input",25),c.Ub(),c.Vb(48,"div",20),c.Vb(49,"label",13),c.Lc(50,"Stock"),c.Ub(),c.Qb(51,"input",26),c.Ub(),c.Vb(52,"div",20),c.Vb(53,"label",13),c.Lc(54,"Item Group"),c.Vb(55,"span",21),c.Lc(56,"*"),c.Ub(),c.Ub(),c.Vb(57,"div",27),c.Vb(58,"select",28),c.Vb(59,"option",29),c.Lc(60,"--SELECT--"),c.Ub(),c.Jc(61,Wa,2,2,"option",30),c.Ub(),c.Vb(62,"a",31),c.dc("click",(function(){return e.popupExternalService.showAddPopup("item-group")})),c.Qb(63,"i",32),c.Ub(),c.Jc(64,Ha,2,1,"div",23),c.Ub(),c.Ub(),c.Vb(65,"div",20),c.Vb(66,"label",13),c.Lc(67,"UOM "),c.Vb(68,"span",18),c.Lc(69,"(Unit of Measure)"),c.Ub(),c.Vb(70,"span",21),c.Lc(71,"*"),c.Ub(),c.Ub(),c.Vb(72,"div",27),c.Vb(73,"select",33),c.Vb(74,"option",29),c.Lc(75,"--SELECT--"),c.Ub(),c.Jc(76,Ga,2,2,"option",30),c.Ub(),c.Vb(77,"a",31),c.dc("click",(function(){return e.popupExternalService.showAddPopup("uom")})),c.Qb(78,"i",32),c.Ub(),c.Jc(79,za,2,1,"div",23),c.Ub(),c.Ub(),c.Vb(80,"div",34),c.Vb(81,"label",13),c.Lc(82,"HSN"),c.Ub(),c.Vb(83,"div",27),c.Qb(84,"ng-select",35),c.Vb(85,"span"),c.Vb(86,"a",31),c.dc("click",(function(){return e.popupExternalService.showAddPopup("hsn")})),c.Qb(87,"i",32),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(88,"div",6),c.Vb(89,"div",7),c.Qb(90,"i",8),c.Lc(91,"Equipment Info "),c.Ub(),c.Vb(92,"div",36),c.Vb(93,"div",37),c.Vb(94,"table",38),c.Vb(95,"thead"),c.Vb(96,"tr"),c.Vb(97,"th",39),c.Lc(98,"#"),c.Ub(),c.Vb(99,"th",40),c.Lc(100,"Equipment Name"),c.Ub(),c.Vb(101,"th",41),c.Lc(102,"Mfg Serial No"),c.Ub(),c.Vb(103,"th",42),c.Lc(104,"Serial No"),c.Ub(),c.Vb(105,"th",42),c.Lc(106,"General Details"),c.Ub(),c.Vb(107,"th",43),c.Lc(108,"Ownership"),c.Ub(),c.Vb(109,"th",41),c.Lc(110,"Warehouse"),c.Ub(),c.Vb(111,"th",42),c.Lc(112,"Equipment Status"),c.Ub(),c.Vb(113,"th",42),c.Lc(114,"Rental Status"),c.Ub(),c.Vb(115,"th",43),c.Lc(116,"Doc Type"),c.Ub(),c.Vb(117,"th",43),c.Lc(118,"Doc No"),c.Ub(),c.Ub(),c.Ub(),c.Vb(119,"tbody"),c.Jc(120,ja,23,11,"tr",44),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(121,"app-attachments",45),c.dc("doSuccess",(function(){return e.utilsService.redirect("/branch/rental/rental-item-list")})),c.Ub(),c.Vb(122,"div",46),c.Jc(123,Ya,4,0,"button",47),c.Jc(124,$a,4,0,"button",48),c.Jc(125,Za,4,0,"button",49),c.Jc(126,Xa,4,0,"button",48),c.Ub(),c.Jc(127,to,7,0,"div",50),c.Jc(128,eo,7,0,"div",50),c.Ub()),2&t&&(c.Cb(4),c.oc("ngIf",!e.inputEditId),c.Cb(1),c.oc("ngIf",e.inputEditId),c.Cb(6),c.oc("formGroup",e.myForm),c.Cb(12),c.oc("src",e.photoUrl?e.photoUrl:e.appConstants.DEFAULT_IMAGE_ICON,c.Fc),c.Cb(13),c.oc("ngIf",e.myFormErrors.rentalItemCode),c.Cb(7),c.oc("ngIf",e.myFormErrors.rentalItemName),c.Cb(18),c.oc("ngForOf",e.itemGroupList),c.Cb(3),c.oc("ngIf",e.myFormErrors.itemGroupId),c.Cb(12),c.oc("ngForOf",e.uomList),c.Cb(3),c.oc("ngIf",e.myFormErrors.uomId),c.Cb(5),c.oc("items",e.hsnList)("multiple",!1),c.Cb(9),c.oc("ngStyle",c.rc(21,ro)),c.Cb(27),c.oc("ngForOf",e.equipmentDetails),c.Cb(1),c.oc("type","MASTER_RENTAL_ITEM"),c.Cb(2),c.oc("ngIf",e.screenAcl.add&&!e.inputEditId),c.Cb(1),c.oc("ngIf",!e.inputEditId),c.Cb(1),c.oc("ngIf",e.screenAcl.update&&e.inputEditId),c.Cb(1),c.oc("ngIf",e.inputEditId),c.Cb(1),c.oc("ngIf",e.inputEditId&&!e.screenAcl.update),c.Cb(1),c.oc("ngIf",!e.inputEditId&&!e.screenAcl.add))},directives:[v.m,l.n,l.i,l.b,l.m,l.g,l.t,l.p,l.v,v.l,H.a,v.n,Q.a],styles:[""]}),io),ao=["dataTable"];function oo(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",14),c.dc("click",(function(){return c.Dc(i),c.hc(2).downloadAsExcel()})),c.Qb(1,"i",15),c.Vb(2,"span"),c.Lc(3,"Download as Excel"),c.Ub(),c.Ub()}}function so(t,e){if(1&t){var i=c.Wb();c.Vb(0,"tr"),c.Vb(1,"th",16),c.Lc(2,"Actions"),c.Ub(),c.Vb(3,"th",17),c.Lc(4,"Equipment Image"),c.Ub(),c.Vb(5,"th",18),c.Lc(6,"Equipment Name"),c.Qb(7,"p-sortIcon",19),c.Ub(),c.Vb(8,"th",20),c.Lc(9,"Ownership"),c.Qb(10,"p-sortIcon",19),c.Ub(),c.Vb(11,"th",20),c.Lc(12,"Warehouse"),c.Qb(13,"p-sortIcon",19),c.Ub(),c.Vb(14,"th",20),c.Lc(15,"Equipment Status"),c.Qb(16,"p-sortIcon",19),c.Ub(),c.Vb(17,"th",20),c.Lc(18,"Rental Status"),c.Qb(19,"p-sortIcon",19),c.Ub(),c.Ub(),c.Vb(20,"tr",21),c.Vb(21,"th"),c.Vb(22,"a",22),c.dc("click",(function(){return c.Dc(i),c.hc(2).clearSearchForm()})),c.Qb(23,"i",23),c.Lc(24,"Clear"),c.Ub(),c.Ub(),c.Qb(25,"th"),c.Vb(26,"th"),c.Vb(27,"input",24),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.equipmentName=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Vb(28,"th"),c.Vb(29,"input",24),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.ownershipName=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Vb(30,"th"),c.Vb(31,"input",24),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.warehouseName=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Vb(32,"th"),c.Vb(33,"input",24),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.equipmentStatusName=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Vb(34,"th"),c.Vb(35,"input",24),c.dc("ngModelChange",(function(t){return c.Dc(i),c.hc(2).searchForm.rentalStatusName=t}))("keyup.enter",(function(){return c.Dc(i),c.hc(2).resetListing()})),c.Ub(),c.Ub(),c.Ub()}if(2&t){var r=c.hc(2);c.Cb(5),c.oc("pSortableColumn","equipmentName"),c.Cb(2),c.oc("field","equipmentName"),c.Cb(1),c.oc("pSortableColumn","ownershipName"),c.Cb(2),c.oc("field","ownershipName"),c.Cb(1),c.oc("pSortableColumn","warehouseName"),c.Cb(2),c.oc("field","warehouseName"),c.Cb(1),c.oc("pSortableColumn","equipmentStatusName"),c.Cb(2),c.oc("field","equipmentStatusName"),c.Cb(1),c.oc("pSortableColumn","rentalStatusName"),c.Cb(2),c.oc("field","rentalStatusName"),c.Cb(8),c.oc("ngModel",r.searchForm.equipmentName),c.Cb(2),c.oc("ngModel",r.searchForm.ownershipName),c.Cb(2),c.oc("ngModel",r.searchForm.warehouseName),c.Cb(2),c.oc("ngModel",r.searchForm.equipmentStatusName),c.Cb(2),c.oc("ngModel",r.searchForm.rentalStatusName)}}function co(t,e){if(1&t){var i=c.Wb();c.Vb(0,"tr"),c.Vb(1,"td"),c.Vb(2,"a",25),c.dc("click",(function(){c.Dc(i);var t=e.$implicit;return c.hc(2).editItem(t.id)})),c.Qb(3,"i",26),c.Ub(),c.Ub(),c.Vb(4,"td"),c.Qb(5,"img",27),c.Ub(),c.Vb(6,"td"),c.Lc(7),c.Ub(),c.Vb(8,"td"),c.Lc(9),c.Ub(),c.Vb(10,"td"),c.Lc(11),c.Ub(),c.Vb(12,"td"),c.Lc(13),c.Ub(),c.Vb(14,"td"),c.Lc(15),c.Ub(),c.Ub()}if(2&t){var r=e.$implicit,n=c.hc(2);c.Cb(5),c.oc("src",r.rentalEquipmentImgUrl?r.rentalEquipmentImgUrl:n.appConstants.DEFAULT_IMAGE_ICON,c.Fc),c.Cb(2),c.Oc(" ",r.equipmentCode," - ",r.equipmentName," "),c.Cb(2),c.Mc(r.ownershipName),c.Cb(2),c.Mc(r.warehouseName),c.Cb(2),c.Mc(r.statusName),c.Cb(2),c.Mc(r.rentalStatusName)}}function uo(t,e){if(1&t){var i=c.Wb();c.Tb(0),c.Vb(1,"div",1),c.Vb(2,"span"),c.Lc(3,"E"),c.Ub(),c.Lc(4,"quipment Master Data - List "),c.Vb(5,"div",2),c.Jc(6,oo,4,0,"button",3),c.Vb(7,"button",4),c.Qb(8,"i",5),c.Vb(9,"span"),c.Lc(10,"Add Equipment"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(11,"div",6),c.Vb(12,"div",7),c.Vb(13,"div",8),c.Vb(14,"div",9),c.Vb(15,"p-table",10,11),c.dc("onLazyLoad",(function(t){return c.Dc(i),c.hc().getListing(t)})),c.Jc(17,so,36,15,"ng-template",12),c.Jc(18,co,16,7,"ng-template",13),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Sb()}if(2&t){var r=c.hc();c.Cb(6),c.oc("ngIf",r.screenAcl.download),c.Cb(9),c.oc("value",r.listing.data)("lazy",!0)("paginator",!0)("rows",r.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",r.listing.totalRecords)}}var lo,mo=((lo=function(){function t(e,i,r){_classCallCheck(this,t),this.utilsService=e,this.authGuardService=i,this.rentalEquipmentDataService=r,this.appConstants=s.h,this.screenAcl={},this.statusList=[],this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={equipmentName:"",ownershipName:"",warehouseName:"",equipmentStatusName:"",rentalStatusName:""}}return _createClass(t,[{key:"ngOnInit",value:function(){if(this.screenAcl=this.authGuardService.getScreenAcl("26"),!this.screenAcl.view)return this.utilsService.showFailureMsg(s.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1}},{key:"getListing",value:function(t){var e=this,i=this.utilsService.dataTableParameterFormation(t,this.searchForm);this.listingProperties=i,this.rentalEquipmentDataService.getList(i).subscribe((function(t){"SUCCESS"===t.status?(e.listing.data=t.results.searchResults,e.listing.totalRecords=t.results.totalRecords):e.utilsService.showFailureMsg(t)}))}},{key:"editItem",value:function(t){var e="/branch/rental/equipment-edit/"+this.utilsService.encrypt(t);this.utilsService.redirect(e)}},{key:"clearSearchForm",value:function(){this.searchForm={equipmentName:"",ownershipName:"",warehouseName:"",equipmentStatusName:"",rentalStatusName:""},this.resetListing()}},{key:"resetListing",value:function(){this.dataTable.reset()}},{key:"downloadAsExcel",value:function(){var t=this;this.rentalEquipmentDataService.downloadAsExcel(this.listingProperties).subscribe((function(e){"SUCCESS"===e.status?t.utilsService.externalRedirect(e.fileUrl):t.utilsService.showFailureMsg(e)}))}}]),t}()).\u0275fac=function(t){return new(t||lo)(c.Pb(s.g),c.Pb(s.a),c.Pb(u.N))},lo.\u0275cmp=c.Jb({type:lo,selectors:[["app-equipment-list"]],viewQuery:function(t,e){var i;1&t&&c.Pc(ao,!0),2&t&&c.zc(i=c.ec())&&(e.dataTable=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],["routerLink","/branch/rental/equipment-add",1,"btn","btn-primary","btn-sm"],[1,"fa","fa-plus"],[1,"working-container"],[1,"row"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-file-excel"],[2,"width","100px"],[2,"width","150px"],[2,"width","200px",3,"pSortableColumn"],[3,"field"],[2,"width","120px",3,"pSortableColumn"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"click"],[1,"fa","fa-edit"],["height","20px",3,"src"]],template:function(t,e){1&t&&c.Jc(0,uo,19,6,"ng-container",0),2&t&&c.oc("ngIf",e.screenAcl.view)},directives:[v.m,o.e,S.c,C.b,S.b,S.a,I.a,l.b,l.m,l.o],styles:[""]}),lo);function bo(t,e){if(1&t&&(c.Vb(0,"div",19),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors1.categoryName," ")}}function ho(t,e){if(1&t&&(c.Vb(0,"option",20),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Mc(i.name)}}function po(t,e){if(1&t&&(c.Vb(0,"div",19),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors1.status," ")}}var fo,go=((fo=function(){function t(e,i,r,n,a,o){_classCallCheck(this,t),this.utilsService=e,this.commonDataService=i,this.rentalEquipmentDataService=r,this.branchUtilsService=n,this.activeModal=a,this.formBuilder=o,this.statusList=[],this.myForm1Data={},this.myFormErrors1={categoryName:"",status:""},this.myFormValidationMsgs1={categoryName:{required:"Category Name is required"},status:{required:"Status is required"}}}return _createClass(t,[{key:"ngOnInit",value:function(){this.initializeForm1(),this.getAutoSuggestionList("getCommonStatusList")}},{key:"initializeForm1",value:function(){var t=this;this.myForm1=this.formBuilder.group({categoryName:["",[l.u.required]],status:["",[l.u.required]]}),this.myForm1.valueChanges.subscribe((function(e){t.utilsService.validation(t.myForm1,t.myFormErrors1,t.myFormValidationMsgs1),t.myForm1Data=t.myForm1.getRawValue()})),this.myForm1Data=this.myForm1.getRawValue()}},{key:"saveUpdate",value:function(){var t=this;if(!this.myForm1.valid)return this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1,!0),!1;this.rentalEquipmentDataService.addEquipmentCategory({categoryName:this.myForm1Data.categoryName,status:this.myForm1Data.status}).subscribe((function(e){"SUCCESS"===e.status?(t.utilsService.showSuccessMsg(e),t.branchUtilsService.actionSaveUpdate.next({triggerType:"equipment-category"}),t.activeModal.hide()):t.utilsService.showFailureMsg(e)}))}},{key:"getAutoSuggestionList",value:function(t){var e=this;this.commonDataService.getAutoSuggestionList(t).subscribe((function(i){"SUCCESS"===i.status?"getCommonStatusList"===t&&(e.statusList=i.results):e.utilsService.showFailureMsg(i)}))}}]),t}()).\u0275fac=function(t){return new(t||fo)(c.Pb(s.g),c.Pb(u.l),c.Pb(u.N),c.Pb(d.a),c.Pb(W.a),c.Pb(l.e))},fo.\u0275cmp=c.Jb({type:fo,selectors:[["app-vehicle-category-add-popup"]],decls:35,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],[1,"close",3,"click"],[1,"modal-body"],[1,"row",3,"formGroup"],[1,"form-group","col-sm-6"],[1,"form-label"],[1,"mandatory"],["type","text","formControlName","categoryName",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],["formControlName","status",1,"form-control","form-control-sm"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn-group","text-right"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-times"],[1,"validation-error"],[3,"value"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"h5",1),c.Lc(2,"Add Category"),c.Ub(),c.Vb(3,"button",2),c.dc("click",(function(){return e.activeModal.hide()})),c.Vb(4,"span"),c.Lc(5,"\xd7"),c.Ub(),c.Ub(),c.Ub(),c.Vb(6,"div",3),c.Vb(7,"div",4),c.Vb(8,"div",5),c.Vb(9,"label",6),c.Lc(10,"Category Name"),c.Vb(11,"span",7),c.Lc(12,"*"),c.Ub(),c.Ub(),c.Qb(13,"input",8),c.Jc(14,bo,2,1,"div",9),c.Ub(),c.Vb(15,"div",5),c.Vb(16,"label",6),c.Lc(17,"Status"),c.Vb(18,"span",7),c.Lc(19,"*"),c.Ub(),c.Ub(),c.Vb(20,"select",10),c.Vb(21,"option",11),c.Lc(22,"--SELECT--"),c.Ub(),c.Jc(23,ho,2,2,"option",12),c.Ub(),c.Jc(24,po,2,1,"div",9),c.Ub(),c.Ub(),c.Ub(),c.Vb(25,"div",13),c.Vb(26,"div",14),c.Vb(27,"button",15),c.dc("click",(function(){return e.saveUpdate()})),c.Qb(28,"i",16),c.Vb(29,"span"),c.Lc(30,"Save"),c.Ub(),c.Ub(),c.Vb(31,"button",17),c.dc("click",(function(){return e.activeModal.hide()})),c.Qb(32,"i",18),c.Vb(33,"span"),c.Lc(34,"Cancel"),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t&&(c.Cb(7),c.oc("formGroup",e.myForm1),c.Cb(7),c.oc("ngIf",e.myFormErrors1.categoryName),c.Cb(9),c.oc("ngForOf",e.statusList),c.Cb(1),c.oc("ngIf",e.myFormErrors1.status))},directives:[l.n,l.i,l.b,l.m,l.g,v.m,l.t,l.p,l.v,v.l],styles:[""]}),fo);function vo(t,e){1&t&&(c.Tb(0),c.Lc(1,"Add"),c.Sb())}function yo(t,e){1&t&&(c.Tb(0),c.Lc(1,"Edit"),c.Sb())}function So(t,e){if(1&t&&(c.Vb(0,"option",75),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Mc(i.rentalItemName)}}function Co(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.rentalItemId," ")}}function Io(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.equipmentCode," ")}}function Uo(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.equipmentName," ")}}function Lo(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.unitPrice," ")}}function Vo(t,e){if(1&t&&(c.Vb(0,"div"),c.Lc(1),c.Vb(2,"small"),c.Lc(3),c.Ub(),c.Ub(),c.Vb(4,"small"),c.Lc(5),c.Ub()),2&t){var i=e.item;c.Cb(1),c.Nc("",i.warehouseName,"\xa0"),c.Cb(2),c.Nc("(",i.warehouseCode,")"),c.Cb(2),c.Mc(i.branchName)}}function Do(t,e){if(1&t&&(c.Vb(0,"option",75),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Nc("",i.equipmentStatusName," ")}}function No(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.status," ")}}function Fo(t,e){if(1&t&&(c.Vb(0,"option",75),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Mc(i.name)}}function Eo(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.rentalStatus," ")}}function To(t,e){1&t&&(c.Vb(0,"div",20),c.Vb(1,"label",13),c.Lc(2,"Document Type / No"),c.Ub(),c.Vb(3,"div",10),c.Vb(4,"div",77),c.Qb(5,"input",78),c.Ub(),c.Vb(6,"div",79),c.Qb(7,"input",80),c.Ub(),c.Ub(),c.Ub())}function xo(t,e){if(1&t&&(c.Vb(0,"option",75),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Mc(i.name)}}function Ao(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.ownershipId," ")}}function ko(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.mfrSerialNumber," ")}}function Ro(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.serialNumber," ")}}function Mo(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.equipmentCategoryId," ")}}function wo(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.model," ")}}function Oo(t,e){if(1&t&&(c.Vb(0,"option",75),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Nc("",i.name," ")}}function qo(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.meterReadingId," ")}}function Po(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.assetValue," ")}}function Bo(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.purchaseDate," ")}}function Ko(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.warrantyDate," ")}}function Jo(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.yearOfManufacturing," ")}}function Qo(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.yearOfRegistered," ")}}function _o(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.yearOfPurchase," ")}}function Wo(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.chasisNumber," ")}}function Ho(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.manufacturer," ")}}function Go(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.regNumber," ")}}function zo(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.lastServiceReading," ")}}function jo(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.lastServiceDate," ")}}function Yo(t,e){if(1&t&&(c.Vb(0,"option",75),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Nc("",i.countryCode," ")}}function $o(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.countryId," ")}}function Zo(t,e){if(1&t&&(c.Vb(0,"option",75),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Nc("",i.stateName," ")}}function Xo(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.stateId," ")}}function ts(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.operatorName," ")}}function es(t,e){if(1&t&&(c.Vb(0,"option",75),c.Lc(1),c.Ub()),2&t){var i=e.$implicit;c.oc("value",i.id),c.Cb(1),c.Nc("",i.name," ")}}function is(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.maintenancePriorityId," ")}}function rs(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.insuranceExpiry," ")}}function ns(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.fitnessExpiry," ")}}function as(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.purchaseExpiry," ")}}function os(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.roadTaxExpiry," ")}}function ss(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.sapAssetNo," ")}}function cs(t,e){if(1&t&&(c.Vb(0,"div",76),c.Lc(1),c.Ub()),2&t){var i=c.hc();c.Cb(1),c.Nc(" ",i.myFormErrors.assetNo," ")}}function us(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",81),c.dc("click",(function(){return c.Dc(i),c.hc().saveUpdate()})),c.Qb(1,"i",82),c.Vb(2,"span"),c.Lc(3,"Save"),c.Ub(),c.Ub()}}function ls(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",3),c.dc("click",(function(){return c.Dc(i),c.hc().clearForm()})),c.Qb(1,"i",83),c.Vb(2,"span"),c.Lc(3,"Clear"),c.Ub(),c.Ub()}}function ms(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",81),c.dc("click",(function(){return c.Dc(i),c.hc().saveUpdate()})),c.Qb(1,"i",84),c.Vb(2,"span"),c.Lc(3,"Update"),c.Ub(),c.Ub()}}function bs(t,e){if(1&t){var i=c.Wb();c.Vb(0,"button",3),c.dc("click",(function(){return c.Dc(i),c.hc().utilsService.goBack()})),c.Qb(1,"i",85),c.Vb(2,"span"),c.Lc(3,"Cancel"),c.Ub(),c.Ub()}}function ds(t,e){1&t&&(c.Vb(0,"div",86),c.Vb(1,"span",87),c.Lc(2,"Note:"),c.Ub(),c.Lc(3," You are unauthorized to "),c.Vb(4,"strong"),c.Lc(5,"update"),c.Ub(),c.Lc(6," this transaction! "),c.Ub())}function hs(t,e){1&t&&(c.Vb(0,"div",86),c.Vb(1,"span",87),c.Lc(2,"Note:"),c.Ub(),c.Lc(3," You are unauthorized to "),c.Vb(4,"strong"),c.Lc(5,"add"),c.Ub(),c.Lc(6," this transaction!. "),c.Ub())}var ps,fs,gs=((ps=function(){function t(e,i,r,n,a,o,c,u,l,m){_classCallCheck(this,t),this.utilsService=e,this.storageService=i,this.authGuardService=r,this.commonDataService=n,this.branchUtilsService=a,this.formBuilder=o,this.activatedRoute=c,this.rentalEquipmentDataService=u,this.modalService=l,this.popupExternalService=m,this.appConstants=s.h,this.screenAcl={},this.rentalItemList=[],this.equipmentOwnershipList=[],this.rentalStatusList=[],this.rentalEquipmentStatusList=[],this.warehouseList=[],this.categoryList=[],this.meterReadingList=[],this.regCountryList=[],this.regStateList=[],this.maintenancePriorityList=[],this.myFormData={},this.myFormErrors={rentalItemId:"",equipmentCode:"",equipmentName:"",unitPrice:"",mfrSerialNumber:"",serialNumber:"",ownershipId:"",rentalStatus:"",status:"",equipmentCategoryId:"",model:"",meterReadingId:"",assetValue:"",purchaseDate:"",warrantyDate:"",yearOfManufacturing:"",yearOfRegistered:"",yearOfPurchase:"",chasisNumber:"",manufacturer:"",regNumber:"",lastServiceReading:"",lastServiceDate:"",countryId:"",stateId:"",operatorName:"",maintenancePriorityId:"",vNotes:[""],insuranceExpiry:"",fitnessExpiry:"",purchaseExpiry:"",roadTaxExpiry:"",sapAssetNo:"",assetNo:""},this.myFormValidationMsgs={rentalItemId:{required:"Item Name is required"},equipmentCode:{required:"Equipment Code is required"},equipmentName:{required:"Equipment Name is required"},unitPrice:{required:"Uint Price is required",pattern:"Only numbers are allowed"},status:{required:"Equipment Status is required"},rentalStatus:{required:"Rental Status is required"},ownershipId:{required:"Ownership is required"},mfrSerialNumber:{required:"Mfr Serial No is required",pattern:"Only alpha numeric is allowed"},serialNumber:{required:"Serial Number is required",pattern:"Only alpha numeric is allowed"},equipmentCategoryId:{required:"Category is required"},model:{required:"Model is required",pattern:"Only alpha numeric are allowed"},meterReadingId:{required:"Meter Reading is required"},assetValue:{required:"Asset Value is required",pattern:"only numbers allowed"},purchaseDate:{required:"Purchase Date is required"},warrantyDate:{required:"Warranty Date is required"},yearOfManufacturing:{required:"Year of Manufacturing is required"},yearOfRegistered:{required:"Year of Registered is required"},yearOfPurchase:{required:"Year of Purchase is required"},chasisNumber:{required:"Chasis No. is required",pattern:"Only alpha numeric is allowed"},manufacturer:{required:"Manufacturer is required",pattern:"Only alpha numeric is allowed"},regNumber:{required:"Registration No. is required",pattern:"Only alpha numeric is allowed"},lastServiceReading:{required:"Last Service Reading is required",pattern:"Only number is allowed"},lastServiceDate:{required:"Last Service Date is required"},countryId:{required:"Registration Country is required"},stateId:{required:"Registration Sate is required"},operatorName:{required:"Operator Name is required",pattern:"Only alpha numeric are allowed"},maintenancePriorityId:{required:"Maintenance Priority is required"},insuranceExpiry:{required:"Insurance Expiry is required"},fitnessExpiry:{required:"Fitness Expiry is required"},purchaseExpiry:{required:"Purchase Expiry is required"},roadTaxExpiry:{required:"Last Service Date is required"},sapAssetNo:{required:"SAP Asset No. is required",pattern:"Only alpha numeric are allowed"},assetNo:{required:"Asset No. is required",pattern:"Only alpha numeric are allowed"}}}return _createClass(t,[{key:"ngOnInit",value:function(){if(this.screenAcl=this.authGuardService.getScreenAcl("26"),!this.screenAcl.view)return this.utilsService.showFailureMsg(s.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;this.initializeForm(),this.initializeSubscriptions()}},{key:"ngAfterViewInit",value:function(){this.attachmentsComponent.loadAttachments(this.inputEditId)}},{key:"initializeSubscriptions",value:function(){var t=this;this.activatedRoute.params.subscribe((function(e){e.id?(t.inputEditId=t.utilsService.decrypt(e.id),t.get()):(t.getAutoSuggestionList("getRentalItemList"),t.getAutoSuggestionList("getEquipmentOwnershipList"),t.getAutoSuggestionList("getRentalStatusList"),t.getAutoSuggestionList("getRentalEquipmentStatusList"),t.getAutoSuggestionList("getWarehouseList"),t.getAutoSuggestionList("getRentalEquipmentCategoryList"),t.getAutoSuggestionList("getMeterReadingList"),t.getAutoSuggestionList("getRentalMaintenancePriorityList"),t.getAutoSuggestionList("getCountryList"),t.getAutoSuggestionList("getStateList")),t.branchUtilsService.actionSaveUpdate.subscribe((function(e){"equipment-category"===e.triggerType&&t.getAutoSuggestionList("getRentalEquipmentCategoryList")}))}))}},{key:"initializeForm",value:function(){var t=this;this.myForm=this.formBuilder.group({rentalItemId:["",[l.u.required]],equipmentCode:["",[l.u.required]],equipmentName:["",[l.u.required]],equipmentImage:[""],unitPrice:["",[l.u.required,l.u.pattern(s.h.VALIDATION_PATTERNS.positiveFloatNumber)]],warehouseId:[null],status:[{value:"",disabled:!1},[l.u.required]],rentalStatus:[{value:"",disabled:!0},[l.u.required]],documentNumber:[{value:"",disabled:!0}],documentTypeName:[{value:"",disabled:!0}],fixedAsset:[!1],remarks:[""],ownershipId:["",[l.u.required]],mfrSerialNumber:["",[l.u.required,l.u.pattern(s.h.VALIDATION_PATTERNS.alphaNumericWithSpace)]],serialNumber:["",[l.u.required,l.u.pattern(s.h.VALIDATION_PATTERNS.alphaNumericWithSpace)]],equipmentCategoryId:[null,[l.u.required]],model:["",[l.u.required,l.u.pattern(s.h.VALIDATION_PATTERNS.alphaNumericWithSpace)]],meterReadingId:["",[l.u.required]],assetValue:["",[l.u.required,l.u.pattern(s.h.VALIDATION_PATTERNS.positiveIntNumber)]],purchaseDate:["",[l.u.required]],warrantyDate:["",[l.u.required]],yearOfManufacturing:["",[l.u.required]],yearOfRegistered:["",[l.u.required]],yearOfPurchase:["",[l.u.required]],chasisNumber:["",[l.u.required,l.u.pattern(s.h.VALIDATION_PATTERNS.alphaNumericWithSpace)]],manufacturer:["",[l.u.required,l.u.pattern(s.h.VALIDATION_PATTERNS.alphaNumericWithSpace)]],regNumber:["",[l.u.required,l.u.pattern(s.h.VALIDATION_PATTERNS.alphaNumericWithSpace)]],lastServiceReading:["",[l.u.required,l.u.pattern(s.h.VALIDATION_PATTERNS.positiveIntNumber)]],lastServiceDate:["",[l.u.required]],countryId:["",[l.u.required]],stateId:["",[l.u.required]],operatorName:["",[l.u.required,l.u.pattern(s.h.VALIDATION_PATTERNS.alphaNumericWithSpace)]],maintenancePriorityId:["",[l.u.required]],vNotes:[""],insuranceExpiry:["",[l.u.required]],fitnessExpiry:["",[l.u.required]],purchaseExpiry:["",[l.u.required]],roadTaxExpiry:["",[l.u.required]],sapAssetNo:["",[l.u.required,l.u.pattern(s.h.VALIDATION_PATTERNS.alphaNumeric)]],assetNo:["",[l.u.required,l.u.pattern(s.h.VALIDATION_PATTERNS.alphaNumeric)]]}),this.myForm.valueChanges.subscribe((function(e){t.utilsService.validation(t.myForm,t.myFormErrors,t.myFormValidationMsgs),t.myFormData=t.myForm.getRawValue()})),this.myFormData=this.myForm.getRawValue()}},{key:"saveUpdate",value:function(){var t=this;if(!this.myForm.valid)return this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs,!0),!1;var e,i={rentalItemId:this.myFormData.rentalItemId,equipmentCode:this.myFormData.equipmentCode,equipmentName:this.myFormData.equipmentName,equipmentImage:this.myFormData.equipmentImage,unitPrice:this.myFormData.unitPrice,warehouseId:this.myFormData.warehouseId,status:this.myFormData.status,rentalStatus:this.myFormData.rentalStatus,remarks:this.myFormData.remarks,fixedAsset:this.myFormData.fixedAsset?1:0,ownershipId:this.myFormData.ownershipId,mfrSerialNumber:this.myFormData.mfrSerialNumber,serialNumber:this.myFormData.serialNumber,equipmentCategoryId:this.myFormData.equipmentCategoryId,model:this.myFormData.model,meterReadingId:this.myFormData.meterReadingId,assetValue:this.myFormData.assetValue,purchaseDate:this.utilsService.getBackendDateFormat(this.myFormData.purchaseDate),warrantyDate:this.utilsService.getBackendDateFormat(this.myFormData.warrantyDate),yearOfManufacturing:this.utilsService.getBackendDateFormat(this.myFormData.yearOfManufacturing),yearOfRegistered:this.utilsService.getBackendDateFormat(this.myFormData.yearOfRegistered),yearOfPurchase:this.utilsService.getBackendDateFormat(this.myFormData.yearOfPurchase),manufacturer:this.myFormData.manufacturer,regNumber:this.myFormData.regNumber,lastServiceReading:this.myFormData.lastServiceReading,lastServiceDate:this.utilsService.getBackendDateFormat(this.myFormData.lastServiceDate),countryId:this.myFormData.countryId,stateId:this.myFormData.stateId,operatorName:this.myFormData.operatorName,maintenancePriorityId:this.myFormData.maintenancePriorityId,insuranceExpiry:this.utilsService.getBackendDateFormat(this.myFormData.insuranceExpiry),fitnessExpiry:this.utilsService.getBackendDateFormat(this.myFormData.fitnessExpiry),purchaseExpiry:this.utilsService.getBackendDateFormat(this.myFormData.purchaseExpiry),roadtaxExpiry:this.utilsService.getBackendDateFormat(this.myFormData.roadTaxExpiry),sapAssetNo:this.myFormData.sapAssetNo,assetNo:this.myFormData.assetNo,chasisNumber:this.myFormData.chasisNumber};this.inputEditId?(e="update",i.id=this.inputEditId):e="save",this.rentalEquipmentDataService[e](i).subscribe((function(i){"SUCCESS"===i.status?(t.utilsService.showSuccessMsg(i),t.attachmentsComponent.save("save"===e?i.sId:t.inputEditId)):t.utilsService.showFailureMsg(i)}))}},{key:"get",value:function(){var t=this;this.rentalEquipmentDataService.get(this.inputEditId).subscribe((function(e){if("SUCCESS"===e.status){var i=e.results[0];t.photoUrl=i.rentalEquipmentImgUrl,t.myForm.patchValue({rentalItemId:i.rentalItemId,equipmentCode:i.equipmentCode,equipmentName:i.equipmentName,equipmentImage:i.equipmentImage,unitPrice:i.unitPrice,warehouseId:t.utilsService.isEmpty(i.warehouseId)?null:i.warehouseId,status:i.status,rentalStatus:i.rentalStatus,documentNumber:i.documentInfo[0]?i.documentInfo[0].documentNumber:"",documentTypeName:i.documentTypeInfo[0]?i.documentTypeInfo[0].name:"",remarks:i.remarks,fixedAsset:"1"===i.fixedAsset,ownershipId:i.ownershipId,mfrSerialNumber:i.mfrSerialNumber,serialNumber:i.serialNumber,equipmentCategoryId:i.equipmentCategoryId,model:i.model,meterReadingId:i.meterReadingId,assetValue:i.assetValue,purchaseDate:t.utilsService.getFrontendDateFormat(i.purchaseDate),warrantyDate:t.utilsService.getFrontendDateFormat(i.warrantyDate),yearOfManufacturing:t.utilsService.getFrontendDateFormat(i.yearOfManufacturing),yearOfRegistered:t.utilsService.getFrontendDateFormat(i.yearOfRegistered),yearOfPurchase:t.utilsService.getFrontendDateFormat(i.yearOfPurchase),manufacturer:i.manufacturer,regNumber:i.regNumber,lastServiceReading:i.lastServiceReading,lastServiceDate:t.utilsService.getFrontendDateFormat(i.lastServiceDate),countryId:i.countryId,stateId:i.stateId,operatorName:i.operatorName,maintenancePriorityId:i.maintenancePriorityId,insuranceExpiry:t.utilsService.getFrontendDateFormat(i.insuranceExpiry),fitnessExpiry:t.utilsService.getFrontendDateFormat(i.fitnessExpiry),purchaseExpiry:t.utilsService.getFrontendDateFormat(i.purchaseExpiry),roadTaxExpiry:t.utilsService.getFrontendDateFormat(i.roadtaxExpiry),sapAssetNo:i.sapAssetNo,assetNo:i.assetNo,chasisNumber:i.chasisNumber}),"1"===t.myFormData.rentalStatus?t.myForm.controls.status.enable():t.myForm.controls.status.disable(),t.getAutoSuggestionList("getRentalItemList",i.rentalItemInfo[0]),t.getAutoSuggestionList("getEquipmentOwnershipList",i.equipmentOwnershipInfo[0]),t.getAutoSuggestionList("getRentalStatusList",i.rentalStatusInfo[0]),t.getAutoSuggestionList("getRentalEquipmentStatusList",i.rentalEquipmentStatusInfo[0]),t.getAutoSuggestionList("getWarehouseList",i.warehouseInfo[0]),t.getAutoSuggestionList("getRentalEquipmentCategoryList",i.rentalEquipmentCategoryInfo[0]),t.getAutoSuggestionList("getRentalMaintenancePriorityList",i.rentalMaintenancePriorityInfo[0]),t.getAutoSuggestionList("getMeterReadingList",i.meterReadingInfo[0]),t.getAutoSuggestionList("getCountryList"),t.getAutoSuggestionList("getStateList")}else t.utilsService.showFailureMsg(e)}))}},{key:"clearForm",value:function(){this.initializeForm()}},{key:"uploadImage",value:function(t){var e=this;this.rentalEquipmentDataService.imageUpload(t.target.files||t.srcElement.files).subscribe((function(t){"SUCCESS"===t.status?(e.myForm.patchValue({equipmentImage:t.results.fileName}),e.photoUrl=t.results.fullUrl):e.utilsService.showFailureMsg(t)}))}},{key:"onEquipmentStatusChange",value:function(){this.myForm.controls.rentalStatus.setValue("1"===this.myFormData.status?"1":"5")}},{key:"redirectToList",value:function(){this.utilsService.redirect("/branch/rental/equipment-list")}},{key:"showVehicleAddPopup",value:function(){this.modalService.show(go,{backdrop:"static"})}},{key:"getAutoSuggestionList",value:function(t,e){var i=this;this.commonDataService.getAutoSuggestionList(t).subscribe((function(r){"SUCCESS"===r.status?(i.utilsService.ifNotPushToList(r.results,e),"getRentalItemList"===t?i.rentalItemList=r.results:"getEquipmentOwnershipList"===t?i.equipmentOwnershipList=r.results:"getRentalStatusList"===t?i.rentalStatusList=r.results:"getRentalEquipmentStatusList"===t?i.rentalEquipmentStatusList=r.results:"getWarehouseList"===t?i.warehouseList=r.results.map((function(t){return t.searchText=t.warehouseName+" - "+t.warehouseCode,t})):"getRentalEquipmentCategoryList"===t?i.categoryList=r.results:"getMeterReadingList"===t?i.meterReadingList=r.results:"getRentalMaintenancePriorityList"===t?i.maintenancePriorityList=r.results:"getCountryList"===t?i.regCountryList=r.results:"getStateList"===t&&(i.regStateList=r.results)):i.utilsService.showFailureMsg(r)}))}}]),t}()).\u0275fac=function(t){return new(t||ps)(c.Pb(s.g),c.Pb(s.f),c.Pb(s.a),c.Pb(u.l),c.Pb(d.a),c.Pb(l.e),c.Pb(o.a),c.Pb(u.N),c.Pb(W.b),c.Pb(_.a))},ps.\u0275cmp=c.Jb({type:ps,selectors:[["app-equipment-add-employee-add"]],viewQuery:function(t,e){var i;1&t&&c.Pc(Q.a,!0),2&t&&c.zc(i=c.ec())&&(e.attachmentsComponent=i.first)},decls:319,vars:97,consts:[[1,"page-title"],[4,"ngIf"],[1,"btn-group"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],[1,"working-container",3,"formGroup"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row"],[1,"col-sm-3"],[1,"form-group"],[1,"form-label"],[1,"image-container"],[3,"src"],["type","file",3,"change"],["type","hidden","formControlName","equipmentImage"],[1,"small-text"],[1,"col-sm-9"],[1,"form-group","col-sm-4"],[1,"mandatory"],["formControlName","rentalItemId",1,"form-control","form-control-sm"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","validation-error",4,"ngIf"],["type","text","formControlName","equipmentCode",1,"form-control","form-control-sm"],["type","text","formControlName","equipmentName",1,"form-control","form-control-sm"],["type","text","formControlName","unitPrice",1,"form-control","form-control-sm"],["formControlName","warehouseId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["ng-option-tmp",""],["formControlName","status",1,"form-control","form-control-sm",3,"change"],[1,"form-group","col-sm-3"],["formControlName","rentalStatus",1,"form-control","form-control-sm"],["class","form-group col-sm-4",4,"ngIf"],[1,"checkbox"],["type","checkbox","formControlName","fixedAsset"],[1,"checkmark"],["formControlName","ownershipId",1,"form-control","form-control-sm"],["type","text","formControlName","mfrSerialNumber",1,"form-control","form-control-sm"],["type","text","formControlName","serialNumber",1,"form-control","form-control-sm"],[1,"action-control"],["formControlName","equipmentCategoryId","bindLabel","categoryName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],[3,"click"],[1,"fa","fa-plus"],["type","text","formControlName","model",1,"form-control","form-control-sm"],["formControlName","meterReadingId",1,"form-control","form-control-sm"],["type","text","formControlName","assetValue",1,"form-control","form-control-sm"],["formControlName","purchaseDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["class"," validation-error",4,"ngIf"],["formControlName","warrantyDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","yearOfManufacturing",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","yearOfRegistered",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","yearOfPurchase",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["type","text","formControlName","chasisNumber",1,"form-control","form-control-sm"],["type","text","formControlName","manufacturer",1,"form-control","form-control-sm"],["type","text","formControlName","regNumber",1,"form-control","form-control-sm"],["type","text","formControlName","lastServiceReading",1,"form-control","form-control-sm"],["formControlName","lastServiceDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","countryId",1,"form-control","form-control-sm"],["formControlName","stateId",1,"form-control","form-control-sm"],["type","text","formControlName","operatorName",1,"form-control","form-control-sm"],["formControlName","maintenancePriorityId",1,"form-control","form-control-sm"],["formControlName","insuranceExpiry",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","fitnessExpiry",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","purchaseExpiry",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","roadTaxExpiry",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["type","text","formControlName","sapAssetNo",1,"form-control","form-control-sm"],["type","text","formControlName","assetNo",1,"form-control","form-control-sm"],["formControlName","remarks",1,"form-control","form-control-sm"],[3,"type","doSuccess"],[1,"btn-group","text-right"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[3,"value"],[1,"validation-error"],[1,"col-sm-7"],["type","text","formControlName","documentTypeName",1,"form-control","form-control-sm"],[1,"col-sm-5"],["type","text","formControlName","documentNumber",1,"form-control","form-control-sm"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save"],[1,"fa","fa-broom"],[1,"fa","fa-sync"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"span"),c.Lc(2,"E"),c.Ub(),c.Lc(3,"quipment Master Data - "),c.Jc(4,vo,2,0,"ng-container",1),c.Jc(5,yo,2,0,"ng-container",1),c.Vb(6,"div",2),c.Vb(7,"button",3),c.dc("click",(function(){return e.utilsService.goBack()})),c.Qb(8,"i",4),c.Vb(9,"span"),c.Lc(10,"Back"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(11,"div",5),c.Vb(12,"div",6),c.Vb(13,"div",7),c.Qb(14,"i",8),c.Lc(15,"Basic Info "),c.Ub(),c.Vb(16,"div",9),c.Vb(17,"div",10),c.Vb(18,"div",11),c.Vb(19,"div",12),c.Vb(20,"label",13),c.Lc(21,"Equipment Image"),c.Ub(),c.Vb(22,"div",14),c.Qb(23,"img",15),c.Ub(),c.Vb(24,"input",16),c.dc("change",(function(t){return e.uploadImage(t)})),c.Ub(),c.Qb(25,"input",17),c.Vb(26,"div",18),c.Lc(27,"Only jpg, png are allowed. Maximum 2 Mb"),c.Ub(),c.Ub(),c.Ub(),c.Vb(28,"div",19),c.Vb(29,"div",10),c.Vb(30,"div",20),c.Vb(31,"label",13),c.Lc(32,"Item"),c.Vb(33,"span",21),c.Lc(34,"*"),c.Ub(),c.Ub(),c.Vb(35,"select",22),c.Vb(36,"option",23),c.Lc(37,"--SELECT--"),c.Ub(),c.Jc(38,So,2,2,"option",24),c.Ub(),c.Jc(39,Co,2,1,"div",25),c.Ub(),c.Vb(40,"div",20),c.Vb(41,"label",13),c.Lc(42,"Equipment Code"),c.Vb(43,"span",21),c.Lc(44,"*"),c.Ub(),c.Ub(),c.Qb(45,"input",26),c.Jc(46,Io,2,1,"div",25),c.Ub(),c.Vb(47,"div",20),c.Vb(48,"label",13),c.Lc(49,"Equipment Name"),c.Vb(50,"span",21),c.Lc(51,"*"),c.Ub(),c.Ub(),c.Qb(52,"input",27),c.Jc(53,Uo,2,1,"div",25),c.Ub(),c.Vb(54,"div",20),c.Vb(55,"label",13),c.Lc(56,"Unit Price"),c.Vb(57,"span",21),c.Lc(58,"*"),c.Ub(),c.Ub(),c.Qb(59,"input",28),c.Jc(60,Lo,2,1,"div",25),c.Ub(),c.Vb(61,"div",20),c.Vb(62,"label",13),c.Lc(63,"Warehouse"),c.Ub(),c.Vb(64,"ng-select",29),c.Jc(65,Vo,6,3,"ng-template",30),c.Ub(),c.Ub(),c.Vb(66,"div",20),c.Vb(67,"label",13),c.Lc(68,"Equipment Status"),c.Vb(69,"span",21),c.Lc(70,"*"),c.Ub(),c.Ub(),c.Vb(71,"select",31),c.dc("change",(function(){return e.onEquipmentStatusChange()})),c.Vb(72,"option",23),c.Lc(73,"--SELECT--"),c.Ub(),c.Jc(74,Do,2,2,"option",24),c.Ub(),c.Jc(75,No,2,1,"div",25),c.Ub(),c.Vb(76,"div",32),c.Vb(77,"label",13),c.Lc(78,"Rental Status"),c.Vb(79,"span",21),c.Lc(80,"*"),c.Ub(),c.Ub(),c.Vb(81,"select",33),c.Vb(82,"option",23),c.Lc(83,"--SELECT--"),c.Ub(),c.Jc(84,Fo,2,2,"option",24),c.Ub(),c.Jc(85,Eo,2,1,"div",25),c.Ub(),c.Jc(86,To,8,0,"div",34),c.Vb(87,"div",32),c.Vb(88,"label",13),c.Lc(89,"Lock"),c.Ub(),c.Vb(90,"label",35),c.Qb(91,"input",36),c.Qb(92,"span",37),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(93,"div",6),c.Vb(94,"div",7),c.Qb(95,"i",8),c.Lc(96,"Equipment Info "),c.Ub(),c.Vb(97,"div",9),c.Vb(98,"div",10),c.Vb(99,"div",32),c.Vb(100,"label",13),c.Lc(101,"Ownership"),c.Vb(102,"span",21),c.Lc(103,"*"),c.Ub(),c.Ub(),c.Vb(104,"select",38),c.Vb(105,"option",23),c.Lc(106,"--SELECT--"),c.Ub(),c.Jc(107,xo,2,2,"option",24),c.Ub(),c.Jc(108,Ao,2,1,"div",25),c.Ub(),c.Vb(109,"div",32),c.Vb(110,"label",13),c.Lc(111,"Mfr Serial No."),c.Vb(112,"span",21),c.Lc(113,"*"),c.Ub(),c.Ub(),c.Qb(114,"input",39),c.Jc(115,ko,2,1,"div",25),c.Ub(),c.Vb(116,"div",32),c.Vb(117,"label",13),c.Lc(118,"Serial Number"),c.Vb(119,"span",21),c.Lc(120,"*"),c.Ub(),c.Ub(),c.Qb(121,"input",40),c.Jc(122,Ro,2,1,"div",25),c.Ub(),c.Vb(123,"div",32),c.Vb(124,"label",13),c.Lc(125,"V. Category"),c.Vb(126,"span",21),c.Lc(127,"*"),c.Ub(),c.Ub(),c.Vb(128,"div",41),c.Qb(129,"ng-select",42),c.Vb(130,"span"),c.Vb(131,"a",43),c.dc("click",(function(){return e.showVehicleAddPopup()})),c.Qb(132,"i",44),c.Ub(),c.Ub(),c.Ub(),c.Jc(133,Mo,2,1,"div",25),c.Ub(),c.Vb(134,"div",32),c.Vb(135,"label",13),c.Lc(136,"V. Model"),c.Vb(137,"span",21),c.Lc(138,"*"),c.Ub(),c.Ub(),c.Qb(139,"input",45),c.Jc(140,wo,2,1,"div",25),c.Ub(),c.Vb(141,"div",32),c.Vb(142,"label",13),c.Lc(143,"Meter Reading"),c.Vb(144,"span",21),c.Lc(145,"*"),c.Ub(),c.Ub(),c.Vb(146,"select",46),c.Vb(147,"option",23),c.Lc(148,"--SELECT--"),c.Ub(),c.Jc(149,Oo,2,2,"option",24),c.Ub(),c.Jc(150,qo,2,1,"div",25),c.Ub(),c.Vb(151,"div",32),c.Vb(152,"label",13),c.Lc(153,"Asset Value"),c.Vb(154,"span",21),c.Lc(155,"*"),c.Ub(),c.Ub(),c.Qb(156,"input",47),c.Jc(157,Po,2,1,"div",25),c.Ub(),c.Vb(158,"div",32),c.Vb(159,"label",13),c.Lc(160,"Purchase Date"),c.Vb(161,"span",21),c.Lc(162,"*"),c.Ub(),c.Ub(),c.Qb(163,"p-calendar",48),c.Jc(164,Bo,2,1,"div",49),c.Ub(),c.Vb(165,"div",32),c.Vb(166,"label",13),c.Lc(167,"Warranty Date"),c.Vb(168,"span",21),c.Lc(169,"*"),c.Ub(),c.Ub(),c.Qb(170,"p-calendar",50),c.Jc(171,Ko,2,1,"div",49),c.Ub(),c.Vb(172,"div",32),c.Vb(173,"label",13),c.Lc(174,"Yomanufacturing"),c.Vb(175,"span",21),c.Lc(176,"*"),c.Ub(),c.Ub(),c.Qb(177,"p-calendar",51),c.Jc(178,Jo,2,1,"div",49),c.Ub(),c.Vb(179,"div",32),c.Vb(180,"label",13),c.Lc(181,"Yoregistered"),c.Vb(182,"span",21),c.Lc(183,"*"),c.Ub(),c.Ub(),c.Qb(184,"p-calendar",52),c.Jc(185,Qo,2,1,"div",49),c.Ub(),c.Vb(186,"div",32),c.Vb(187,"label",13),c.Lc(188,"Yopurchase"),c.Vb(189,"span",21),c.Lc(190,"*"),c.Ub(),c.Ub(),c.Qb(191,"p-calendar",53),c.Jc(192,_o,2,1,"div",49),c.Ub(),c.Vb(193,"div",32),c.Vb(194,"label",13),c.Lc(195,"Chasis No"),c.Vb(196,"span",21),c.Lc(197,"*"),c.Ub(),c.Ub(),c.Qb(198,"input",54),c.Jc(199,Wo,2,1,"div",25),c.Ub(),c.Vb(200,"div",32),c.Vb(201,"label",13),c.Lc(202,"Manufacturer"),c.Vb(203,"span",21),c.Lc(204,"*"),c.Ub(),c.Ub(),c.Qb(205,"input",55),c.Jc(206,Ho,2,1,"div",25),c.Ub(),c.Vb(207,"div",32),c.Vb(208,"label",13),c.Lc(209,"Registeration No"),c.Vb(210,"span",21),c.Lc(211,"*"),c.Ub(),c.Ub(),c.Qb(212,"input",56),c.Jc(213,Go,2,1,"div",25),c.Ub(),c.Vb(214,"div",32),c.Vb(215,"label",13),c.Lc(216,"Last Service Reading"),c.Vb(217,"span",21),c.Lc(218,"*"),c.Ub(),c.Ub(),c.Qb(219,"input",57),c.Jc(220,zo,2,1,"div",25),c.Ub(),c.Vb(221,"div",32),c.Vb(222,"label",13),c.Lc(223,"Last Service Date"),c.Vb(224,"span",21),c.Lc(225,"*"),c.Ub(),c.Ub(),c.Qb(226,"p-calendar",58),c.Jc(227,jo,2,1,"div",49),c.Ub(),c.Vb(228,"div",32),c.Vb(229,"label",13),c.Lc(230,"Registration Country"),c.Vb(231,"span",21),c.Lc(232,"*"),c.Ub(),c.Ub(),c.Vb(233,"select",59),c.Vb(234,"option",23),c.Lc(235,"--SELECT--"),c.Ub(),c.Jc(236,Yo,2,2,"option",24),c.Ub(),c.Jc(237,$o,2,1,"div",25),c.Ub(),c.Vb(238,"div",32),c.Vb(239,"label",13),c.Lc(240,"Registration State"),c.Vb(241,"span",21),c.Lc(242,"*"),c.Ub(),c.Ub(),c.Vb(243,"select",60),c.Vb(244,"option",23),c.Lc(245,"--SELECT--"),c.Ub(),c.Jc(246,Zo,2,2,"option",24),c.Ub(),c.Jc(247,Xo,2,1,"div",25),c.Ub(),c.Vb(248,"div",32),c.Vb(249,"label",13),c.Lc(250,"Operator Name"),c.Vb(251,"span",21),c.Lc(252,"*"),c.Ub(),c.Ub(),c.Qb(253,"input",61),c.Jc(254,ts,2,1,"div",25),c.Ub(),c.Vb(255,"div",32),c.Vb(256,"label",13),c.Lc(257,"Maintenance Priority"),c.Vb(258,"span",21),c.Lc(259,"*"),c.Ub(),c.Ub(),c.Vb(260,"select",62),c.Vb(261,"option",23),c.Lc(262,"--SELECT--"),c.Ub(),c.Jc(263,es,2,2,"option",24),c.Ub(),c.Jc(264,is,2,1,"div",25),c.Ub(),c.Vb(265,"div",32),c.Vb(266,"label",13),c.Lc(267,"Insurance Expiry"),c.Vb(268,"span",21),c.Lc(269,"*"),c.Ub(),c.Ub(),c.Qb(270,"p-calendar",63),c.Jc(271,rs,2,1,"div",49),c.Ub(),c.Vb(272,"div",32),c.Vb(273,"label",13),c.Lc(274,"Fitness Expiry"),c.Vb(275,"span",21),c.Lc(276,"*"),c.Ub(),c.Ub(),c.Qb(277,"p-calendar",64),c.Jc(278,ns,2,1,"div",49),c.Ub(),c.Vb(279,"div",32),c.Vb(280,"label",13),c.Lc(281,"Puc Expiry"),c.Vb(282,"span",21),c.Lc(283,"*"),c.Ub(),c.Ub(),c.Qb(284,"p-calendar",65),c.Jc(285,as,2,1,"div",49),c.Ub(),c.Vb(286,"div",32),c.Vb(287,"label",13),c.Lc(288,"Road Tax Expiry"),c.Vb(289,"span",21),c.Lc(290,"*"),c.Ub(),c.Ub(),c.Qb(291,"p-calendar",66),c.Jc(292,os,2,1,"div",49),c.Ub(),c.Vb(293,"div",32),c.Vb(294,"label",13),c.Lc(295,"SAP Asset No"),c.Vb(296,"span",21),c.Lc(297,"*"),c.Ub(),c.Ub(),c.Qb(298,"input",67),c.Jc(299,ss,2,1,"div",25),c.Ub(),c.Vb(300,"div",32),c.Vb(301,"label",13),c.Lc(302,"Asset No"),c.Vb(303,"span",21),c.Lc(304,"*"),c.Ub(),c.Ub(),c.Qb(305,"input",68),c.Jc(306,cs,2,1,"div",25),c.Ub(),c.Vb(307,"div",32),c.Vb(308,"label",13),c.Lc(309,"V.Notes"),c.Ub(),c.Qb(310,"textarea",69),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(311,"app-attachments",70),c.dc("doSuccess",(function(){return e.redirectToList()})),c.Ub(),c.Vb(312,"div",71),c.Jc(313,us,4,0,"button",72),c.Jc(314,ls,4,0,"button",73),c.Jc(315,ms,4,0,"button",72),c.Jc(316,bs,4,0,"button",73),c.Ub(),c.Jc(317,ds,7,0,"div",74),c.Jc(318,hs,7,0,"div",74),c.Ub()),2&t&&(c.Cb(4),c.oc("ngIf",!e.inputEditId),c.Cb(1),c.oc("ngIf",e.inputEditId),c.Cb(6),c.oc("formGroup",e.myForm),c.Cb(12),c.oc("src",e.photoUrl?e.photoUrl:e.appConstants.DEFAULT_IMAGE_ICON,c.Fc),c.Cb(15),c.oc("ngForOf",e.rentalItemList),c.Cb(1),c.oc("ngIf",e.myFormErrors.rentalItemId),c.Cb(7),c.oc("ngIf",e.myFormErrors.equipmentCode),c.Cb(7),c.oc("ngIf",e.myFormErrors.equipmentName),c.Cb(7),c.oc("ngIf",e.myFormErrors.unitPrice),c.Cb(4),c.oc("items",e.warehouseList)("multiple",!1),c.Cb(10),c.oc("ngForOf",e.rentalEquipmentStatusList),c.Cb(1),c.oc("ngIf",e.myFormErrors.status),c.Cb(9),c.oc("ngForOf",e.rentalStatusList),c.Cb(1),c.oc("ngIf",e.myFormErrors.rentalStatus),c.Cb(1),c.oc("ngIf",e.inputEditId),c.Cb(21),c.oc("ngForOf",e.equipmentOwnershipList),c.Cb(1),c.oc("ngIf",e.myFormErrors.ownershipId),c.Cb(7),c.oc("ngIf",e.myFormErrors.mfrSerialNumber),c.Cb(7),c.oc("ngIf",e.myFormErrors.serialNumber),c.Cb(7),c.oc("items",e.categoryList)("multiple",!1),c.Cb(4),c.oc("ngIf",e.myFormErrors.equipmentCategoryId),c.Cb(7),c.oc("ngIf",e.myFormErrors.model),c.Cb(9),c.oc("ngForOf",e.meterReadingList),c.Cb(1),c.oc("ngIf",e.myFormErrors.meterReadingId),c.Cb(7),c.oc("ngIf",e.myFormErrors.assetValue),c.Cb(6),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",e.myFormErrors.purchaseDate),c.Cb(6),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",e.myFormErrors.warrantyDate),c.Cb(6),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",e.myFormErrors.yearOfManufacturing),c.Cb(6),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",e.myFormErrors.yearOfRegistered),c.Cb(6),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",e.myFormErrors.yearOfPurchase),c.Cb(7),c.oc("ngIf",e.myFormErrors.chasisNumber),c.Cb(7),c.oc("ngIf",e.myFormErrors.manufacturer),c.Cb(7),c.oc("ngIf",e.myFormErrors.regNumber),c.Cb(7),c.oc("ngIf",e.myFormErrors.lastServiceReading),c.Cb(6),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",e.myFormErrors.lastServiceDate),c.Cb(9),c.oc("ngForOf",e.regCountryList),c.Cb(1),c.oc("ngIf",e.myFormErrors.countryId),c.Cb(9),c.oc("ngForOf",e.regStateList),c.Cb(1),c.oc("ngIf",e.myFormErrors.stateId),c.Cb(7),c.oc("ngIf",e.myFormErrors.operatorName),c.Cb(9),c.oc("ngForOf",e.maintenancePriorityList),c.Cb(1),c.oc("ngIf",e.myFormErrors.maintenancePriorityId),c.Cb(6),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",e.myFormErrors.insuranceExpiry),c.Cb(6),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",e.myFormErrors.fitnessExpiry),c.Cb(6),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",e.myFormErrors.purchaseExpiry),c.Cb(6),c.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),c.Cb(1),c.oc("ngIf",e.myFormErrors.roadTaxExpiry),c.Cb(7),c.oc("ngIf",e.myFormErrors.sapAssetNo),c.Cb(7),c.oc("ngIf",e.myFormErrors.assetNo),c.Cb(5),c.oc("type","MASTER_RENTAL_EQUIPMENT"),c.Cb(2),c.oc("ngIf",e.screenAcl.add&&!e.inputEditId),c.Cb(1),c.oc("ngIf",!e.inputEditId),c.Cb(1),c.oc("ngIf",e.screenAcl.update&&e.inputEditId),c.Cb(1),c.oc("ngIf",e.inputEditId),c.Cb(1),c.oc("ngIf",e.inputEditId&&!e.screenAcl.update),c.Cb(1),c.oc("ngIf",!e.inputEditId&&!e.screenAcl.add))},directives:[v.m,l.n,l.i,l.b,l.m,l.g,l.t,l.p,l.v,v.l,H.a,H.c,l.a,y.a,Q.a],styles:[""]}),ps),vs=o.h.forChild([{path:"rental-txn-list/:screenName",component:q},{path:"rental-txn-add/:screenName",component:rr},{path:"rental-txn-edit/:screenName/:id",component:rr},{path:"rental-txn-edit-draft/:screenName/:draftId",component:rr},{path:"rental-txn-copy/:screenName/:copyScreenName/:copyId",component:rr},{path:"rental-txn-duplicate/:screenName/:duplicateId",component:rr},{path:"inspection-txn-list/:screenName",component:pr},{path:"inspection-txn-add/:screenName",component:bn},{path:"inspection-txn-edit/:screenName/:id",component:bn},{path:"inspection-txn-edit-draft/:screenName/:draftId",component:bn},{path:"inspection-txn-copy/:screenName/:copyScreenName/:copyId",component:bn},{path:"inspection-txn-duplicate/:screenName/:duplicateId",component:bn},{path:"worklog-list",component:Ln},{path:"worklog-add/:screenName",component:xa},{path:"worklog-edit/:screenName/:id",component:xa},{path:"worklog-edit-draft/:screenName/:draftId",component:xa},{path:"worklog-copy/:screenName/:copyScreenName/:copyId",component:xa},{path:"worklog-duplicate/:screenName/:duplicateId",component:xa},{path:"rental-item-list",component:Ba},{path:"rental-item-add",component:no},{path:"rental-item-edit/:id",component:no},{path:"equipment-list",component:mo},{path:"equipment-add",component:gs},{path:"equipment-edit/:id",component:gs}]),ys=i("o+NB"),Ss=i("N5hj"),Cs=i("dJ0z"),Is=i("7zUj"),Us=((fs=function t(){_classCallCheck(this,t)}).\u0275mod=c.Nb({type:fs}),fs.\u0275inj=c.Mb({factory:function(t){return new(t||fs)},providers:[h,p,g],imports:[[vs,ys.BranchModule,Ss.a,Cs.a,Is.a]]}),fs)}}]);