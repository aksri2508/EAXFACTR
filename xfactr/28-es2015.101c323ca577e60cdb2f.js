(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{Li92:function(t,o,i){"use strict";i.r(o),i.d(o,"PageModule",(function(){return O}));var n=i("tyNb"),e=i("fXoL");let r=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Jb({type:t,selectors:[["app-page-container"]],decls:1,vars:0,template:function(t,o){1&t&&e.Qb(0,"router-outlet")},directives:[n.i],styles:[""]}),t})();var s=i("3Pt+"),c=i("ey9i"),a=i("oARB"),l=i("ofXK");function g(t,o){1&t&&(e.Vb(0,"h5"),e.Lc(1,"Login to your workspace"),e.Ub())}function m(t,o){1&t&&(e.Vb(0,"h5"),e.Lc(1,"Forgot Password"),e.Ub())}function d(t,o){if(1&t&&(e.Vb(0,"option",23),e.Lc(1),e.Ub()),2&t){const t=o.$implicit;e.oc("value",t.id),e.Cb(1),e.Mc(t.companyName)}}function p(t,o){if(1&t&&(e.Vb(0,"div",24),e.Lc(1),e.Ub()),2&t){const t=e.hc(2);e.Cb(1),e.Nc(" ",t.myFormErrors1.companyId," ")}}function b(t,o){if(1&t){const t=e.Wb();e.Vb(0,"div",8),e.Vb(1,"label",9),e.Lc(2,"Company"),e.Ub(),e.Vb(3,"select",20),e.dc("change",(function(){return e.Dc(t),e.hc().getBranchList()})),e.Vb(4,"option",21),e.Lc(5,"--SELECT--"),e.Ub(),e.Jc(6,d,2,2,"option",22),e.Ub(),e.Jc(7,p,2,1,"div",12),e.Ub()}if(2&t){const t=e.hc();e.Cb(6),e.oc("ngForOf",t.companyList),e.Cb(1),e.oc("ngIf",t.myFormErrors1.companyId)}}function h(t,o){if(1&t&&(e.Vb(0,"option",23),e.Lc(1),e.Ub()),2&t){const t=o.$implicit;e.oc("value",t.id),e.Cb(1),e.Mc(t.branchName)}}function u(t,o){if(1&t&&(e.Vb(0,"div",24),e.Lc(1),e.Ub()),2&t){const t=e.hc(2);e.Cb(1),e.Nc(" ",t.myFormErrors1.branchId," ")}}function y(t,o){if(1&t&&(e.Vb(0,"div",8),e.Vb(1,"label",9),e.Lc(2,"Branch"),e.Ub(),e.Vb(3,"select",25),e.Vb(4,"option",21),e.Lc(5,"--SELECT--"),e.Ub(),e.Jc(6,h,2,2,"option",22),e.Ub(),e.Jc(7,u,2,1,"div",12),e.Ub()),2&t){const t=e.hc();e.Cb(6),e.oc("ngForOf",t.branchList),e.Cb(1),e.oc("ngIf",t.myFormErrors1.branchId)}}function f(t,o){1&t&&e.Qb(0,"input",26)}function C(t,o){if(1&t){const t=e.Wb();e.Vb(0,"input",27),e.dc("keyup.enter",(function(){return e.Dc(t),e.hc().forgotPassword()})),e.Ub()}}function I(t,o){if(1&t&&(e.Vb(0,"div",24),e.Lc(1),e.Ub()),2&t){const t=e.hc();e.Cb(1),e.Nc(" ",t.myFormErrors1.emailId," ")}}function F(t,o){if(1&t&&(e.Vb(0,"div",24),e.Lc(1),e.Ub()),2&t){const t=e.hc(2);e.Cb(1),e.Nc(" ",t.myFormErrors1.password," ")}}const v=function(t,o){return{"fa-eye-slash":t,"fa-eye":o}};function P(t,o){if(1&t){const t=e.Wb();e.Vb(0,"div",8),e.Vb(1,"label",9),e.Lc(2,"Password"),e.Ub(),e.Vb(3,"div",28),e.Vb(4,"input",29),e.dc("keyup.enter",(function(){return e.Dc(t),e.hc().checkLogin()})),e.Ub(),e.Vb(5,"span",30),e.Vb(6,"i",31),e.dc("click",(function(){return e.Dc(t),e.hc().toggleFieldTextType()})),e.Ub(),e.Ub(),e.Ub(),e.Jc(7,F,2,1,"div",12),e.Ub()}if(2&t){const t=e.hc();e.Cb(4),e.oc("type",t.fieldTextType?"text":"password"),e.Cb(2),e.oc("ngClass",e.tc(3,v,!t.fieldTextType,t.fieldTextType)),e.Cb(1),e.oc("ngIf",t.myFormErrors1.password)}}function w(t,o){if(1&t&&(e.Vb(0,"a",32),e.Lc(1,"Forgot Password?"),e.Ub()),2&t){const t=e.hc();e.qc("routerLink","/page/forgot-password/",t.loginType,"/true")}}function V(t,o){if(1&t&&(e.Vb(0,"a",32),e.Lc(1,"Back to Login"),e.Ub()),2&t){const t=e.hc();e.qc("routerLink","/page/login/",t.loginType,"")}}function x(t,o){if(1&t){const t=e.Wb();e.Vb(0,"button",33),e.dc("click",(function(){return e.Dc(t),e.hc().checkLogin()})),e.Lc(1,"Sign In"),e.Ub()}}function L(t,o){if(1&t){const t=e.Wb();e.Vb(0,"button",33),e.dc("click",(function(){return e.Dc(t),e.hc().forgotPassword()})),e.Lc(1,"Verify and Proceed"),e.Ub()}}function T(t,o){1&t&&(e.Vb(0,"div",34),e.Lc(1,"Application Expired"),e.Ub())}let M=(()=>{class t{constructor(t,o,i,n,e){this.formBuilder=t,this.utilsService=o,this.storageService=i,this.authorizationDataService=n,this.activatedRoute=e,this.appConstants=c.h,this.loginTypeList=["branch","company","org"],this.companyList=[],this.branchList=[],this.forgotPasswordFlag=!1,this.expiryFlag=!1,this.myForm1Data={},this.myFormErrors1={companyId:"",branchId:"",emailId:"",password:""},this.myFormValidationMsgs1={companyId:{required:"Company is required"},branchId:{required:"Branch is required"},emailId:{required:"Email ID is required",pattern:"Please enter valid Email ID"},password:{required:"Password is required"}}}ngOnInit(){this.initializeForm1(),this.initializeSubscriptions()}initializeSubscriptions(){this.activatedRoute.params.subscribe(t=>{if(this.loginType=t.type?t.type:"branch",this.forgotPasswordFlag=!!t.isForgot,this.loginTypeList.indexOf(this.loginType)<0)return this.utilsService.redirect("/page/404"),!1;this.setValidations(),"org"!==this.loginType&&this.checkOrgExpiry()})}initializeForm1(){this.myForm1=this.formBuilder.group({companyId:[""],branchId:[""],emailId:["",[s.u.required,s.u.pattern(this.appConstants.VALIDATION_PATTERNS.email)]],password:["",[s.u.required]]}),this.myForm1.valueChanges.subscribe(t=>{this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1),this.myForm1Data=this.myForm1.getRawValue()}),this.myForm1Data=this.myForm1.getRawValue()}setValidations(){"branch"===this.loginType?(this.myForm1.controls.companyId.setValidators(s.u.required),this.myForm1.controls.branchId.setValidators(s.u.required)):"company"===this.loginType?(this.myForm1.controls.companyId.setValidators(s.u.required),this.myForm1.controls.branchId.setValidators(null)):"org"===this.loginType&&(this.myForm1.controls.companyId.setValidators(null),this.myForm1.controls.branchId.setValidators(null)),this.myForm1.controls.password.setValidators(this.forgotPasswordFlag?null:s.u.required)}checkOrgExpiry(){this.authorizationDataService.checkOrgExpiry().subscribe(t=>{"SUCCESS"===t.status?this.getCompanyList():this.expiryFlag=!0})}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}getCompanyList(){this.authorizationDataService.getCompanyList().subscribe(t=>{"SUCCESS"===t.status?this.companyList=t.results:this.utilsService.showFailureMsg(t)})}getBranchList(){return"branch"===this.loginType&&(this.branchList=[],this.myForm1Data.companyId?void this.authorizationDataService.getBranchList(this.myForm1Data.companyId).subscribe(t=>{"SUCCESS"===t.status?this.branchList=t.results:this.utilsService.showFailureMsg(t)}):(this.myForm1.patchValue({branchId:""}),!1))}checkLogin(){if(!this.myForm1.valid)return this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1,!0),!1;const t={loginType:this.loginType,username:this.myForm1Data.emailId,password:this.myForm1Data.password};"branch"===this.loginType?(t.companyId=this.myForm1Data.companyId,t.branchId=this.myForm1Data.branchId):"company"===this.loginType&&(t.companyId=this.myForm1Data.companyId),this.authorizationDataService.checkLogin(t).subscribe(t=>{if("SUCCESS"===t.status){const o=t.results,i={};i.token=o.token,i.identity=o.identity,i.modulePath=this.loginType,i.loggedInModule="branch"===this.loginType?"BRANCH":"COMPANY",i.toasterFreeze=o.toasterFreeze,i.toasterPosition=o.toasterPosition,"company"===this.loginType?(i.companyId=o.companyId,i.companyName=o.companyName):"branch"===this.loginType&&(i.branchId=o.branchId,i.userId=o.id,i.name=o.userName,i.userImageUrl=o.profileImgUrl,i.distRulesMode="1"===o.hierarchyMode,i.salesTaxId=o.settings.salesTaxId,i.purchaseTaxId=o.settings.purchaseTaxId,i.bpCreditLimitStrictMode=o.settings.bpCreditLimitStrictMode,i.isSap="1"===o.isSap,i.defaultWarehouseId=o.defaultWarehouse,i.branchList=o.branchList,i.worklogType=o.worklogSheetType,i.isSingleBranchUser=1===o.branchList.length,i.employeeTypeId=o.employeeTypeId,i.empCode=o.empCode,i.designationName=o.designationName?o.designationName:"-",i.customerBpId=o.businessPartnerId,i.lineItemConfig=o.lineItemConfig,i.branchAccessControlList=t.results.accessControlData),this.storageService.set(i),this.utilsService.showSuccessMsg(t),this.utilsService.showSuccessMsg("Creating workspace, Please wait..."),this.utilsService.redirectToModuleDashboard()}else this.utilsService.showFailureMsg(t)})}forgotPassword(){if(!this.myForm1.valid)return this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1,!0),!1;const t={loginType:this.loginType,username:this.myForm1Data.emailId,password:this.myForm1Data.password};"branch"===this.loginType?(t.companyId=this.myForm1Data.companyId,t.branchId=this.myForm1Data.branchId):"company"===this.loginType&&(t.companyId=this.myForm1Data.companyId),this.authorizationDataService.forgotPassword(t).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.utilsService.redirect("/page/login/"+this.loginType)):this.utilsService.showFailureMsg(t)})}}return t.\u0275fac=function(o){return new(o||t)(e.Pb(s.e),e.Pb(c.g),e.Pb(c.f),e.Pb(a.h),e.Pb(n.a))},t.\u0275cmp=e.Jb({type:t,selectors:[["app-login"]],decls:26,vars:14,consts:[[1,"login"],[1,"row"],[1,"col-sm-4","offset-sm-1"],[1,"login-box",3,"formGroup"],[1,"logo"],["src","/assets/images/logo.png","height","50px"],[4,"ngIf"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"form-label"],["type","text","formControlName","emailId","class","form-control",4,"ngIf"],["type","text","formControlName","emailId","class","form-control",3,"keyup.enter",4,"ngIf"],["class","validation-error",4,"ngIf"],[1,"form-group","text-right"],[3,"routerLink",4,"ngIf"],[1,"btn-group","text-center"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"col-sm-6"],["src","/assets/images/login-concept.png","width","100%"],["class","expiry",4,"ngIf"],["formControlName","companyId",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"validation-error"],["formControlName","branchId",1,"form-control"],["type","text","formControlName","emailId",1,"form-control"],["type","text","formControlName","emailId",1,"form-control",3,"keyup.enter"],[1,"position-relative"],["formControlName","password",1,"form-control",3,"type","keyup.enter"],[1,"password-icon"],[1,"fa",3,"ngClass","click"],[3,"routerLink"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"expiry"]],template:function(t,o){1&t&&(e.Vb(0,"div",0),e.Vb(1,"div",1),e.Vb(2,"div",2),e.Vb(3,"div",3),e.Vb(4,"div",4),e.Qb(5,"img",5),e.Ub(),e.Jc(6,g,2,0,"h5",6),e.Jc(7,m,2,0,"h5",6),e.Jc(8,b,8,2,"div",7),e.Jc(9,y,8,2,"div",7),e.Vb(10,"div",8),e.Vb(11,"label",9),e.Lc(12,"Email ID"),e.Ub(),e.Jc(13,f,1,0,"input",10),e.Jc(14,C,1,0,"input",11),e.Jc(15,I,2,1,"div",12),e.Ub(),e.Jc(16,P,8,6,"div",7),e.Vb(17,"div",13),e.Jc(18,w,2,1,"a",14),e.Jc(19,V,2,1,"a",14),e.Ub(),e.Vb(20,"div",15),e.Jc(21,x,2,0,"button",16),e.Jc(22,L,2,0,"button",16),e.Ub(),e.Ub(),e.Ub(),e.Vb(23,"div",17),e.Qb(24,"img",18),e.Ub(),e.Ub(),e.Jc(25,T,2,0,"div",19),e.Ub()),2&t&&(e.Cb(3),e.oc("formGroup",o.myForm1),e.Cb(3),e.oc("ngIf",!o.forgotPasswordFlag),e.Cb(1),e.oc("ngIf",o.forgotPasswordFlag),e.Cb(1),e.oc("ngIf","company"===o.loginType||"branch"===o.loginType),e.Cb(1),e.oc("ngIf","branch"===o.loginType),e.Cb(4),e.oc("ngIf",!o.forgotPasswordFlag),e.Cb(1),e.oc("ngIf",o.forgotPasswordFlag),e.Cb(1),e.oc("ngIf",o.myFormErrors1.emailId),e.Cb(1),e.oc("ngIf",!o.forgotPasswordFlag),e.Cb(2),e.oc("ngIf",!o.forgotPasswordFlag),e.Cb(1),e.oc("ngIf",o.forgotPasswordFlag),e.Cb(2),e.oc("ngIf",!o.forgotPasswordFlag),e.Cb(1),e.oc("ngIf",o.forgotPasswordFlag),e.Cb(3),e.oc("ngIf",o.expiryFlag))},directives:[s.n,s.i,l.m,s.t,s.m,s.g,s.p,s.v,l.l,s.b,l.k,n.g],styles:[".login[_ngcontent-%COMP%]{height:100%;margin-top:7%}.login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]{padding:16px}.login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:16px;text-align:center}.login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-family:Open-Sans-SemiBold}.login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#929292}.login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:#e8f0fe;border:1px solid #e8f0fe}.login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding-left:24px;padding-right:24px}.login[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]   .password-icon[_ngcontent-%COMP%]{position:absolute;top:6px;right:10px;font-size:14px;cursor:pointer}.login[_ngcontent-%COMP%]   .expiry[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;font-size:18px;padding:6px 0;text-align:center;color:#e20606;background:#ffd2d2}"]}),t})();const S=n.h.forChild([{path:"",component:r,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:M},{path:"login/:type",component:M},{path:"forgot-password/:type/:isForgot",component:M},{path:"404",component:(()=>{class t{constructor(t){this.utilsService=t}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)(e.Pb(c.g))},t.\u0275cmp=e.Jb({type:t,selectors:[["app-page-not-found"]],decls:10,vars:0,consts:[[1,"row"],[1,"col-sm-12","text-center"],["src","/assets/images/404.png","height","200px"]],template:function(t,o){1&t&&(e.Vb(0,"div",0),e.Vb(1,"div",1),e.Qb(2,"br"),e.Qb(3,"br"),e.Qb(4,"img",2),e.Qb(5,"br"),e.Qb(6,"br"),e.Vb(7,"h5"),e.Lc(8,"Please make sure the url is correct. If still facing issues, contact administrator."),e.Ub(),e.Qb(9,"br"),e.Ub(),e.Ub())},styles:[""]}),t})()}]}]);var U=i("PCNd");let O=(()=>{class t{}return t.\u0275mod=e.Nb({type:t}),t.\u0275inj=e.Mb({factory:function(o){return new(o||t)},imports:[[S,U.a]]}),t})()}}]);