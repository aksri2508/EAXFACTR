(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{FinS:function(t,e,i){"use strict";i.r(e),i.d(e,"ApprovalModule",(function(){return Vt}));var s=i("tyNb"),o=i("ey9i"),a=i("3Pt+"),r=i("fXoL"),c=i("oARB"),n=i("K3ix"),b=i("IzNV"),l=i("ofXK"),u=i("ZOsW");function p(t,e){1&t&&(r.Tb(0),r.Lc(1,"Add"),r.Sb())}function m(t,e){1&t&&(r.Tb(0),r.Lc(1,"Edit"),r.Sb())}function d(t,e){if(1&t&&(r.Vb(0,"div",24),r.Lc(1),r.Ub()),2&t){const t=r.hc();r.Cb(1),r.Nc(" ",t.myFormErrors.stageName," ")}}function h(t,e){if(1&t&&(r.Vb(0,"div",24),r.Lc(1),r.Ub()),2&t){const t=r.hc();r.Cb(1),r.Nc(" ",t.myFormErrors.noOfApprovals," ")}}function g(t,e){if(1&t&&(r.Vb(0,"div",24),r.Lc(1),r.Ub()),2&t){const t=r.hc();r.Cb(1),r.Nc(" ",null==t.myForm.errors?null:t.myForm.errors.invalidMaxApproval," ")}}function v(t,e){if(1&t&&(r.Vb(0,"div",24),r.Lc(1),r.Ub()),2&t){const t=r.hc();r.Cb(1),r.Nc(" ",t.myFormErrors.noOfRejections," ")}}function f(t,e){if(1&t&&(r.Vb(0,"div",24),r.Lc(1),r.Ub()),2&t){const t=r.hc();r.Cb(1),r.Nc(" ",null==t.myForm.errors?null:t.myForm.errors.invalidMaxRejection," ")}}function S(t,e){if(1&t&&(r.Vb(0,"div"),r.Lc(1),r.Vb(2,"small"),r.Lc(3),r.Ub(),r.Ub()),2&t){const t=e.item;r.Cb(1),r.Nc("",t.employeeName,"\xa0"),r.Cb(2),r.Nc("(",t.empCode,")")}}function U(t,e){if(1&t&&(r.Vb(0,"div",24),r.Lc(1),r.Ub()),2&t){const t=r.hc();r.Cb(1),r.Nc(" ",t.myFormErrors.authorizerId," ")}}function L(t,e){if(1&t&&(r.Vb(0,"option",25),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Mc(t.name)}}function V(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",26),r.dc("click",(function(){return r.Dc(t),r.hc().saveUpdate()})),r.Qb(1,"i",27),r.Vb(2,"span"),r.Lc(3,"Save"),r.Ub(),r.Ub()}}function C(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",28),r.dc("click",(function(){return r.Dc(t),r.hc().clearForm()})),r.Qb(1,"i",29),r.Vb(2,"span"),r.Lc(3,"Clear"),r.Ub(),r.Ub()}}function y(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",26),r.dc("click",(function(){return r.Dc(t),r.hc().saveUpdate()})),r.Qb(1,"i",30),r.Vb(2,"span"),r.Lc(3,"Update"),r.Ub(),r.Ub()}}function F(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",28),r.dc("click",(function(){return r.Dc(t),r.hc().activeModal.hide()})),r.Qb(1,"i",31),r.Vb(2,"span"),r.Lc(3,"Cancel"),r.Ub(),r.Ub()}}function I(t,e){1&t&&(r.Vb(0,"div",32),r.Vb(1,"span",33),r.Lc(2,"Note:"),r.Ub(),r.Lc(3," You are unauthorized to "),r.Vb(4,"strong"),r.Lc(5,"update"),r.Ub(),r.Lc(6," this transaction! "),r.Ub())}function D(t,e){1&t&&(r.Vb(0,"div",32),r.Vb(1,"span",33),r.Lc(2,"Note:"),r.Ub(),r.Lc(3," You are unauthorized to "),r.Vb(4,"strong"),r.Lc(5,"add"),r.Ub(),r.Lc(6," this transaction!. "),r.Ub())}let A=(()=>{class t{constructor(t,e,i,s,a,r,c){this.utilsService=t,this.authGuardService=e,this.commonDataService=i,this.activeModal=s,this.formBuilder=a,this.branchUtilsService=r,this.approvalStagesDataService=c,this.appConstants=o.h,this.screenAcl={},this.employeeList=[],this.statusList=[],this.myFormData={},this.myFormErrors={stageName:"",noOfApprovals:"",noOfRejections:"",authorizerId:""},this.myFormValidationMsgs={stageName:{required:"Stage Name is required"},noOfApprovals:{required:"No. of Approvals is required",min:"Minimum 1 is required",pattern:"Only positive numbers are allowed"},noOfRejections:{required:"No. of Rejections is required",min:"Minimum 1 is required",pattern:"Only positive numbers are allowed"},authorizerId:{required:"Authorizer is required"}}}ngOnInit(){this.screenAcl=this.authGuardService.getScreenAcl("56"),this.initializeForm(),this.getEmployeeList(),this.getAutoSuggestionList("getCommonStatusList"),this.inputEditId&&this.get()}initializeForm(){this.myForm=this.formBuilder.group({stageName:["",[a.u.required]],stageDescription:[""],noOfApprovals:["",[a.u.required,a.u.min(1),a.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],noOfRejections:["",[a.u.required,a.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],authorizerId:["",[a.u.required]],status:["1"]}),this.myForm.valueChanges.subscribe(t=>{this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs),this.myFormData=this.myForm.getRawValue()}),this.myFormData=this.myForm.getRawValue()}saveUpdate(){if(!this.myForm.valid)return this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs,!0),!1;const t=parseFloat(this.myFormData.noOfApprovals)>parseFloat(this.myFormData.noOfRejections)?this.myFormData.noOfApprovals:this.myFormData.noOfRejections;if(this.myFormData.authorizerId.length<parseFloat(t))return parseFloat(t)===parseFloat(this.myFormData.noOfRejections)?this.utilsService.showFailureMsg('In the "No. of Rejects" field, enter a number less than or equal to the value in "Authorizers" column'):this.utilsService.showFailureMsg("'In the No. of Approvals Required' field, enter a number less than or equal to the value in \"Authorizers\" column"),!1;const e={stageName:this.myFormData.stageName,stageDescription:this.myFormData.stageDescription,noOfApprovals:this.myFormData.noOfApprovals,noOfRejections:this.myFormData.noOfRejections,authorizerId:this.myFormData.authorizerId.join(","),status:this.myFormData.status};let i;this.inputEditId?(i="update",e.id=this.inputEditId):i="save",this.approvalStagesDataService[i](e).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.branchUtilsService.actionSaveUpdate.next({triggerType:"approval-stages"}),this.activeModal.hide()):this.utilsService.showFailureMsg(t)})}get(){this.approvalStagesDataService.get(this.inputEditId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results[0];this.myForm.patchValue({stageName:e.stageName,stageDescription:e.stageDescription,noOfApprovals:e.noOfApprovals,noOfRejections:e.noOfRejections,authorizerId:e.authorizerId.split(","),status:e.status})}else this.utilsService.showFailureMsg(t)})}clearForm(){this.initializeForm()}getAutoSuggestionList(t,e){this.commonDataService.getAutoSuggestionList(t).subscribe(i=>{"SUCCESS"===i.status?(this.utilsService.ifNotPushToList(i.results,e),"getCommonStatusList"===t&&(this.statusList=i.results)):this.utilsService.showFailureMsg(i)})}getEmployeeList(t){this.commonDataService.getEmployeeList(2).subscribe(e=>{"SUCCESS"===e.status?(this.utilsService.ifNotPushToList(e.results,t),this.employeeList=e.results.map(t=>(t.searchText=t.employeeName+" - "+t.empCode,t))):this.utilsService.showFailureMsg(e)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(o.g),r.Pb(o.a),r.Pb(c.l),r.Pb(n.a),r.Pb(a.e),r.Pb(b.a),r.Pb(c.d))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-approval-stages-add-popup"]],inputs:{inputEditId:"inputEditId"},decls:60,vars:18,consts:[[1,"modal-header"],[1,"modal-title"],[4,"ngIf"],[1,"close",3,"click"],[1,"modal-body"],[1,"row",3,"formGroup"],[1,"form-group","col-sm-12"],[1,"form-label"],[1,"mandatory"],["type","text","formControlName","stageName",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],["type","text","formControlName","stageDescription",1,"form-control","form-control-sm"],[1,"form-group","col-sm-6"],["type","text","formControlName","noOfApprovals",1,"form-control","form-control-sm"],["type","text","formControlName","noOfRejections",1,"form-control","form-control-sm"],["formControlName","authorizerId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["ng-option-tmp",""],["formControlName","status",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn-group","text-right"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[1,"validation-error"],[3,"value"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-broom"],[1,"fa","fa-sync"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"h5",1),r.Jc(2,p,2,0,"ng-container",2),r.Jc(3,m,2,0,"ng-container",2),r.Lc(4," Approval Stages "),r.Ub(),r.Vb(5,"button",3),r.dc("click",(function(){return e.activeModal.hide()})),r.Vb(6,"span"),r.Lc(7,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(8,"div",4),r.Vb(9,"div",5),r.Vb(10,"div",6),r.Vb(11,"label",7),r.Lc(12,"Stage Name"),r.Vb(13,"span",8),r.Lc(14,"*"),r.Ub(),r.Ub(),r.Qb(15,"input",9),r.Jc(16,d,2,1,"div",10),r.Ub(),r.Vb(17,"div",6),r.Vb(18,"label",7),r.Lc(19,"Stage Description"),r.Ub(),r.Qb(20,"input",11),r.Ub(),r.Vb(21,"div",12),r.Vb(22,"label",7),r.Lc(23,"No. of Approvals"),r.Vb(24,"span",8),r.Lc(25,"*"),r.Ub(),r.Ub(),r.Qb(26,"input",13),r.Jc(27,h,2,1,"div",10),r.Jc(28,g,2,1,"div",10),r.Ub(),r.Vb(29,"div",12),r.Vb(30,"label",7),r.Lc(31,"No. of Rejections"),r.Vb(32,"span",8),r.Lc(33,"*"),r.Ub(),r.Ub(),r.Qb(34,"input",14),r.Jc(35,v,2,1,"div",10),r.Jc(36,f,2,1,"div",10),r.Ub(),r.Vb(37,"div",6),r.Vb(38,"label",7),r.Lc(39,"Authorizer"),r.Vb(40,"span",8),r.Lc(41,"*"),r.Ub(),r.Ub(),r.Vb(42,"ng-select",15),r.Jc(43,S,4,2,"ng-template",16),r.Ub(),r.Jc(44,U,2,1,"div",10),r.Ub(),r.Vb(45,"div",6),r.Vb(46,"label",7),r.Lc(47,"Status"),r.Vb(48,"span",8),r.Lc(49,"*"),r.Ub(),r.Ub(),r.Vb(50,"select",17),r.Jc(51,L,2,2,"option",18),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(52,"div",19),r.Vb(53,"div",20),r.Jc(54,V,4,0,"button",21),r.Jc(55,C,4,0,"button",22),r.Jc(56,y,4,0,"button",21),r.Jc(57,F,4,0,"button",22),r.Ub(),r.Jc(58,I,7,0,"div",23),r.Jc(59,D,7,0,"div",23),r.Ub()),2&t&&(r.Cb(2),r.oc("ngIf",!e.inputEditId),r.Cb(1),r.oc("ngIf",e.inputEditId),r.Cb(6),r.oc("formGroup",e.myForm),r.Cb(7),r.oc("ngIf",e.myFormErrors.stageName),r.Cb(11),r.oc("ngIf",e.myFormErrors.noOfApprovals),r.Cb(1),r.oc("ngIf",null==e.myForm.errors?null:e.myForm.errors.invalidMaxApproval),r.Cb(7),r.oc("ngIf",e.myFormErrors.noOfRejections),r.Cb(1),r.oc("ngIf",null==e.myForm.errors?null:e.myForm.errors.invalidMaxRejection),r.Cb(6),r.oc("items",e.employeeList)("multiple",!0),r.Cb(2),r.oc("ngIf",e.myFormErrors.authorizerId),r.Cb(7),r.oc("ngForOf",e.statusList),r.Cb(3),r.oc("ngIf",e.screenAcl.add&&!e.inputEditId),r.Cb(1),r.oc("ngIf",!e.inputEditId),r.Cb(1),r.oc("ngIf",e.screenAcl.update&&e.inputEditId),r.Cb(1),r.oc("ngIf",e.inputEditId),r.Cb(1),r.oc("ngIf",e.inputEditId&&!e.screenAcl.update),r.Cb(1),r.oc("ngIf",!e.inputEditId&&!e.screenAcl.add))},directives:[l.m,a.n,a.i,a.b,a.m,a.g,u.a,u.c,a.t,l.l,a.p,a.v],styles:[""]}),t})();var N=i("rEr+"),E=i("7zfz"),M=i("Mfq2");const w=["dataTable"];function T(t,e){if(1&t&&(r.Vb(0,"option",26),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Mc(t.name)}}function k(t,e){if(1&t){const t=r.Wb();r.Vb(0,"tr"),r.Vb(1,"th",13),r.Lc(2,"Actions"),r.Ub(),r.Vb(3,"th",14),r.Lc(4,"Stage Name"),r.Qb(5,"p-sortIcon",15),r.Ub(),r.Vb(6,"th",16),r.Lc(7,"Stage Description"),r.Qb(8,"p-sortIcon",15),r.Ub(),r.Vb(9,"th",17),r.Lc(10,"No. Of Approvals"),r.Qb(11,"p-sortIcon",15),r.Ub(),r.Vb(12,"th",17),r.Lc(13,"No. Of Rejections"),r.Qb(14,"p-sortIcon",15),r.Ub(),r.Vb(15,"th",18),r.Lc(16,"Status"),r.Qb(17,"p-sortIcon",15),r.Ub(),r.Ub(),r.Vb(18,"tr",19),r.Vb(19,"th"),r.Vb(20,"a",20),r.dc("click",(function(){return r.Dc(t),r.hc(2).clearSearchForm()})),r.Qb(21,"i",21),r.Lc(22,"Clear"),r.Ub(),r.Ub(),r.Vb(23,"th"),r.Vb(24,"input",22),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.stageName=e}))("keyup.enter",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Ub(),r.Ub(),r.Vb(25,"th"),r.Vb(26,"input",22),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.stageDescription=e}))("keyup.enter",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Ub(),r.Ub(),r.Vb(27,"th"),r.Vb(28,"input",22),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.noOfApprovals=e}))("keyup.enter",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Ub(),r.Ub(),r.Vb(29,"th"),r.Vb(30,"input",22),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.noOfRejections=e}))("keyup.enter",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Ub(),r.Ub(),r.Vb(31,"th"),r.Vb(32,"select",23),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.status=e}))("change",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Lc(33,"> "),r.Vb(34,"option",24),r.Lc(35,"--SELECT--"),r.Ub(),r.Jc(36,T,2,2,"option",25),r.Ub(),r.Ub(),r.Ub()}if(2&t){const t=r.hc(2);r.Cb(3),r.oc("pSortableColumn","stageName"),r.Cb(2),r.oc("field","stageName"),r.Cb(1),r.oc("pSortableColumn","stageDescription"),r.Cb(2),r.oc("field","stageDescription"),r.Cb(1),r.oc("pSortableColumn","noOfApprovals"),r.Cb(2),r.oc("field","noOfApprovals"),r.Cb(1),r.oc("pSortableColumn","noOfRejections"),r.Cb(2),r.oc("field","noOfRejections"),r.Cb(1),r.oc("pSortableColumn","status"),r.Cb(2),r.oc("field","status"),r.Cb(7),r.oc("ngModel",t.searchForm.stageName),r.Cb(2),r.oc("ngModel",t.searchForm.stageDescription),r.Cb(2),r.oc("ngModel",t.searchForm.noOfApprovals),r.Cb(2),r.oc("ngModel",t.searchForm.noOfRejections),r.Cb(2),r.oc("ngModel",t.searchForm.status),r.Cb(4),r.oc("ngForOf",t.statusList)}}function R(t,e){if(1&t){const t=r.Wb();r.Vb(0,"tr"),r.Vb(1,"td"),r.Vb(2,"a",27),r.dc("click",(function(){r.Dc(t);const i=e.$implicit;return r.hc(2).showAddPopup(i.id)})),r.Qb(3,"i",28),r.Ub(),r.Ub(),r.Vb(4,"td"),r.Lc(5),r.Ub(),r.Vb(6,"td"),r.Lc(7),r.Ub(),r.Vb(8,"td"),r.Lc(9),r.Ub(),r.Vb(10,"td"),r.Lc(11),r.Ub(),r.Vb(12,"td"),r.Vb(13,"span",29),r.Lc(14),r.Ub(),r.Ub(),r.Ub()}if(2&t){const t=e.$implicit,i=r.hc(2);r.Cb(5),r.Mc(t.stageName),r.Cb(2),r.Mc(t.stageDescription),r.Cb(2),r.Mc(t.noOfApprovals),r.Cb(2),r.Mc(t.noOfRejections),r.Cb(2),r.oc("ngClass",i.appConstants.STATUS_COLOR_CLS[t.status]),r.Cb(1),r.Mc(t.statusName)}}function O(t,e){if(1&t){const t=r.Wb();r.Tb(0),r.Vb(1,"div",1),r.Vb(2,"span"),r.Lc(3,"A"),r.Ub(),r.Lc(4,"pproval Stages - List "),r.Vb(5,"div",2),r.Vb(6,"button",3),r.dc("click",(function(){return r.Dc(t),r.hc().showAddPopup()})),r.Qb(7,"i",4),r.Vb(8,"span"),r.Lc(9,"Add Approval Stages"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(10,"div",5),r.Vb(11,"div",6),r.Vb(12,"div",7),r.Vb(13,"div",8),r.Vb(14,"p-table",9,10),r.dc("onLazyLoad",(function(e){return r.Dc(t),r.hc().getListing(e)})),r.Jc(16,k,37,16,"ng-template",11),r.Jc(17,R,15,6,"ng-template",12),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Sb()}if(2&t){const t=r.hc();r.Cb(14),r.oc("value",t.listing.data)("lazy",!0)("paginator",!0)("rows",t.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",t.listing.totalRecords)}}let P=(()=>{class t{constructor(t,e,i,s,a,r){this.utilsService=t,this.authGuardService=e,this.commonDataService=i,this.approvalStagesDataService=s,this.branchUtilsService=a,this.modalService=r,this.appConstants=o.h,this.screenAcl={},this.statusList=[],this.listing={data:[],totalRecords:0},this.searchForm={stageName:"",stageDescription:"",noOfApprovals:"",noOfRejections:"",status:"1"}}ngOnInit(){if(this.screenAcl=this.authGuardService.getScreenAcl("56"),!this.screenAcl.view)return this.utilsService.showFailureMsg(o.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;this.getAutoSuggestionList("getCommonStatusList"),this.branchUtilsService.actionSaveUpdate.subscribe(t=>{"approval-stages"===t.triggerType&&this.resetListing()})}getListing(t){const e=this.utilsService.dataTableParameterFormation(t,this.searchForm);this.approvalStagesDataService.getList(e).subscribe(t=>{"SUCCESS"===t.status?(this.listing.data=t.results.searchResults,this.listing.totalRecords=t.results.totalRecords):this.utilsService.showFailureMsg(t)})}clearSearchForm(){this.searchForm={stageName:"",stageDescription:"",noOfApprovals:"",noOfRejections:"",status:"1"},this.resetListing()}resetListing(){this.dataTable.reset()}showAddPopup(t){const e={backdrop:"static"};e.initialState={inputEditId:t||""},this.modalService.show(A,e)}getAutoSuggestionList(t){this.commonDataService.getAutoSuggestionList(t).subscribe(e=>{"SUCCESS"===e.status?"getCommonStatusList"===t&&(this.statusList=e.results):this.utilsService.showFailureMsg(e)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(o.g),r.Pb(o.a),r.Pb(c.l),r.Pb(c.d),r.Pb(b.a),r.Pb(n.b))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-approval-stages-list"]],viewQuery:function(t,e){var i;1&t&&r.Pc(w,!0),2&t&&r.zc(i=r.ec())&&(e.dataTable=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-plus"],[1,"working-container"],[1,"row"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],[2,"width","80px"],[2,"width","150px",3,"pSortableColumn"],[3,"field"],[2,"width","250px",3,"pSortableColumn"],[2,"width","100px",3,"pSortableColumn"],[2,"width","80px",3,"pSortableColumn"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"click"],[1,"fa","fa-edit"],[1,"badge",3,"ngClass"]],template:function(t,e){1&t&&r.Jc(0,O,18,5,"ng-container",0),2&t&&r.oc("ngIf",e.screenAcl.view)},directives:[l.m,N.c,E.b,N.b,N.a,M.a,a.b,a.m,a.o,a.t,a.p,a.v,l.l,l.k],styles:[""]}),t})();var J=i("LvDl");function x(t,e){if(1&t&&(r.Vb(0,"div",18),r.Lc(1),r.Ub()),2&t){const t=r.hc();r.Cb(1),r.Nc(" ",t.myFormErrors.remarks," ")}}function z(t,e){if(1&t&&(r.Vb(0,"option",19),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Mc(t.name)}}let Q=(()=>{class t{constructor(t,e,i,s,a,r){this.utilsService=t,this.commonDataService=e,this.activeModal=i,this.formBuilder=s,this.branchUtilsService=a,this.approvalStatusReportDataService=r,this.appConstants=o.h,this.statusList=[],this.myFormData={},this.myFormErrors={remarks:"",status:""},this.myFormValidationMsgs={remarks:{required:"Remarks is required"},status:{required:"Status is required"}}}ngOnInit(){this.initializeForm(),this.getAutoSuggestionList("getApprovalStatusList"),this.get()}initializeForm(){this.myForm=this.formBuilder.group({remarks:["",[a.u.required]],status:["2",[a.u.required]]}),this.myForm.valueChanges.subscribe(t=>{this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs),this.myFormData=this.myForm.getRawValue()}),this.myFormData=this.myForm.getRawValue()}saveUpdate(){if(!this.myForm.valid)return this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs,!0),!1;this.approvalStatusReportDataService.update({approvalStatusReportId:this.inputEditId,status:this.myFormData.status,remarks:this.myFormData.remarks}).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.branchUtilsService.actionSaveUpdate.next({triggerType:"approval-status-review"}),this.activeModal.hide()):this.utilsService.showFailureMsg(t)})}get(){}clearForm(){this.initializeForm()}getAutoSuggestionList(t,e){this.commonDataService.getAutoSuggestionList(t).subscribe(i=>{"SUCCESS"===i.status?(this.utilsService.ifNotPushToList(i.results,e),"getApprovalStatusList"===t&&(this.statusList=J.filter(i.results,t=>"Pending"!==t.name))):this.utilsService.showFailureMsg(i)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(o.g),r.Pb(c.l),r.Pb(n.a),r.Pb(a.e),r.Pb(b.a),r.Pb(c.e))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-approval-status-review-popup"]],inputs:{inputEditId:"inputEditId"},decls:32,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],[1,"close",3,"click"],[1,"modal-body"],[1,"row",3,"formGroup"],[1,"form-group","col-sm-12"],[1,"form-label"],[1,"mandatory"],["type","text","formControlName","remarks",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],["formControlName","status",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn-group","text-right"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-times"],[1,"validation-error"],[3,"value"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"h5",1),r.Lc(2," Approval Status - Review "),r.Ub(),r.Vb(3,"button",2),r.dc("click",(function(){return e.activeModal.hide()})),r.Vb(4,"span"),r.Lc(5,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(6,"div",3),r.Vb(7,"div",4),r.Vb(8,"div",5),r.Vb(9,"label",6),r.Lc(10,"Remarks"),r.Vb(11,"span",7),r.Lc(12,"*"),r.Ub(),r.Ub(),r.Qb(13,"input",8),r.Jc(14,x,2,1,"div",9),r.Ub(),r.Vb(15,"div",5),r.Vb(16,"label",6),r.Lc(17,"Status"),r.Vb(18,"span",7),r.Lc(19,"*"),r.Ub(),r.Ub(),r.Vb(20,"select",10),r.Jc(21,z,2,2,"option",11),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(22,"div",12),r.Vb(23,"div",13),r.Vb(24,"button",14),r.dc("click",(function(){return e.saveUpdate()})),r.Qb(25,"i",15),r.Vb(26,"span"),r.Lc(27,"Save"),r.Ub(),r.Ub(),r.Vb(28,"button",16),r.dc("click",(function(){return e.activeModal.hide()})),r.Qb(29,"i",17),r.Vb(30,"span"),r.Lc(31,"Cancel"),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&t&&(r.Cb(7),r.oc("formGroup",e.myForm),r.Cb(7),r.oc("ngIf",e.myFormErrors.remarks),r.Cb(7),r.oc("ngForOf",e.statusList))},directives:[a.n,a.i,a.b,a.m,a.g,l.m,a.t,l.l,a.p,a.v],styles:[""]}),t})();function q(t,e){if(1&t&&(r.Vb(0,"tr"),r.Vb(1,"td"),r.Lc(2),r.Ub(),r.Vb(3,"td"),r.Lc(4),r.Ub(),r.Vb(5,"td"),r.Vb(6,"span",11),r.Lc(7),r.Ub(),r.Ub(),r.Vb(8,"td"),r.Lc(9),r.Ub(),r.Vb(10,"td"),r.Lc(11),r.Ub(),r.Ub()),2&t){const t=e.$implicit,i=e.index,s=r.hc();r.Cb(2),r.Mc(i+1),r.Cb(2),r.Mc(t.employeeName),r.Cb(2),r.oc("ngClass",s.appConstants.APPROVAL_STATUS_COLOR_CLS[t.approvalStatus]),r.Cb(1),r.Nc(" ",t.approvalStatusName,""),r.Cb(2),r.Mc(t.remarks),r.Cb(2),r.Mc(t.createdDateTime)}}function j(t,e){1&t&&(r.Vb(0,"tr"),r.Vb(1,"td",12),r.Lc(2,"No Records Found"),r.Ub(),r.Ub())}const _=function(){return{"max-height.px":300}};let W=(()=>{class t{constructor(t,e,i){this.utilsService=t,this.approvalStatusReportDataService=e,this.activeModal=i,this.appConstants=o.h,this.listingData=[]}ngOnInit(){this.get()}get(){this.approvalStatusReportDataService.getHistory(this.inputEditId).subscribe(t=>{"SUCCESS"===t.status?this.listingData=t.results:this.utilsService.showFailureMsg(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(o.g),r.Pb(c.e),r.Pb(n.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-approval-history-popup"]],inputs:{inputEditId:"inputEditId"},decls:24,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],[1,"close",3,"click"],[1,"modal-body"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-striped","table-bordered"],[2,"width","40px"],[2,"width","100px"],[2,"width","250px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"badge",3,"ngClass"],["colspan","5"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"h5",1),r.Lc(2,"Approval Status - Histroy"),r.Ub(),r.Vb(3,"button",2),r.dc("click",(function(){return e.activeModal.hide()})),r.Vb(4,"span"),r.Lc(5,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(6,"div",3),r.Vb(7,"div",4),r.Vb(8,"table",5),r.Vb(9,"thead"),r.Vb(10,"tr"),r.Vb(11,"th",6),r.Lc(12,"S.No"),r.Ub(),r.Vb(13,"th",7),r.Lc(14,"Approver / Rejecter"),r.Ub(),r.Vb(15,"th",7),r.Lc(16,"Status"),r.Ub(),r.Vb(17,"th",8),r.Lc(18,"History"),r.Ub(),r.Vb(19,"th",7),r.Lc(20,"Date / Time"),r.Ub(),r.Ub(),r.Ub(),r.Vb(21,"tbody"),r.Jc(22,q,12,6,"tr",9),r.Jc(23,j,3,0,"tr",10),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&t&&(r.Cb(7),r.oc("ngStyle",r.rc(3,_)),r.Cb(15),r.oc("ngForOf",e.listingData),r.Cb(1),r.oc("ngIf",0===e.listingData.length))},directives:[l.n,l.l,l.m,l.k],styles:[""]}),t})();const $=["dataTable"];function G(t,e){if(1&t&&(r.Vb(0,"option",24),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Mc(t.name)}}function B(t,e){if(1&t){const t=r.Wb();r.Vb(0,"tr"),r.Vb(1,"th",10),r.Lc(2,"Actions"),r.Ub(),r.Vb(3,"th",11),r.Lc(4,"Document Type"),r.Qb(5,"p-sortIcon",12),r.Ub(),r.Vb(6,"th",13),r.Lc(7," Document Number"),r.Ub(),r.Vb(8,"th",14),r.Lc(9,"Status"),r.Qb(10,"p-sortIcon",12),r.Ub(),r.Vb(11,"th",15),r.Lc(12,"Remarks"),r.Qb(13,"p-sortIcon",12),r.Ub(),r.Vb(14,"th",16),r.Lc(15,"Total Approved"),r.Ub(),r.Vb(16,"th",16),r.Lc(17,"Total Rejected"),r.Ub(),r.Ub(),r.Vb(18,"tr",17),r.Vb(19,"th"),r.Vb(20,"a",18),r.dc("click",(function(){return r.Dc(t),r.hc(2).clearSearchForm()})),r.Qb(21,"i",19),r.Lc(22,"Clear"),r.Ub(),r.Ub(),r.Vb(23,"th"),r.Vb(24,"input",20),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.documentTypeName=e}))("keyup.enter",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Ub(),r.Ub(),r.Qb(25,"th"),r.Vb(26,"th"),r.Vb(27,"select",21),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.approvalStatus=e}))("change",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Lc(28,"> "),r.Vb(29,"option",22),r.Lc(30,"--SELECT--"),r.Ub(),r.Jc(31,G,2,2,"option",23),r.Ub(),r.Ub(),r.Vb(32,"th"),r.Vb(33,"input",20),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.remarks=e}))("keyup.enter",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Ub(),r.Ub(),r.Qb(34,"th"),r.Qb(35,"th"),r.Ub()}if(2&t){const t=r.hc(2);r.Cb(3),r.oc("pSortableColumn","documentTypeName"),r.Cb(2),r.oc("field","documentTypeName"),r.Cb(3),r.oc("pSortableColumn","approvalStatus"),r.Cb(2),r.oc("field","approvalStatus"),r.Cb(1),r.oc("pSortableColumn","remarks"),r.Cb(2),r.oc("field","remarks"),r.Cb(11),r.oc("ngModel",t.searchForm.documentTypeName),r.Cb(3),r.oc("ngModel",t.searchForm.approvalStatus),r.Cb(4),r.oc("ngForOf",t.statusList),r.Cb(2),r.oc("ngModel",t.searchForm.remarks)}}function H(t,e){if(1&t){const t=r.Wb();r.Vb(0,"a",30),r.dc("click",(function(){r.Dc(t);const e=r.hc().$implicit;return r.hc(2).showReviewPopup(e.id)})),r.Qb(1,"i",31),r.Ub()}}function K(t,e){if(1&t){const t=r.Wb();r.Vb(0,"tr"),r.Vb(1,"td"),r.Jc(2,H,2,0,"a",25),r.Vb(3,"a",26),r.dc("click",(function(){r.Dc(t);const i=e.$implicit;return r.hc(2).showHistroyPopup(i.id)})),r.Qb(4,"i",27),r.Ub(),r.Ub(),r.Vb(5,"td"),r.Lc(6),r.Ub(),r.Vb(7,"td"),r.Vb(8,"a",28),r.dc("click",(function(){r.Dc(t);const i=e.$implicit;return r.hc(2).documentNavigation(i)})),r.Lc(9),r.Ub(),r.Ub(),r.Vb(10,"td"),r.Vb(11,"span",29),r.Lc(12),r.Ub(),r.Ub(),r.Vb(13,"td"),r.Lc(14),r.Ub(),r.Vb(15,"td"),r.Lc(16),r.Ub(),r.Vb(17,"td"),r.Lc(18),r.Ub(),r.Ub()}if(2&t){const t=e.$implicit,i=r.hc(2);r.Cb(2),r.oc("ngIf",i.storageService.get("userId")!==t.createdBy),r.Cb(4),r.Mc(t.documentTypeName),r.Cb(3),r.Mc(t.documentNumber),r.Cb(2),r.oc("ngClass",i.appConstants.APPROVAL_STATUS_COLOR_CLS[t.approvalStatus]),r.Cb(1),r.Mc(t.approvalStatusName),r.Cb(2),r.Mc(t.remarks),r.Cb(2),r.Mc(t.totalApproved),r.Cb(2),r.Mc(t.totalRejected)}}function Y(t,e){if(1&t){const t=r.Wb();r.Tb(0),r.Vb(1,"div",1),r.Vb(2,"span"),r.Lc(3,"A"),r.Ub(),r.Lc(4,"pproval Status Report - List "),r.Ub(),r.Vb(5,"div",2),r.Vb(6,"div",3),r.Vb(7,"div",4),r.Vb(8,"div",5),r.Vb(9,"p-table",6,7),r.dc("onLazyLoad",(function(e){return r.Dc(t),r.hc().getListing(e)})),r.Jc(11,B,36,10,"ng-template",8),r.Jc(12,K,19,8,"ng-template",9),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Sb()}if(2&t){const t=r.hc();r.Cb(9),r.oc("value",t.listing.data)("lazy",!0)("paginator",!0)("rows",t.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",t.listing.totalRecords)}}let Z=(()=>{class t{constructor(t,e,i,s,a,r,c){this.utilsService=t,this.authGuardService=e,this.commonDataService=i,this.approvalStatusReportDataService=s,this.branchUtilsService=a,this.storageService=r,this.modalService=c,this.appConstants=o.h,this.screenAcl={},this.statusList=[],this.listing={data:[],totalRecords:0},this.searchForm={documentTypeName:"",documentNumber:"",remarks:"",approvalStatus:"1"}}ngOnInit(){if(this.screenAcl=this.authGuardService.getScreenAcl("58"),!this.screenAcl.view)return this.utilsService.showFailureMsg(o.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;this.getAutoSuggestionList("getApprovalStatusList"),this.branchUtilsService.actionSaveUpdate.subscribe(t=>{"approval-status-review"===t.triggerType&&this.resetListing()})}getListing(t){const e=this.utilsService.dataTableParameterFormation(t,this.searchForm);this.approvalStatusReportDataService.getList(e).subscribe(t=>{"SUCCESS"===t.status?(this.listing.data=t.results.searchResults,this.listing.totalRecords=t.results.totalRecords):this.utilsService.showFailureMsg(t)})}documentNavigation(t){Object.entries(this.branchUtilsService.screenAttributes).forEach(([e,i])=>{const s=JSON.parse(JSON.stringify(i));s.documentTypeId===t.documentTypeId&&this.utilsService.redirect(`/branch/${s.module}/${"1"===t.isDraft?s.draftRouteKey:s.editRouteKey}/${s.uiKey}/${t.documentId}`)})}clearSearchForm(){this.searchForm={documentTypeName:"",documentNumber:"",remarks:"",approvalStatus:"1"},this.resetListing()}resetListing(){this.dataTable.reset()}showReviewPopup(t){const e={backdrop:"static"};e.initialState={inputEditId:t},this.modalService.show(Q,e)}showHistroyPopup(t){const e={backdrop:"static"};e.initialState={inputEditId:t},this.modalService.show(W,e)}getAutoSuggestionList(t){this.commonDataService.getAutoSuggestionList(t).subscribe(e=>{"SUCCESS"===e.status?"getApprovalStatusList"===t&&(this.statusList=e.results):this.utilsService.showFailureMsg(e)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(o.g),r.Pb(o.a),r.Pb(c.l),r.Pb(c.e),r.Pb(b.a),r.Pb(o.f),r.Pb(n.b))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-approval-status-report-list"]],viewQuery:function(t,e){var i;1&t&&r.Pc($,!0),2&t&&r.zc(i=r.ec())&&(e.dataTable=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"working-container"],[1,"row"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],[2,"width","80px"],[2,"width","150px",3,"pSortableColumn"],[3,"field"],[2,"width","150px"],[2,"width","80px",3,"pSortableColumn"],[2,"width","250px",3,"pSortableColumn"],[2,"width","100px"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","action blue","placement","top","container","body","tooltip","Review",3,"click",4,"ngIf"],["placement","top","container","body","tooltip","Histroy",1,"action","yellow",3,"click"],["aria-hidden","true",1,"fa","fa-history"],["href","javascript:void(0)",3,"click"],[1,"badge",3,"ngClass"],["placement","top","container","body","tooltip","Review",1,"action","blue",3,"click"],[1,"fa","fa-tasks"]],template:function(t,e){1&t&&r.Jc(0,Y,13,5,"ng-container",0),2&t&&r.oc("ngIf",e.screenAcl.view)},directives:[l.m,N.c,E.b,N.b,N.a,M.a,a.b,a.m,a.o,a.t,a.p,a.v,l.l,l.k],styles:[""]}),t})();function X(t,e){1&t&&(r.Tb(0),r.Lc(1,"Add"),r.Sb())}function tt(t,e){1&t&&(r.Tb(0),r.Lc(1,"Edit"),r.Sb())}function et(t,e){if(1&t&&(r.Vb(0,"div",24),r.Lc(1),r.Ub()),2&t){const t=r.hc();r.Cb(1),r.Nc(" ",t.myFormErrors.templateName," ")}}function it(t,e){if(1&t&&(r.Vb(0,"div"),r.Lc(1),r.Vb(2,"small"),r.Lc(3),r.Ub(),r.Ub()),2&t){const t=e.item;r.Cb(1),r.Nc("",t.employeeName,"\xa0"),r.Cb(2),r.Nc("(",t.empCode,")")}}function st(t,e){if(1&t&&(r.Vb(0,"div",24),r.Lc(1),r.Ub()),2&t){const t=r.hc();r.Cb(1),r.Nc(" ",t.myFormErrors.originatorId," ")}}function ot(t,e){if(1&t&&(r.Vb(0,"div",24),r.Lc(1),r.Ub()),2&t){const t=r.hc();r.Cb(1),r.Nc(" ",t.myFormErrors.documentId," ")}}function at(t,e){if(1&t&&(r.Vb(0,"option",25),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Mc(t.stageName)}}function rt(t,e){if(1&t&&(r.Vb(0,"div",24),r.Lc(1),r.Ub()),2&t){const t=r.hc();r.Cb(1),r.Nc(" ",t.myFormErrors.approvalStagesId," ")}}function ct(t,e){if(1&t&&(r.Vb(0,"option",25),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Mc(t.name)}}function nt(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",26),r.dc("click",(function(){return r.Dc(t),r.hc().saveUpdate()})),r.Qb(1,"i",27),r.Vb(2,"span"),r.Lc(3,"Save"),r.Ub(),r.Ub()}}function bt(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",28),r.dc("click",(function(){return r.Dc(t),r.hc().clearForm()})),r.Qb(1,"i",29),r.Vb(2,"span"),r.Lc(3,"Clear"),r.Ub(),r.Ub()}}function lt(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",26),r.dc("click",(function(){return r.Dc(t),r.hc().saveUpdate()})),r.Qb(1,"i",30),r.Vb(2,"span"),r.Lc(3,"Update"),r.Ub(),r.Ub()}}function ut(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",28),r.dc("click",(function(){return r.Dc(t),r.hc().activeModal.hide()})),r.Qb(1,"i",31),r.Vb(2,"span"),r.Lc(3,"Cancel"),r.Ub(),r.Ub()}}function pt(t,e){1&t&&(r.Vb(0,"div",32),r.Vb(1,"span",33),r.Lc(2,"Note:"),r.Ub(),r.Lc(3," You are unauthorized to "),r.Vb(4,"strong"),r.Lc(5,"update"),r.Ub(),r.Lc(6," this transaction! "),r.Ub())}function mt(t,e){1&t&&(r.Vb(0,"div",32),r.Vb(1,"span",33),r.Lc(2,"Note:"),r.Ub(),r.Lc(3," You are unauthorized to "),r.Vb(4,"strong"),r.Lc(5,"add"),r.Ub(),r.Lc(6," this transaction!. "),r.Ub())}let dt=(()=>{class t{constructor(t,e,i,s,a,r,c){this.utilsService=t,this.authGuardService=e,this.commonDataService=i,this.activeModal=s,this.formBuilder=a,this.branchUtilsService=r,this.approvalTemplatesDataService=c,this.appConstants=o.h,this.screenAcl={},this.employeeList=[],this.statusList=[],this.screenList=[],this.approvalStagesList=[],this.myFormData={},this.myFormErrors={templateName:"",originatorId:"",documentId:"",approvalStagesId:""},this.myFormValidationMsgs={templateName:{required:"Template Name is required"},originatorId:{required:"Orignator is required"},documentId:{required:"Document Type is required"},approvalStagesId:{required:"Stages is required"}}}ngOnInit(){this.screenAcl=this.authGuardService.getScreenAcl("57"),this.initializeForm(),this.getEmployeeList(),this.getApprovalProcessScreens(),this.getAutoSuggestionList("getCommonStatusList"),this.getAutoSuggestionList("getApprovalStagesList"),this.inputEditId&&this.get()}initializeForm(){this.myForm=this.formBuilder.group({templateName:["",[a.u.required]],templateDescription:[""],originatorId:["",[a.u.required]],documentId:["",[a.u.required]],approvalStagesId:["",[a.u.required]],status:["1"]}),this.myForm.valueChanges.subscribe(t=>{this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs),this.myFormData=this.myForm.getRawValue()}),this.myFormData=this.myForm.getRawValue()}saveUpdate(){if(!this.myForm.valid)return this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs,!0),!1;const t={templateName:this.myFormData.templateName,templateDescription:this.myFormData.templateDescription,originatorId:this.myFormData.originatorId.join(","),documentId:this.myFormData.documentId.join(","),approvalStagesId:this.myFormData.approvalStagesId,status:this.myFormData.status};let e;this.inputEditId?(e="update",t.id=this.inputEditId):e="save",this.approvalTemplatesDataService[e](t).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.branchUtilsService.actionSaveUpdate.next({triggerType:"approval-templates"}),this.activeModal.hide()):this.utilsService.showFailureMsg(t)})}get(){this.approvalTemplatesDataService.get(this.inputEditId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results[0],i=e.documentId.split(",").map(Number);this.myForm.patchValue({templateName:e.templateName,templateDescription:e.templateDescription,originatorId:e.originatorId.split(","),documentId:i,approvalStagesId:e.approvalStagesId,status:e.status})}else this.utilsService.showFailureMsg(t)})}clearForm(){this.initializeForm()}getAutoSuggestionList(t,e){this.commonDataService.getAutoSuggestionList(t).subscribe(i=>{"SUCCESS"===i.status?(this.utilsService.ifNotPushToList(i.results,e),"getCommonStatusList"===t?this.statusList=i.results:"getApprovalStagesList"===t?this.approvalStagesList=i.results:"getApprovalProcessScreens"===t&&(this.screenList=i.results)):this.utilsService.showFailureMsg(i)})}getEmployeeList(t){this.commonDataService.getEmployeeList(2).subscribe(e=>{"SUCCESS"===e.status?(this.utilsService.ifNotPushToList(e.results,t),this.employeeList=e.results.map(t=>(t.searchText=t.employeeName+" - "+t.empCode,t))):this.utilsService.showFailureMsg(e)})}getApprovalProcessScreens(){this.commonDataService.getApprovalProcessScreens().subscribe(t=>{"SUCCESS"===t.status?this.screenList=t.results:this.utilsService.showFailureMsg(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(o.g),r.Pb(o.a),r.Pb(c.l),r.Pb(n.a),r.Pb(a.e),r.Pb(b.a),r.Pb(c.f))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-approval-templates-add-popup"]],inputs:{inputEditId:"inputEditId"},decls:61,vars:19,consts:[[1,"modal-header"],[1,"modal-title"],[4,"ngIf"],[1,"close",3,"click"],[1,"modal-body"],[1,"row",3,"formGroup"],[1,"form-group","col-sm-12"],[1,"form-label"],[1,"mandatory"],["type","text","formControlName","templateName",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],["type","text","formControlName","templateDescription",1,"form-control","form-control-sm"],["formControlName","originatorId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["ng-option-tmp",""],["formControlName","documentId","bindLabel","screenName","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["formControlName","approvalStagesId",1,"form-control","form-control-sm"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","status",1,"form-control","form-control-sm"],[1,"modal-footer"],[1,"btn-group","text-right"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[1,"validation-error"],[3,"value"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-broom"],[1,"fa","fa-sync"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"h5",1),r.Jc(2,X,2,0,"ng-container",2),r.Jc(3,tt,2,0,"ng-container",2),r.Lc(4," Approval Templates "),r.Ub(),r.Vb(5,"button",3),r.dc("click",(function(){return e.activeModal.hide()})),r.Vb(6,"span"),r.Lc(7,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(8,"div",4),r.Vb(9,"div",5),r.Vb(10,"div",6),r.Vb(11,"label",7),r.Lc(12,"Template Name"),r.Vb(13,"span",8),r.Lc(14,"*"),r.Ub(),r.Ub(),r.Qb(15,"input",9),r.Jc(16,et,2,1,"div",10),r.Ub(),r.Vb(17,"div",6),r.Vb(18,"label",7),r.Lc(19,"Template Description"),r.Ub(),r.Qb(20,"input",11),r.Ub(),r.Vb(21,"div",6),r.Vb(22,"label",7),r.Lc(23,"Originator"),r.Vb(24,"span",8),r.Lc(25,"*"),r.Ub(),r.Ub(),r.Vb(26,"ng-select",12),r.Jc(27,it,4,2,"ng-template",13),r.Ub(),r.Jc(28,st,2,1,"div",10),r.Ub(),r.Vb(29,"div",6),r.Vb(30,"label",7),r.Lc(31,"Document Type"),r.Vb(32,"span",8),r.Lc(33,"*"),r.Ub(),r.Ub(),r.Qb(34,"ng-select",14),r.Jc(35,ot,2,1,"div",10),r.Ub(),r.Vb(36,"div",6),r.Vb(37,"label",7),r.Lc(38,"Stages Type"),r.Vb(39,"span",8),r.Lc(40,"*"),r.Ub(),r.Ub(),r.Vb(41,"select",15),r.Vb(42,"option",16),r.Lc(43,"--SELECT--"),r.Ub(),r.Jc(44,at,2,2,"option",17),r.Ub(),r.Jc(45,rt,2,1,"div",10),r.Ub(),r.Vb(46,"div",6),r.Vb(47,"label",7),r.Lc(48,"Status"),r.Vb(49,"span",8),r.Lc(50,"*"),r.Ub(),r.Ub(),r.Vb(51,"select",18),r.Jc(52,ct,2,2,"option",17),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(53,"div",19),r.Vb(54,"div",20),r.Jc(55,nt,4,0,"button",21),r.Jc(56,bt,4,0,"button",22),r.Jc(57,lt,4,0,"button",21),r.Jc(58,ut,4,0,"button",22),r.Ub(),r.Jc(59,pt,7,0,"div",23),r.Jc(60,mt,7,0,"div",23),r.Ub()),2&t&&(r.Cb(2),r.oc("ngIf",!e.inputEditId),r.Cb(1),r.oc("ngIf",e.inputEditId),r.Cb(6),r.oc("formGroup",e.myForm),r.Cb(7),r.oc("ngIf",e.myFormErrors.templateName),r.Cb(10),r.oc("items",e.employeeList)("multiple",!0),r.Cb(2),r.oc("ngIf",e.myFormErrors.originatorId),r.Cb(6),r.oc("items",e.screenList)("multiple",!0),r.Cb(1),r.oc("ngIf",e.myFormErrors.documentId),r.Cb(9),r.oc("ngForOf",e.approvalStagesList),r.Cb(1),r.oc("ngIf",e.myFormErrors.approvalStagesId),r.Cb(7),r.oc("ngForOf",e.statusList),r.Cb(3),r.oc("ngIf",e.screenAcl.add&&!e.inputEditId),r.Cb(1),r.oc("ngIf",!e.inputEditId),r.Cb(1),r.oc("ngIf",e.screenAcl.update&&e.inputEditId),r.Cb(1),r.oc("ngIf",e.inputEditId),r.Cb(1),r.oc("ngIf",e.inputEditId&&!e.screenAcl.update),r.Cb(1),r.oc("ngIf",!e.inputEditId&&!e.screenAcl.add))},directives:[l.m,a.n,a.i,a.b,a.m,a.g,u.a,u.c,a.t,a.p,a.v,l.l],styles:[""]}),t})();const ht=["dataTable"];function gt(t,e){if(1&t&&(r.Vb(0,"option",25),r.Lc(1),r.Ub()),2&t){const t=e.$implicit;r.oc("value",t.id),r.Cb(1),r.Mc(t.name)}}function vt(t,e){if(1&t){const t=r.Wb();r.Vb(0,"tr"),r.Vb(1,"th",13),r.Lc(2,"Actions"),r.Ub(),r.Vb(3,"th",14),r.Lc(4,"Template Name"),r.Qb(5,"p-sortIcon",15),r.Ub(),r.Vb(6,"th",16),r.Lc(7,"Template Description"),r.Qb(8,"p-sortIcon",15),r.Ub(),r.Vb(9,"th",17),r.Lc(10,"Status"),r.Qb(11,"p-sortIcon",15),r.Ub(),r.Ub(),r.Vb(12,"tr",18),r.Vb(13,"th"),r.Vb(14,"a",19),r.dc("click",(function(){return r.Dc(t),r.hc(2).clearSearchForm()})),r.Qb(15,"i",20),r.Lc(16,"Clear"),r.Ub(),r.Ub(),r.Vb(17,"th"),r.Vb(18,"input",21),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.templateName=e}))("keyup.enter",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Ub(),r.Ub(),r.Vb(19,"th"),r.Vb(20,"input",21),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.templateDescription=e}))("keyup.enter",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Ub(),r.Ub(),r.Vb(21,"th"),r.Vb(22,"select",22),r.dc("ngModelChange",(function(e){return r.Dc(t),r.hc(2).searchForm.status=e}))("change",(function(){return r.Dc(t),r.hc(2).resetListing()})),r.Lc(23,"> "),r.Vb(24,"option",23),r.Lc(25,"--SELECT--"),r.Ub(),r.Jc(26,gt,2,2,"option",24),r.Ub(),r.Ub(),r.Ub()}if(2&t){const t=r.hc(2);r.Cb(3),r.oc("pSortableColumn","templateName"),r.Cb(2),r.oc("field","templateName"),r.Cb(1),r.oc("pSortableColumn","templateDescription"),r.Cb(2),r.oc("field","templateDescription"),r.Cb(1),r.oc("pSortableColumn","status"),r.Cb(2),r.oc("field","status"),r.Cb(7),r.oc("ngModel",t.searchForm.templateName),r.Cb(2),r.oc("ngModel",t.searchForm.templateDescription),r.Cb(2),r.oc("ngModel",t.searchForm.status),r.Cb(4),r.oc("ngForOf",t.statusList)}}function ft(t,e){if(1&t){const t=r.Wb();r.Vb(0,"tr"),r.Vb(1,"td"),r.Vb(2,"a",26),r.dc("click",(function(){r.Dc(t);const i=e.$implicit;return r.hc(2).showAddPopup(i.id)})),r.Qb(3,"i",27),r.Ub(),r.Ub(),r.Vb(4,"td"),r.Lc(5),r.Ub(),r.Vb(6,"td"),r.Lc(7),r.Ub(),r.Vb(8,"td"),r.Vb(9,"span",28),r.Lc(10),r.Ub(),r.Ub(),r.Ub()}if(2&t){const t=e.$implicit,i=r.hc(2);r.Cb(5),r.Mc(t.templateName),r.Cb(2),r.Mc(t.templateDescription),r.Cb(2),r.oc("ngClass",i.appConstants.STATUS_COLOR_CLS[t.status]),r.Cb(1),r.Mc(t.statusName)}}function St(t,e){if(1&t){const t=r.Wb();r.Tb(0),r.Vb(1,"div",1),r.Vb(2,"span"),r.Lc(3,"A"),r.Ub(),r.Lc(4,"pproval Templates - List "),r.Vb(5,"div",2),r.Vb(6,"button",3),r.dc("click",(function(){return r.Dc(t),r.hc().showAddPopup()})),r.Qb(7,"i",4),r.Vb(8,"span"),r.Lc(9,"Add Approval Templates"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(10,"div",5),r.Vb(11,"div",6),r.Vb(12,"div",7),r.Vb(13,"div",8),r.Vb(14,"p-table",9,10),r.dc("onLazyLoad",(function(e){return r.Dc(t),r.hc().getListing(e)})),r.Jc(16,vt,27,10,"ng-template",11),r.Jc(17,ft,11,4,"ng-template",12),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Sb()}if(2&t){const t=r.hc();r.Cb(14),r.oc("value",t.listing.data)("lazy",!0)("paginator",!0)("rows",t.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",t.listing.totalRecords)}}const Ut=s.h.forChild([{path:"approval-stages-list",component:P},{path:"approval-templates-list",component:(()=>{class t{constructor(t,e,i,s,a,r){this.utilsService=t,this.authGuardService=e,this.commonDataService=i,this.approvalTemplatesDataService=s,this.branchUtilsService=a,this.modalService=r,this.appConstants=o.h,this.screenAcl={},this.statusList=[],this.listing={data:[],totalRecords:0},this.searchForm={templateName:"",templateDescription:"",status:"1"}}ngOnInit(){if(this.screenAcl=this.authGuardService.getScreenAcl("57"),!this.screenAcl.view)return this.utilsService.showFailureMsg(o.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;this.getAutoSuggestionList("getCommonStatusList"),this.branchUtilsService.actionSaveUpdate.subscribe(t=>{"approval-templates"===t.triggerType&&this.resetListing()})}getListing(t){const e=this.utilsService.dataTableParameterFormation(t,this.searchForm);this.approvalTemplatesDataService.getList(e).subscribe(t=>{"SUCCESS"===t.status?(this.listing.data=t.results.searchResults,this.listing.totalRecords=t.results.totalRecords):this.utilsService.showFailureMsg(t)})}clearSearchForm(){this.searchForm={templateName:"",templateDescription:"",status:"1"},this.resetListing()}resetListing(){this.dataTable.reset()}showAddPopup(t){const e={backdrop:"static"};e.initialState={inputEditId:t||""},this.modalService.show(dt,e)}getAutoSuggestionList(t){this.commonDataService.getAutoSuggestionList(t).subscribe(e=>{"SUCCESS"===e.status?"getCommonStatusList"===t&&(this.statusList=e.results):this.utilsService.showFailureMsg(e)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(o.g),r.Pb(o.a),r.Pb(c.l),r.Pb(c.f),r.Pb(b.a),r.Pb(n.b))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-approval-templates-list"]],viewQuery:function(t,e){var i;1&t&&r.Pc(ht,!0),2&t&&r.zc(i=r.ec())&&(e.dataTable=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-plus"],[1,"working-container"],[1,"row"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],[2,"width","80px"],[2,"width","150px",3,"pSortableColumn"],[3,"field"],[2,"width","250px",3,"pSortableColumn"],[2,"width","80px",3,"pSortableColumn"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"click"],[1,"fa","fa-edit"],[1,"badge",3,"ngClass"]],template:function(t,e){1&t&&r.Jc(0,St,18,5,"ng-container",0),2&t&&r.oc("ngIf",e.screenAcl.view)},directives:[l.m,N.c,E.b,N.b,N.a,M.a,a.b,a.m,a.o,a.t,a.p,a.v,l.l,l.k],styles:[""]}),t})()},{path:"approval-status-report-list",component:Z}]);var Lt=i("o+NB");let Vt=(()=>{class t{}return t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({factory:function(e){return new(e||t)},imports:[[Ut,Lt.BranchModule]]}),t})()}}]);