(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{TlXv:function(t,i,e){"use strict";e.d(i,"a",(function(){return U}));var o=e("fXoL"),c=e("3Pt+"),s=e("ey9i"),r=e("oARB"),n=e("ofXK"),a=e("eO1q");function l(t,i){1&t&&(o.Vb(0,"span",14),o.Lc(1,"*"),o.Ub())}function b(t,i){if(1&t&&(o.Vb(0,"div",15),o.Lc(1),o.Ub()),2&t){const t=o.hc(2).$implicit,i=o.hc(2);o.Cb(1),o.Nc(" ",i.myFormErrors1[t.controlName]," ")}}function m(t,i){if(1&t&&(o.Tb(0),o.Vb(1,"label",10),o.Lc(2),o.Jc(3,l,2,0,"span",11),o.Ub(),o.Qb(4,"input",12),o.Jc(5,b,2,1,"div",13),o.Sb()),2&t){const t=o.hc().$implicit,i=o.hc(2);o.Cb(2),o.Mc(t.fieldLabel),o.Cb(1),o.oc("ngIf","1"===t.requiredField),o.Cb(1),o.oc("formControlName",t.controlName),o.Cb(1),o.oc("ngIf",i.myFormErrors1[t.controlName])}}function d(t,i){1&t&&(o.Vb(0,"span",14),o.Lc(1,"*"),o.Ub())}function u(t,i){if(1&t&&(o.Vb(0,"option",19),o.Lc(1),o.Ub()),2&t){const t=i.$implicit;o.oc("value",t.optionsFieldLabel),o.Cb(1),o.Nc(" ",t.optionsFieldLabel,"")}}function h(t,i){if(1&t&&(o.Vb(0,"div",15),o.Lc(1),o.Ub()),2&t){const t=o.hc(2).$implicit,i=o.hc(2);o.Cb(1),o.Nc(" ",i.myFormErrors1[t.controlName]," ")}}function f(t,i){if(1&t&&(o.Tb(0),o.Vb(1,"label",10),o.Lc(2),o.Jc(3,d,2,0,"span",11),o.Ub(),o.Vb(4,"select",16),o.Vb(5,"option",17),o.Lc(6,"--SELECT--"),o.Ub(),o.Jc(7,u,2,2,"option",18),o.Ub(),o.Jc(8,h,2,1,"div",13),o.Sb()),2&t){const t=o.hc().$implicit,i=o.hc(2);o.Cb(2),o.Mc(t.fieldLabel),o.Cb(1),o.oc("ngIf","1"===t.requiredField),o.Cb(1),o.oc("formControlName",t.controlName),o.Cb(3),o.oc("ngForOf",t.selectOptionListArray),o.Cb(1),o.oc("ngIf",i.myFormErrors1[t.controlName])}}function p(t,i){1&t&&(o.Vb(0,"span",14),o.Lc(1,"*"),o.Ub())}function g(t,i){if(1&t&&(o.Vb(0,"div",15),o.Lc(1),o.Ub()),2&t){const t=o.hc(2).$implicit,i=o.hc(2);o.Cb(1),o.Nc(" ",i.myFormErrors1[t.controlName]," ")}}function v(t,i){if(1&t&&(o.Tb(0),o.Vb(1,"label",10),o.Lc(2),o.Jc(3,p,2,0,"span",11),o.Ub(),o.Qb(4,"p-calendar",20),o.Jc(5,g,2,1,"div",13),o.Sb()),2&t){const t=o.hc().$implicit,i=o.hc(2);o.Cb(2),o.Mc(t.fieldLabel),o.Cb(1),o.oc("ngIf","1"===t.requiredField),o.Cb(1),o.oc("formControlName",t.controlName)("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.appConstants.PICKER_YEAR_RANGE)("dateFormat",i.appConstants.PICKER_DATE_FORMAT),o.Cb(1),o.oc("ngIf",i.myFormErrors1[t.controlName])}}function F(t,i){1&t&&(o.Vb(0,"span",14),o.Lc(1,"*"),o.Ub())}function C(t,i){if(1&t&&(o.Vb(0,"div",15),o.Lc(1),o.Ub()),2&t){const t=o.hc(2).$implicit,i=o.hc(2);o.Cb(1),o.Nc(" ",i.myFormErrors1[t.controlName]," ")}}function y(t,i){if(1&t&&(o.Tb(0),o.Vb(1,"label",10),o.Lc(2),o.Jc(3,F,2,0,"span",11),o.Ub(),o.Qb(4,"input",21),o.Jc(5,C,2,1,"div",13),o.Sb()),2&t){const t=o.hc().$implicit,i=o.hc(2);o.Cb(2),o.Mc(t.fieldLabel),o.Cb(1),o.oc("ngIf","1"===t.requiredField),o.Cb(1),o.oc("formControlName",t.controlName),o.Cb(1),o.oc("ngIf",i.myFormErrors1[t.controlName])}}function S(t,i){if(1&t&&(o.Vb(0,"div",7),o.Tb(1,8),o.Jc(2,m,6,4,"ng-container",9),o.Jc(3,f,9,5,"ng-container",9),o.Jc(4,v,6,8,"ng-container",9),o.Jc(5,y,6,4,"ng-container",9),o.Sb(),o.Ub()),2&t){const t=i.$implicit;o.Cb(1),o.oc("ngSwitch",t.fieldTypeId),o.Cb(1),o.oc("ngSwitchCase",1),o.Cb(1),o.oc("ngSwitchCase",2),o.Cb(1),o.oc("ngSwitchCase",3),o.Cb(1),o.oc("ngSwitchCase",4)}}function V(t,i){if(1&t&&(o.Vb(0,"div",1),o.Vb(1,"div",2),o.Qb(2,"i",3),o.Lc(3,"UDF Fields "),o.Ub(),o.Vb(4,"div",4),o.Vb(5,"div",5),o.Jc(6,S,6,5,"div",6),o.Ub(),o.Ub(),o.Ub()),2&t){const t=o.hc();o.Cb(5),o.oc("formGroup",t.myForm1),o.Cb(1),o.oc("ngForOf",t.fieldJson)}}let U=(()=>{class t{constructor(t,i,e){this.utilsService=t,this.udfViewerDataService=i,this.formBuilder=e,this.doSuccess=new o.n,this.doFailure=new o.n,this.fieldJson=[],this.appConstants=s.h,this.myForm1Data={},this.myFormErrors1={},this.myFormValidationMsgs1={}}ngOnInit(){}getFields(t){this.myForm1=this.formBuilder.group({}),this.udfViewerDataService.getFields(this.type,t).subscribe(t=>{"SUCCESS"===t.status?this.initializeJsonForm(t.results):this.utilsService.showFailureMsg(t)})}initializeJsonForm(t){Array.isArray(t)?t.forEach(t=>{t.controlName="control"+t.id;let i="";i="3"===t.fieldTypeId?t.value?this.utilsService.getPickerDateFormat(t.value):"":t.value,this.myForm1.addControl(t.controlName,new c.f(i)),"1"===t.requiredField&&this.generateValidators("required",t)}):t=[],this.myForm1.valueChanges.subscribe(t=>{this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1),this.myForm1Data=this.myForm1.getRawValue()}),this.myForm1Data=this.myForm1.getRawValue(),this.fieldJson=t}generateValidators(t,i){this.myFormValidationMsgs1[i.controlName]={},"required"===t&&this.myForm1.controls[i.controlName].setValidators(c.u.required),this.myFormErrors1[i.controlName]="",this.myFormValidationMsgs1[i.controlName].required=i.fieldLabel+" is required"}valid(){return this.myForm1.valid}getFormValues(){const t=[];return this.fieldJson.forEach(i=>{t.push({formControlId:i.id,value:this.myForm1Data[i.controlName]?this.myForm1Data[i.controlName]:""})}),t}checkValidations(){this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1,!0)}}return t.\u0275fac=function(i){return new(i||t)(o.Pb(s.g),o.Pb(r.mb),o.Pb(c.e))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-udf-viewer"]],inputs:{type:"type"},outputs:{doSuccess:"doSuccess",doFailure:"doFailure"},decls:1,vars:1,consts:[["class","box",4,"ngIf"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row",3,"formGroup"],["class","form-group col-sm-3",4,"ngFor","ngForOf"],[1,"form-group","col-sm-3"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"form-label"],["class","mandatory",4,"ngIf"],["type","text",1,"form-control","form-control-sm",3,"formControlName"],["class","validation-error",4,"ngIf"],[1,"mandatory"],[1,"validation-error"],[1,"form-control","form-control-sm",3,"formControlName"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["showButtonBar","true",3,"formControlName","monthNavigator","yearNavigator","yearRange","dateFormat"],["type","number",1,"form-control","form-control-sm",3,"formControlName"]],template:function(t,i){1&t&&o.Jc(0,V,7,2,"div",0),2&t&&o.oc("ngIf",i.fieldJson.length>0)},directives:[n.m,c.n,c.i,n.l,n.o,n.p,c.b,c.m,c.g,c.t,c.p,c.v,a.a,c.q],styles:[""]}),t})()},dJ0z:function(t,i,e){"use strict";e.d(i,"a",(function(){return s}));var o=e("o+NB"),c=e("fXoL");let s=(()=>{class t{}return t.\u0275mod=c.Nb({type:t}),t.\u0275inj=c.Mb({factory:function(i){return new(i||t)},imports:[[o.BranchModule]]}),t})()},w9rb:function(t,i,e){"use strict";e.d(i,"a",(function(){return d}));var o=e("fXoL"),c=e("ey9i"),s=e("oARB"),r=e("ofXK");const n=["fileUpload"];function a(t,i){1&t&&(o.Vb(0,"tr"),o.Vb(1,"th",12),o.Lc(2,"Action"),o.Ub(),o.Vb(3,"th",12),o.Lc(4,"Info"),o.Ub(),o.Vb(5,"th",12),o.Lc(6,"Download"),o.Ub(),o.Ub())}function l(t,i){if(1&t){const t=o.Wb();o.Vb(0,"a",16),o.dc("click",(function(){o.Dc(t);const i=o.hc().index;return o.hc().download(i)})),o.Lc(1,"Download"),o.Ub()}}function b(t,i){1&t&&(o.Vb(0,"span"),o.Lc(1,"-"),o.Ub())}function m(t,i){if(1&t){const t=o.Wb();o.Vb(0,"tr"),o.Vb(1,"td"),o.Vb(2,"a",13),o.dc("click",(function(){o.Dc(t);const e=i.index;return o.hc().delete(e)})),o.Qb(3,"i",14),o.Ub(),o.Ub(),o.Vb(4,"td"),o.Vb(5,"div"),o.Lc(6),o.Ub(),o.Vb(7,"div"),o.Lc(8),o.Ub(),o.Ub(),o.Vb(9,"td"),o.Jc(10,l,2,0,"a",15),o.Jc(11,b,2,0,"span",10),o.Ub(),o.Ub()}if(2&t){const t=i.$implicit;o.Cb(6),o.Nc("File Name: ",t.fileName,""),o.Cb(2),o.Nc("Attachment date: ",t.createdOn,""),o.Cb(2),o.oc("ngIf",t.downloadLink),o.Cb(1),o.oc("ngIf",!t.downloadLink)}}let d=(()=>{class t{constructor(t,i){this.utilsService=t,this.attachmentsDataService=i,this.doSuccess=new o.n,this.doFailure=new o.n,this.attachmentsList=[]}ngOnInit(){}loadAttachments(t){t&&this.attachmentsDataService.getAttachments(this.type,t).subscribe(t=>{"SUCCESS"===t.status?this.attachmentsList=t.results.searchResults:this.utilsService.showFailureMsg(t)})}save(t){if(t){const i=[];this.attachmentsList.forEach(e=>{e.id||i.push({fileName:e.fileName,screenName:this.type,referenceId:t})}),0===i.length?this.doSuccess.emit():this.attachmentsDataService.save(i).subscribe(t=>{"SUCCESS"===t.status?this.doSuccess.emit():(this.utilsService.showFailureMsg(t),this.doFailure.emit())})}else this.utilsService.showFailureMsg("Missing reference id to update!"),this.doFailure.emit()}upload(){const t=this.fileUpload.nativeElement.files||this.fileUpload.srcElement.files;if(0===t.length)return this.utilsService.showFailureMsg("Please select the file!"),!1;this.attachmentsDataService.upload(t).subscribe(t=>{"SUCCESS"===t.status?this.attachmentsList.push({id:"",fileName:t.results.fileName,createdOn:"Now"}):this.utilsService.showFailureMsg(t),this.fileUpload.nativeElement.value=""})}delete(t){this.attachmentsList[t].id?this.attachmentsDataService.delete(this.attachmentsList[t].id).subscribe(i=>{"SUCCESS"===i.status?(this.attachmentsList.splice(t,1),this.utilsService.showSuccessMsg(i)):this.utilsService.showFailureMsg(i)}):this.attachmentsList.splice(t,1)}download(t){this.utilsService.externalRedirect(this.attachmentsList[t].downloadLink)}}return t.\u0275fac=function(i){return new(i||t)(o.Pb(c.g),o.Pb(s.g))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-attachments"]],viewQuery:function(t,i){var e;1&t&&o.Pc(n,!0),2&t&&o.zc(e=o.ec())&&(i.fileUpload=e.first)},inputs:{type:"type"},outputs:{doSuccess:"doSuccess",doFailure:"doFailure"},decls:19,vars:2,consts:[[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-table"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],["colspan","4"],["type","file",1,"btn","btn-success","btn-sm"],["fileUpload",""],[1,"btn","btn-primary","btn-sm",3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"min-width","120px"],[1,"action","red",3,"click"],[1,"fa","fa-minus-circle"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,i){1&t&&(o.Vb(0,"div",0),o.Vb(1,"div",1),o.Qb(2,"i",2),o.Lc(3,"Attachments "),o.Ub(),o.Vb(4,"div",3),o.Vb(5,"div",4),o.Vb(6,"table",5),o.Vb(7,"thead"),o.Vb(8,"tr"),o.Vb(9,"th",6),o.Lc(10," Select file \xa0 "),o.Qb(11,"input",7,8),o.Lc(13," \xa0 "),o.Vb(14,"button",9),o.dc("click",(function(){return i.upload()})),o.Lc(15,"Upload"),o.Ub(),o.Ub(),o.Ub(),o.Jc(16,a,7,0,"tr",10),o.Ub(),o.Vb(17,"tbody"),o.Jc(18,m,12,4,"tr",11),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&t&&(o.Cb(16),o.oc("ngIf",i.attachmentsList.length>0),o.Cb(2),o.oc("ngForOf",i.attachmentsList))},directives:[r.m,r.l],styles:[""]}),t})()}}]);