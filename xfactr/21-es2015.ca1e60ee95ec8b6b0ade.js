(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{WfjI:function(t,e,i){"use strict";i.r(e),i.d(e,"RentalModule",(function(){return oa}));var r=i("tyNb"),n=i("ey9i"),s=i("fXoL"),o=i("oARB"),a=i("3Pt+"),c=i("HDdC"),u=i("LvDl"),m=i("IzNV");let l=(()=>{class t{constructor(t,e,i,r,s,o,a,c,u,m){this.rentalQuoteDataService=t,this.rentalOrderDataService=e,this.rentalDeliveryDataService=i,this.rentalInvoiceDataService=r,this.rentalReturnDataService=s,this.inspectionOutDataService=o,this.branchUtilsService=a,this.utilsService=c,this.storageService=u,this.formBuilder=m,this.appConstants=n.h,this.initializeSubscriptions()}initializeSubscriptions(){this.branchUtilsService.spiTxnOptionsDownloadPdf.subscribe(t=>{this.downloadPDF(t)})}checkScreenNameValid(t){return!(!this.branchUtilsService.screenAttributes.hasOwnProperty(t)||"rentalQuote"!==t&&"rentalOrder"!==t&&"rentalDelivery"!==t&&"rentalReturn"!==t&&"rentalInvoice"!==t)}getScreenDataService(t){return"rentalQuote"===t?this.rentalQuoteDataService:"rentalOrder"===t?this.rentalOrderDataService:"rentalDelivery"===t?this.rentalDeliveryDataService:"rentalInvoice"===t?this.rentalInvoiceDataService:"rentalReturn"===t?this.rentalReturnDataService:"inspectionOut"===t?this.inspectionOutDataService:void 0}addFieldsVisibility(t,e){return!("rentalQuote"!==t&&"rentalOrder"!==t||"fnDeliveryDate"!==e&&"fnTaxFields"!==e&&"fnPaymentFields"!==e)||"rentalDelivery"===t&&"fnDeliveryDate"===e||"rentalInvoice"===t&&("fnDueDate"===e||"fnTaxFields"===e||"fnPaymentFields"===e)||"rentalReturn"===t&&"fnReturnDate"===e||void 0}getFormErrors(t,e){if("mainFields"===e){const e={documentNumberingId:"",documentNumber:"",customerBpId:"",currencyId:"",postingDate:"",documentDate:"",status:"",empId:"",discountPercentage:"",rounding:"",totalAmount:"",itemListArray:[]};return"rentalQuote"===t||"rentalOrder"===t||"rentalDelivery"===t?e.deliveryDate="":"rentalInvoice"===t?e.dueDate="":"rentalReturn"===t&&(e.returnDate=""),e}if("itemFields"===e){const e={rentalItemId:"",rentalEquipmentId:"",taxId:"",quantity:""};return"rentalQuote"!==t&&(e.duration="",e.startDate="",e.endDate="",e.shipDate="",e.returnDate="",e.poExpiryDate=""),e}}getFormValMsgs(t){const e={documentNumberingId:{required:"Document No is required"},documentNumber:{required:"Document No is required"},customerBpId:{required:"Business Partner Name is required"},currencyId:{required:"Currency is required"},postingDate:{required:"Posting Date is required"},documentDate:{required:"Document Date is required"},empId:{required:"Employee is required"},status:{required:"Status is required"},discountPercentage:{min:"Enter 0 to 100",max:"Enter 0 to 100",pattern:"Only positive numbers are allowed"},rounding:{pattern:"Only numbers are allowed"},totalAmount:{required:"Total Amount is required"}};return"rentalQuote"===t||"rentalOrder"===t||"rentalDelivery"===t?e.deliveryDate={required:"Delivery Date is required"}:"rentalInvoice"===t?e.dueDate={required:"Due Date is required"}:"rentalReturn"===t&&(e.returnDate={required:"Return Date is required"}),e.itemListArray={rentalItemId:{required:"Item Name is required"},rentalEquipmentId:{required:"Equipment is required"},taxId:{required:"Tax Code is required"},quantity:{min:"Minimum 1",pattern:"Only positive numbers are allowed"}},"rentalQuote"!==t&&(e.itemListArray.duration={required:"Duration is required"},e.itemListArray.startDate={required:"Start Date is required"},e.itemListArray.endDate={required:"End Date is required"},e.itemListArray.shipDate={required:"Ship Date is required"},e.itemListArray.returnDate={required:"Return Date is required"},e.itemListArray.poExpiryDate={required:"PO Expiry Date is required"}),e}getFormMainFields(t){const e={documentNumberingId:[null,[a.u.required]],documentNumber:["",[a.u.required]],documentNumberingType:[""],customerBpId:[null,[a.u.required]],customerBpContactsId:[null],currencyId:["",[a.u.required]],referenceNumber:[""],postingDate:[new Date,[a.u.required]],documentDate:[new Date,[a.u.required]],empId:[null,[a.u.required]],status:["1",[a.u.required]],remarks:[""],totalBeforeDiscount:["0.00"],discountPercentage:["0.00",[a.u.min(0),a.u.max(100),a.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],discountValue:["0.00"],taxPercentage:["0.00"],roundingOffCheckbox:[!1],rounding:[{value:"0.00",disabled:!0},[a.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveNegativeFloatNumber)]],totalAmount:["0.00",[a.u.required]],customerShipToBpAddressId:[""],customerShipToAddress:[""],customerBillToBpAddressId:[""],customerBillToAddress:[""],deletedItemChildIds:[[]],termsAndConditionId:[""],itemsTotalAmount:["0.00"],editFlag:[!1]};"rentalQuote"===t||"rentalOrder"===t?(e.deliveryDate=["",[a.u.required]],e.taxCode=[""],e.paymentTermsId=[""],e.paymentMethodId=[""]):"rentalInvoice"===t?(e.dueDate=["",[a.u.required]],e.taxCode=[""],e.paymentTermsId=[""],e.paymentMethodId=[""]):"rentalReturn"===t?e.returnDate=["",[a.u.required]]:"rentalDelivery"===t&&(e.deliveryDate=["",[a.u.required]]),e.itemListArray=this.formBuilder.array([]);const i=this.formBuilder.group(e);return this.setMainFieldsCustomValidation(i,t),i}setMainFieldsCustomValidation(t,e){const i=[];"rentalQuote"===e||"rentalOrder"===e||"rentalDelivery"===e?i.push(this.utilsService.startEndDateValidator("documentDate","deliveryDate","invalidDeliveryDate","Should => Document Date")):"rentalReturn"===e?i.push(this.utilsService.startEndDateValidator("documentDate","returnDate","invalidReturnDate","Should => Document Date")):"rentalInvoice"===e&&i.push(this.utilsService.startEndDateValidator("documentDate","dueDate","invalidDueDate","Should => Document Date")),i.push(this.utilsService.startEndDateValidator("postingDate","documentDate","invalidPostingDate","Should <= Document Date")),t.setValidators(a.u.compose(i)),t.updateValueAndValidity()}getMainFieldsWithData(t,e){const i={};return this.utilsService.updateObject(i,"documentNumberingId",e.documentNumberingId),this.utilsService.updateObject(i,"documentNumber",e.documentNumber),e.documentNumberingInfo&&this.utilsService.updateObject(i,"documentNumberingType",e.documentNumberingInfo.length>0?e.documentNumberingInfo[0].documentNumberingType:""),this.utilsService.updateObject(i,"customerBpId",e.customerBpId),this.utilsService.updateObject(i,"customerBpContactsId",e.customerBpContactsId),this.utilsService.updateObject(i,"currencyId",e.currencyId),this.utilsService.updateObject(i,"referenceNumber",e.referenceNumber),this.utilsService.updateObject(i,"postingDate",e.postingDate,"date"),this.utilsService.updateObject(i,"documentDate",e.documentDate,"date"),this.utilsService.updateObject(i,"empId",e.empId),this.utilsService.updateObject(i,"status",e.status),this.utilsService.updateObject(i,"remarks",e.remarks),this.utilsService.updateObject(i,"totalBeforeDiscount",e.totalBeforeDiscount),this.utilsService.updateObject(i,"discountPercentage",e.discountPercentage),this.utilsService.updateObject(i,"discountValue",e.discountValue),this.utilsService.updateObject(i,"taxPercentage",e.taxPercentage),"1"===e.roundingFlag&&(i.roundingOffCheckbox=!0),this.utilsService.updateObject(i,"rounding",e.rounding),this.utilsService.updateObject(i,"totalAmount",e.totalAmount),this.utilsService.updateObject(i,"customerShipToBpAddressId",e.customerShipToBpAddressId),this.utilsService.updateObject(i,"customerShipToAddress",e.customerShipToAddress),this.utilsService.updateObject(i,"customerBillToBpAddressId",e.customerBillToBpAddressId),this.utilsService.updateObject(i,"customerBillToAddress",e.customerBillToAddress),this.utilsService.updateObject(i,"termsAndConditionId",e.termsAndConditionId),"rentalQuote"===t||"rentalOrder"===t||"rentalDelivery"===t?(this.utilsService.updateObject(i,"deliveryDate",e.deliveryDate,"date"),this.utilsService.updateObject(i,"taxCode",e.taxCode),this.utilsService.updateObject(i,"paymentTermsId",e.paymentTermsId),this.utilsService.updateObject(i,"paymentMethodId",e.paymentMethodId)):"rentalInvoice"===t?(this.utilsService.updateObject(i,"dueDate",e.dueDate,"date"),this.utilsService.updateObject(i,"taxCode",e.taxCode),this.utilsService.updateObject(i,"paymentTermsId",e.paymentTermsId),this.utilsService.updateObject(i,"paymentMethodId",e.paymentMethodId)):"rentalReturn"===t?this.utilsService.updateObject(i,"returnDate",e.returnDate,"date"):"rentalDelivery"===t&&this.utilsService.updateObject(i,"deliveryDate",e.deliveryDate,"date"),this.utilsService.updateObject(i,"editFlag",e.editFlag),i}getFormItemFields(t,e,i){const r=[];this.storageService.get("distRulesMode")&&r.push(a.u.required);const n={rentalItemId:[null,[a.u.required]],quantity:[1,[a.u.min(1),a.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveIntNumber)]],generalDetails:[""],duration:[""],startDate:[""],endDate:[""],shipDate:[""],returnDate:[""],poExpiryDate:[""],uomId:[null],unitPrice:["0.00",[a.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],hsnId:[null],discountPercentage:["0.00",[a.u.min(0),a.u.max(100),a.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],taxId:[this.storageService.get("salesTaxId")?this.storageService.get("salesTaxId"):null,[a.u.required]],itemTaxPercentage:["0.00"],itemTaxValue:["0.00"],totalItemAmount:["0.00"],distributionRulesId:[null,r],id:[""],copyFromType:[""],copyFromId:[""],equipmentList:[[]],rentalEquipmentId:[null],isUtilized:[""],showDeleteIcon:[!0]};"rentalQuote"!==t&&(n.duration[1]=a.u.required,n.startDate[1]=a.u.required,n.endDate[1]=a.u.required,n.shipDate[1]=a.u.required,n.returnDate[1]=a.u.required,n.poExpiryDate[1]=a.u.required,n.rentalEquipmentId[1]=a.u.required),"rentalOrder"===t?(n.openQuantity=[0],n.orderedQuantity=[0]):"rentalInvoice"===t&&(n.rentalWorklogId=[null],n.rentalWorklogList=[[]],n.copyFromOpenQuantity=[0],n.openQuantity=[0],n.orderedQuantity=[0]),e&&this.setDataToItemFields(t,n,e);const s=this.formBuilder.group(n);return this.setItemFieldsCustomValidations(s,t,i),s}setItemFieldsCustomValidations(t,e,i){const r=[],n=t.getRawValue();n.startDate&&n.endDate&&r.push(this.utilsService.startEndDateValidator("startDate","endDate","invalidEndDate","Should >= Start Date")),n.shipDate&&n.startDate&&r.push(this.utilsService.startEndDateValidator("shipDate","startDate","invalidShipDate","Should <= Start Date")),n.endDate&&n.returnDate&&r.push(this.utilsService.startEndDateValidator("endDate","returnDate","invalidReturnDate","Should >= End Date")),"edit"!==i||"rentalOrder"!==e&&"rentalInvoice"!==e?"copy"!==i||"rentalOrder"!==e&&"rentalInvoice"!==e||r.push(this.utilsService.maxValidator("quantity",n.copyFromOpenQuantity,"invalidMaxQuantity","Maximum : "+n.copyFromOpenQuantity)):r.push(this.utilsService.minValidator("quantity",n.orderedQuantity,"invalidMinQuantity","Minimum : "+n.orderedQuantity)),t.setValidators(a.u.compose(r)),t.updateValueAndValidity()}setDataToItemFields(t,e,i){this.utilsService.updateObject(e,"rentalItemId",i.rentalItemId),this.utilsService.updateObject(e,"rentalEquipmentId",i.rentalEquipmentId),this.utilsService.updateObject(e,"generalDetails",i.generalDetails),this.utilsService.updateObject(e,"quantity",i.quantity),this.utilsService.updateObject(e,"duration",i.duration),this.utilsService.updateObject(e,"startDate",i.startDate,"date"),this.utilsService.updateObject(e,"endDate",i.endDate,"date"),this.utilsService.updateObject(e,"shipDate",i.shipDate,"date"),this.utilsService.updateObject(e,"returnDate",i.returnDate,"date"),this.utilsService.updateObject(e,"poExpiryDate",i.poExpiryDate,"date"),this.utilsService.updateObject(e,"uomId",i.uomId),this.utilsService.updateObject(e,"unitPrice",i.unitPrice),this.utilsService.updateObject(e,"hsnId",i.hsnId),this.utilsService.updateObject(e,"discountPercentage",i.discountPercentage),this.utilsService.updateObject(e,"taxId",i.taxId),this.utilsService.updateObject(e,"itemTaxPercentage",i.itemTaxPercentage),this.utilsService.updateObject(e,"itemTaxValue",i.itemTaxValue),this.utilsService.updateObject(e,"totalItemAmount",i.totalItemAmount),this.utilsService.isEmpty(i.distributionRulesId)||(e.distributionRulesId[0]=this.branchUtilsService.distRulesRemoveZeroPatternOnEdit(i.distributionRulesId)),this.utilsService.updateObject(e,"id",i.id),this.utilsService.updateObject(e,"copyFromType",i.copyFromType),this.utilsService.updateObject(e,"copyFromId",i.copyFromId),this.utilsService.updateObject(e,"equipmentList",i.rentalItemInfo[0].rentalEquipmentList),this.utilsService.updateObject(e,"isUtilized",i.isUtilized),"rentalInvoice"===t&&(this.utilsService.updateObject(e,"rentalWorklogId",i.rentalWorklogId),this.utilsService.updateObject(e,"rentalWorklogList",i.rentalWorklogInfo),this.utilsService.updateObject(e,"orderedQuantity",i.orderedQuantity),this.utilsService.updateObject(e,"openQuantity",i.openQuantity),this.utilsService.updateObject(e,"copyFromOpenQuantity",i.copyFromOpenQuantity)),"rentalOrder"===t&&(this.utilsService.updateObject(e,"orderedQuantity",i.orderedQuantity),this.utilsService.updateObject(e,"openQuantity",i.openQuantity))}getSaveUpdateDataFormation(t,e){const i=e.getRawValue(),r={documentNumberingId:i.documentNumberingId,documentNumber:i.documentNumber,documentNumberingType:i.documentNumberingType,postingDate:this.utilsService.getBackendDateFormat(i.postingDate),documentDate:this.utilsService.getBackendDateFormat(i.documentDate),status:i.status,remarks:i.remarks,totalBeforeDiscount:i.totalBeforeDiscount,discountPercentage:i.discountPercentage,discountValue:i.discountValue,taxPercentage:i.taxPercentage,roundingFlag:i.roundingOffCheckbox?1:0,rounding:i.rounding,totalAmount:i.totalAmount,customerBpId:i.customerBpId,customerBpContactsId:i.customerBpContactsId,currencyId:i.currencyId,referenceNumber:i.referenceNumber,empId:i.empId,roundingOffCheckbox:i.roundingOffCheckbox,customerShipToBpAddressId:i.customerShipToBpAddressId,customerShipToAddress:i.customerShipToAddress,customerBillToBpAddressId:i.customerBillToBpAddressId,customerBillToAddress:i.customerBillToAddress,itemListArray:[],deletedItemChildIds:i.deletedItemChildIds,termsAndConditionId:i.termsAndConditionId};return"rentalQuote"===t||"rentalOrder"===t?(r.deliveryDate=this.utilsService.getBackendDateFormat(i.deliveryDate),r.taxCode=i.taxCode,r.paymentTermsId=i.paymentTermsId,r.paymentMethodId=i.paymentMethodId):"rentalInvoice"===t?(r.dueDate=this.utilsService.getBackendDateFormat(i.dueDate),r.taxCode=i.taxCode,r.paymentTermsId=i.paymentTermsId,r.paymentMethodId=i.paymentMethodId):"rentalReturn"===t?r.returnDate=this.utilsService.getBackendDateFormat(i.returnDate):"rentalDelivery"===t&&(r.deliveryDate=this.utilsService.getBackendDateFormat(i.deliveryDate)),i.itemListArray.forEach(e=>{if("3"===i.status&&this.utilsService.isEmpty(e.id));else{const i={rentalItemId:e.rentalItemId,rentalEquipmentId:e.rentalEquipmentId,generalDetails:e.generalDetails,duration:e.duration,startDate:this.utilsService.getBackendDateFormat(e.startDate),endDate:this.utilsService.getBackendDateFormat(e.endDate),shipDate:this.utilsService.getBackendDateFormat(e.shipDate),returnDate:this.utilsService.getBackendDateFormat(e.returnDate),poExpiryDate:this.utilsService.getBackendDateFormat(e.poExpiryDate),quantity:e.quantity,uomId:e.uomId,unitPrice:e.unitPrice,hsnId:e.hsnId,discountPercentage:e.discountPercentage,taxId:e.taxId,itemTaxPercentage:e.itemTaxPercentage,itemTaxValue:e.itemTaxValue,totalItemAmount:e.totalItemAmount,distributionRulesId:Array.isArray(e.distributionRulesId)?e.distributionRulesId.join(","):"",id:e.id,copyFromType:e.copyFromType,copyFromId:e.copyFromId};"rentalInvoice"===t&&(i.rentalWorklogId=e.rentalWorklogId),r.itemListArray.push(i)}}),r}manipulationsOnEdit(t,e){"1"===e.value.status?(e.controls.documentNumberingId.disable(),e.controls.documentNumber.disable(),e.controls.customerBpId.disable(),e.controls.roundingOffCheckbox.disable(),e.controls.rounding.disable(),e.controls.itemListArray.controls.forEach(e=>{const i=e.getRawValue();e.controls.rentalItemId.disable(),this.utilsService.isEmpty(e.controls.rentalEquipmentId.value)?e.controls.rentalEquipmentId.enable():e.controls.rentalEquipmentId.disable(),"1"===i.isUtilized&&e.patchValue({showDeleteIcon:!1}),"rentalOrder"===t&&(parseInt(i.orderedQuantity,0)>0&&e.patchValue({showDeleteIcon:!1}),parseInt(i.openQuantity,0)<=0&&(e.disable(),e.patchValue({showDeleteIcon:!1}))),"rentalDelivery"!==t&&"rentalReturn"!==t&&"rentalInvoice"!==t||(e.disable(),e.patchValue({showDeleteIcon:!1}))}),"rentalDelivery"!==t&&"rentalReturn"!==t&&"rentalInvoice"!==t||(e.disable(),e.controls.customerBpContactsId.enable(),e.controls.empId.enable(),e.controls.remarks.enable(),e.controls.status.enable(),"rentalDelivery"===t?e.controls.deliveryDate.enable():"rentalInvoice"===t?e.controls.dueDate.enable():"rentalReturn"===t&&e.controls.returnDate.enable())):e.enable()}manipulationsOnCopy(t,e){e.controls.customerBpId.disable(),e.controls.itemListArray.controls.forEach(t=>{t.controls.rentalItemId.disable(),t.controls.rentalEquipmentId.value?t.controls.rentalEquipmentId.disable():t.controls.rentalEquipmentId.enable()})}redirectToList(t){this.utilsService.redirect("/branch/rental/rental-txn-list/"+t)}getFormSearchFields(t){return{fromDate:"",toDate:"",isDraft:!1,branchName:"",customerName:"",documentNumber:"",postingDate:"",DeliveryDate:"",status:1}}getSearchDataFormation(t,e){return{fromDate:this.utilsService.getBackendDateFormat(e.fromDate),toDate:this.utilsService.getBackendDateFormat(e.toDate),isDraft:e.isDraft?1:0,branchName:e.branchName,customerName:e.customerName,documentNumber:e.documentNumber,postingDate:this.utilsService.getBackendDateFormat(e.postingDate),deliveryDate:this.utilsService.getBackendDateFormat(e.deliveryDate),status:e.status}}redirectToAdd(t){this.utilsService.redirect("/branch/rental/rental-txn-add/"+t)}redirectToEdit(t,e,i){this.utilsService.redirect("1"===i?"/branch/rental/rental-txn-edit-draft/"+t+"/"+this.utilsService.encrypt(e):"/branch/rental/rental-txn-edit/"+t+"/"+this.utilsService.encrypt(e))}checkEquipmentDuplicateExist(t){const e=t.getRawValue(),i=[];return e.itemListArray.forEach(t=>{this.utilsService.isEmpty(t.rentalEquipmentId)||i.push({rentalEquipmentId:t.rentalEquipmentId})}),u.uniqWith(i,u.isEqual).length!==i.length}checkWorklogDuplicateExist(t){const e=t.getRawValue(),i=[];return e.itemListArray.forEach(t=>{t.rentalWorklogId&&i.push({rentalWorklogId:t.rentalWorklogId})}),u.uniqWith(i,u.isEqual).length!==i.length}checkWorklogUtilized(t){return u.filter(t.itemListArray,t=>!this.utilsService.isEmpty(t.rentalWorklogId)).length>0}getAnalyticsData(t){const e=this.getScreenDataService(t);return new c.a(t=>{e.getAnalyticsData().subscribe(e=>{if("SUCCESS"===e.status){const i=u.orderBy(e.results,["id"],["asc"]);t.next(i),t.complete()}else this.utilsService.showFailureMsg(e),t.error(),t.complete()})})}downloadAsExcel(t,e){this.utilsService.showSuccessMsg("Processing to download the Excel..."),this.getScreenDataService(t).downloadAsExcel(e).subscribe(t=>{"SUCCESS"===t.status?this.utilsService.externalRedirect(t.fileUrl):this.utilsService.showFailureMsg(t)})}downloadPDF(t){t.spiName===this.branchUtilsService.spiTxnId.rental&&(this.utilsService.showSuccessMsg("Processing to download the PDF..."),this.getScreenDataService(t.screenName).downloadPDF(t.id).subscribe(t=>{this.utilsService.externalRedirect(t.url,!0)}))}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(o.R),s.Zb(o.Q),s.Zb(o.M),s.Zb(o.O),s.Zb(o.S),s.Zb(o.x),s.Zb(m.a),s.Zb(n.g),s.Zb(n.f),s.Zb(a.e))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})(),b=(()=>{class t{constructor(t,e,i,r,n,s,o,a){this.branchUtilsService=t,this.inspectionInDataService=e,this.inspectionOutDataService=i,this.rentalQuoteDataService=r,this.rentalOrderDataService=n,this.rentalReturnDataService=s,this.storageService=o,this.utilsService=a,this.initializeSubscriptions()}initializeSubscriptions(){this.branchUtilsService.spiTxnOptionsDownloadPdf.subscribe(t=>{this.downloadPDF(t)})}checkScreenNameValid(t){return!(!this.branchUtilsService.screenAttributes.hasOwnProperty(t)||"inspectionIn"!==t&&"inspectionOut"!==t)}getScreenDataService(t){return"inspectionIn"===t?this.inspectionInDataService:"inspectionOut"===t?this.inspectionOutDataService:"rentalQuote"===t?this.rentalQuoteDataService:"rentalOrder"===t?this.rentalOrderDataService:"rentalReturn"===t?this.rentalReturnDataService:void 0}getFormErrors(t,e){if("mainFields"===e)return{documentNumberingId:"",documentNumber:"",rentalItemId:"",rentalEquipmentId:"",customerBpId:"",status:"",distributionRulesId:"",itemListArray:[]}}getFormValMsgs(t){return{documentNumberingId:{required:"Document No is required"},documentNumber:{required:"Document No is required"},rentalItemId:{required:"Item Name is required"},rentalEquipmentId:{required:"Equipment is required"},customerBpId:{required:"Business Partner Name is required"},status:{required:"Status is required"},distributionRulesId:{required:"Distribution Rules is required"},invalidItemStartDateTime:"Invalid Item Start Date Time",invalidItemEndDateTime:"Invalid Item End Date Time"}}getFormMainFields(t){const e={documentNumberingId:[null,[a.u.required]],documentNumber:["",[a.u.required]],documentNumberingType:[""],rentalItemId:[null,[a.u.required]],rentalEquipmentId:[null,[a.u.required]],equipmentList:[[]],currencyId:["0"],customerBpId:[null,[a.u.required]],customerBpContactsId:[null],referenceNumber:[""],empId:[null],status:["1",[a.u.required]],remarks:[""],distributionRulesId:[null],inspectionOverallStatus:["0"],inspectionTemplateId:[{value:"",disabled:!1}],copyFromType:[""],copyFromId:[""],id:[""]};return this.storageService.get("distRulesMode")&&(e.distributionRulesId=["",[a.u.required]]),e}getMainFieldsWithData(t,e){const i={};return this.utilsService.updateObject(i,"documentNumberingId",e.documentNumberingId),this.utilsService.updateObject(i,"documentNumber",e.documentNumber),e.documentNumberingInfo&&this.utilsService.updateObject(i,"documentNumberingType",e.documentNumberingInfo.length>0?e.documentNumberingInfo[0].documentNumberingType:""),this.utilsService.updateObject(i,"rentalItemId",e.rentalItemId),this.utilsService.updateObject(i,"rentalEquipmentId",e.rentalEquipmentId),this.utilsService.updateObject(i,"equipmentList",e.rentalEquipmentInfo),this.utilsService.updateObject(i,"customerBpId",e.customerBpId),this.utilsService.updateObject(i,"customerBpContactsId",e.customerBpContactsId),this.utilsService.updateObject(i,"referenceNumber",e.referenceNumber),this.utilsService.updateObject(i,"empId",e.empId),this.utilsService.updateObject(i,"status",e.status),this.utilsService.updateObject(i,"remarks",e.remarks),this.utilsService.updateObject(i,"inspectionOverallStatus",e.inspectionOverallStatus),this.utilsService.updateObject(i,"inspectionTemplateId",e.inspectionTemplateId),this.utilsService.updateObject(i,"copyFromType",e.itemListArray?e.itemListArray[0].copyFromType:""),this.utilsService.updateObject(i,"copyFromId",e.itemListArray?e.itemListArray[0].copyFromId:""),this.utilsService.updateObject(i,"currencyId",e.currencyId),this.utilsService.updateObject(i,"id",e.itemListArray?e.itemListArray[0].id:""),this.utilsService.isEmpty(e.distributionRulesId)||(i.distributionRulesId=this.branchUtilsService.distRulesRemoveZeroPatternOnEdit(e.distributionRulesId)),i}getSaveUpdateDataFormation(t,e){const i=e.getRawValue();return{documentNumberingId:i.documentNumberingId,documentNumber:i.documentNumber,documentNumberingType:i.documentNumberingType,rentalItemId:i.rentalItemId,rentalEquipmentId:i.rentalEquipmentId,currencyId:i.currencyId,status:i.status,remarks:i.remarks,customerBpId:i.customerBpId,customerBpContactsId:i.customerBpContactsId,referenceNumber:i.referenceNumber,empId:i.empId,inspectionOverallStatus:this.inspectionOverallStatus(),inspectionTemplateId:i.inspectionTemplateId,distributionRulesId:Array.isArray(i.distributionRulesId)?i.distributionRulesId.join(","):"",itemListArray:[{templateDetails:JSON.stringify(this.branchUtilsService.inspectionListArray),copyFromType:i.copyFromType,copyFromId:i.copyFromId,id:i.id}]}}inspectionOverallStatus(){const t=[];this.branchUtilsService.inspectionListArray.forEach(e=>{t.push({status:e[0].status})});const e=u.filter(t,{status:"Not Ok"}),i=u.filter(t,{status:""});return e.length>0||i.length>0?"0":"1"}manipulationsOnEdit(t,e){"1"===e.value.status?(e.controls.documentNumberingId.disable(),e.controls.documentNumber.disable(),e.controls.customerBpId.disable(),e.controls.rentalItemId.disable(),e.controls.rentalEquipmentId.disable()):e.enable()}manipulationsOnCopy(t,e){e.controls.customerBpId.disable(),e.controls.rentalItemId.disable(),this.utilsService.isEmpty(e.controls.rentalEquipmentId.value)?e.controls.rentalEquipmentId.enable():e.controls.rentalEquipmentId.disable()}redirectToList(t){this.utilsService.redirect("/branch/rental/inspection-txn-list/"+t)}redirectToAdd(t){this.utilsService.redirect("/branch/rental/inspection-txn-add/"+t)}redirectToEdit(t,e,i){this.utilsService.redirect("1"===i?"/branch/rental/inspection-txn-edit-draft/"+t+"/"+this.utilsService.encrypt(e):"/branch/rental/inspection-txn-edit/"+t+"/"+this.utilsService.encrypt(e))}getFormSearchFields(t){return{fromDate:"",toDate:"",isDraft:!1,branchName:"",documentNumber:"",customerName:"",itemName:"",equipmentName:"",status:1}}getSearchDataFormation(t,e){return{fromDate:this.utilsService.getBackendDateFormat(e.fromDate),toDate:this.utilsService.getBackendDateFormat(e.toDate),isDraft:e.isDraft?1:0,branchName:e.branchName,customerName:e.customerName,documentNumber:e.documentNumber,itemName:e.itemName,equipmentName:e.equipmentName,status:e.status}}getAnalyticsData(t){const e=this.getScreenDataService(t);return new c.a(t=>{e.getAnalyticsData().subscribe(e=>{if("SUCCESS"===e.status){const i=u.orderBy(e.results,["id"],["asc"]);t.next(i),t.complete()}else this.utilsService.showFailureMsg(e),t.error(),t.complete()})})}downloadAsExcel(t,e){this.utilsService.showSuccessMsg("Processing to download the Excel..."),this.getScreenDataService(t).downloadAsExcel(e).subscribe(t=>{"SUCCESS"===t.status?this.utilsService.externalRedirect(t.fileUrl):this.utilsService.showFailureMsg(t)})}downloadPDF(t){t.spiName===this.branchUtilsService.spiTxnId.inspection&&(this.utilsService.showSuccessMsg("Processing to download the PDF..."),this.getScreenDataService(t.screenName).downloadPDF(t.id).subscribe(t=>{this.utilsService.externalRedirect(t.url,!0)}))}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(m.a),s.Zb(o.w),s.Zb(o.x),s.Zb(o.R),s.Zb(o.Q),s.Zb(o.S),s.Zb(n.f),s.Zb(n.g))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})();var d=i("wd/R");let h=(()=>{class t{constructor(t,e,i,r,n){this.utilsService=t,this.formBuilder=e,this.storageService=i,this.branchUtilsService=r,this.rentalWorklogDataService=n,this.initializeSubscriptions()}initializeSubscriptions(){this.branchUtilsService.spiTxnOptionsDownloadPdf.subscribe(t=>{this.downloadPDF(t)})}checkScreenNameValid(t){return!(!this.branchUtilsService.screenAttributes.hasOwnProperty(t)||"worklog"!==t)}getFormErrors(){return{documentNumberingId:"",documentNumber:"",rentalItemId:"",rentalEquipmentId:"",customerBpId:"",customerBpContactsId:"",startDate:"",endDate:"",shiftStartHour:"",shiftStartMinute:"",shiftEndMinute:"",shiftEndHour:"",documentDate:"",empId:"",status:"",distributionRulesId:"",itemListArray:[]}}getFormValMsgs(){return{documentNumberingId:{required:"Document No is required"},documentNumber:{required:"Document No is required"},rentalItemId:{required:"Item Name is required"},rentalEquipmentId:{required:"Equipment is required"},customerBpId:{required:"Business Partner Name is required"},customerBpContactsId:{required:"Contact Person is required"},startDate:{required:"Start Date is required"},endDate:{required:"End Date is required"},shiftStartHour:{required:"Shift Start Time is required"},shiftStartMinute:{required:"Shift Start Time is required"},shiftEndMinute:{required:"Shift End Time is required"},shiftEndHour:{required:"Shift End Time is required"},documentDate:{required:"Document Date is required"},status:{required:"Status is required"},distributionRulesId:{required:"Dist. Rules is required"},itemListArray:{worklogItemTypeId:{required:"Work Type is required"},startDateTime:{required:"Start Date and Time is required"},endDateTime:{required:"End Date and Time is required"}}}}getFormMainFields(){const t={documentNumberingId:[{value:null,disabled:!1},[a.u.required]],documentNumber:[{value:"",disabled:!1},[a.u.required]],documentNumberingType:[""],rentalItemId:[{value:null,disabled:!1},[a.u.required]],rentalEquipmentId:[{value:null,disabled:!1},[a.u.required]],equipmentList:[[]],customerBpId:[null,[a.u.required]],customerBpContactsId:[null],currencyId:[""],referenceNumber:[""],startDate:["",[a.u.required]],endDate:["",[a.u.required]],shiftStartHour:["00",[a.u.required]],shiftStartMinute:["00",[a.u.required]],shiftEndHour:["00",[a.u.required]],shiftEndMinute:["00",[a.u.required]],documentDate:["",[a.u.required]],empId:[null],status:["1",[a.u.required]],remarks:[""],deletedItemChildIds:[[]],totalWorkingHours:[0],totalBreakDownHours:[0],totalOverTimeHours:[0],distributionRulesId:[null],totalBillableHours:[0],copyFromType:[""],copyFromId:[""],itemListArray:this.formBuilder.array([])},e=this.formBuilder.group(t);return this.storageService.get("distRulesMode")&&e.controls.distributionRulesId.setValidators([a.u.required]),this.setCustomValidations(e),e}setCustomValidations(t){const e=[];e.push(this.utilsService.startEndDateValidator("startDate","endDate","invalidEndDate","Should >= start date")),e.push(this.utilsService.startEndTimeValidator("shiftStartHour","shiftStartMinute","shiftEndHour","shiftEndMinute","invalidShiftEndTime","Should >= shift start time")),t.setValidators(a.u.compose(e)),t.updateValueAndValidity()}setItemCustomValidation(t){const e=[];e.push(this.utilsService.startEndDateTimeValidator("startDate","startDateTime","invalidItemStartDateTime","should >= Basic info start Date")),e.push(this.utilsService.startEndDateTimeValidator("endDateTime","endDate","invalidItemEndDateTime","should =< Basic info end date")),e.push(this.utilsService.startEndDateTimeValidator("startDateTime","endDateTime","invalidEndDateTime","Should >= Start Date Time")),t.setValidators(a.u.compose(e)),t.updateValueAndValidity()}getMainFieldsWithData(t){const e={};return this.utilsService.updateObject(e,"documentNumberingId",t.documentNumberingId),this.utilsService.updateObject(e,"documentNumber",t.documentNumber),t.documentNumberingInfo&&this.utilsService.updateObject(e,"documentNumberingType",t.documentNumberingInfo.length>0?t.documentNumberingInfo[0].documentNumberingType:""),this.utilsService.updateObject(e,"rentalItemId",t.rentalItemId),this.utilsService.updateObject(e,"rentalEquipmentId",t.rentalEquipmentId),this.utilsService.updateObject(e,"equipmentList",t.rentalEquipmentInfo),this.utilsService.updateObject(e,"customerBpId",t.customerBpId),this.utilsService.updateObject(e,"customerBpContactsId",t.customerBpContactsId),this.utilsService.updateObject(e,"referenceNumber",t.referenceNumber),this.utilsService.updateObject(e,"empId",t.empId),this.utilsService.updateObject(e,"status",t.status),this.utilsService.updateObject(e,"remarks",t.remarks),this.utilsService.updateObject(e,"copyFromType",t.copyFromType),this.utilsService.updateObject(e,"copyFromId",t.copyFromId),this.utilsService.updateObject(e,"startDate",t.startDate,"date"),this.utilsService.updateObject(e,"endDate",t.endDate,"date"),this.utilsService.updateObject(e,"documentDate",t.documentDate,"date"),t.shiftStartTime&&(this.utilsService.updateObject(e,"shiftStartHour",t.shiftStartTime.substring(0,2)),this.utilsService.updateObject(e,"shiftStartMinute",t.shiftStartTime.substring(3,5)),this.utilsService.updateObject(e,"shiftEndHour",t.shiftEndTime.substring(0,2)),this.utilsService.updateObject(e,"shiftEndMinute",t.shiftEndTime.substring(3,5))),this.utilsService.isEmpty(t.distributionRulesId)||(e.distributionRulesId=this.branchUtilsService.distRulesRemoveZeroPatternOnEdit(t.distributionRulesId)),e}getSaveUpdateDataFormation(t){const e=t.getRawValue(),i={documentNumberingId:e.documentNumberingId,documentNumber:e.documentNumber,documentNumberingType:e.documentNumberingType,rentalItemId:e.rentalItemId,rentalEquipmentId:e.rentalEquipmentId,customerBpId:e.customerBpId,customerBpContactsId:e.customerBpContactsId,currencyId:e.currencyId,referenceNumber:e.referenceNumber,startDate:this.utilsService.getBackendDateFormat(e.startDate),endDate:this.utilsService.getBackendDateFormat(e.endDate),documentDate:this.utilsService.getBackendDateFormat(e.documentDate),empId:e.empId,status:e.status,remarks:e.remarks,distributionRulesId:Array.isArray(e.distributionRulesId)?e.distributionRulesId.join(","):"",totalBillableHours:e.totalBillableHours,copyFromType:e.copyFromType,copyFromId:e.copyFromId,shiftStartTime:`${e.shiftStartHour}:${e.shiftStartMinute}`,shiftEndTime:`${e.shiftEndHour}:${e.shiftEndMinute}`,deletedItemChildIds:e.deletedItemChildIds,itemListArray:[]};return"1"==this.storageService.get("worklogType")?e.itemListArray.forEach(t=>{const e={worklogItemTypeId:t.worklogItemTypeId,startDateTime:this.utilsService.getBackendDateFormat(t.startDateTime,!0),endDateTime:this.utilsService.getBackendDateFormat(t.endDateTime,!0),empId:t.empId,totalHours:t.totalHours,remarks:t.remarks,id:t.id};i.itemListArray.push(e)}):e.itemListArray.forEach(t=>{const e={entryDate:this.utilsService.getBackendDateFormat(t.date),entryDay:t.day,shiftStartTime:`${t.shiftStartHour}:${t.shiftStartMinute}`,shiftEndTime:`${t.shiftEndHour}:${t.shiftEndMinute}`,breakdownHours:`${t.breakdownHour}:${t.breakdownMinute}`,overtimeHours:`${t.overtimeHour}:${t.overtimeMinute}`,billableHours:t.billableHour,totalHours:t.totalHours,id:t.id};i.itemListArray.push(e)}),i}downloadPDF(t){t.spiName===this.branchUtilsService.spiTxnId.worklog&&(this.utilsService.showSuccessMsg("Processing to download the PDF..."),this.rentalWorklogDataService.downloadPDF(t.id).subscribe(t=>{this.utilsService.externalRedirect(t.url,!0)}))}overAllTimeCalc(t){const e=t.getRawValue();let i=0,r=0,n=0;e.itemListArray.forEach(t=>{"1"===t.worklogItemTypeId?i+=parseFloat(t.totalHours):"2"===t.worklogItemTypeId?r+=parseFloat(t.totalHours):"3"===t.worklogItemTypeId&&(n+=parseFloat(t.totalHours))}),t.patchValue({totalBillableHours:i+n,totalWorkingHours:i,totalBreakDownHours:r,totalOverTimeHours:n})}timeCalc(t){const e=t.getRawValue();let i=0,r=0,n=0,s=0;e.itemListArray.forEach(t=>{const e=`${t.breakdownHour}:${t.breakdownMinute}`,o=`${t.overtimeHour}:${t.overtimeMinute}`,a=d.duration(t.totalHours).asMinutes(),c=d.duration(o).asMinutes(),u=d.duration(e).asMinutes(),m=d.duration(t.billableHour).asMinutes();i+=a,r+=u,n+=c,s+=m}),t.patchValue({totalBillableHours:this.formatHourMinutes(s),totalWorkingHours:this.formatHourMinutes(i),totalBreakDownHours:this.formatHourMinutes(r),totalOverTimeHours:this.formatHourMinutes(n)})}formatHourMinutes(t){const e=Math.floor(t/60),i=Math.floor(t%60);return`${e<10&&e>0?"0"+e:e<0&&e>-10?"-0"+Math.abs(e):e<-10?"-"+Math.abs(e):e}:${i<10&&i>=0?"0"+i:i<0&&i>-10?"0"+Math.abs(i):i<-10?Math.abs(i):i}`}totalHoursCalc(t,e){const i=d.duration(e.diff(t)).asMinutes();return this.formatHourMinutes(i)}totalBillableHour(t,e,i){const r=d.duration(t).asMinutes(),n=d.duration(e).asMinutes(),s=d.duration(i).asMinutes();return this.formatHourMinutes(r+s-n)}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(n.g),s.Zb(a.e),s.Zb(n.f),s.Zb(m.a),s.Zb(o.T))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})();var p=i("ofXK"),g=i("eO1q"),f=i("rEr+"),y=i("7zfz"),v=i("Mfq2");const S=["dataTable"];function I(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",24),s.dc("click",(function(){s.Dc(t);const e=s.hc(2);return e.rentalTxnUtilsService.downloadAsExcel(e.inputScreenName,e.listingProperties)})),s.Qb(1,"i",25),s.Vb(2,"span"),s.Lc(3,"Download as Excel"),s.Ub(),s.Ub()}}function C(t,e){if(1&t&&(s.Vb(0,"div",26),s.Vb(1,"div",27),s.Vb(2,"div",28),s.Lc(3),s.Ub(),s.Vb(4,"div",29),s.Lc(5),s.Ub(),s.Ub(),s.Ub()),2&t){const t=e.$implicit,i=s.hc(2);s.Cb(3),s.Nc(" ",t.name," "),s.Cb(1),s.oc("ngClass",i.appConstants.TXN_STATUS_COLOR_CLS[t.id]),s.Cb(1),s.Mc(t.count)}}function U(t,e){1&t&&(s.Vb(0,"th",36),s.Lc(1," Branch Name "),s.Qb(2,"p-sortIcon",33),s.Ub()),2&t&&(s.oc("pSortableColumn","branchName"),s.Cb(2),s.oc("field","branchName"))}function L(t,e){1&t&&(s.Vb(0,"th",36),s.Lc(1,"Delivery Date "),s.Qb(2,"p-sortIcon",33),s.Ub()),2&t&&(s.oc("pSortableColumn","deliveryDate"),s.Cb(2),s.oc("field","deliveryDate"))}function V(t,e){1&t&&(s.Vb(0,"th",46),s.Lc(1,"Due Date "),s.Qb(2,"p-sortIcon",33),s.Ub()),2&t&&(s.oc("pSortableColumn","dueDate"),s.Cb(2),s.oc("field","dueDate"))}function D(t,e){1&t&&(s.Vb(0,"th",46),s.Lc(1,"Return Date "),s.Qb(2,"p-sortIcon",33),s.Ub()),2&t&&(s.oc("pSortableColumn","returnDate"),s.Cb(2),s.oc("field","returnDate"))}function N(t,e){if(1&t){const t=s.Wb();s.Vb(0,"th"),s.Vb(1,"input",42),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(3).searchForm.branchName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&t){const t=s.hc(3);s.Cb(1),s.oc("ngModel",t.searchForm.branchName)}}function F(t,e){if(1&t&&(s.Vb(0,"option",47),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc(" ",t.name," ")}}function E(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tr"),s.Vb(1,"th",30),s.Lc(2,"Actions"),s.Ub(),s.Jc(3,U,3,2,"th",31),s.Vb(4,"th",32),s.Lc(5,"Overdue "),s.Qb(6,"p-sortIcon",33),s.Ub(),s.Vb(7,"th",32),s.Lc(8,"Doc No "),s.Qb(9,"p-sortIcon",33),s.Ub(),s.Vb(10,"th",34),s.Lc(11,"Customer Name "),s.Qb(12,"p-sortIcon",33),s.Ub(),s.Vb(13,"th",35),s.Lc(14,"Line Items Count"),s.Ub(),s.Vb(15,"th",36),s.Lc(16,"Posting Date "),s.Qb(17,"p-sortIcon",33),s.Ub(),s.Jc(18,L,3,2,"th",31),s.Jc(19,V,3,2,"th",37),s.Jc(20,D,3,2,"th",37),s.Vb(21,"th",38),s.Lc(22,"Status "),s.Qb(23,"p-sortIcon",33),s.Ub(),s.Ub(),s.Vb(24,"tr",39),s.Vb(25,"th"),s.Vb(26,"a",40),s.dc("click",(function(){return s.Dc(t),s.hc(2).clearSearchForm()})),s.Qb(27,"i",41),s.Lc(28,"Clear"),s.Ub(),s.Ub(),s.Jc(29,N,2,1,"th",0),s.Qb(30,"th"),s.Vb(31,"th"),s.Vb(32,"input",42),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.documentNumber=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Vb(33,"th"),s.Vb(34,"input",42),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.customerName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Qb(35,"th"),s.Vb(36,"th"),s.Vb(37,"p-calendar",12),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.postingDate=e}))("onSelect",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Vb(38,"th"),s.Vb(39,"p-calendar",12),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.deliveryDate=e}))("onSelect",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Vb(40,"th"),s.Vb(41,"select",43),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.status=e}))("change",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Vb(42,"option",44),s.Lc(43,"--SELECT--"),s.Ub(),s.Jc(44,F,2,2,"option",45),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=s.hc(2);s.Cb(3),s.oc("ngIf",!t.storageService.get("isSingleBranchUser")),s.Cb(1),s.oc("pSortableColumn","overDueValue"),s.Cb(2),s.oc("field","overDueValue"),s.Cb(1),s.oc("pSortableColumn","documentNumber"),s.Cb(2),s.oc("field","documentNumber"),s.Cb(1),s.oc("pSortableColumn","customerName"),s.Cb(2),s.oc("field","customerName"),s.Cb(3),s.oc("pSortableColumn","postingDate"),s.Cb(2),s.oc("field","postingDate"),s.Cb(1),s.oc("ngIf","rentalQuote"===t.inputScreenName||"rentalOrder"===t.inputScreenName||"rentalDelivery"===t.inputScreenName),s.Cb(1),s.oc("ngIf","rentalInvoice"===t.inputScreenName),s.Cb(1),s.oc("ngIf","rentalReturn"===t.inputScreenName),s.Cb(1),s.oc("pSortableColumn","status"),s.Cb(2),s.oc("field","status"),s.Cb(6),s.oc("ngIf",!t.storageService.get("isSingleBranchUser")),s.Cb(3),s.oc("ngModel",t.searchForm.documentNumber),s.Cb(2),s.oc("ngModel",t.searchForm.customerName),s.Cb(3),s.oc("ngModel",t.searchForm.postingDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(2),s.oc("ngModel",t.searchForm.deliveryDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(2),s.oc("ngModel",t.searchForm.status),s.Cb(3),s.oc("ngForOf",t.statusList)}}function T(t,e){if(1&t&&(s.Vb(0,"td"),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Mc(t.branchName)}}function x(t,e){if(1&t&&(s.Vb(0,"span",52),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Nc("",t.overDueValue," Days")}}function A(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tr"),s.Vb(1,"td"),s.Vb(2,"a",48),s.dc("click",(function(){s.Dc(t);const i=e.$implicit,r=s.hc(2);return r.rentalTxnUtilsService.redirectToEdit(r.inputScreenName,i.id,i.isDraft)})),s.Qb(3,"i",49),s.Ub(),s.Ub(),s.Jc(4,T,2,1,"td",0),s.Vb(5,"td"),s.Jc(6,x,2,1,"span",50),s.Ub(),s.Vb(7,"td"),s.Lc(8),s.Ub(),s.Vb(9,"td"),s.Lc(10),s.Ub(),s.Vb(11,"td"),s.Lc(12),s.Ub(),s.Vb(13,"td"),s.Lc(14),s.Ub(),s.Vb(15,"td"),s.Lc(16),s.Ub(),s.Vb(17,"td"),s.Vb(18,"span",51),s.Lc(19),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=e.$implicit,i=s.hc(2);s.Cb(4),s.oc("ngIf",!i.storageService.get("isSingleBranchUser")),s.Cb(2),s.oc("ngIf",1==t.status&&t.overDueValue<0),s.Cb(2),s.Mc(t.documentNumber),s.Cb(2),s.Oc("",t.customerBpCode," - ",t.customerBpName,""),s.Cb(2),s.Mc(t.lineItemInfo.length),s.Cb(2),s.Mc(t.postingDate),s.Cb(2),s.Mc(t.deliveryDate),s.Cb(2),s.oc("ngClass",i.appConstants.TXN_STATUS_COLOR_CLS[t.status]),s.Cb(1),s.Mc(t.statusName)}}function R(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"div",1),s.Vb(2,"span"),s.Lc(3),s.Ub(),s.Lc(4),s.Vb(5,"div",2),s.Jc(6,I,4,0,"button",3),s.Vb(7,"button",4),s.dc("click",(function(){s.Dc(t);const e=s.hc();return e.rentalTxnUtilsService.redirectToAdd(e.inputScreenName)})),s.Qb(8,"i",5),s.Vb(9,"span"),s.Lc(10),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(11,"div",6),s.Vb(12,"div",7),s.Vb(13,"div",8),s.Jc(14,C,6,3,"div",9),s.Ub(),s.Ub(),s.Vb(15,"div",8),s.Vb(16,"div",10),s.Vb(17,"label",11),s.Vb(18,"strong"),s.Lc(19,"From Date"),s.Ub(),s.Ub(),s.Vb(20,"p-calendar",12),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().searchForm.fromDate=e}))("onSelect",(function(){return s.Dc(t),s.hc().resetListing()})),s.Ub(),s.Ub(),s.Vb(21,"div",10),s.Vb(22,"label",11),s.Vb(23,"strong"),s.Lc(24,"To Date"),s.Ub(),s.Ub(),s.Vb(25,"p-calendar",13),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().searchForm.toDate=e}))("onSelect",(function(){return s.Dc(t),s.hc().resetListing()})),s.Ub(),s.Ub(),s.Vb(26,"div",14),s.Vb(27,"label",15),s.Vb(28,"input",16),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().searchForm.isDraft=e}))("change",(function(){return s.Dc(t),s.hc().resetListing()})),s.Ub(),s.Qb(29,"span",17),s.Lc(30," Show Only Drafts "),s.Ub(),s.Ub(),s.Ub(),s.Vb(31,"div",8),s.Vb(32,"div",18),s.Vb(33,"div",19),s.Vb(34,"p-table",20,21),s.dc("onLazyLoad",(function(e){return s.Dc(t),s.hc().getListing(e)})),s.Jc(36,E,45,29,"ng-template",22),s.Jc(37,A,20,10,"ng-template",23),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Sb()}if(2&t){const t=s.hc();s.Cb(3),s.Mc(t.branchUtilsService.txnGetTitle(t.screenAttributes.title,!0)),s.Cb(1),s.Nc("",t.branchUtilsService.txnGetTitle(t.screenAttributes.title)," - List "),s.Cb(2),s.oc("ngIf",t.screenAcl.download),s.Cb(4),s.Nc("Add ",t.screenAttributes.title,""),s.Cb(4),s.oc("ngForOf",t.analyticsData),s.Cb(6),s.oc("ngModel",t.searchForm.fromDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(5),s.oc("ngModel",t.searchForm.toDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT)("minDate",t.searchForm.fromDate),s.Cb(3),s.oc("ngModel",t.searchForm.isDraft),s.Cb(6),s.oc("value",t.listing.data)("lazy",!0)("paginator",!0)("rows",t.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",t.listing.totalRecords)}}let M=(()=>{class t{constructor(t,e,i,r,s,o,a){this.utilsService=t,this.storageService=e,this.authGuardService=i,this.commonDataService=r,this.activatedRoute=s,this.rentalTxnUtilsService=o,this.branchUtilsService=a,this.appConstants=n.h,this.screenAcl={},this.analyticsData=[],this.statusList=[],this.screenAttributes={},this.screenDataService={},this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}ngOnInit(){this.initializeSubscriptions()}initializeSubscriptions(){this.activatedRoute.params.subscribe(t=>this.rentalTxnUtilsService.checkScreenNameValid(t.screenName)?(this.screenAcl=this.authGuardService.getScreenAcl(this.branchUtilsService.screenAttributes[t.screenName].documentTypeId),this.screenAcl.view?(this.reInitializeGlobalVariables(),this.inputScreenName=t.screenName,void this.transactionInitialization()):(this.utilsService.showFailureMsg(n.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1)):(this.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),this.utilsService.goBack(),!1))}reInitializeGlobalVariables(){this.inputScreenName="",this.screenAttributes={},this.screenDataService={},this.analyticsData=[],this.statusList=[],this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}transactionInitialization(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.inputScreenName],this.screenDataService=this.rentalTxnUtilsService.getScreenDataService(this.inputScreenName),this.searchForm=this.rentalTxnUtilsService.getFormSearchFields(this.inputScreenName),this.getAutoSuggestionList("getRentalTransStatusList"),this.getAnalyticsData(),this.dataTable&&this.resetListing()}getListing(t){const e=this.rentalTxnUtilsService.getSearchDataFormation(this.inputScreenName,this.searchForm),i=this.utilsService.dataTableParameterFormation(t,e);this.listingProperties=i,this.screenDataService.getList(i).subscribe(t=>{"SUCCESS"===t.status?(this.listing.data=t.results.searchResults,this.listing.totalRecords=t.results.totalRecords):this.utilsService.showFailureMsg(t)})}clearSearchForm(){this.searchForm=this.rentalTxnUtilsService.getFormSearchFields(this.inputScreenName),this.resetListing()}resetListing(){this.dataTable.reset()}getAutoSuggestionList(t){this.commonDataService.getAutoSuggestionList(t).subscribe(t=>{"SUCCESS"===t.status?this.statusList=t.results:this.utilsService.showFailureMsg(t)})}getAnalyticsData(){this.rentalTxnUtilsService.getAnalyticsData(this.inputScreenName).subscribe(t=>{this.analyticsData=t})}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.g),s.Pb(n.f),s.Pb(n.a),s.Pb(o.l),s.Pb(r.a),s.Pb(l),s.Pb(m.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-rental-txn-list"]],viewQuery:function(t,e){var i;1&t&&s.Pc(S,!0),2&t&&s.zc(i=s.ec())&&(e.dataTable=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-plus"],[1,"working-container"],[1,"analytics"],[1,"row"],["class","col-lg-2 col-md-3 col-sm-4 col-xs-12",4,"ngFor","ngForOf"],[1,"form-group","col-sm-3"],[1,"form-label"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","ngModelChange","onSelect"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","minDate","ngModelChange","onSelect"],[1,"form-group","col-sm-6","text-right"],[1,"checkbox","mt-3"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"checkmark"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-file-excel"],[1,"col-lg-2","col-md-3","col-sm-4","col-xs-12"],[1,"item"],[1,"name"],[1,"count",3,"ngClass"],[2,"width","80px"],["style","width:150px",3,"pSortableColumn",4,"ngIf"],[2,"width","100px",3,"pSortableColumn"],[3,"field"],[2,"width","200px",3,"pSortableColumn"],[2,"width","130px"],[2,"width","150px",3,"pSortableColumn"],[3,"pSortableColumn",4,"ngIf"],[2,"width","120px",3,"pSortableColumn"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"value"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"click"],[1,"fa","fa-edit"],["class","badge badge-danger",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&s.Jc(0,R,38,22,"ng-container",0),2&t&&s.oc("ngIf",e.screenAcl.view)},directives:[p.m,p.l,g.a,a.m,a.o,a.a,f.c,y.b,p.k,f.b,f.a,v.a,a.b,a.t,a.p,a.v],styles:[""]}),t})();var k=i("Kj3r"),w=i("/uUt"),O=i("vkgz"),q=i("TlXv"),P=i("w9rb"),B=i("fIZe"),K=i("K3ix"),J=i("ZOsW"),Q=i("umDy");const _=["hActions"],W=["hSno"],H=["hItemName"],G=["hGeneralDetails"],z=["hWorkLogRef"],j=["hQuantity"],$=["hOpenQuantity"],Y=["hDuration"],Z=["hUOM"],X=["hStartDate"],tt=["hEndDate"],et=["hShipDate"],it=["hReturnDate"],rt=["hPoExpiryDate"],nt=["hUnitPrice"],st=["hHSN"],ot=["hDiscount"],at=["hTaxCode"],ct=["hTax"],ut=["hTotal"],mt=["hDistRules"],lt=["hEquipmentName"],bt=["bActions"],dt=["bSno"],ht=["bItemName"],pt=["bGeneralDetails"],gt=["bWorkLogRef"],ft=["bQuantity"],yt=["bOpenQuantity"],vt=["bDuration"],St=["bUOM"],It=["bStartDate"],Ct=["bEndDate"],Ut=["bShipDate"],Lt=["bReturnDate"],Vt=["bPoExpiryDate"],Dt=["bUnitPrice"],Nt=["bHSN"],Ft=["bDiscount"],Et=["bTaxCode"],Tt=["bTax"],xt=["bTotal"],At=["bDistRules"],Rt=["bEquipmentName"];function Mt(t,e){1&t&&(s.Tb(0),s.Lc(1,"Add"),s.Sb())}function kt(t,e){1&t&&(s.Tb(0),s.Lc(1,"Edit"),s.Sb())}function wt(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",5),s.dc("click",(function(){return s.Dc(t),s.hc(2).downloadPdf()})),s.Qb(1,"i",118),s.Vb(2,"span"),s.Lc(3,"Print"),s.Ub(),s.Ub()}}function Ot(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.documentNumberingId?t.myFormErrors.documentNumberingId:t.myFormErrors.documentNumber," ")}}function qt(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.partnerName,"\xa0"),s.Cb(2),s.Nc("(",t.partnerCode,")")}}function Pt(t,e){if(1&t){const t=s.Wb();s.Vb(0,"a",120),s.dc("click",(function(){return s.Dc(t),s.hc(2).bizRefreshFlag=!0})),s.Qb(1,"i",121),s.Ub()}}function Bt(t,e){if(1&t){const t=s.Wb();s.Vb(0,"a",122),s.dc("click",(function(){s.Dc(t);const e=s.hc(2);return e.getCustomerBpList(),e.bizRefreshFlag=!1})),s.Qb(1,"i",123),s.Ub()}}function Kt(t,e){if(1&t){const t=s.Wb();s.Vb(0,"span",124),s.dc("click",(function(){s.Dc(t);const e=s.hc(2);return e.popupExternalService.showDetailPopup("biz-partner",e.myFormData.customerBpId)})),s.Qb(1,"i",125),s.Ub()}}function Jt(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.customerBpId," ")}}function Qt(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Ub(),s.Vb(2,"small"),s.Lc(3),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Mc(t.contactName),s.Cb(2),s.Oc("",t.contactTypeName," / ",t.contactNumber,"")}}function _t(t,e){if(1&t&&(s.Vb(0,"option",126),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Mc(t.currencyName)}}function Wt(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.currencyId," ")}}function Ht(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.postingDate," ")}}function Gt(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",null==t.myForm.errors?null:t.myForm.errors.invalidPostingDate," ")}}function zt(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",t.myFormErrors.deliveryDate," ")}}function jt(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",null==t.myForm.errors?null:t.myForm.errors.invalidDeliveryDate," ")}}function $t(t,e){if(1&t&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2," Delivery Date"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Qb(5,"p-calendar",127),s.Jc(6,zt,2,1,"div",21),s.Jc(7,jt,2,1,"div",21),s.Ub()),2&t){const t=s.hc(2);s.Cb(5),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",t.myFormErrors.deliveryDate),s.Cb(1),s.oc("ngIf",null==t.myForm.errors?null:t.myForm.errors.invalidDeliveryDate)}}function Yt(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",t.myFormErrors.dueDate," ")}}function Zt(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",null==t.myForm.errors?null:t.myForm.errors.invalidDueDate," ")}}function Xt(t,e){if(1&t&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2," Due Date"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Qb(5,"p-calendar",128),s.Jc(6,Yt,2,1,"div",21),s.Jc(7,Zt,2,1,"div",21),s.Ub()),2&t){const t=s.hc(2);s.Cb(5),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",t.myFormErrors.dueDate),s.Cb(1),s.oc("ngIf",null==t.myForm.errors?null:t.myForm.errors.invalidDueDate)}}function te(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",t.myFormErrors.returnDate," ")}}function ee(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(3);s.Cb(1),s.Nc(" ",null==t.myForm.errors?null:t.myForm.errors.invalidReturnDate," ")}}function ie(t,e){if(1&t&&(s.Vb(0,"div",15),s.Vb(1,"label",16),s.Lc(2," Return Date"),s.Vb(3,"span",17),s.Lc(4,"*"),s.Ub(),s.Ub(),s.Qb(5,"p-calendar",129),s.Jc(6,te,2,1,"div",21),s.Jc(7,ee,2,1,"div",21),s.Ub()),2&t){const t=s.hc(2);s.Cb(5),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",t.myFormErrors.returnDate),s.Cb(1),s.oc("ngIf",null==t.myForm.errors?null:t.myForm.errors.invalidReturnDate)}}function re(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.documentDate," ")}}function ne(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.employeeName,"\xa0"),s.Cb(2),s.Nc("(",t.empCode,")")}}function se(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.empId," ")}}function oe(t,e){if(1&t&&(s.Vb(0,"option",126),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Mc(t.name)}}function ae(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.status," ")}}const ce=function(t){return{data:t}};function ue(t,e){if(1&t&&(s.Tb(0),s.Qb(1,"template",130),s.Sb()),2&t){const t=e.$implicit,i=s.hc(2);s.Cb(1),s.oc("ngTemplateOutlet",i[t.headerRef])("ngTemplateOutletContext",s.sc(2,ce,t))}}const me=function(t,e){return{formItemListRow:t,i:e}};function le(t,e){if(1&t&&(s.Tb(0),s.Qb(1,"template",130),s.Sb()),2&t){const t=e.$implicit,i=s.hc(),r=i.$implicit,n=i.index,o=s.hc(2);s.Cb(1),s.oc("ngTemplateOutlet",o[t.bodyRef])("ngTemplateOutletContext",s.tc(2,me,r,n))}}function be(t,e){if(1&t&&(s.Vb(0,"tr",131),s.Jc(1,le,2,5,"ng-container",44),s.Ub()),2&t){const t=e.index,i=s.hc(2);s.oc("formGroupName",t),s.Cb(1),s.oc("ngForOf",i.itemListColumnOrder)}}function de(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tfoot"),s.Vb(1,"tr"),s.Vb(2,"td",132),s.Vb(3,"button",133),s.dc("click",(function(){return s.Dc(t),s.hc(2).addItemFields()})),s.Qb(4,"i",121),s.Vb(5,"span"),s.Lc(6,"Add Item"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()}}function he(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.discountPercentage," ")}}function pe(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.rounding," ")}}function ge(t,e){if(1&t&&(s.Vb(0,"option",126),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Oc(" ",t.address," - ",t.city," ")}}function fe(t,e){if(1&t&&(s.Vb(0,"option",126),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Oc(" ",t.address," - ",t.city," ")}}function ye(t,e){if(1&t&&(s.Vb(0,"option",126),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc(" ",t.paymentTermName," ")}}function ve(t,e){if(1&t&&(s.Vb(0,"option",126),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc(" ",t.paymentMethodName," ")}}function Se(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div",10),s.Vb(1,"div",11),s.Qb(2,"i",12),s.Lc(3,"Accounting Info "),s.Ub(),s.Vb(4,"div",13),s.Vb(5,"div",14),s.Vb(6,"div",15),s.Vb(7,"label",16),s.Lc(8,"Payment Terms"),s.Ub(),s.Vb(9,"select",134),s.dc("change",(function(){s.Dc(t);const e=s.hc(2);return e.branchUtilsService.txnPaymentTermsChange(e.txnKeys.inputScreenName,e.paymentTermsList,e.myForm,"paymentTermsId")})),s.Vb(10,"option",30),s.Lc(11,"--SELECT--"),s.Ub(),s.Jc(12,ye,2,2,"option",31),s.Ub(),s.Ub(),s.Vb(13,"div",15),s.Vb(14,"label",16),s.Lc(15,"Payment Method"),s.Ub(),s.Vb(16,"select",135),s.Vb(17,"option",30),s.Lc(18,"--SELECT--"),s.Ub(),s.Jc(19,ve,2,2,"option",31),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=s.hc(2);s.Cb(12),s.oc("ngForOf",t.paymentTermsList),s.Cb(7),s.oc("ngForOf",t.paymentMethodsList)}}function Ie(t,e){1&t&&(s.Vb(0,"div",10),s.Vb(1,"div",11),s.Qb(2,"i",12),s.Lc(3,"Tax Info "),s.Ub(),s.Vb(4,"div",13),s.Vb(5,"div",14),s.Vb(6,"div",15),s.Vb(7,"label",16),s.Lc(8,"Tax code / GST / VAT"),s.Ub(),s.Qb(9,"input",136),s.Ub(),s.Ub(),s.Ub(),s.Ub())}function Ce(t,e){if(1&t&&(s.Vb(0,"option",126),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc(" ",t.heading," ")}}function Ue(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",5),s.dc("click",(function(){return s.Dc(t),s.hc(2).confirmSaveUpdate()})),s.Qb(1,"i",137),s.Vb(2,"span"),s.Lc(3,"Save"),s.Ub(),s.Ub()}}function Le(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",5),s.dc("click",(function(){return s.Dc(t),s.hc(2).addUpdateDraft()})),s.Qb(1,"i",137),s.Vb(2,"span"),s.Lc(3,"Save as Draft"),s.Ub(),s.Ub()}}function Ve(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",3),s.dc("click",(function(){return s.Dc(t),s.hc(2).clearForm()})),s.Qb(1,"i",138),s.Vb(2,"span"),s.Lc(3,"Clear"),s.Ub(),s.Ub()}}function De(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",5),s.dc("click",(function(){return s.Dc(t),s.hc(2).confirmSaveUpdate()})),s.Qb(1,"i",123),s.Vb(2,"span"),s.Lc(3,"Update"),s.Ub(),s.Ub()}}function Ne(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",3),s.dc("click",(function(){s.Dc(t);const e=s.hc(2);return e.rentalTxnUtilsService.redirectToList(e.txnKeys.inputScreenName)})),s.Qb(1,"i",139),s.Vb(2,"span"),s.Lc(3,"Cancel"),s.Ub(),s.Ub()}}function Fe(t,e){1&t&&(s.Vb(0,"div",142),s.Vb(1,"span",143),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," You are unauthorized to "),s.Vb(4,"strong"),s.Lc(5,"update"),s.Ub(),s.Lc(6," this transaction! "),s.Ub())}function Ee(t,e){1&t&&(s.Vb(0,"div",142),s.Vb(1,"span",143),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," Cannot update "),s.Vb(4,"strong"),s.Lc(5,"Cancelled"),s.Ub(),s.Lc(6," / "),s.Vb(7,"strong"),s.Lc(8,"Closed"),s.Ub(),s.Lc(9," transactions! "),s.Ub())}function Te(t,e){if(1&t&&(s.Vb(0,"div",140),s.Vb(1,"div"),s.Vb(2,"strong"),s.Lc(3,"Created By:"),s.Ub(),s.Lc(4),s.Ub(),s.Jc(5,Fe,7,0,"div",141),s.Jc(6,Ee,10,0,"div",141),s.Ub()),2&t){const t=s.hc(2);s.Cb(4),s.Nc(" ",t.txnKeys.editCreatedName,""),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"updateAclNote")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"updateNote"))}}function xe(t,e){1&t&&(s.Vb(0,"div",140),s.Vb(1,"span",143),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," You are unauthorized to "),s.Vb(4,"strong"),s.Lc(5,"add"),s.Ub(),s.Lc(6," this transaction!. "),s.Ub())}function Ae(t,e){if(1&t&&(s.Vb(0,"th",144),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function Re(t,e){if(1&t&&(s.Vb(0,"th",145),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function Me(t,e){if(1&t&&(s.Vb(0,"th",146),s.Lc(1),s.Vb(2,"span",17),s.Lc(3,"*"),s.Ub(),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function ke(t,e){if(1&t&&(s.Vb(0,"th",146),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function we(t,e){if(1&t&&(s.Vb(0,"th",147),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function Oe(t,e){if(1&t&&(s.Vb(0,"th",147),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function qe(t,e){if(1&t&&(s.Vb(0,"th",147),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function Pe(t,e){1&t&&(s.Vb(0,"span",17),s.Lc(1,"*"),s.Ub())}function Be(t,e){if(1&t&&(s.Vb(0,"th",147),s.Lc(1),s.Jc(2,Pe,2,0,"span",148),s.Ub()),2&t){const t=e.data,i=s.hc(2);s.Cb(1),s.Mc(t.name),s.Cb(1),s.oc("ngIf","rentalQuote"!=i.txnKeys.inputScreenName)}}function Ke(t,e){1&t&&(s.Vb(0,"span",17),s.Lc(1,"*"),s.Ub())}function Je(t,e){if(1&t&&(s.Vb(0,"th",147),s.Lc(1),s.Jc(2,Ke,2,0,"span",148),s.Ub()),2&t){const t=e.data,i=s.hc(2);s.Cb(1),s.Mc(t.name),s.Cb(1),s.oc("ngIf","rentalQuote"!=i.txnKeys.inputScreenName)}}function Qe(t,e){1&t&&(s.Vb(0,"span",17),s.Lc(1,"*"),s.Ub())}function _e(t,e){if(1&t&&(s.Vb(0,"th",147),s.Lc(1),s.Jc(2,Qe,2,0,"span",148),s.Ub()),2&t){const t=e.data,i=s.hc(2);s.Cb(1),s.Mc(t.name),s.Cb(1),s.oc("ngIf","rentalQuote"!=i.txnKeys.inputScreenName)}}function We(t,e){1&t&&(s.Vb(0,"span",17),s.Lc(1,"*"),s.Ub())}function He(t,e){if(1&t&&(s.Vb(0,"th",147),s.Lc(1),s.Jc(2,We,2,0,"span",148),s.Ub()),2&t){const t=e.data,i=s.hc(2);s.Cb(1),s.Mc(t.name),s.Cb(1),s.oc("ngIf","rentalQuote"!=i.txnKeys.inputScreenName)}}function Ge(t,e){1&t&&(s.Vb(0,"span",17),s.Lc(1,"*"),s.Ub())}function ze(t,e){if(1&t&&(s.Vb(0,"th",147),s.Lc(1),s.Jc(2,Ge,2,0,"span",148),s.Ub()),2&t){const t=e.data,i=s.hc(2);s.Cb(1),s.Mc(t.name),s.Cb(1),s.oc("ngIf","rentalQuote"!=i.txnKeys.inputScreenName)}}function je(t,e){1&t&&(s.Vb(0,"span",17),s.Lc(1,"*"),s.Ub())}function $e(t,e){if(1&t&&(s.Vb(0,"th",149),s.Lc(1),s.Jc(2,je,2,0,"span",148),s.Ub()),2&t){const t=e.data,i=s.hc(2);s.Cb(1),s.Mc(t.name),s.Cb(1),s.oc("ngIf","rentalQuote"!=i.txnKeys.inputScreenName)}}function Ye(t,e){if(1&t&&(s.Vb(0,"th",147),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function Ze(t,e){1&t&&(s.Vb(0,"span",17),s.Lc(1,"*"),s.Ub())}function Xe(t,e){if(1&t&&(s.Vb(0,"th",150),s.Lc(1),s.Jc(2,Ze,2,0,"span",148),s.Ub()),2&t){const t=e.data,i=s.hc(2);s.Cb(1),s.Mc(t.name),s.Cb(1),s.oc("ngIf","rentalQuote"!=i.txnKeys.inputScreenName)}}function ti(t,e){if(1&t&&(s.Vb(0,"th",147),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function ei(t,e){if(1&t&&(s.Vb(0,"th",147),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function ii(t,e){if(1&t&&(s.Vb(0,"th",147),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function ri(t,e){if(1&t&&(s.Vb(0,"th",151),s.Lc(1),s.Vb(2,"span",17),s.Lc(3,"*"),s.Ub(),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function ni(t,e){if(1&t&&(s.Vb(0,"th",147),s.Lc(1),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function si(t,e){if(1&t&&(s.Vb(0,"th",152),s.Lc(1),s.Vb(2,"small"),s.Lc(3,"(Auto Fill)"),s.Ub(),s.Ub()),2&t){const t=e.data;s.Cb(1),s.Mc(t.name)}}function oi(t,e){1&t&&(s.Vb(0,"span",17),s.Lc(1,"*"),s.Ub())}function ai(t,e){if(1&t&&(s.Vb(0,"th",146),s.Lc(1),s.Jc(2,oi,2,0,"span",148),s.Ub()),2&t){const t=e.data,i=s.hc(2);s.Cb(1),s.Mc(t.name),s.Cb(1),s.oc("ngIf",i.storageService.get("distRulesMode"))}}function ci(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"a",154),s.dc("click",(function(){s.Dc(t);const e=s.hc().i,i=s.hc(2);return i.removeItemFields(e),i.branchUtilsService.txnCalcItemsTotal(i.myForm)})),s.Qb(2,"i",155),s.Ub(),s.Sb()}}function ui(t,e){if(1&t&&(s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Jc(3,ci,3,0,"ng-container",0),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.oc("ngIf",i.myFormData.itemListArray[t].showDeleteIcon)}}function mi(t,e){if(1&t&&(s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Lc(3),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.Mc(t+1)}}function li(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.rentalItemName,"\xa0"),s.Cb(2),s.Nc("(",t.rentalItemCode,")")}}function bi(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].rentalItemId," ")}}function di(t,e){if(1&t){const t=s.Wb();s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Vb(3,"div",36),s.Vb(4,"ng-select",156),s.dc("search",(function(e){return s.Dc(t),s.hc(2).onItemSearch(e)}))("change",(function(){s.Dc(t);const i=e.i;return s.hc(2).onItemChange(i)})),s.Jc(5,li,4,2,"ng-template",24),s.Ub(),s.Ub(),s.Jc(6,bi,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm),s.Cb(2),s.oc("formGroupName",t),s.Cb(2),s.oc("items",i.itemList)("multiple",!1)("virtualScroll",!0),s.Cb(2),s.oc("ngIf",i.myFormErrors.itemListArray[t].rentalItemId)}}function hi(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().formItemListRow;s.Cb(1),s.Nc(" ",null==t.errors?null:t.errors.invalidMaxQuantity," ")}}function pi(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().formItemListRow;s.Cb(1),s.Nc(" ",null==t.errors?null:t.errors.invalidMinQuantity," ")}}function gi(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].quantity," ")}}function fi(t,e){if(1&t){const t=s.Wb();s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Vb(3,"input",157),s.dc("keyup",(function(){s.Dc(t);const e=s.hc(2);return e.branchUtilsService.txnCalcItemsTotal(e.myForm)})),s.Ub(),s.Jc(4,hi,2,1,"div",21),s.Jc(5,pi,2,1,"div",21),s.Jc(6,gi,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.formItemListRow,i=e.i,r=s.hc(2);s.oc("formGroup",r.myForm),s.Cb(2),s.oc("formGroupName",i),s.Cb(2),s.oc("ngIf",null==t.errors?null:t.errors.invalidMaxQuantity),s.Cb(1),s.oc("ngIf",null==t.errors?null:t.errors.invalidMinQuantity),s.Cb(1),s.oc("ngIf",r.myFormErrors.itemListArray[i].quantity)}}function yi(t,e){if(1&t&&(s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Lc(3),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.formItemListRow,i=e.i,r=s.hc(2);s.oc("formGroup",r.myForm),s.Cb(2),s.oc("formGroupName",i),s.Cb(1),s.Nc(" ",t.value.openQuantity," ")}}function vi(t,e){if(1&t){const t=s.Wb();s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Vb(3,"ng-select",158),s.dc("change",(function(){s.Dc(t);const i=e.i;return s.hc(2).onWorkLogRefChange(i)})),s.Ub(),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.oc("items",i.myFormData.itemListArray[t].rentalWorklogList)("multiple",!1)("virtualScroll",!0)}}function Si(t,e){if(1&t&&(s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Tb(3),s.Lc(4," - "),s.Sb(),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm),s.Cb(2),s.oc("formGroupName",t)}}function Ii(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].duration," ")}}function Ci(t,e){if(1&t&&(s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Tb(3),s.Qb(4,"input",159),s.Sb(),s.Jc(5,Ii,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm),s.Cb(2),s.oc("formGroupName",t),s.Cb(3),s.oc("ngIf",i.myFormErrors.itemListArray[t].duration)}}function Ui(t,e){if(1&t&&(s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Qb(3,"ng-select",160),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.oc("items",i.uomList)("multiple",!1)}}function Li(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].startDate," ")}}function Vi(t,e){if(1&t){const t=s.Wb();s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Tb(3),s.Vb(4,"p-calendar",161),s.dc("onSelect",(function(){s.Dc(t);const i=e.i;return s.hc(2).onDateChange(i)})),s.Ub(),s.Jc(5,Li,2,1,"div",21),s.Sb(),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm),s.Cb(2),s.oc("formGroupName",t),s.Cb(2),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.appConstants.PICKER_YEAR_RANGE)("dateFormat",i.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",i.myFormErrors.itemListArray[t].startDate)}}function Di(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].endDate," ")}}function Ni(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().formItemListRow;s.Cb(1),s.Nc(" ",null==t.errors?null:t.errors.invalidEndDate," ")}}function Fi(t,e){if(1&t){const t=s.Wb();s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Tb(3),s.Vb(4,"p-calendar",162),s.dc("onSelect",(function(){s.Dc(t);const i=e.i;return s.hc(2).onDateChange(i)})),s.Ub(),s.Jc(5,Di,2,1,"div",21),s.Jc(6,Ni,2,1,"div",21),s.Sb(),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.formItemListRow,i=e.i,r=s.hc(2);s.oc("formGroup",r.myForm),s.Cb(2),s.oc("formGroupName",i),s.Cb(2),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",r.myFormErrors.itemListArray[i].endDate),s.Cb(1),s.oc("ngIf",null==t.errors?null:t.errors.invalidEndDate)}}function Ei(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].shipDate," ")}}function Ti(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().formItemListRow;s.Cb(1),s.Nc(" ",null==t.errors?null:t.errors.invalidShipDate," ")}}function xi(t,e){if(1&t){const t=s.Wb();s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Tb(3),s.Vb(4,"p-calendar",163),s.dc("onSelect",(function(){s.Dc(t);const i=e.i;return s.hc(2).onDateChange(i)})),s.Ub(),s.Jc(5,Ei,2,1,"div",21),s.Jc(6,Ti,2,1,"div",21),s.Sb(),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.formItemListRow,i=e.i,r=s.hc(2);s.oc("formGroup",r.myForm),s.Cb(2),s.oc("formGroupName",i),s.Cb(2),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",r.myFormErrors.itemListArray[i].shipDate),s.Cb(1),s.oc("ngIf",null==t.errors?null:t.errors.invalidShipDate)}}function Ai(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].returnDate," ")}}function Ri(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().formItemListRow;s.Cb(1),s.Nc(" ",null==t.errors?null:t.errors.invalidReturnDate," ")}}function Mi(t,e){if(1&t){const t=s.Wb();s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Tb(3),s.Vb(4,"p-calendar",164),s.dc("onSelect",(function(){s.Dc(t);const i=e.i;return s.hc(2).onDateChange(i)})),s.Ub(),s.Jc(5,Ai,2,1,"div",21),s.Jc(6,Ri,2,1,"div",21),s.Sb(),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.formItemListRow,i=e.i,r=s.hc(2);s.oc("formGroup",r.myForm),s.Cb(2),s.oc("formGroupName",i),s.Cb(2),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",r.myFormErrors.itemListArray[i].returnDate),s.Cb(1),s.oc("ngIf",null==t.errors?null:t.errors.invalidReturnDate)}}function ki(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].poExpiryDate," ")}}function wi(t,e){if(1&t){const t=s.Wb();s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Tb(3),s.Vb(4,"p-calendar",165),s.dc("onSelect",(function(){s.Dc(t);const i=e.i;return s.hc(2).onDateChange(i)})),s.Ub(),s.Jc(5,ki,2,1,"div",21),s.Sb(),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm),s.Cb(2),s.oc("formGroupName",t),s.Cb(2),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.appConstants.PICKER_YEAR_RANGE)("dateFormat",i.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",i.myFormErrors.itemListArray[t].poExpiryDate)}}function Oi(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].rentalEquipmentId," ")}}function qi(t,e){if(1&t){const t=s.Wb();s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Vb(3,"ng-select",166),s.dc("change",(function(){s.Dc(t);const i=e.i;return s.hc(2).onEquipmentChange(i)})),s.Ub(),s.Jc(4,Oi,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.oc("items",i.myFormData.itemListArray[t].equipmentList)("multiple",!1),s.Cb(1),s.oc("ngIf",i.myFormErrors.itemListArray[t].rentalEquipmentId)}}function Pi(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].unitPrice," ")}}function Bi(t,e){if(1&t){const t=s.Wb();s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Vb(3,"input",167),s.dc("keyup",(function(){s.Dc(t);const e=s.hc(2);return e.branchUtilsService.txnCalcItemsTotal(e.myForm)})),s.Ub(),s.Jc(4,Pi,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm),s.Cb(2),s.oc("formGroupName",t),s.Cb(2),s.oc("ngIf",i.myFormErrors.itemListArray[t].unitPrice)}}function Ki(t,e){if(1&t&&(s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Qb(3,"ng-select",168),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.oc("items",i.hsnList)("multiple",!1)}}function Ji(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].discountPercentage," ")}}function Qi(t,e){if(1&t){const t=s.Wb();s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Vb(3,"input",55),s.dc("keyup",(function(){s.Dc(t);const e=s.hc(2);return e.branchUtilsService.txnCalcItemsTotal(e.myForm)})),s.Ub(),s.Jc(4,Ji,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm),s.Cb(2),s.oc("formGroupName",t),s.Cb(2),s.oc("ngIf",i.myFormErrors.itemListArray[t].discountPercentage)}}function _i(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].taxId," ")}}function Wi(t,e){if(1&t){const t=s.Wb();s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Vb(3,"ng-select",169),s.dc("change",(function(){s.Dc(t);const i=e.i,r=s.hc(2);return r.branchUtilsService.txnTaxChange(r.taxList,r.myForm,i)})),s.Ub(),s.Jc(4,_i,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.oc("items",i.taxList)("multiple",!1),s.Cb(1),s.oc("ngIf",i.myFormErrors.itemListArray[t].taxId)}}function Hi(t,e){if(1&t&&(s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Lc(3),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.formItemListRow,i=e.i,r=s.hc(2);s.oc("formGroup",r.myForm),s.Cb(2),s.oc("formGroupName",i),s.Cb(1),s.Nc(" ",t.value.itemTaxPercentage," ")}}function Gi(t,e){if(1&t&&(s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",170),s.Lc(3),s.Ub(),s.Sb(),s.Sb()),2&t){const t=e.formItemListRow,i=e.i,r=s.hc(2);s.oc("formGroup",r.myForm),s.Cb(2),s.oc("formGroupName",i),s.Cb(1),s.Nc(" ",t.value.totalItemAmount," ")}}function zi(t,e){if(1&t&&(s.Vb(0,"div",119),s.Lc(1),s.Ub()),2&t){const t=s.hc().i,e=s.hc(2);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].distributionRulesId," ")}}function ji(t,e){if(1&t){const t=s.Wb();s.Tb(0,153),s.Tb(1,45),s.Vb(2,"td",131),s.Vb(3,"ng-select",171),s.dc("add",(function(){s.Dc(t);const i=e.i;return s.hc(2).onDistRuleAdd(i)})),s.Ub(),s.Jc(4,zi,2,1,"div",21),s.Ub(),s.Sb(),s.Sb()}if(2&t){const t=e.i,i=s.hc(2);s.oc("formGroup",i.myForm),s.Cb(2),s.oc("formGroupName",t),s.Cb(1),s.oc("items",i.distributionList)("multiple",!0),s.Cb(1),s.oc("ngIf",i.myFormErrors.itemListArray[t].distributionRulesId)}}const $i=function(){return{"max-height.px":300}};function Yi(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"div",1),s.Vb(2,"span"),s.Lc(3),s.Ub(),s.Lc(4),s.Jc(5,Mt,2,0,"ng-container",0),s.Jc(6,kt,2,0,"ng-container",0),s.Vb(7,"div",2),s.Vb(8,"button",3),s.dc("click",(function(){return s.Dc(t),s.hc().utilsService.goBack()})),s.Qb(9,"i",4),s.Vb(10,"span"),s.Lc(11,"Back"),s.Ub(),s.Ub(),s.Vb(12,"button",5),s.dc("click",(function(){s.Dc(t);const e=s.hc();return e.popupExternalService.showManageColumnsPopup(e.txnKeys.inputScreenName)})),s.Qb(13,"i",6),s.Vb(14,"span"),s.Lc(15,"Manage Item Columns"),s.Ub(),s.Ub(),s.Jc(16,wt,4,0,"button",7),s.Vb(17,"button",5),s.dc("click",(function(){return s.Dc(t),s.hc().showTxnOptionsSidebar()})),s.Qb(18,"i",8),s.Vb(19,"span"),s.Lc(20,"More"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(21,"div",9),s.Vb(22,"div",10),s.Vb(23,"div",11),s.Qb(24,"i",12),s.Lc(25,"Basic Info "),s.Ub(),s.Vb(26,"div",13),s.Vb(27,"div",14),s.Vb(28,"div",15),s.Vb(29,"label",16),s.Lc(30,"Doc No"),s.Vb(31,"span",17),s.Lc(32,"*"),s.Ub(),s.Ub(),s.Vb(33,"div",14),s.Vb(34,"div",18),s.Vb(35,"ng-select",19),s.dc("change",(function(){s.Dc(t);const e=s.hc();return e.branchUtilsService.onDocumentNumberingChange(e.documentNumberingList,e.myForm)})),s.Ub(),s.Ub(),s.Vb(36,"div",18),s.Qb(37,"input",20),s.Ub(),s.Ub(),s.Jc(38,Ot,2,1,"div",21),s.Ub(),s.Vb(39,"div",15),s.Vb(40,"label",16),s.Lc(41,"Business Partner Name"),s.Vb(42,"span",17),s.Lc(43,"*"),s.Ub(),s.Ub(),s.Vb(44,"div",22),s.Vb(45,"ng-select",23),s.dc("focus",(function(){return s.Dc(t),s.hc().onCustomerNameChange()}))("change",(function(){return s.Dc(t),s.hc().onCustomerChange()})),s.Jc(46,qt,4,2,"ng-template",24),s.Ub(),s.Vb(47,"span"),s.Jc(48,Pt,2,0,"a",25),s.Jc(49,Bt,2,0,"a",26),s.Ub(),s.Jc(50,Kt,2,0,"span",27),s.Ub(),s.Jc(51,Jt,2,1,"div",21),s.Ub(),s.Vb(52,"div",15),s.Vb(53,"label",16),s.Lc(54,"Contact Person"),s.Ub(),s.Vb(55,"ng-select",28),s.Jc(56,Qt,4,3,"ng-template",24),s.Ub(),s.Ub(),s.Vb(57,"div",15),s.Vb(58,"label",16),s.Lc(59,"Currency"),s.Vb(60,"span",17),s.Lc(61,"*"),s.Ub(),s.Ub(),s.Vb(62,"select",29),s.Vb(63,"option",30),s.Lc(64,"--SELECT--"),s.Ub(),s.Jc(65,_t,2,2,"option",31),s.Ub(),s.Jc(66,Wt,2,1,"div",21),s.Ub(),s.Vb(67,"div",15),s.Vb(68,"label",16),s.Lc(69,"Reference No"),s.Ub(),s.Qb(70,"input",32),s.Ub(),s.Vb(71,"div",15),s.Vb(72,"label",16),s.Lc(73,"Posting Date"),s.Vb(74,"span",17),s.Lc(75,"*"),s.Ub(),s.Ub(),s.Qb(76,"p-calendar",33),s.Jc(77,Ht,2,1,"div",21),s.Jc(78,Gt,2,1,"div",21),s.Ub(),s.Jc(79,$t,8,6,"div",34),s.Jc(80,Xt,8,6,"div",34),s.Jc(81,ie,8,6,"div",34),s.Vb(82,"div",15),s.Vb(83,"label",16),s.Lc(84,"Document Date"),s.Vb(85,"span",17),s.Lc(86,"*"),s.Ub(),s.Ub(),s.Qb(87,"p-calendar",35),s.Jc(88,re,2,1,"div",21),s.Ub(),s.Vb(89,"div",15),s.Vb(90,"label",16),s.Lc(91,"Employee"),s.Vb(92,"span",17),s.Lc(93,"*"),s.Ub(),s.Ub(),s.Vb(94,"div",36),s.Vb(95,"ng-select",37),s.Jc(96,ne,4,2,"ng-template",24),s.Ub(),s.Ub(),s.Jc(97,se,2,1,"div",21),s.Ub(),s.Vb(98,"div",15),s.Vb(99,"label",16),s.Lc(100,"Status"),s.Vb(101,"span",17),s.Lc(102,"*"),s.Ub(),s.Ub(),s.Vb(103,"select",38),s.Jc(104,oe,2,2,"option",31),s.Ub(),s.Jc(105,ae,2,1,"div",21),s.Ub(),s.Vb(106,"div",39),s.Vb(107,"label",16),s.Lc(108,"Remarks"),s.Ub(),s.Qb(109,"textarea",40),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(110,"div",10),s.Vb(111,"div",11),s.Qb(112,"i",12),s.Lc(113,"Content Info "),s.Ub(),s.Vb(114,"div",41),s.Vb(115,"div",42),s.Vb(116,"table",43),s.Vb(117,"thead"),s.Vb(118,"tr"),s.Jc(119,ue,2,4,"ng-container",44),s.Ub(),s.Ub(),s.Vb(120,"tbody",45),s.Jc(121,be,2,2,"tr",46),s.Ub(),s.Jc(122,de,7,0,"tfoot",0),s.Ub(),s.Ub(),s.Vb(123,"div",14),s.Vb(124,"div",47),s.Qb(125,"div",48),s.Ub(),s.Vb(126,"div",49),s.Vb(127,"table",50),s.Vb(128,"tbody"),s.Vb(129,"tr"),s.Vb(130,"td",51),s.Vb(131,"strong"),s.Lc(132,"Total Before Discount"),s.Ub(),s.Ub(),s.Qb(133,"td",52),s.Vb(134,"td",53),s.Vb(135,"strong"),s.Lc(136),s.Ub(),s.Ub(),s.Ub(),s.Vb(137,"tr"),s.Vb(138,"td"),s.Lc(139,"Discount %"),s.Ub(),s.Vb(140,"td",54),s.Vb(141,"input",55),s.dc("keyup",(function(){s.Dc(t);const e=s.hc();return e.branchUtilsService.txnCalcTotal(e.myForm)})),s.Ub(),s.Jc(142,he,2,1,"div",21),s.Ub(),s.Vb(143,"td",54),s.Lc(144),s.Ub(),s.Ub(),s.Vb(145,"tr"),s.Vb(146,"td"),s.Lc(147,"Tax"),s.Ub(),s.Qb(148,"td"),s.Vb(149,"td",54),s.Lc(150),s.Ub(),s.Ub(),s.Vb(151,"tr"),s.Vb(152,"td"),s.Lc(153," Rounding "),s.Vb(154,"div"),s.Vb(155,"label",56),s.Vb(156,"input",57),s.dc("ngModelChange",(function(){s.Dc(t);const e=s.hc();return e.branchUtilsService.txnRoundingOffChange(e.myForm)})),s.Ub(),s.Qb(157,"span",58),s.Lc(158,"Edit "),s.Ub(),s.Ub(),s.Ub(),s.Vb(159,"td"),s.Vb(160,"input",59),s.dc("keyup",(function(){s.Dc(t);const e=s.hc();return e.branchUtilsService.txnCalcTotal(e.myForm,!0)})),s.Ub(),s.Jc(161,pe,2,1,"div",21),s.Ub(),s.Vb(162,"td",54),s.Lc(163),s.Ub(),s.Ub(),s.Vb(164,"tr"),s.Vb(165,"td",60),s.Lc(166,"Total "),s.Vb(167,"small"),s.Lc(168,"(Rounded off):"),s.Ub(),s.Ub(),s.Qb(169,"td"),s.Vb(170,"td",61),s.Lc(171),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(172,"div",10),s.Vb(173,"div",11),s.Qb(174,"i",12),s.Lc(175,"Logistics Info "),s.Ub(),s.Vb(176,"div",13),s.Vb(177,"div",14),s.Vb(178,"div",15),s.Vb(179,"label",16),s.Lc(180,"Ship From"),s.Ub(),s.Vb(181,"select",62),s.dc("change",(function(){s.Dc(t);const e=s.hc();return e.branchUtilsService.txnBpAddressChange(e.customerShipToAddressList,e.myForm,"customerShipToBpAddressId","customerShipToAddress")})),s.Vb(182,"option",30),s.Lc(183,"--SELECT--"),s.Ub(),s.Jc(184,ge,2,3,"option",31),s.Ub(),s.Qb(185,"textarea",63),s.Ub(),s.Vb(186,"div",15),s.Vb(187,"label",16),s.Lc(188,"Pay To"),s.Ub(),s.Vb(189,"select",64),s.dc("change",(function(){s.Dc(t);const e=s.hc();return e.branchUtilsService.txnBpAddressChange(e.customerBillToAddressList,e.myForm,"customerBillToBpAddressId","customerBillToAddress"),e.branchUtilsService.txnSetTaxCode(e.customerBillToAddressList,e.myForm,"customerBillToBpAddressId")})),s.Vb(190,"option",30),s.Lc(191,"--SELECT--"),s.Ub(),s.Jc(192,fe,2,3,"option",31),s.Ub(),s.Qb(193,"textarea",65),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Jc(194,Se,20,2,"div",66),s.Jc(195,Ie,10,0,"div",66),s.Qb(196,"app-udf-viewer",67),s.Vb(197,"app-attachments",68),s.dc("doSuccess",(function(){s.Dc(t);const e=s.hc();return e.rentalTxnUtilsService.redirectToList(e.txnKeys.inputScreenName)})),s.Ub(),s.Vb(198,"div",10),s.Vb(199,"div",11),s.Qb(200,"i",12),s.Lc(201,"Terms and Conditions "),s.Ub(),s.Vb(202,"div",13),s.Vb(203,"div",14),s.Vb(204,"div",15),s.Vb(205,"label",16),s.Lc(206,"Select Template"),s.Ub(),s.Vb(207,"select",69),s.Vb(208,"option",30),s.Lc(209,"--SELECT--"),s.Ub(),s.Jc(210,Ce,2,2,"option",31),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(211,"div",70),s.Jc(212,Ue,4,0,"button",7),s.Jc(213,Le,4,0,"button",7),s.Jc(214,Ve,4,0,"button",71),s.Jc(215,De,4,0,"button",7),s.Jc(216,Ne,4,0,"button",72),s.Ub(),s.Jc(217,Te,7,3,"div",73),s.Jc(218,xe,7,0,"div",73),s.Ub(),s.Qb(219,"app-spi-txn-options"),s.Jc(220,Ae,2,1,"ng-template",null,74,s.Kc),s.Jc(222,Re,2,1,"ng-template",null,75,s.Kc),s.Jc(224,Me,4,1,"ng-template",null,76,s.Kc),s.Jc(226,ke,2,1,"ng-template",null,77,s.Kc),s.Jc(228,we,2,1,"ng-template",null,78,s.Kc),s.Jc(230,Oe,2,1,"ng-template",null,79,s.Kc),s.Jc(232,qe,2,1,"ng-template",null,80,s.Kc),s.Jc(234,Be,3,2,"ng-template",null,81,s.Kc),s.Jc(236,Je,3,2,"ng-template",null,82,s.Kc),s.Jc(238,_e,3,2,"ng-template",null,83,s.Kc),s.Jc(240,He,3,2,"ng-template",null,84,s.Kc),s.Jc(242,ze,3,2,"ng-template",null,85,s.Kc),s.Jc(244,$e,3,2,"ng-template",null,86,s.Kc),s.Jc(246,Ye,2,1,"ng-template",null,87,s.Kc),s.Jc(248,Xe,3,2,"ng-template",null,88,s.Kc),s.Jc(250,ti,2,1,"ng-template",null,89,s.Kc),s.Jc(252,ei,2,1,"ng-template",null,90,s.Kc),s.Jc(254,ii,2,1,"ng-template",null,91,s.Kc),s.Jc(256,ri,4,1,"ng-template",null,92,s.Kc),s.Jc(258,ni,2,1,"ng-template",null,93,s.Kc),s.Jc(260,si,4,1,"ng-template",null,94,s.Kc),s.Jc(262,ai,3,2,"ng-template",null,95,s.Kc),s.Jc(264,ui,4,3,"ng-template",null,96,s.Kc),s.Jc(266,mi,4,3,"ng-template",null,97,s.Kc),s.Jc(268,di,7,6,"ng-template",null,98,s.Kc),s.Jc(270,fi,7,5,"ng-template",null,99,s.Kc),s.Jc(272,yi,4,3,"ng-template",null,100,s.Kc),s.Jc(274,vi,4,5,"ng-template",null,101,s.Kc),s.Jc(276,Si,5,2,"ng-template",null,102,s.Kc),s.Jc(278,Ci,6,3,"ng-template",null,103,s.Kc),s.Jc(280,Ui,4,4,"ng-template",null,104,s.Kc),s.Jc(282,Vi,6,7,"ng-template",null,105,s.Kc),s.Jc(284,Fi,7,8,"ng-template",null,106,s.Kc),s.Jc(286,xi,7,8,"ng-template",null,107,s.Kc),s.Jc(288,Mi,7,8,"ng-template",null,108,s.Kc),s.Jc(290,wi,6,7,"ng-template",null,109,s.Kc),s.Jc(292,qi,5,5,"ng-template",null,110,s.Kc),s.Jc(294,Bi,5,3,"ng-template",null,111,s.Kc),s.Jc(296,Ki,4,4,"ng-template",null,112,s.Kc),s.Jc(298,Qi,5,3,"ng-template",null,113,s.Kc),s.Jc(300,Wi,5,5,"ng-template",null,114,s.Kc),s.Jc(302,Hi,4,3,"ng-template",null,115,s.Kc),s.Jc(304,Gi,4,3,"ng-template",null,116,s.Kc),s.Jc(306,ji,5,5,"ng-template",null,117,s.Kc),s.Sb()}if(2&t){const t=s.hc();s.Cb(3),s.Mc(t.branchUtilsService.txnGetTitle(t.screenAttributes.title,!0)),s.Cb(1),s.Nc("",t.branchUtilsService.txnGetTitle(t.screenAttributes.title)," - "),s.Cb(1),s.oc("ngIf",!t.txnKeys.inputEditId),s.Cb(1),s.oc("ngIf",t.txnKeys.inputEditId),s.Cb(10),s.oc("ngIf",t.txnKeys.inputEditId),s.Cb(5),s.oc("formGroup",t.myForm),s.Cb(14),s.oc("items",t.documentNumberingList),s.Cb(3),s.oc("ngIf",t.myFormErrors.documentNumberingId||t.myFormErrors.documentNumber),s.Cb(7),s.oc("items",t.businessPartnerList)("multiple",!1),s.Cb(3),s.oc("ngIf",!t.bizRefreshFlag),s.Cb(1),s.oc("ngIf",t.bizRefreshFlag),s.Cb(1),s.oc("ngIf",t.myFormData.customerBpId),s.Cb(1),s.oc("ngIf",t.myFormErrors.customerBpId),s.Cb(4),s.oc("items",t.bpContactList)("multiple",!1),s.Cb(10),s.oc("ngForOf",t.currencyList),s.Cb(1),s.oc("ngIf",t.myFormErrors.currencyId),s.Cb(10),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",t.myFormErrors.postingDate),s.Cb(1),s.oc("ngIf",null==t.myForm.errors?null:t.myForm.errors.invalidPostingDate),s.Cb(1),s.oc("ngIf",t.rentalTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnDeliveryDate")),s.Cb(1),s.oc("ngIf",t.rentalTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnDueDate")),s.Cb(1),s.oc("ngIf",t.rentalTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnReturnDate")),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",t.myFormErrors.documentDate),s.Cb(7),s.oc("items",t.employeeList)("multiple",!1),s.Cb(2),s.oc("ngIf",t.myFormErrors.empId),s.Cb(7),s.oc("ngForOf",t.rentalStatusList),s.Cb(1),s.oc("ngIf",t.myFormErrors.status),s.Cb(10),s.oc("ngStyle",s.rc(67,$i)),s.Cb(4),s.oc("ngForOf",t.itemListColumnOrder),s.Cb(2),s.oc("ngForOf",t.myForm.controls.itemListArray.controls),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnAddItemAccess(t.txnKeys.inputScreenName,t.myForm,t.txnKeys.inputEditId)),s.Cb(14),s.Oc(" ",t.myFormData.totalBeforeDiscount," ",t.branchUtilsService.txnGetActiveCurrency(t.currencyList,t.myForm,"currencyId")," "),s.Cb(6),s.oc("ngIf",t.myFormErrors.discountPercentage),s.Cb(2),s.Oc(" ",t.myFormData.discountValue," ",t.branchUtilsService.txnGetActiveCurrency(t.currencyList,t.myForm,"currencyId")," "),s.Cb(6),s.Oc(" ",t.myFormData.taxPercentage," ",t.branchUtilsService.txnGetActiveCurrency(t.currencyList,t.myForm,"currencyId")," "),s.Cb(11),s.oc("ngIf",t.myFormErrors.rounding),s.Cb(2),s.Oc(" ",t.myFormData.rounding," ",t.branchUtilsService.txnGetActiveCurrency(t.currencyList,t.myForm,"currencyId")," "),s.Cb(8),s.Oc(" ",t.myFormData.totalAmount," ",t.branchUtilsService.txnGetActiveCurrency(t.currencyList,t.myForm,"currencyId")," "),s.Cb(13),s.oc("ngForOf",t.customerShipToAddressList),s.Cb(8),s.oc("ngForOf",t.customerBillToAddressList),s.Cb(2),s.oc("ngIf",t.rentalTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnPaymentFields")),s.Cb(1),s.oc("ngIf",t.rentalTxnUtilsService.addFieldsVisibility(t.txnKeys.inputScreenName,"fnTaxFields")),s.Cb(1),s.oc("type",t.screenAttributes.backendKey),s.Cb(1),s.oc("type",t.screenAttributes.backendKey),s.Cb(13),s.oc("ngForOf",t.termsAndConditionList),s.Cb(2),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"save")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"saveDraft")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"clear")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"update")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"cancel")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"editMsgContainer")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"addAclNote"))}}let Zi=(()=>{class t{constructor(t,e,i,r,s,o,a,c,u,m,l){this.utilsService=t,this.storageService=e,this.authGuardService=i,this.commonDataService=r,this.branchUtilsService=s,this.formBuilder=o,this.activatedRoute=a,this.rentalTxnUtilsService=c,this.popupExternalService=u,this.changeDetectorRef=m,this.modalService=l,this.appConstants=n.h,this.screenAcl={},this.txnKeys={inputScreenName:"",inputEditId:"",inputDraftId:"",inputCopyIds:"",inputCopyScreenName:"",inputDuplicateId:"",editStatusId:"",editCreatedName:""},this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.documentNumberingList=[],this.rentalStatusList=[],this.currencyList=[],this.paymentTermsList=[],this.paymentMethodsList=[],this.taxList=[],this.uomList=[],this.hsnList=[],this.itemList=[],this.distributionList=[],this.termsAndConditionList=[],this.businessPartnerList=[],this.bpContactList=[],this.employeeList=[],this.customerShipToAddressList=[],this.customerBillToAddressList=[],this.bizRefreshFlag=!1,this.rentalWorklogList=[],this.myFormData={},this.myFormErrors={},this.myFormValidationMsgs={}}ngOnInit(){this.initializeSubscriptions()}ngAfterViewInit(){this.attachmentsComponent&&this.udfViewerComponent&&(this.attachmentsComponent.loadAttachments(this.txnKeys.inputEditId||this.txnKeys.inputDraftId),this.udfViewerComponent.getFields(this.txnKeys.inputEditId||this.txnKeys.inputDuplicateId||this.txnKeys.inputDraftId),this.changeDetectorRef.detectChanges())}initializeSubscriptions(){this.activatedRoute.params.subscribe(t=>{if(!this.rentalTxnUtilsService.checkScreenNameValid(t.screenName))return this.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),this.utilsService.goBack(),!1;if(this.screenAcl=this.authGuardService.getScreenAcl(this.branchUtilsService.screenAttributes[t.screenName].documentTypeId),!this.screenAcl.view)return this.utilsService.showFailureMsg(n.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;if(this.reInitializeGlobalVariables(),this.txnKeys.inputScreenName=t.screenName,this.transactionInitialization(),t.id&&(this.txnKeys.inputEditId=this.utilsService.decrypt(t.id),this.get()),t.copyScreenName&&t.copyId){const e=this.utilsService.decrypt(t.copyId);this.txnKeys.inputCopyIds=e.split(","),this.txnKeys.inputCopyScreenName=t.copyScreenName,this.copyFrom()}t.duplicateId&&(this.txnKeys.inputDuplicateId=this.utilsService.decrypt(t.duplicateId),this.getDuplicate()),t.draftId&&(this.txnKeys.inputDraftId=this.utilsService.decrypt(t.draftId),this.getDraft()),this.txnKeys.inputEditId||this.txnKeys.inputCopyIds||this.txnKeys.inputDuplicateId||this.txnKeys.inputDraftId||(this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),this.getCustomerBpList(),this.getEmployeeList(),this.getAutoSuggestionList("getCurrencyList"),this.getAutoSuggestionList("getHsnList"),this.getAutoSuggestionList("getTaxList"),this.getAutoSuggestionList("getUomList"),this.getDistributionList())}),this.branchUtilsService.itemSearch.pipe(Object(k.a)(700),Object(w.a)(),Object(O.a)(t=>{this.getItemList(t)})).subscribe(),this.itemListColumnOrderChangesSubscription=this.branchUtilsService.itemListColumnOrderChanges.subscribe(t=>{"rentalQuote"!==t.triggerType&&"rentalOrder"!==t.triggerType&&"rentalDelivery"!==t.triggerType&&"rentalReturn"!==t.triggerType&&"rentalInvoice"!==t.triggerType||(this.itemListColumnOrder=this.branchUtilsService.getSelectedItemColumnDataByTxn(this.txnKeys.inputScreenName))})}reInitializeGlobalVariables(){this.txnKeys.inputScreenName="",this.txnKeys.inputEditId="",this.txnKeys.inputCopyIds="",this.txnKeys.inputCopyScreenName="",this.txnKeys.inputDuplicateId="",this.txnKeys.editStatusId="",this.txnKeys.editCreatedName="",this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.documentNumberingList=[],this.rentalStatusList=[],this.itemList=[],this.taxList=[],this.uomList=[],this.hsnList=[],this.distributionList=[],this.businessPartnerList=[],this.bpContactList=[],this.employeeList=[],this.termsAndConditionList=[],this.currencyList=[],this.paymentTermsList=[],this.paymentMethodsList=[],this.customerShipToAddressList=[],this.customerBillToAddressList=[]}transactionInitialization(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.txnKeys.inputScreenName],this.screenDataService=this.rentalTxnUtilsService.getScreenDataService(this.txnKeys.inputScreenName),this.myFormErrors=this.rentalTxnUtilsService.getFormErrors(this.txnKeys.inputScreenName,"mainFields"),this.myFormValidationMsgs=this.rentalTxnUtilsService.getFormValMsgs(this.txnKeys.inputScreenName),this.itemListColumnOrder=this.branchUtilsService.getSelectedItemColumnDataByTxn(this.txnKeys.inputScreenName),this.initializeForm(),this.getAutoSuggestionList("getRentalTransStatusList"),this.getAutoSuggestionList("getTermsandConditionsList"),"rentalQuote"!==this.txnKeys.inputScreenName&&"rentalOrder"!==this.txnKeys.inputScreenName&&"rentalInvoice"!==this.txnKeys.inputScreenName||(this.getAutoSuggestionList("getPaymentTermsList"),this.getAutoSuggestionList("getPaymentMethodsList"))}initializeForm(){this.myForm=this.rentalTxnUtilsService.getFormMainFields(this.txnKeys.inputScreenName),this.myForm.valueChanges.subscribe(t=>{this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs),this.myFormData=this.myForm.getRawValue()}),this.myFormData=this.myForm.getRawValue()}addItemFields(t,e){const i=this.myForm.controls.itemListArray;i.push(this.initItemFields(t,e)),t||this.branchUtilsService.txnTaxChange(this.taxList,this.myForm,i.length-1)}initItemFields(t,e){return this.myFormErrors.itemListArray.push(this.rentalTxnUtilsService.getFormErrors(this.txnKeys.inputScreenName,"itemFields")),this.rentalTxnUtilsService.getFormItemFields(this.txnKeys.inputScreenName,t,e)}removeItemFields(t){const e=this.myFormData.itemListArray[t].id;if(e){const t=this.myFormData.deletedItemChildIds;t.push(e),this.myForm.patchValue({deletedItemChildIds:t})}this.myForm.controls.itemListArray.removeAt(t)}confirmSaveUpdate(){const t=this.myForm.getRawValue(),e=u.findIndex(this.documentNumberingList,{id:t.documentNumberingId});return"DRAFT"===this.documentNumberingList[e].documentNumberingType?(this.utilsService.showFailureMsg("Cannot Proceed - Select other than draft document numbering from Doc No field!"),!1):this.myForm.valid&&this.udfViewerComponent.valid()?0===t.itemListArray.length?(this.utilsService.showFailureMsg("Cannot save / update - No item added!"),!1):this.rentalTxnUtilsService.checkEquipmentDuplicateExist(this.myForm)?(this.utilsService.showFailureMsg("Cannot Proceed - Duplicate equipment in the list!"),!1):"rentalInvoice"===this.txnKeys.inputScreenName&&this.rentalTxnUtilsService.checkWorklogDuplicateExist(this.myForm)?(this.utilsService.showFailureMsg("Cannot Proceed - Duplicate work log ref in the list!"),!1):void("rentalInvoice"===this.txnKeys.inputScreenName&&this.rentalTxnUtilsService.checkWorklogUtilized(this.myFormData)?this.utilsService.confirmDialog("Confirmation","Saving the document will close the referenced worklogs. Confirm to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe(t=>{t&&this.saveUpdate()}):this.saveUpdate()):(this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs,!0),this.udfViewerComponent.checkValidations(),!1)}saveUpdate(){const t=this.rentalTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm);let e;t.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),t.isDraft=this.txnKeys.inputDraftId?"2":"0",this.txnKeys.inputEditId||this.txnKeys.inputDraftId?(e="update",t.id=this.txnKeys.inputEditId||this.txnKeys.inputDraftId):e="save",this.screenDataService[e](t).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.attachmentsComponent.save("save"===e?t.sId:this.txnKeys.inputEditId||this.txnKeys.inputDraftId)):this.utilsService.showFailureMsg(t)})}addUpdateDraft(){const t=this.myForm.getRawValue(),e=u.findIndex(this.documentNumberingList,{id:t.documentNumberingId});if("DRAFT"!==this.documentNumberingList[e].documentNumberingType)return this.utilsService.showFailureMsg("Cannot Proceed - Select draft document numbering from Doc No field!"),!1;if(0===t.itemListArray.length)return this.utilsService.showFailureMsg("Cannot save / update draft - No item added!"),!1;const i=this.rentalTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm);let r;i.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),i.isDraft="1",this.txnKeys.inputDraftId?(r="update",i.id=this.txnKeys.inputDraftId):r="save",this.screenDataService[r](i).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.attachmentsComponent.save("save"===r?t.sId:this.txnKeys.inputDraftId)):this.utilsService.showFailureMsg(t)})}get(){this.screenDataService.get(this.txnKeys.inputEditId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results;e.editFlag=!0;const i=this.rentalTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,e);this.myForm.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId,"edit",e.documentNumberingInfo).subscribe(t=>{this.documentNumberingList=t}),this.getCustomerBpList(!0,e.customerBpInfo),this.getEmployeeList(e.empInfo),this.getAutoSuggestionList("getCurrencyList",e.currencyInfo),this.getCustomerBpContactList(!0,e.customerBpContactsInfo),this.getCustomerShipToAddressList(!0,e.customerShipToBpAddressInfo),this.getCustomerBillToAddressList(!0,e.customerBillToBpAddressInfo);const r=[],n=[],s=[],o=[],a=[];e.itemListArray.forEach((t,e)=>{this.addItemFields(t,"edit"),t.rentalItemInfo[0]&&r.push(t.rentalItemInfo[0]),t.uomInfo[0]&&n.push(t.uomInfo[0]),t.hsnInfo[0]&&s.push(t.hsnInfo[0]),t.taxInfo[0]&&o.push(t.taxInfo[0]),t.distributionRulesInfo.forEach(t=>{a.push(t)})}),this.getAutoSuggestionList("getUomList",n),this.getAutoSuggestionList("getHsnList",s),this.getAutoSuggestionList("getTaxList",o),this.getItemList("",!0,r),this.getDistributionList(a),this.txnKeys.editStatusId=e.status,this.txnKeys.editCreatedName=e.createdByInfo[0].employeeName,this.branchUtilsService.txnCalcItemsTotal(this.myForm),this.rentalTxnUtilsService.manipulationsOnEdit(this.txnKeys.inputScreenName,this.myForm)}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}copyFrom(){const t=this.rentalTxnUtilsService.getScreenDataService(this.txnKeys.inputCopyScreenName),e=this.branchUtilsService.screenAttributes[this.txnKeys.inputCopyScreenName];t.copy(this.txnKeys.inputCopyIds).subscribe(t=>{if("SUCCESS"===t.status){const i=t.results;delete i.documentNumberingId,delete i.documentNumber,delete i.documentNumberingInfo;const r=this.rentalTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,i);this.myForm.patchValue(r),this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),this.getCustomerBpList(!0,i.customerBpInfo),this.getEmployeeList(i.empInfo),this.getAutoSuggestionList("getCurrencyList",i.currencyInfo),this.getCustomerBpContactList(!0,i.customerBpContactsInfo),this.getCustomerShipToAddressList(!0,i.customerShipToBpAddressInfo),this.getCustomerBillToAddressList(!0,i.customerBillToBpAddressInfo);const n=[],s=[],o=[],a=[],c=[],u=i.itemListArray.filter(t=>"rentalInvoice"===this.txnKeys.inputScreenName&&"0"!==t.openQuantity||"1"!==t.isUtilized&&"rentalInvoice"!==this.txnKeys.inputScreenName);i.itemListArray=u,i.itemListArray.forEach((t,r)=>{t.copyFromId=t.id,t.copyFromType=e.backendKey,delete t.id,"rentalInvoice"===this.txnKeys.inputScreenName&&(t.copyFromOpenQuantity=t.openQuantity,t.quantity=t.openQuantity,delete t.openQuantity,delete t.orderedQuantity),this.addItemFields(t,"copy"),t.rentalItemInfo[0]&&n.push(t.rentalItemInfo[0]),t.uomInfo&&t.uomInfo[0]&&s.push(t.uomInfo[0]),t.hsnInfo&&t.hsnInfo[0]&&o.push(t.hsnInfo[0]),t.taxInfo&&t.taxInfo[0]&&a.push(t.taxInfo[0]),t.distributionRulesInfo&&t.distributionRulesInfo.forEach(t=>{c.push(t)}),"rentalInvoice"===this.txnKeys.inputScreenName&&this.getRentalWorkLogList(i.customerBpId,t.rentalItemId,t.rentalEquipmentId,r)}),this.getAutoSuggestionList("getUomList",s),this.getAutoSuggestionList("getHsnList",o),this.getAutoSuggestionList("getTaxList",a),this.getItemList("",!0,n),this.getDistributionList(c),this.branchUtilsService.txnCalcItemsTotal(this.myForm),this.rentalTxnUtilsService.manipulationsOnCopy(this.txnKeys.inputScreenName,this.myForm)}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}getDraft(){this.screenDataService.get(this.txnKeys.inputDraftId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results,i=this.rentalTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,e);this.myForm.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId,"draft",e.documentNumberingInfo).subscribe(t=>{this.documentNumberingList=t}),this.getCustomerBpList(!0,e.customerBpInfo),this.getEmployeeList(e.empInfo),this.getAutoSuggestionList("getCurrencyList",e.currencyInfo),this.getCustomerBpContactList(!0,e.customerBpContactsInfo),this.getCustomerShipToAddressList(!0,e.customerShipToBpAddressInfo),this.getCustomerBillToAddressList(!0,e.customerBillToBpAddressInfo);const r=[],n=[],s=[],o=[],a=[];e.itemListArray.forEach((t,e)=>{this.addItemFields(t,"edit"),t.rentalItemInfo[0]&&r.push(t.rentalItemInfo[0]),t.uomInfo[0]&&n.push(t.uomInfo[0]),t.hsnInfo[0]&&s.push(t.hsnInfo[0]),t.taxInfo[0]&&o.push(t.taxInfo[0]),t.distributionRulesInfo.forEach(t=>{a.push(t)})}),this.getAutoSuggestionList("getUomList",n),this.getAutoSuggestionList("getHsnList",s),this.getAutoSuggestionList("getTaxList",o),this.getItemList("",!0,r),this.getDistributionList(a),this.branchUtilsService.txnCalcItemsTotal(this.myForm),this.txnKeys.editStatusId=e.status,this.txnKeys.editCreatedName=e.createdByInfo[0].employeeName}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}getDuplicate(){this.screenDataService.get(this.txnKeys.inputDuplicateId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results;delete e.documentNumberingId,delete e.documentNumber,delete e.documentNumberingInfo,delete e.status;const i=this.rentalTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,e);this.myForm.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),this.getCustomerBpList(!0,e.customerBpInfo),this.getEmployeeList(e.empInfo),this.getAutoSuggestionList("getCurrencyList",e.currencyInfo),this.getCustomerBpContactList(!0,e.customerBpContactsInfo),this.getCustomerShipToAddressList(!0,e.customerShipToBpAddressInfo),this.getCustomerBillToAddressList(!0,e.customerBillToBpAddressInfo);const r=[],n=[],s=[],o=[],a=[];e.itemListArray.forEach((t,i)=>{delete t.id,delete t.openQuantity,delete t.orderedQuantity,delete t.copyFromType,delete t.copyFromId,this.addItemFields(t),t.rentalItemInfo[0]&&r.push(t.rentalItemInfo[0]),t.uomInfo&&t.uomInfo[0]&&n.push(t.uomInfo[0]),t.hsnInfo&&t.hsnInfo[0]&&s.push(t.hsnInfo[0]),t.taxInfo&&t.taxInfo[0]&&o.push(t.taxInfo[0]),t.distributionRulesInfo&&t.distributionRulesInfo.forEach(t=>{a.push(t)}),"rentalInvoice"===this.txnKeys.inputScreenName&&this.getRentalWorkLogList(e.customerBpId,t.rentalItemId,t.rentalEquipmentId,i)}),this.getAutoSuggestionList("getUomList",n),this.getAutoSuggestionList("getHsnList",s),this.getAutoSuggestionList("getTaxList",o),this.getItemList("",!0,r),this.getDistributionList(a),this.branchUtilsService.txnCalcItemsTotal(this.myForm)}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}clearForm(){this.initializeForm()}onDateChange(t){const e=this.myForm.controls.itemListArray.at(t);this.rentalTxnUtilsService.setItemFieldsCustomValidations(e,this.txnKeys.inputScreenName)}onCustomerChange(){this.getCustomerBpContactList(),this.branchUtilsService.txnSetCurrency(this.businessPartnerList,this.myForm,"customerBpId","currencyId"),this.branchUtilsService.txnSetTermsAndMethods(this.businessPartnerList,this.myForm,"customerBpId"),this.branchUtilsService.txnPaymentTermsChange(this.txnKeys.inputScreenName,this.paymentTermsList,this.myForm,"paymentTermsId"),this.getCustomerShipToAddressList(),this.getCustomerBillToAddressList(),this.showTxnOptionsSidebar(!1)}onCustomerNameChange(){if(this.myFormData.customerBpId){const t=this.myForm.controls.itemListArray;t.length>0&&this.utilsService.confirmDialog("Confirmation","If changing the customer leads to remove the items. Do you want to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe(e=>{e&&(this.myForm.patchValue({customerBpId:null}),t.clear())})}}onItemChange(t){const e=this.myForm.controls.itemListArray.at(t);e.patchValue({equipmentList:[],rentalEquipmentId:null,unitPrice:"0.00",rentalWorklogId:null,rentalWorklogList:[]}),this.branchUtilsService.txnSetUom(this.itemList,this.myForm,t,"rentalItemId"),this.branchUtilsService.txnSetHsn(this.itemList,this.myForm,t,"rentalItemId");const i=u.findIndex(this.itemList,e=>this.myFormData.itemListArray[t].rentalItemId===e.id);i>=0&&e.patchValue({equipmentList:this.itemList[i].rentalEquipmentList})}onDistRuleAdd(t){this.branchUtilsService.distRulesCheckUnique(this.distributionList,this.myForm.controls.itemListArray.controls[t],"distributionRulesId")}onItemSearch(t){this.branchUtilsService.itemSearch.next(t)}onEquipmentChange(t){const e=this.myForm.controls.itemListArray.at(t);if(e.patchValue({unitPrice:"0.00",rentalWorklogId:null,rentalWorklogList:[]}),this.myFormData.itemListArray[t].rentalItemId&&this.myFormData.itemListArray[t].rentalEquipmentId){const i=u.findIndex(this.myFormData.itemListArray[t].equipmentList,e=>this.myFormData.itemListArray[t].rentalEquipmentId===e.id);e.patchValue({unitPrice:this.myFormData.itemListArray[t].equipmentList[i].unitPrice}),"rentalInvoice"===this.txnKeys.inputScreenName&&this.getRentalWorkLogList(this.myFormData.customerBpId,this.myFormData.itemListArray[t].rentalItemId,this.myFormData.itemListArray[t].rentalEquipmentId,t),this.branchUtilsService.txnCalcItemsTotal(this.myForm)}}onWorkLogRefChange(t){const e=this.myForm.controls.itemListArray.at(t);if(this.myFormData.itemListArray[t].rentalWorklogId){const i=u.findIndex(this.myFormData.itemListArray[t].rentalWorklogList,{id:this.myFormData.itemListArray[t].rentalWorklogId});if(i>=0){const r=d.duration(this.myFormData.itemListArray[t].rentalWorklogList[i].totalBillableHours).asHours().toFixed(2);e.patchValue({quantity:r,startDate:this.utilsService.getFrontendDateFormat(this.myFormData.itemListArray[t].rentalWorklogList[i].startDate),endDate:this.utilsService.getFrontendDateFormat(this.myFormData.itemListArray[t].rentalWorklogList[i].endDate)}),e.controls.quantity.disable()}}else e.patchValue({quantity:"",startDate:"",endDate:""}),e.controls.quantity.enable();this.branchUtilsService.txnCalcItemsTotal(this.myForm)}getRentalWorkLogList(t,e,i,r){this.commonDataService.getRentalWorkLogList(t,e,i).subscribe(t=>{"SUCCESS"===t.status?this.myForm.controls.itemListArray.at(r).patchValue({rentalWorklogId:null,rentalWorklogList:t.results}):this.utilsService.showFailureMsg(t)})}getAutoSuggestionList(t,e){this.commonDataService.getAutoSuggestionList(t).subscribe(i=>{"SUCCESS"===i.status?(this.utilsService.ifNotPushToList(i.results,e),"getRentalTransStatusList"===t?(this.txnKeys.inputEditId||(i.results=i.results.filter(t=>"1"===t.id)),this.txnKeys.inputEditId&&("rentalOrder"!==this.txnKeys.inputScreenName&&"rentalDelivery"!==this.txnKeys.inputScreenName&&"rentalReturn"!==this.txnKeys.inputScreenName&&"rentalInvoice"!==this.txnKeys.inputScreenName||(i.results=i.results.filter(t=>"2"!==t.id))),this.rentalStatusList=i.results):"getCurrencyList"===t?this.currencyList=i.results:"getUomList"===t?this.uomList=i.results:"getHsnList"===t?this.hsnList=i.results.map(t=>(t.hsnLabel=t.chapter+"."+t.heading+"."+t.subHeading,t)):"getTaxList"===t?this.taxList=i.results:"getPaymentTermsList"===t?this.paymentTermsList=i.results:"getPaymentMethodsList"===t?this.paymentMethodsList=i.results:"getTermsandConditionsList"===t&&(this.termsAndConditionList=i.results)):this.utilsService.showFailureMsg(i)})}getDistributionList(t){this.commonDataService.getDistributionList(!0).subscribe(e=>{"SUCCESS"===e.status?(this.utilsService.ifNotPushToList(e.results,t),this.distributionList=e.results):this.utilsService.showFailureMsg(e)})}getItemList(t,e,i,r){return e?(this.itemList=i.map(t=>(t.searchText=t.rentalItemName+" - "+t.rentalItemCode,t)),!1):!t.term||t.term.length<3?(this.itemList=[],!1):void this.commonDataService.getRentalItemList(t.term).subscribe(t=>{"SUCCESS"===t.status?this.itemList=t.results.map(t=>(t.searchText=t.rentalItemName+" - "+t.rentalItemCode,t)):this.utilsService.showFailureMsg(t)})}getEmployeeList(t){this.commonDataService.getEmployeeList(1).subscribe(e=>{"SUCCESS"===e.status?(this.utilsService.ifNotPushToList(e.results,t),this.employeeList=e.results.map(t=>(t.searchText=t.employeeName+" - "+t.empCode,t))):this.utilsService.showFailureMsg(e)})}getCustomerBpList(t,e){this.commonDataService.getBusinessPartnerList([1,3]).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.ifNotPushToList(t.results,e),this.businessPartnerList=t.results.map(t=>(t.searchText=t.partnerName+" - "+t.partnerCode,t))):this.utilsService.showFailureMsg(t)})}getCustomerBpContactList(t,e){this.bpContactList=[],this.branchUtilsService.getBpContactListAndSet(this.myForm,"customerBpContactsId","customerBpId",t,e).subscribe(t=>{this.bpContactList=t})}getCustomerShipToAddressList(t,e){this.customerShipToAddressList=[],this.branchUtilsService.txnGetBpAddressListAndSet("1",this.myForm,"customerShipToBpAddressId","customerShipToAddress","customerBpId",t,e).subscribe(t=>{this.customerShipToAddressList=t})}getCustomerBillToAddressList(t,e){this.customerBillToAddressList=[],this.branchUtilsService.txnGetBpAddressListAndSet("3",this.myForm,"customerBillToBpAddressId","customerBillToAddress","customerBpId",t,e).subscribe(t=>{this.customerBillToAddressList=t})}showTxnOptionsSidebar(t){this.branchUtilsService.spiTxnOptions.next(!1===t?{show:!1}:{show:!0,spiName:this.branchUtilsService.spiTxnId.rental,screenName:this.txnKeys.inputScreenName,editId:this.txnKeys.inputEditId,bpId:this.myFormData.customerBpId,status:this.myFormData.status})}downloadPdf(){this.branchUtilsService.spiTxnOptionsDownloadPdf.next({spiName:this.branchUtilsService.spiTxnId.rental,screenName:this.txnKeys.inputScreenName,id:this.txnKeys.inputEditId})}onKeydownHandler(t){t.ctrlKey&&"s"===t.key.toLowerCase()&&(this.txnKeys.inputEditId&&"1"===this.txnKeys.editStatusId||!this.txnKeys.inputEditId)&&(this.confirmSaveUpdate(),t.preventDefault()),this.txnKeys.inputEditId&&t.ctrlKey&&-1!=="p".indexOf(t.key)&&(this.downloadPdf(),t.preventDefault())}ngOnDestroy(){this.reInitializeGlobalVariables(),this.itemListColumnOrderChangesSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.g),s.Pb(n.f),s.Pb(n.a),s.Pb(o.l),s.Pb(m.a),s.Pb(a.e),s.Pb(r.a),s.Pb(l),s.Pb(B.a),s.Pb(s.h),s.Pb(K.b))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-rental-txn-add"]],viewQuery:function(t,e){var i;1&t&&(s.Pc(q.a,!0),s.Pc(P.a,!0),s.Pc(_,!0),s.Pc(W,!0),s.Pc(H,!0),s.Pc(G,!0),s.Pc(z,!0),s.Pc(j,!0),s.Pc($,!0),s.Pc(Y,!0),s.Pc(Z,!0),s.Pc(X,!0),s.Pc(tt,!0),s.Pc(et,!0),s.Pc(it,!0),s.Pc(rt,!0),s.Pc(nt,!0),s.Pc(st,!0),s.Pc(ot,!0),s.Pc(at,!0),s.Pc(ct,!0),s.Pc(ut,!0),s.Pc(mt,!0),s.Pc(lt,!0),s.Pc(bt,!0),s.Pc(dt,!0),s.Pc(ht,!0),s.Pc(pt,!0),s.Pc(gt,!0),s.Pc(ft,!0),s.Pc(yt,!0),s.Pc(vt,!0),s.Pc(St,!0),s.Pc(It,!0),s.Pc(Ct,!0),s.Pc(Ut,!0),s.Pc(Lt,!0),s.Pc(Vt,!0),s.Pc(Dt,!0),s.Pc(Nt,!0),s.Pc(Ft,!0),s.Pc(Et,!0),s.Pc(Tt,!0),s.Pc(xt,!0),s.Pc(At,!0),s.Pc(Rt,!0)),2&t&&(s.zc(i=s.ec())&&(e.udfViewerComponent=i.first),s.zc(i=s.ec())&&(e.attachmentsComponent=i.first),s.zc(i=s.ec())&&(e.hActions=i.first),s.zc(i=s.ec())&&(e.hSno=i.first),s.zc(i=s.ec())&&(e.hItemName=i.first),s.zc(i=s.ec())&&(e.hGeneralDetails=i.first),s.zc(i=s.ec())&&(e.hWorkLogRef=i.first),s.zc(i=s.ec())&&(e.hQuantity=i.first),s.zc(i=s.ec())&&(e.hOpenQuantity=i.first),s.zc(i=s.ec())&&(e.hDuration=i.first),s.zc(i=s.ec())&&(e.hUOM=i.first),s.zc(i=s.ec())&&(e.hStartDate=i.first),s.zc(i=s.ec())&&(e.hEndDate=i.first),s.zc(i=s.ec())&&(e.hShipDate=i.first),s.zc(i=s.ec())&&(e.hReturnDate=i.first),s.zc(i=s.ec())&&(e.hPoExpiryDate=i.first),s.zc(i=s.ec())&&(e.hUnitPrice=i.first),s.zc(i=s.ec())&&(e.hHSN=i.first),s.zc(i=s.ec())&&(e.hDiscount=i.first),s.zc(i=s.ec())&&(e.hTaxCode=i.first),s.zc(i=s.ec())&&(e.hTax=i.first),s.zc(i=s.ec())&&(e.hTotal=i.first),s.zc(i=s.ec())&&(e.hDistRules=i.first),s.zc(i=s.ec())&&(e.hEquipmentName=i.first),s.zc(i=s.ec())&&(e.bActions=i.first),s.zc(i=s.ec())&&(e.bSno=i.first),s.zc(i=s.ec())&&(e.bItemName=i.first),s.zc(i=s.ec())&&(e.bGeneralDetails=i.first),s.zc(i=s.ec())&&(e.bWorkLogRef=i.first),s.zc(i=s.ec())&&(e.bQuantity=i.first),s.zc(i=s.ec())&&(e.bOpenQuantity=i.first),s.zc(i=s.ec())&&(e.bDuration=i.first),s.zc(i=s.ec())&&(e.bUOM=i.first),s.zc(i=s.ec())&&(e.bStartDate=i.first),s.zc(i=s.ec())&&(e.bEndDate=i.first),s.zc(i=s.ec())&&(e.bShipDate=i.first),s.zc(i=s.ec())&&(e.bReturnDate=i.first),s.zc(i=s.ec())&&(e.bPoExpiryDate=i.first),s.zc(i=s.ec())&&(e.bUnitPrice=i.first),s.zc(i=s.ec())&&(e.bHSN=i.first),s.zc(i=s.ec())&&(e.bDiscount=i.first),s.zc(i=s.ec())&&(e.bTaxCode=i.first),s.zc(i=s.ec())&&(e.bTax=i.first),s.zc(i=s.ec())&&(e.bTotal=i.first),s.zc(i=s.ec())&&(e.bDistRules=i.first),s.zc(i=s.ec())&&(e.bEquipmentName=i.first))},hostBindings:function(t,e){1&t&&s.dc("keydown",(function(t){return e.onKeydownHandler(t)}),!1,s.Bc)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-columns"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"fa","fa-plus-square"],[1,"working-container","spi-txn-add",3,"formGroup"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row"],[1,"form-group","col-sm-3"],[1,"form-label"],[1,"mandatory"],[1,"col-sm-6"],["formControlName","documentNumberingId","bindLabel","documentNumberingName","bindValue","id","placeholder","--SELECT--",3,"items","change"],["type","text","formControlName","documentNumber",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],[1,"action-control"],["formControlName","customerBpId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple","focus","change"],["ng-option-tmp",""],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["class","info-icon","container","body","tooltip","View Details",3,"click",4,"ngIf"],["formControlName","customerBpContactsId","bindLabel","contactName","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["formControlName","currencyId",1,"form-control","form-control-sm"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","referenceNumber",1,"form-control","form-control-sm"],["formControlName","postingDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["class","form-group col-sm-3",4,"ngIf"],["formControlName","documentDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],[1,"position-relative"],["formControlName","empId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["formControlName","status",1,"form-control","form-control-sm"],[1,"form-group","col-sm-6"],["formControlName","remarks","rows","2",1,"form-control","form-control-sm"],[1,"box-body","box-table"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-striped","table-bordered"],[4,"ngFor","ngForOf"],["formArrayName","itemListArray"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-sm-7","text-center"],[1,"calc-img"],[1,"col-sm-5"],[1,"table","table-striped","table-bordered","calculation"],[2,"min-width","150px"],[2,"width","100px"],[1,"text-right",2,"min-width","150px"],[1,"text-right"],["type","text","formControlName","discountPercentage",1,"form-control","form-control-sm","text-right",3,"keyup"],[1,"checkbox"],["type","checkbox","formControlName","roundingOffCheckbox",3,"ngModelChange"],[1,"checkmark"],["type","text","formControlName","rounding",1,"form-control","form-control-sm","text-right",3,"keyup"],[1,"net"],[1,"net","text-right"],["formControlName","customerShipToBpAddressId",1,"form-control","form-control-sm",3,"change"],["formControlName","customerShipToAddress",1,"form-control","form-control-sm"],["formControlName","customerBillToBpAddressId",1,"form-control","form-control-sm",3,"change"],["formControlName","customerBillToAddress",1,"form-control","form-control-sm"],["class","box",4,"ngIf"],[3,"type"],[3,"type","doSuccess"],["formControlName","termsAndConditionId",1,"form-control","form-control-sm"],[1,"btn-group","text-right"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class"," btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],["hActions",""],["hSno",""],["hItemName",""],["hGeneralDetails",""],["hQuantity",""],["hOpenQuantity",""],["hWorkLogRef",""],["hDuration",""],["hStartDate",""],["hEndDate",""],["hShipDate",""],["hReturnDate",""],["hPoExpiryDate",""],["hUOM",""],["hEquipmentName",""],["hUnitPrice",""],["hHSN",""],["hDiscount",""],["hTaxCode",""],["hTax",""],["hTotal",""],["hDistRules",""],["bActions",""],["bSno",""],["bItemName",""],["bQuantity",""],["bOpenQuantity",""],["bWorkLogRef",""],["bGeneralDetails",""],["bDuration",""],["bUOM",""],["bStartDate",""],["bEndDate",""],["bShipDate",""],["bReturnDate",""],["bPoExpiryDate",""],["bEquipmentName",""],["bUnitPrice",""],["bHSN",""],["bDiscount",""],["bTaxCode",""],["bTax",""],["bTotal",""],["bDistRules",""],[1,"fa","fa-print"],[1,"validation-error"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click"],[1,"fa","fa-plus"],[3,"click"],[1,"fa","fa-redo-alt"],["container","body","tooltip","View Details",1,"info-icon",3,"click"],[1,"fa","fa-info-circle"],[3,"value"],["formControlName","deliveryDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","dueDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","returnDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"formGroupName"],["colspan","16"],[1,"btn","btn-success","btn-sm",3,"click"],["formControlName","paymentTermsId",1,"form-control","form-control-sm",3,"change"],["formControlName","paymentMethodId",1,"form-control","form-control-sm"],["type","text","formControlName","taxCode",1,"form-control","form-control-sm"],[1,"fa","fa-save"],[1,"fa","fa-broom"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"badge","badge-danger"],[2,"min-width","80px"],[2,"min-width","30px"],[2,"min-width","200px"],[2,"min-width","100px"],["class","mandatory",4,"ngIf"],[2,"min-width","110px"],[2,"min-width","160px"],[2,"min-width","120px"],[2,"min-width","130px"],[3,"formGroup"],["placement","top","container","body","tooltip","Delete",1,"action","red",3,"click"],[1,"fa","fa-minus-circle"],["formControlName","rentalItemId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","virtualScroll","search","change"],["type","text","formControlName","quantity",1,"form-control","form-control-sm","text-right",3,"keyup"],["formControlName","rentalWorklogId","bindLabel","documentNumber","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","virtualScroll","change"],["type","text","formControlName","duration",1,"form-control","form-control-sm","text-right"],["formControlName","uomId","bindLabel","uomName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["formControlName","startDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onSelect"],["formControlName","endDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onSelect"],["formControlName","shipDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onSelect"],["formControlName","returnDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onSelect"],["formControlName","poExpiryDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onSelect"],["formControlName","rentalEquipmentId","bindLabel","equipmentName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","change"],["type","text","formControlName","unitPrice",1,"form-control","form-control-sm","text-right",3,"keyup"],["formControlName","hsnId","bindLabel","hsnLabel","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["formControlName","taxId","bindLabel","taxCode","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","change"],[1,"text-right",3,"formGroupName"],["formControlName","distributionRulesId","bindLabel","distributionName","bindValue","id","placeholder","--SELECT--","appendTo","body","groupBy","dimensionDescription",3,"items","multiple","add"]],template:function(t,e){1&t&&s.Jc(0,Yi,308,68,"ng-container",0),2&t&&s.oc("ngIf",e.screenAcl.view)},directives:[p.m,a.n,a.i,J.a,a.m,a.g,a.b,J.c,a.t,a.p,a.v,p.l,g.a,p.n,a.d,a.a,q.a,P.a,Q.a,r.g,v.a,p.q,a.j],styles:[""]}),t})();const Xi=["dataTable"];function tr(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",24),s.dc("click",(function(){s.Dc(t);const e=s.hc(2);return e.inspectionTxnUtilsService.downloadAsExcel(e.inputScreenName,e.listingProperties)})),s.Qb(1,"i",25),s.Vb(2,"span"),s.Lc(3,"Download as Excel"),s.Ub(),s.Ub()}}function er(t,e){if(1&t&&(s.Vb(0,"div",26),s.Vb(1,"div",27),s.Vb(2,"div",28),s.Lc(3),s.Ub(),s.Vb(4,"div",29),s.Lc(5),s.Ub(),s.Ub(),s.Ub()),2&t){const t=e.$implicit,i=s.hc(2);s.Cb(3),s.Nc(" ",t.name," "),s.Cb(1),s.oc("ngClass",i.appConstants.TXN_STATUS_COLOR_CLS[t.id]),s.Cb(1),s.Mc(t.count)}}function ir(t,e){1&t&&(s.Vb(0,"th",35),s.Lc(1," Branch Name "),s.Qb(2,"p-sortIcon",33),s.Ub()),2&t&&(s.oc("pSortableColumn","branchName"),s.Cb(2),s.oc("field","branchName"))}function rr(t,e){if(1&t){const t=s.Wb();s.Vb(0,"th"),s.Vb(1,"input",40),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(3).searchForm.branchName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(3).resetListing()})),s.Ub(),s.Ub()}if(2&t){const t=s.hc(3);s.Cb(1),s.oc("ngModel",t.searchForm.branchName)}}function nr(t,e){if(1&t&&(s.Vb(0,"option",44),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc(" ",t.name," ")}}function sr(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tr"),s.Vb(1,"th",30),s.Lc(2,"Actions"),s.Ub(),s.Jc(3,ir,3,2,"th",31),s.Vb(4,"th",32),s.Lc(5,"Doc No "),s.Qb(6,"p-sortIcon",33),s.Ub(),s.Vb(7,"th",34),s.Lc(8,"Customer Name "),s.Qb(9,"p-sortIcon",33),s.Ub(),s.Vb(10,"th",35),s.Lc(11,"Item Name "),s.Qb(12,"p-sortIcon",33),s.Ub(),s.Vb(13,"th",35),s.Lc(14,"Equipment Name "),s.Qb(15,"p-sortIcon",33),s.Ub(),s.Vb(16,"th",36),s.Lc(17,"Status "),s.Qb(18,"p-sortIcon",33),s.Ub(),s.Ub(),s.Vb(19,"tr",37),s.Vb(20,"th"),s.Vb(21,"a",38),s.dc("click",(function(){return s.Dc(t),s.hc(2).clearSearchForm()})),s.Qb(22,"i",39),s.Lc(23,"Clear"),s.Ub(),s.Ub(),s.Jc(24,rr,2,1,"th",0),s.Vb(25,"th"),s.Vb(26,"input",40),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.documentNumber=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Vb(27,"th"),s.Vb(28,"input",40),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.customerBpName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Vb(29,"th"),s.Vb(30,"input",40),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.itemName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Vb(31,"th"),s.Vb(32,"input",40),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.equipmentName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Vb(33,"th"),s.Vb(34,"select",41),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.status=e}))("change",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Vb(35,"option",42),s.Lc(36,"--SELECT--"),s.Ub(),s.Jc(37,nr,2,2,"option",43),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=s.hc(2);s.Cb(3),s.oc("ngIf",!t.storageService.get("isSingleBranchUser")),s.Cb(1),s.oc("pSortableColumn","documentNumber"),s.Cb(2),s.oc("field","documentNumber"),s.Cb(1),s.oc("pSortableColumn","customerBpName"),s.Cb(2),s.oc("field","customerBpName"),s.Cb(1),s.oc("pSortableColumn","itemName"),s.Cb(2),s.oc("field","itemName"),s.Cb(1),s.oc("pSortableColumn","equipmentName"),s.Cb(2),s.oc("field","equipmentName"),s.Cb(1),s.oc("pSortableColumn","status"),s.Cb(2),s.oc("field","status"),s.Cb(6),s.oc("ngIf",!t.storageService.get("isSingleBranchUser")),s.Cb(2),s.oc("ngModel",t.searchForm.documentNumber),s.Cb(2),s.oc("ngModel",t.searchForm.customerBpName),s.Cb(2),s.oc("ngModel",t.searchForm.itemName),s.Cb(2),s.oc("ngModel",t.searchForm.equipmentName),s.Cb(2),s.oc("ngModel",t.searchForm.status),s.Cb(3),s.oc("ngForOf",t.statusList)}}function or(t,e){if(1&t&&(s.Vb(0,"td"),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Mc(t.branchName)}}function ar(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tr"),s.Vb(1,"td"),s.Vb(2,"a",45),s.dc("click",(function(){s.Dc(t);const i=e.$implicit,r=s.hc(2);return r.inspectionTxnUtilsService.redirectToEdit(r.inputScreenName,i.id,i.isDraft)})),s.Qb(3,"i",46),s.Ub(),s.Ub(),s.Jc(4,or,2,1,"td",0),s.Vb(5,"td"),s.Lc(6),s.Ub(),s.Vb(7,"td"),s.Lc(8),s.Ub(),s.Vb(9,"td"),s.Lc(10),s.Ub(),s.Vb(11,"td"),s.Lc(12),s.Ub(),s.Vb(13,"td"),s.Vb(14,"span",47),s.Lc(15),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=e.$implicit,i=s.hc(2);s.Cb(4),s.oc("ngIf",!i.storageService.get("isSingleBranchUser")),s.Cb(2),s.Mc(t.documentNumber),s.Cb(2),s.Oc("",t.customerBpCode," - ",t.customerBpName,""),s.Cb(2),s.Oc(" ",t.rentalItemCode," - ",t.rentalItemName," "),s.Cb(2),s.Oc(" ",t.equipmentCode," - ",t.equipmentName," "),s.Cb(2),s.oc("ngClass",i.appConstants.TXN_STATUS_COLOR_CLS[t.status]),s.Cb(1),s.Mc(t.statusName)}}function cr(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"div",1),s.Vb(2,"span"),s.Lc(3),s.Ub(),s.Lc(4),s.Vb(5,"div",2),s.Jc(6,tr,4,0,"button",3),s.Vb(7,"button",4),s.dc("click",(function(){s.Dc(t);const e=s.hc();return e.inspectionTxnUtilsService.redirectToAdd(e.inputScreenName)})),s.Qb(8,"i",5),s.Vb(9,"span"),s.Lc(10),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(11,"div",6),s.Vb(12,"div",7),s.Vb(13,"div",8),s.Jc(14,er,6,3,"div",9),s.Ub(),s.Ub(),s.Vb(15,"div",8),s.Vb(16,"div",10),s.Vb(17,"label",11),s.Vb(18,"strong"),s.Lc(19,"From Date"),s.Ub(),s.Ub(),s.Vb(20,"p-calendar",12),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().searchForm.fromDate=e}))("onSelect",(function(){return s.Dc(t),s.hc().resetListing()})),s.Ub(),s.Ub(),s.Vb(21,"div",10),s.Vb(22,"label",11),s.Vb(23,"strong"),s.Lc(24,"To Date"),s.Ub(),s.Ub(),s.Vb(25,"p-calendar",13),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().searchForm.toDate=e}))("onSelect",(function(){return s.Dc(t),s.hc().resetListing()})),s.Ub(),s.Ub(),s.Vb(26,"div",14),s.Vb(27,"label",15),s.Vb(28,"input",16),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().searchForm.isDraft=e}))("change",(function(){return s.Dc(t),s.hc().resetListing()})),s.Ub(),s.Qb(29,"span",17),s.Lc(30," Show Only Drafts "),s.Ub(),s.Ub(),s.Ub(),s.Vb(31,"div",8),s.Vb(32,"div",18),s.Vb(33,"div",19),s.Vb(34,"p-table",20,21),s.dc("onLazyLoad",(function(e){return s.Dc(t),s.hc().getListing(e)})),s.Jc(36,sr,38,18,"ng-template",22),s.Jc(37,ar,16,10,"ng-template",23),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Sb()}if(2&t){const t=s.hc();s.Cb(3),s.Mc(t.branchUtilsService.txnGetTitle(t.screenAttributes.title,!0)),s.Cb(1),s.Nc("",t.branchUtilsService.txnGetTitle(t.screenAttributes.title)," - List "),s.Cb(2),s.oc("ngIf",t.screenAcl.download),s.Cb(4),s.Nc("Add ",t.screenAttributes.title,""),s.Cb(4),s.oc("ngForOf",t.analyticsData),s.Cb(6),s.oc("ngModel",t.searchForm.fromDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(5),s.oc("ngModel",t.searchForm.toDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT)("minDate",t.searchForm.fromDate),s.Cb(3),s.oc("ngModel",t.searchForm.isDraft),s.Cb(6),s.oc("value",t.listing.data)("lazy",!0)("paginator",!0)("rows",t.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",t.listing.totalRecords)}}let ur=(()=>{class t{constructor(t,e,i,r,s,o,a){this.utilsService=t,this.storageService=e,this.authGuardService=i,this.commonDataService=r,this.activatedRoute=s,this.inspectionTxnUtilsService=o,this.branchUtilsService=a,this.appConstants=n.h,this.screenAcl={},this.analyticsData=[],this.statusList=[],this.screenAttributes={},this.screenDataService={},this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}ngOnInit(){this.initializeSubscriptions()}initializeSubscriptions(){this.activatedRoute.params.subscribe(t=>this.inspectionTxnUtilsService.checkScreenNameValid(t.screenName)?(this.screenAcl=this.authGuardService.getScreenAcl(this.branchUtilsService.screenAttributes[t.screenName].documentTypeId),this.screenAcl.view?(this.reInitializeGlobalVariables(),this.inputScreenName=t.screenName,void this.transactionInitialization()):(this.utilsService.showFailureMsg(n.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1)):(this.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),this.utilsService.goBack(),!1))}reInitializeGlobalVariables(){this.inputScreenName="",this.screenAttributes={},this.screenDataService={},this.analyticsData=[],this.statusList=[],this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}transactionInitialization(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.inputScreenName],this.screenDataService=this.inspectionTxnUtilsService.getScreenDataService(this.inputScreenName),this.searchForm=this.inspectionTxnUtilsService.getFormSearchFields(this.inputScreenName),this.getAutoSuggestionList("getRentalTransStatusList"),this.getAnalyticsData(),this.dataTable&&this.resetListing()}getListing(t){const e=this.inspectionTxnUtilsService.getSearchDataFormation(this.inputScreenName,this.searchForm),i=this.utilsService.dataTableParameterFormation(t,e);this.listingProperties=i,this.screenDataService.getList(i).subscribe(t=>{"SUCCESS"===t.status?(this.listing.data=t.results.searchResults,this.listing.totalRecords=t.results.totalRecords):this.utilsService.showFailureMsg(t)})}clearSearchForm(){this.searchForm=this.inspectionTxnUtilsService.getFormSearchFields(this.inputScreenName),this.resetListing()}resetListing(){this.dataTable.reset()}getAutoSuggestionList(t){this.commonDataService.getAutoSuggestionList(t).subscribe(t=>{"SUCCESS"===t.status?this.statusList=t.results:this.utilsService.showFailureMsg(t)})}getAnalyticsData(){this.inspectionTxnUtilsService.getAnalyticsData(this.inputScreenName).subscribe(t=>{this.analyticsData=t})}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.g),s.Pb(n.f),s.Pb(n.a),s.Pb(o.l),s.Pb(r.a),s.Pb(b),s.Pb(m.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-inspection-txn-list"]],viewQuery:function(t,e){var i;1&t&&s.Pc(Xi,!0),2&t&&s.zc(i=s.ec())&&(e.dataTable=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-plus"],[1,"working-container"],[1,"analytics"],[1,"row"],["class","col-lg-2 col-md-3 col-sm-4 col-xs-12",4,"ngFor","ngForOf"],[1,"form-group","col-sm-3"],[1,"form-label"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","ngModelChange","onSelect"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","minDate","ngModelChange","onSelect"],[1,"form-group","col-sm-6","text-right"],[1,"checkbox","mt-3"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"checkmark"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-file-excel"],[1,"col-lg-2","col-md-3","col-sm-4","col-xs-12"],[1,"item"],[1,"name"],[1,"count",3,"ngClass"],[2,"width","80px"],["style","width:150px",3,"pSortableColumn",4,"ngIf"],[2,"width","100px",3,"pSortableColumn"],[3,"field"],[2,"width","200px",3,"pSortableColumn"],[2,"width","150px",3,"pSortableColumn"],[2,"width","120px",3,"pSortableColumn"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"click"],[1,"fa","fa-edit"],[1,"badge",3,"ngClass"]],template:function(t,e){1&t&&s.Jc(0,cr,38,22,"ng-container",0),2&t&&s.oc("ngIf",e.screenAcl.view)},directives:[p.m,p.l,g.a,a.m,a.o,a.a,f.c,y.b,p.k,f.b,f.a,v.a,a.b,a.t,a.p,a.v],styles:[""]}),t})();function mr(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div",16),s.Vb(1,"label",7),s.Lc(2,"Are you want to create new?"),s.Ub(),s.Vb(3,"label",17),s.Vb(4,"input",18),s.dc("change",(function(){return s.Dc(t),s.hc().onCreateTempalte()})),s.Ub(),s.Qb(5,"span",19),s.Ub(),s.Ub()}}function lr(t,e){if(1&t&&(s.Vb(0,"div",20),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.templateName," ")}}function br(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",21),s.dc("click",(function(){return s.Dc(t),s.hc().saveUpdate()})),s.Qb(1,"i",22),s.Vb(2,"span"),s.Lc(3,"Save"),s.Ub(),s.Ub()}}function dr(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",21),s.dc("click",(function(){return s.Dc(t),s.hc().saveUpdate()})),s.Qb(1,"i",22),s.Vb(2,"span"),s.Lc(3,"Update"),s.Ub(),s.Ub()}}let hr=(()=>{class t{constructor(t,e,i,r,n,s){this.utilsService=t,this.commonDataService=e,this.branchUtilsService=i,this.activeModal=r,this.formBuilder=n,this.inspectionTemplateDataService=s,this.myFormData={},this.myFormErrors={templateName:""},this.myFormValidationMsgs={templateName:{required:"Template Name is required"}}}ngOnInit(){this.initializeForm(),this.templateDetails.inputEditId&&(this.myForm.patchValue({templateName:this.templateDetails.templateName,isSave:!1}),this.myForm.controls.templateName.disable())}initializeForm(){this.myForm=this.formBuilder.group({templateName:[{value:"",disabled:!1},[a.u.required]],isSave:[!0]}),this.myForm.valueChanges.subscribe(t=>{this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs),this.myFormData=this.myForm.getRawValue()}),this.myFormData=this.myForm.getRawValue()}saveUpdate(){if(!this.myForm.valid)return this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs,!0),!1;const t=[];this.templateDetails.templateList.forEach(e=>{const i=[];e.forEach(t=>{const e={name:t.name,status:"Ok",remarks:""};t.header&&(e.header=t.header),i.push(e)}),t.push(i)});const e={templateName:this.myFormData.templateName,templateDetails:t};let i;this.myFormData.isSave?i="save":(i="update",e.id=this.templateDetails.inputEditId),this.inspectionTemplateDataService[i](e).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.activeModal.hide()):this.utilsService.showFailureMsg(t)})}onCreateTempalte(){this.myFormData.isSave?(this.myForm.controls.templateName.enable(),this.myForm.patchValue({templateName:""})):(this.myForm.controls.templateName.disable(),this.myForm.patchValue({templateName:this.templateDetails.templateName}))}closePopup(){this.activeModal.hide()}clearForm(){this.initializeForm()}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.g),s.Pb(o.l),s.Pb(m.a),s.Pb(K.a),s.Pb(a.e),s.Pb(o.y))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-inspection-template-popup"]],inputs:{templateDetails:"templateDetails"},decls:24,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],[1,"close",3,"click"],[1,"modal-body"],[1,"row",3,"formGroup"],["class","form-group col-sm-12",4,"ngIf"],[1,"form-group","col-sm-6"],[1,"form-label"],[1,"mandatory"],["type","text","formControlName","templateName",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],[1,"modal-footer"],[1,"btn-group","text-right"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-times"],[1,"form-group","col-sm-12"],[1,"checkbox"],["type","checkbox","formControlName","isSave",3,"change"],[1,"checkmark"],[1,"validation-error"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save"]],template:function(t,e){1&t&&(s.Vb(0,"div",0),s.Vb(1,"h5",1),s.Lc(2,"Add Template"),s.Ub(),s.Vb(3,"button",2),s.dc("click",(function(){return e.activeModal.hide()})),s.Vb(4,"span"),s.Lc(5,"\xd7"),s.Ub(),s.Ub(),s.Ub(),s.Vb(6,"div",3),s.Vb(7,"div",4),s.Jc(8,mr,6,0,"div",5),s.Vb(9,"div",6),s.Vb(10,"label",7),s.Lc(11,"Template Name"),s.Vb(12,"span",8),s.Lc(13,"*"),s.Ub(),s.Ub(),s.Qb(14,"input",9),s.Jc(15,lr,2,1,"div",10),s.Ub(),s.Ub(),s.Ub(),s.Vb(16,"div",11),s.Vb(17,"div",12),s.Jc(18,br,4,0,"button",13),s.Jc(19,dr,4,0,"button",13),s.Vb(20,"button",14),s.dc("click",(function(){return e.activeModal.hide()})),s.Qb(21,"i",15),s.Vb(22,"span"),s.Lc(23,"Cancel"),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&t&&(s.Cb(7),s.oc("formGroup",e.myForm),s.Cb(1),s.oc("ngIf",e.templateDetails.inputEditId),s.Cb(7),s.oc("ngIf",e.myFormErrors.templateName),s.Cb(3),s.oc("ngIf",e.myFormData.isSave),s.Cb(1),s.oc("ngIf",!e.myFormData.isSave))},directives:[a.n,a.i,p.m,a.b,a.m,a.g,a.a],styles:[""]}),t})();function pr(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"td"),s.Lc(2),s.Ub(),s.Vb(3,"td"),s.Lc(4),s.Ub(),s.Vb(5,"td"),s.Lc(6),s.Ub(),s.Vb(7,"td"),s.Vb(8,"div",14),s.Vb(9,"label",15),s.Vb(10,"input",16),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).itemIndex=e})),s.Ub(),s.Qb(11,"span",17),s.Ub(),s.Ub(),s.Ub(),s.Sb()}if(2&t){const t=s.hc(),e=t.$implicit,i=t.index,r=s.hc();s.Cb(2),s.Oc("",e.rentalItemInfo[0].rentalItemCode," - ",e.rentalItemInfo[0].rentalItemName," "),s.Cb(2),s.Oc("",null==e.rentalEquipmentInfo[0]?null:e.rentalEquipmentInfo[0].equipmentCode," - ",null==e.rentalEquipmentInfo[0]?null:e.rentalEquipmentInfo[0].equipmentName," "),s.Cb(2),s.Mc(e.quantity),s.Cb(4),s.oc("ngModel",r.itemIndex)("value",i)}}function gr(t,e){if(1&t&&(s.Vb(0,"tr"),s.Jc(1,pr,12,7,"ng-container",8),s.Ub()),2&t){const t=e.$implicit,i=s.hc();s.Cb(1),s.oc("ngIf","worklog"===i.inputScreenName||"0"===t.isUtilized)}}function fr(t,e){1&t&&(s.Vb(0,"tfoot"),s.Vb(1,"tr"),s.Vb(2,"td",18),s.Lc(3," There is no equipment to select. "),s.Ub(),s.Ub(),s.Ub())}function yr(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",19),s.dc("click",(function(){return s.Dc(t),s.hc().next()})),s.Qb(1,"i",20),s.Vb(2,"span"),s.Lc(3,"Ok"),s.Ub(),s.Ub()}}const vr=function(){return{"max-height.px":300}};let Sr=(()=>{class t{constructor(t,e,i){this.branchUtilsService=t,this.utilsService=e,this.activeModal=i,this.isEquipmentUtilized=!1}ngOnInit(){u.filter(this.list.itemListArray,{isUtilized:"1"}).length===this.list.itemListArray.length&&"worklog"!==this.inputScreenName&&(this.isEquipmentUtilized=!0)}next(){const t=this.formatItemdata();this.branchUtilsService.inspectionItemData.next(t),this.activeModal.hide()}formatItemdata(){return{customerBpId:this.list.customerBpId,customerBpContactsId:this.list.customerBpContactsId,referenceNumber:this.list.referenceNumber,empId:this.list.empId,status:this.list.status,remarks:this.list.remarks,currencyId:this.list.currencyId,id:this.list.itemListArray[this.itemIndex].id,rentalItemId:this.list.itemListArray[this.itemIndex].rentalItemId,rentalEquipmentId:this.list.itemListArray[this.itemIndex].rentalEquipmentId,distributionRulesId:this.list.itemListArray[this.itemIndex].distributionRulesId,startDate:this.list.itemListArray[this.itemIndex].startDate,endDate:this.list.itemListArray[this.itemIndex].endDate,inspectionOverallStatus:"",inspectionTemplateId:"",itemListArray:[{copyFromId:this.list.itemListArray[this.itemIndex].copyFromId,copyFromType:this.list.itemListArray[this.itemIndex].copyFromType}],rentalItemInfo:this.list.itemListArray[this.itemIndex].rentalItemInfo,rentalEquipmentInfo:this.list.itemListArray[this.itemIndex].rentalEquipmentInfo,distributionRulesInfo:this.list.itemListArray[this.itemIndex].distributionRulesInfo,customerBpInfo:this.list.customerBpInfo,empInfo:this.list.empInfo,currencyInfo:this.list.currencyInfo,statusInfo:this.list.statusInfo,termsandConditionsInfo:this.list.termsandConditionsInfo,customerBpContactsInfo:this.list.customerBpContactsInfo}}cancel(){this.utilsService.goBack(),this.activeModal.hide()}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(m.a),s.Pb(n.g),s.Pb(K.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-inspection-worklog-select-item-popup"]],inputs:{list:"list",inputScreenName:"inputScreenName"},decls:25,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-striped","table-bordered"],[2,"width","200px"],[2,"width","100px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"modal-footer"],[1,"btn-group","text-right"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-times"],[1,"form-group"],[1,"radiobox"],["type","radio",3,"ngModel","value","ngModelChange"],[1,"checkmark"],["colspan","4"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save"]],template:function(t,e){1&t&&(s.Vb(0,"div",0),s.Vb(1,"h5",1),s.Lc(2,"Select Item"),s.Ub(),s.Ub(),s.Vb(3,"div",2),s.Vb(4,"div",3),s.Vb(5,"table",4),s.Vb(6,"thead"),s.Vb(7,"tr"),s.Vb(8,"th",5),s.Lc(9,"Rental Item Name"),s.Ub(),s.Vb(10,"th",5),s.Lc(11,"Rental Equipment Name"),s.Ub(),s.Vb(12,"th",6),s.Lc(13,"Quantity"),s.Ub(),s.Qb(14,"th"),s.Ub(),s.Ub(),s.Vb(15,"tbody"),s.Jc(16,gr,2,1,"tr",7),s.Ub(),s.Jc(17,fr,4,0,"tfoot",8),s.Ub(),s.Ub(),s.Ub(),s.Vb(18,"div",9),s.Vb(19,"div",10),s.Jc(20,yr,4,0,"button",11),s.Vb(21,"button",12),s.dc("click",(function(){return e.cancel()})),s.Qb(22,"i",13),s.Vb(23,"span"),s.Lc(24,"Cancel"),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&t&&(s.Cb(4),s.oc("ngStyle",s.rc(4,vr)),s.Cb(12),s.oc("ngForOf",e.list.itemListArray),s.Cb(1),s.oc("ngIf",e.isEquipmentUtilized),s.Cb(3),s.oc("ngIf",!e.isEquipmentUtilized))},directives:[p.n,p.l,p.m,a.r,a.b,a.m,a.o],styles:[""]}),t})();function Ir(t,e){1&t&&(s.Tb(0),s.Lc(1,"Add"),s.Sb())}function Cr(t,e){1&t&&(s.Tb(0),s.Lc(1,"Edit"),s.Sb())}function Ur(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",6),s.dc("click",(function(){return s.Dc(t),s.hc(2).downloadPdf()})),s.Qb(1,"i",56),s.Vb(2,"span"),s.Lc(3,"Print"),s.Ub(),s.Ub()}}function Lr(t,e){if(1&t&&(s.Vb(0,"div",57),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.documentNumberingId?t.myFormErrors.documentNumberingId:t.myFormErrors.documentNumber," ")}}function Vr(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.rentalItemName,"\xa0"),s.Cb(2),s.Nc("(",t.rentalItemCode,")")}}function Dr(t,e){if(1&t&&(s.Vb(0,"div",57),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.rentalItemId," ")}}function Nr(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.partnerName,"\xa0"),s.Cb(2),s.Nc("(",t.partnerCode,")")}}function Fr(t,e){if(1&t){const t=s.Wb();s.Vb(0,"a",58),s.dc("click",(function(){return s.Dc(t),s.hc(2).bizRefreshFlag=!0})),s.Qb(1,"i",59),s.Ub()}}function Er(t,e){if(1&t){const t=s.Wb();s.Vb(0,"a",60),s.dc("click",(function(){s.Dc(t);const e=s.hc(2);return e.getCustomerBpList(),e.bizRefreshFlag=!1})),s.Qb(1,"i",61),s.Ub()}}function Tr(t,e){if(1&t){const t=s.Wb();s.Vb(0,"span",62),s.dc("click",(function(){s.Dc(t);const e=s.hc(2);return e.popupExternalService.showDetailPopup("biz-partner",e.myFormData.customerBpId)})),s.Qb(1,"i",63),s.Ub()}}function xr(t,e){if(1&t&&(s.Vb(0,"div",57),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.customerBpId," ")}}function Ar(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Ub(),s.Vb(2,"small"),s.Lc(3),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Mc(t.contactName),s.Cb(2),s.Oc("",t.contactTypeName," / ",t.contactNumber,"")}}function Rr(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.employeeName,"\xa0"),s.Cb(2),s.Nc("(",t.empCode,")")}}function Mr(t,e){if(1&t&&(s.Vb(0,"div",57),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.empId," ")}}function kr(t,e){if(1&t&&(s.Vb(0,"option",64),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Mc(t.name)}}function wr(t,e){if(1&t&&(s.Vb(0,"div",57),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.status," ")}}function Or(t,e){1&t&&(s.Vb(0,"span",16),s.Lc(1,"*"),s.Ub())}function qr(t,e){if(1&t&&(s.Vb(0,"option",64),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Mc(t.templateName)}}const Pr=function(){return{standalone:!0}};function Br(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"td"),s.Vb(2,"a",65),s.dc("click",(function(){s.Dc(t);const e=s.hc(2).index;return s.hc(2).showAddTaskPopup("body",e)})),s.Qb(3,"i",59),s.Ub(),s.Vb(4,"a",66),s.dc("click",(function(){s.Dc(t);const e=s.hc(2).index;return s.hc(2).deleteTemplateHeader(e)})),s.Qb(5,"i",67),s.Ub(),s.Ub(),s.Vb(6,"td"),s.Lc(7),s.Ub(),s.Vb(8,"td"),s.Vb(9,"input",68),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().$implicit.name=e})),s.Ub(),s.Ub(),s.Vb(10,"td"),s.Vb(11,"select",68),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().$implicit.status=e})),s.Vb(12,"option"),s.Lc(13,"Ok"),s.Ub(),s.Vb(14,"option"),s.Lc(15,"Conditional Approved"),s.Ub(),s.Vb(16,"option"),s.Lc(17,"Not Ok"),s.Ub(),s.Ub(),s.Ub(),s.Vb(18,"td"),s.Vb(19,"input",68),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().$implicit.remarks=e})),s.Ub(),s.Ub(),s.Sb()}if(2&t){const t=s.hc().$implicit,e=s.hc().index;s.Cb(7),s.Mc(e+1),s.Cb(2),s.oc("ngModel",t.name)("ngModelOptions",s.rc(7,Pr)),s.Cb(2),s.oc("ngModel",t.status)("ngModelOptions",s.rc(8,Pr)),s.Cb(8),s.oc("ngModel",t.remarks)("ngModelOptions",s.rc(9,Pr))}}function Kr(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Qb(1,"td"),s.Vb(2,"td"),s.Vb(3,"a",66),s.dc("click",(function(){s.Dc(t);const e=s.hc().index,i=s.hc().index;return s.hc(2).deleteTemplateBody(i,e)})),s.Qb(4,"i",67),s.Ub(),s.Ub(),s.Vb(5,"td"),s.Vb(6,"input",68),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().$implicit.name=e})),s.Ub(),s.Ub(),s.Vb(7,"td"),s.Vb(8,"select",68),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().$implicit.status=e})),s.Vb(9,"option"),s.Lc(10,"Ok"),s.Ub(),s.Vb(11,"option"),s.Lc(12,"Conditional Approved"),s.Ub(),s.Vb(13,"option"),s.Lc(14,"Not Ok"),s.Ub(),s.Ub(),s.Ub(),s.Vb(15,"td"),s.Vb(16,"input",68),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().$implicit.remarks=e})),s.Ub(),s.Ub(),s.Sb()}if(2&t){const t=s.hc().$implicit;s.Cb(6),s.oc("ngModel",t.name)("ngModelOptions",s.rc(6,Pr)),s.Cb(2),s.oc("ngModel",t.status)("ngModelOptions",s.rc(7,Pr)),s.Cb(8),s.oc("ngModel",t.remarks)("ngModelOptions",s.rc(8,Pr))}}function Jr(t,e){if(1&t&&(s.Vb(0,"tr"),s.Jc(1,Br,20,10,"ng-container",0),s.Jc(2,Kr,17,9,"ng-container",0),s.Ub()),2&t){const t=e.$implicit;s.Cb(1),s.oc("ngIf",t.header),s.Cb(1),s.oc("ngIf",!t.header)}}function Qr(t,e){if(1&t&&(s.Tb(0),s.Jc(1,Jr,3,2,"tr",49),s.Sb()),2&t){const t=e.$implicit;s.Cb(1),s.oc("ngForOf",t)}}function _r(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tfoot"),s.Vb(1,"tr"),s.Vb(2,"td",69),s.Vb(3,"div",70),s.Vb(4,"button",71),s.dc("click",(function(){return s.Dc(t),s.hc(2).showAddTaskPopup("header")})),s.Qb(5,"i",59),s.Vb(6,"span"),s.Lc(7,"Add Task"),s.Ub(),s.Ub(),s.Vb(8,"button",6),s.dc("click",(function(){return s.Dc(t),s.hc(2).showAddTemplatePopup()})),s.Qb(9,"i",72),s.Vb(10,"span"),s.Lc(11,"Save Template"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()}}function Wr(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",6),s.dc("click",(function(){return s.Dc(t),s.hc(2).saveUpdate()})),s.Qb(1,"i",72),s.Vb(2,"span"),s.Lc(3,"Save"),s.Ub(),s.Ub()}}function Hr(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",6),s.dc("click",(function(){return s.Dc(t),s.hc(2).addUpdateDraft()})),s.Qb(1,"i",72),s.Vb(2,"span"),s.Lc(3,"Save as Draft"),s.Ub(),s.Ub()}}function Gr(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",3),s.dc("click",(function(){return s.Dc(t),s.hc(2).clearForm()})),s.Qb(1,"i",73),s.Vb(2,"span"),s.Lc(3,"Clear"),s.Ub(),s.Ub()}}function zr(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",6),s.dc("click",(function(){return s.Dc(t),s.hc(2).saveUpdate()})),s.Qb(1,"i",61),s.Vb(2,"span"),s.Lc(3,"Update"),s.Ub(),s.Ub()}}function jr(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",3),s.dc("click",(function(){s.Dc(t);const e=s.hc(2);return e.inspectionTxnUtilsService.redirectToList(e.txnKeys.inputScreenName)})),s.Qb(1,"i",74),s.Vb(2,"span"),s.Lc(3,"Cancel"),s.Ub(),s.Ub()}}function $r(t,e){1&t&&(s.Vb(0,"div",77),s.Vb(1,"span",78),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," You are unauthorized to "),s.Vb(4,"strong"),s.Lc(5,"update"),s.Ub(),s.Lc(6," this transaction! "),s.Ub())}function Yr(t,e){1&t&&(s.Vb(0,"div",77),s.Vb(1,"span",78),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," Cannot update "),s.Vb(4,"strong"),s.Lc(5,"Cancelled"),s.Ub(),s.Lc(6," / "),s.Vb(7,"strong"),s.Lc(8,"Closed"),s.Ub(),s.Lc(9," transactions! "),s.Ub())}function Zr(t,e){if(1&t&&(s.Vb(0,"div",75),s.Vb(1,"div"),s.Vb(2,"strong"),s.Lc(3,"Created By:"),s.Ub(),s.Lc(4),s.Ub(),s.Jc(5,$r,7,0,"div",76),s.Jc(6,Yr,10,0,"div",76),s.Ub()),2&t){const t=s.hc(2);s.Cb(4),s.Nc(" ",t.txnKeys.editCreatedName,""),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"updateAclNote")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"updateNote"))}}function Xr(t,e){1&t&&(s.Vb(0,"div",75),s.Vb(1,"span",78),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," You are unauthorized to "),s.Vb(4,"strong"),s.Lc(5,"add"),s.Ub(),s.Lc(6," this transaction!. "),s.Ub())}const tn=function(){return{"max-height.px":300}};function en(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"div",1),s.Vb(2,"span"),s.Lc(3),s.Ub(),s.Lc(4),s.Jc(5,Ir,2,0,"ng-container",0),s.Jc(6,Cr,2,0,"ng-container",0),s.Vb(7,"div",2),s.Vb(8,"button",3),s.dc("click",(function(){return s.Dc(t),s.hc().utilsService.goBack()})),s.Qb(9,"i",4),s.Vb(10,"span"),s.Lc(11,"Back"),s.Ub(),s.Ub(),s.Jc(12,Ur,4,0,"button",5),s.Vb(13,"button",6),s.dc("click",(function(){return s.Dc(t),s.hc().showTxnOptionsSidebar()})),s.Qb(14,"i",7),s.Vb(15,"span"),s.Lc(16,"More"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(17,"div",8),s.Vb(18,"div",9),s.Vb(19,"div",10),s.Qb(20,"i",11),s.Lc(21,"Basic Info "),s.Ub(),s.Vb(22,"div",12),s.Vb(23,"div",13),s.Vb(24,"div",14),s.Vb(25,"label",15),s.Lc(26,"Doc No"),s.Vb(27,"span",16),s.Lc(28,"*"),s.Ub(),s.Ub(),s.Vb(29,"div",13),s.Vb(30,"div",17),s.Vb(31,"ng-select",18),s.dc("change",(function(){s.Dc(t);const e=s.hc();return e.branchUtilsService.onDocumentNumberingChange(e.documentNumberingList,e.myForm)})),s.Ub(),s.Ub(),s.Vb(32,"div",17),s.Qb(33,"input",19),s.Ub(),s.Ub(),s.Jc(34,Lr,2,1,"div",20),s.Ub(),s.Vb(35,"div",14),s.Vb(36,"label",15),s.Lc(37,"Item Name"),s.Vb(38,"span",16),s.Lc(39,"*"),s.Ub(),s.Ub(),s.Vb(40,"ng-select",21),s.dc("search",(function(e){return s.Dc(t),s.hc().onItemSearch(e)}))("change",(function(){return s.Dc(t),s.hc().onItemChange()})),s.Jc(41,Vr,4,2,"ng-template",22),s.Ub(),s.Jc(42,Dr,2,1,"div",20),s.Ub(),s.Vb(43,"div",14),s.Vb(44,"label",15),s.Lc(45,"Equipment card"),s.Vb(46,"span",16),s.Lc(47,"*"),s.Ub(),s.Ub(),s.Qb(48,"ng-select",23),s.Ub(),s.Vb(49,"div",14),s.Vb(50,"label",15),s.Lc(51,"Business Partner Name"),s.Vb(52,"span",16),s.Lc(53,"*"),s.Ub(),s.Ub(),s.Vb(54,"div",24),s.Vb(55,"ng-select",25),s.dc("focus",(function(){return s.Dc(t),s.hc().onCustomerNameChange()}))("change",(function(){return s.Dc(t),s.hc().getCustomerBpContactList()})),s.Jc(56,Nr,4,2,"ng-template",22),s.Ub(),s.Vb(57,"span"),s.Jc(58,Fr,2,0,"a",26),s.Jc(59,Er,2,0,"a",27),s.Ub(),s.Jc(60,Tr,2,0,"span",28),s.Ub(),s.Jc(61,xr,2,1,"div",20),s.Ub(),s.Vb(62,"div",14),s.Vb(63,"label",15),s.Lc(64,"Contact Person"),s.Ub(),s.Vb(65,"ng-select",29),s.Jc(66,Ar,4,3,"ng-template",22),s.Ub(),s.Ub(),s.Vb(67,"div",14),s.Vb(68,"label",15),s.Lc(69,"Reference No"),s.Ub(),s.Qb(70,"input",30),s.Ub(),s.Vb(71,"div",14),s.Vb(72,"label",15),s.Lc(73,"Employee"),s.Ub(),s.Vb(74,"div",31),s.Vb(75,"ng-select",32),s.Jc(76,Rr,4,2,"ng-template",22),s.Ub(),s.Ub(),s.Jc(77,Mr,2,1,"div",20),s.Ub(),s.Vb(78,"div",14),s.Vb(79,"label",15),s.Lc(80,"Status"),s.Vb(81,"span",16),s.Lc(82,"*"),s.Ub(),s.Ub(),s.Vb(83,"select",33),s.Jc(84,kr,2,2,"option",34),s.Ub(),s.Jc(85,wr,2,1,"div",20),s.Ub(),s.Vb(86,"div",35),s.Vb(87,"label",15),s.Lc(88,"Remarks"),s.Ub(),s.Qb(89,"textarea",36),s.Ub(),s.Vb(90,"div",14),s.Vb(91,"label",15),s.Lc(92,"Distribution Rules"),s.Jc(93,Or,2,0,"span",37),s.Ub(),s.Vb(94,"ng-select",38),s.dc("add",(function(){return s.Dc(t),s.hc().onDistRuleAdd()})),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(95,"div",9),s.Vb(96,"div",10),s.Qb(97,"i",11),s.Lc(98,"Content Info "),s.Ub(),s.Vb(99,"div",39),s.Vb(100,"div",13),s.Vb(101,"div",14),s.Vb(102,"label",15),s.Lc(103,"Assign Inspection Template"),s.Ub(),s.Vb(104,"select",40),s.dc("change",(function(){return s.Dc(t),s.hc().onTemplateChange()})),s.Vb(105,"option",41),s.Lc(106,"--SELECT--"),s.Ub(),s.Jc(107,qr,2,2,"option",34),s.Ub(),s.Ub(),s.Ub(),s.Vb(108,"div",42),s.Vb(109,"table",43),s.Vb(110,"thead"),s.Vb(111,"tr"),s.Vb(112,"th",44),s.Lc(113,"Action"),s.Ub(),s.Vb(114,"th",45),s.Lc(115,"#"),s.Ub(),s.Vb(116,"th",46),s.Lc(117,"Inspection Details"),s.Vb(118,"span",16),s.Lc(119,"*"),s.Ub(),s.Ub(),s.Vb(120,"th",47),s.Lc(121,"Inspection Status"),s.Vb(122,"span",16),s.Lc(123,"*"),s.Ub(),s.Ub(),s.Vb(124,"th",48),s.Lc(125,"Inspection Remarks"),s.Ub(),s.Ub(),s.Ub(),s.Vb(126,"tbody"),s.Jc(127,Qr,2,1,"ng-container",49),s.Ub(),s.Jc(128,_r,12,0,"tfoot",0),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Qb(129,"app-udf-viewer",50),s.Vb(130,"app-attachments",51),s.dc("doSuccess",(function(){s.Dc(t);const e=s.hc();return e.inspectionTxnUtilsService.redirectToList(e.txnKeys.inputScreenName)})),s.Ub(),s.Vb(131,"div",52),s.Jc(132,Wr,4,0,"button",5),s.Jc(133,Hr,4,0,"button",5),s.Jc(134,Gr,4,0,"button",53),s.Jc(135,zr,4,0,"button",5),s.Jc(136,jr,4,0,"button",54),s.Ub(),s.Jc(137,Zr,7,3,"div",55),s.Jc(138,Xr,7,0,"div",55),s.Ub(),s.Qb(139,"app-spi-txn-options"),s.Sb()}if(2&t){const t=s.hc();s.Cb(3),s.Mc(t.branchUtilsService.txnGetTitle(t.screenAttributes.title,!0)),s.Cb(1),s.Nc("",t.branchUtilsService.txnGetTitle(t.screenAttributes.title)," - "),s.Cb(1),s.oc("ngIf",!t.txnKeys.inputEditId),s.Cb(1),s.oc("ngIf",t.txnKeys.inputEditId),s.Cb(6),s.oc("ngIf",t.txnKeys.inputEditId),s.Cb(5),s.oc("formGroup",t.myForm),s.Cb(14),s.oc("items",t.documentNumberingList),s.Cb(3),s.oc("ngIf",t.myFormErrors.documentNumberingId||t.myFormErrors.documentNumber),s.Cb(6),s.oc("items",t.itemList)("multiple",!1)("virtualScroll",!0),s.Cb(2),s.oc("ngIf",t.myFormErrors.rentalItemId),s.Cb(6),s.oc("items",t.myFormData.equipmentList)("multiple",!1),s.Cb(7),s.oc("items",t.businessPartnerList)("multiple",!1),s.Cb(3),s.oc("ngIf",!t.bizRefreshFlag),s.Cb(1),s.oc("ngIf",t.bizRefreshFlag),s.Cb(1),s.oc("ngIf",t.myFormData.customerBpId),s.Cb(1),s.oc("ngIf",t.myFormErrors.customerBpId),s.Cb(4),s.oc("items",t.bpContactList)("multiple",!1),s.Cb(10),s.oc("items",t.employeeList)("multiple",!1),s.Cb(2),s.oc("ngIf",t.myFormErrors.empId),s.Cb(7),s.oc("ngForOf",t.rentalStatusList),s.Cb(1),s.oc("ngIf",t.myFormErrors.status),s.Cb(8),s.oc("ngIf",t.storageService.get("distRulesMode")),s.Cb(1),s.oc("items",t.distributionList)("multiple",!0),s.Cb(13),s.oc("ngForOf",t.inspectionTemplateList),s.Cb(1),s.oc("ngStyle",s.rc(43,tn)),s.Cb(19),s.oc("ngForOf",t.branchUtilsService.inspectionListArray),s.Cb(1),s.oc("ngIf","inspectionOut"===t.txnKeys.inputScreenName||"inspectionIn"===t.txnKeys.inputScreenName&&t.txnKeys.inputCopyIds),s.Cb(1),s.oc("type",t.screenAttributes.backendKey),s.Cb(1),s.oc("type",t.screenAttributes.backendKey),s.Cb(2),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"save")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"saveDraft")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"clear")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"update")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"cancel")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"editMsgContainer")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"addAclNote"))}}let rn=(()=>{class t{constructor(t,e,i,r,s,o,a,c,u,m,l){this.utilsService=t,this.storageService=e,this.authGuardService=i,this.commonDataService=r,this.branchUtilsService=s,this.formBuilder=o,this.activatedRoute=a,this.inspectionTxnUtilsService=c,this.popupExternalService=u,this.changeDetectorRef=m,this.modalService=l,this.appConstants=n.h,this.screenAcl={},this.txnKeys={inputScreenName:"",inputEditId:"",inputDraftId:"",inputCopyIds:"",inputCopyScreenName:"",inputDuplicateId:"",editStatusId:"",editCreatedName:""},this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.documentNumberingList=[],this.rentalStatusList=[],this.currencyList=[],this.paymentTermsList=[],this.paymentMethodsList=[],this.taxList=[],this.uomList=[],this.hsnList=[],this.itemList=[],this.distributionList=[],this.termsAndConditionList=[],this.businessPartnerList=[],this.bpContactList=[],this.employeeList=[],this.customerShipToAddressList=[],this.customerBillToAddressList=[],this.bizRefreshFlag=!1,this.workLogRefList=[],this.inspectionTemplateList=[],this.myFormData={},this.myFormErrors={},this.myFormValidationMsgs={}}ngOnInit(){this.initializeSubscriptions()}ngAfterViewInit(){this.attachmentsComponent&&this.udfViewerComponent&&(this.attachmentsComponent.loadAttachments(this.txnKeys.inputEditId||this.txnKeys.inputDraftId),this.udfViewerComponent.getFields(this.txnKeys.inputEditId||this.txnKeys.inputDuplicateId||this.txnKeys.inputDraftId),this.changeDetectorRef.detectChanges())}initializeSubscriptions(){this.activatedRoute.params.subscribe(t=>{if(!this.inspectionTxnUtilsService.checkScreenNameValid(t.screenName))return this.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),this.utilsService.goBack(),!1;if(this.screenAcl=this.authGuardService.getScreenAcl(this.branchUtilsService.screenAttributes[t.screenName].documentTypeId),!this.screenAcl.view)return this.utilsService.showFailureMsg(n.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;if(this.reInitializeGlobalVariables(),this.txnKeys.inputScreenName=t.screenName,this.transactionInitialization(),t.id&&(this.txnKeys.inputEditId=this.utilsService.decrypt(t.id),this.get()),t.copyScreenName&&t.copyId){const e=this.utilsService.decrypt(t.copyId);this.txnKeys.inputCopyIds=e.split(","),this.txnKeys.inputCopyScreenName=t.copyScreenName,this.copyFrom()}t.duplicateId&&(this.txnKeys.inputDuplicateId=this.utilsService.decrypt(t.duplicateId),this.getDuplicate()),t.draftId&&(this.txnKeys.inputDraftId=this.utilsService.decrypt(t.draftId),this.getDraft()),this.txnKeys.inputEditId||this.txnKeys.inputCopyIds||this.txnKeys.inputDuplicateId||this.txnKeys.inputDraftId||(this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),this.getCustomerBpList(),this.getEmployeeList(),this.getDistributionList(),"inspectionIn"===this.txnKeys.inputScreenName&&this.myForm.controls.inspectionTemplateId.disable())}),this.inspectionItemDataSubscription=this.branchUtilsService.inspectionItemData.subscribe(t=>{this.copyInspectionItem(t)}),this.branchUtilsService.itemSearch.pipe(Object(k.a)(700),Object(w.a)(),Object(O.a)(t=>{this.getItemList(t)})).subscribe()}reInitializeGlobalVariables(){this.txnKeys.inputScreenName="",this.txnKeys.inputEditId="",this.txnKeys.inputCopyIds="",this.txnKeys.inputDuplicateId="",this.txnKeys.inputCopyScreenName="",this.txnKeys.editStatusId="",this.txnKeys.editCreatedName="",this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.documentNumberingList=[],this.rentalStatusList=[],this.itemList=[],this.taxList=[],this.uomList=[],this.hsnList=[],this.distributionList=[],this.businessPartnerList=[],this.bpContactList=[],this.employeeList=[],this.termsAndConditionList=[],this.currencyList=[],this.paymentTermsList=[],this.paymentMethodsList=[],this.customerShipToAddressList=[],this.customerBillToAddressList=[],this.branchUtilsService.inspectionListArray=[]}transactionInitialization(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.txnKeys.inputScreenName],this.screenDataService=this.inspectionTxnUtilsService.getScreenDataService(this.txnKeys.inputScreenName),this.myFormErrors=this.inspectionTxnUtilsService.getFormErrors(this.txnKeys.inputScreenName,"mainFields"),this.myFormValidationMsgs=this.inspectionTxnUtilsService.getFormValMsgs(this.txnKeys.inputScreenName),this.initializeForm(),this.getAutoSuggestionList("getRentalTransStatusList"),this.getAutoSuggestionList("getInspectionTemplateList")}initializeForm(){const t=this.inspectionTxnUtilsService.getFormMainFields(this.txnKeys.inputScreenName);t.itemListArray=this.formBuilder.array([]),this.myForm=this.formBuilder.group(t),this.myForm.valueChanges.subscribe(t=>{this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs),this.myFormData=this.myForm.getRawValue()}),this.myFormData=this.myForm.getRawValue()}saveUpdate(){const t=this.myForm.getRawValue(),e=u.findIndex(this.documentNumberingList,{id:t.documentNumberingId});if("DRAFT"===this.documentNumberingList[e].documentNumberingType)return this.utilsService.showFailureMsg("Cannot Proceed - Select other than draft document numbering from Doc No field!"),!1;if(!this.myForm.valid||!this.udfViewerComponent.valid())return this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs,!0),this.udfViewerComponent.checkValidations(),!1;if(this.checkInspectionTemplate())return this.utilsService.showFailureMsg("Inspection details are empty"),!1;const i=this.inspectionTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm);let r;i.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),i.isDraft=this.txnKeys.inputDraftId?"2":"0",this.txnKeys.inputEditId||this.txnKeys.inputDraftId?(r="update",i.id=this.txnKeys.inputEditId||this.txnKeys.inputDraftId):r="save",this.screenDataService[r](i).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.attachmentsComponent.save("save"===r?t.sId:this.txnKeys.inputEditId||this.txnKeys.inputDraftId)):this.utilsService.showFailureMsg(t)})}addUpdateDraft(){const t=this.myForm.getRawValue(),e=u.findIndex(this.documentNumberingList,{id:t.documentNumberingId});if("DRAFT"!==this.documentNumberingList[e].documentNumberingType)return this.utilsService.showFailureMsg("Cannot Proceed - Select draft document numbering from Doc No field!"),!1;if(this.checkInspectionTemplate())return this.utilsService.showFailureMsg("Inspection details are empty"),!1;const i=this.inspectionTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm);let r;i.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),i.isDraft="1",this.txnKeys.inputDraftId?(r="update",i.id=this.txnKeys.inputDraftId):r="save",this.screenDataService[r](i).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.attachmentsComponent.save("save"===r?t.sId:this.txnKeys.inputDraftId)):this.utilsService.showFailureMsg(t)})}get(){this.screenDataService.get(this.txnKeys.inputEditId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results;e.editFlag=!0;const i=this.inspectionTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,e);this.myForm.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId,"edit",e.documentNumberingInfo).subscribe(t=>{this.documentNumberingList=t}),this.getCustomerBpList(!0,e.customerBpInfo),this.getEmployeeList(e.empInfo),this.getCustomerBpContactList(!0,e.customerBpContactsInfo),this.getItemList("",!0,e.rentalItemInfo),this.getDistributionList(e.distributionRulesInfo),this.branchUtilsService.inspectionListArray=JSON.parse(e.itemListArray[0].templateDetails),this.myForm.controls.inspectionTemplateId.disable(),this.txnKeys.editStatusId=e.status,this.txnKeys.editCreatedName=e.createdByInfo[0].employeeName,this.inspectionTxnUtilsService.manipulationsOnEdit(this.txnKeys.inputScreenName,this.myForm)}else this.utilsService.showFailureMsg(t)})}copyFrom(){this.inspectionTxnUtilsService.getScreenDataService(this.txnKeys.inputCopyScreenName).copy(this.txnKeys.inputCopyIds).subscribe(t=>{if("SUCCESS"===t.status){const e={backdrop:"static"};e.initialState={list:t.results},this.modalService.show(Sr,e)}else this.utilsService.showFailureMsg(t)})}copyInspectionItem(t){const e=this.branchUtilsService.screenAttributes[this.txnKeys.inputCopyScreenName];delete t.documentNumberingId,delete t.documentNumber,delete t.documentNumberingInfo,t.itemListArray[0].copyFromId=t.id,t.itemListArray[0].copyFromType=e.backendKey,delete t.id;const i=this.inspectionTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,t);this.myForm.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),this.getItemList("",!0,t.rentalItemInfo),this.getDistributionList(t.distributionRulesInfo),this.getCustomerBpList(!0,t.customerBpInfo),this.getEmployeeList(t.empInfo),this.getAutoSuggestionList("getCurrencyList",t.currencyInfo),this.getAutoSuggestionList("getTermsandConditionsList",t.termsandConditionsInfo),this.getCustomerBpContactList(!0,t.customerBpContactsInfo),this.utilsService.isEmpty(t.rentalEquipmentId)&&this.onItemChange(),this.inspectionTxnUtilsService.manipulationsOnCopy(this.txnKeys.inputScreenName,this.myForm)}getDraft(){this.screenDataService.get(this.txnKeys.inputDraftId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results,i=this.inspectionTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,e);this.myForm.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId,"draft",e.documentNumberingInfo).subscribe(t=>{this.documentNumberingList=t}),this.getCustomerBpList(!0,e.customerBpInfo),this.getEmployeeList(e.empInfo),this.getCustomerBpContactList(!0,e.customerBpContactsInfo),this.getItemList("",!0,e.rentalItemInfo),this.getDistributionList(e.distributionRulesInfo),this.branchUtilsService.inspectionListArray=JSON.parse(e.itemListArray[0].templateDetails),this.txnKeys.editStatusId=e.status,this.txnKeys.editCreatedName=e.createdByInfo[0].employeeName}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}getDuplicate(){this.screenDataService.get(this.txnKeys.inputDuplicateId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results;delete e.documentNumberingId,delete e.documentNumber,delete e.documentNumberingInfo,delete e.status,delete e.itemListArray[0].id,delete e.itemListArray[0].copyFromType,delete e.itemListArray[0].copyFromId;const i=this.inspectionTxnUtilsService.getMainFieldsWithData(this.txnKeys.inputScreenName,e);this.myForm.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),this.getItemList("",!0,e.rentalItemInfo),this.getDistributionList(e.distributionRulesInfo),this.getCustomerBpList(!0,e.customerBpInfo),this.getEmployeeList(e.empInfo),this.getAutoSuggestionList("getCurrencyList",e.currencyInfo),this.getAutoSuggestionList("getTermsandConditionsList",e.termsandConditionsInfo),this.getCustomerBpContactList(!0,e.customerBpContactsInfo),this.branchUtilsService.inspectionListArray=JSON.parse(e.itemListArray[0].templateDetails)}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}deleteTemplateHeader(t){this.utilsService.confirmDialog("Confirmation","Are you Sure, want to delete?").content.confirmation.subscribe(e=>{e&&this.branchUtilsService.inspectionListArray.splice(t,1)})}deleteTemplateBody(t,e){this.utilsService.confirmDialog("Confirmation","Are you Sure, want to delete?").content.confirmation.subscribe(i=>{i&&this.branchUtilsService.inspectionListArray[t].splice(e,1)})}checkInspectionTemplate(){let t=!1;return 0===this.branchUtilsService.inspectionListArray.length?t=!0:this.branchUtilsService.inspectionListArray.forEach(e=>{u.filter(e,t=>this.utilsService.isEmpty(t.name)).length>0&&(t=!0)}),t}clearForm(){this.initializeForm()}onItemSearch(t){this.branchUtilsService.itemSearch.next(t)}onItemChange(){if(this.myFormData.rentalItemId){const t=u.findIndex(this.itemList,t=>this.myFormData.rentalItemId===t.id);this.myForm.patchValue({equipmentList:this.itemList[t].rentalEquipmentList})}else this.myForm.patchValue({equipmentList:[],rentalEquipmentId:null})}onCustomerNameChange(){if(this.myFormData.customerBpId){const t=this.myForm.controls.itemListArray;t.length>0&&this.utilsService.confirmDialog("Confirmation","If changing the customer leads to remove the items. Do you want to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe(e=>{e&&(this.myForm.patchValue({customerBpId:null}),t.clear())})}}onDistRuleAdd(){this.branchUtilsService.distRulesCheckUnique(this.distributionList,this.myForm,"distributionRulesId")}onTemplateChange(){if(this.myFormData.inspectionTemplateId){const t=u.findIndex(this.inspectionTemplateList,t=>this.myFormData.inspectionTemplateId===t.id);this.branchUtilsService.inspectionListArray=JSON.parse(this.inspectionTemplateList[t].templateDetails)}}getAutoSuggestionList(t,e){this.commonDataService.getAutoSuggestionList(t).subscribe(i=>{"SUCCESS"===i.status?(this.utilsService.ifNotPushToList(i.results,e),"getRentalTransStatusList"===t?(this.txnKeys.inputEditId||(i.results=i.results.filter(t=>"1"===t.id)),this.txnKeys.inputEditId&&"inspectionIn"===this.txnKeys.inputScreenName&&(i.results=i.results.filter(t=>"2"!==t.id)),this.rentalStatusList=i.results):"getCurrencyList"===t?this.currencyList=i.results:"getUomList"===t?this.uomList=i.results:"getHsnList"===t?this.hsnList=i.results.map(t=>(t.hsnLabel=t.chapter+"."+t.heading+"."+t.subHeading,t)):"getTaxList"===t?this.taxList=i.results:"getPaymentTermsList"===t?this.paymentTermsList=i.results:"getPaymentMethodsList"===t?this.paymentMethodsList=i.results:"getTermsandConditionsList"===t?this.termsAndConditionList=i.results:"getRentalWorklogList"===t?this.workLogRefList=i.results:"getInspectionTemplateList"===t&&(this.inspectionTemplateList=i.results)):this.utilsService.showFailureMsg(i)})}getDistributionList(t){this.commonDataService.getDistributionList(!0).subscribe(e=>{"SUCCESS"===e.status?(this.utilsService.ifNotPushToList(e.results,t),this.distributionList=e.results):this.utilsService.showFailureMsg(e)})}getItemList(t,e,i,r){return e?(this.itemList=i.map(t=>(t.searchText=t.rentalItemName+" - "+t.rentalItemCode,t)),!1):!t.term||t.term.length<3?(this.itemList=[],!1):void this.commonDataService.getRentalItemList(t.term).subscribe(t=>{"SUCCESS"===t.status?this.itemList=t.results.map(t=>(t.searchText=t.rentalItemName+" - "+t.rentalItemCode,t)):this.utilsService.showFailureMsg(t)})}getEmployeeList(t){this.commonDataService.getEmployeeList(1).subscribe(e=>{"SUCCESS"===e.status?(this.utilsService.ifNotPushToList(e.results,t),this.employeeList=e.results.map(t=>(t.searchText=t.employeeName+" - "+t.empCode,t))):this.utilsService.showFailureMsg(e)})}getCustomerBpList(t,e){this.commonDataService.getBusinessPartnerList([1,3]).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.ifNotPushToList(t.results,e),this.businessPartnerList=t.results.map(t=>(t.searchText=t.partnerName+" - "+t.partnerCode,t))):this.utilsService.showFailureMsg(t)})}getCustomerBpContactList(t,e){this.bpContactList=[],this.branchUtilsService.getBpContactListAndSet(this.myForm,"customerBpContactsId","customerBpId",t,e).subscribe(t=>{this.bpContactList=t})}showAddTemplatePopup(){if(this.branchUtilsService.inspectionListArray[0]){let t="";if(this.myFormData.inspectionTemplateId){const e=u.findIndex(this.inspectionTemplateList,t=>this.myFormData.inspectionTemplateId===t.id);t=this.inspectionTemplateList[e].templateName}const e={backdrop:"static"};e.initialState={templateDetails:{inputEditId:this.myFormData.inspectionTemplateId?this.myFormData.inspectionTemplateId:"",templateName:t,templateList:this.branchUtilsService.inspectionListArray}},this.modalService.show(hr,e)}else this.utilsService.showFailureMsg("Please add template.")}showAddTaskPopup(t,e){const i={name:"",status:"Ok",remarks:""};"header"===t?(i.header=!0,this.branchUtilsService.inspectionListArray.push([i])):"body"===t&&this.branchUtilsService.inspectionListArray[e].push(i)}showTxnOptionsSidebar(t){this.branchUtilsService.spiTxnOptions.next(!1===t?{show:!1}:{show:!0,spiName:this.branchUtilsService.spiTxnId.inspection,screenName:this.txnKeys.inputScreenName,editId:this.txnKeys.inputEditId,bpId:this.myFormData.customerBpId,status:this.myFormData.status})}downloadPdf(){this.branchUtilsService.spiTxnOptionsDownloadPdf.next({spiName:this.branchUtilsService.spiTxnId.inspection,screenName:this.txnKeys.inputScreenName,id:this.txnKeys.inputEditId})}onKeydownHandler(t){t.ctrlKey&&"s"===t.key.toLowerCase()&&(this.txnKeys.inputEditId&&"1"===this.txnKeys.editStatusId||!this.txnKeys.inputEditId)&&(this.saveUpdate(),t.preventDefault()),this.txnKeys.inputEditId&&t.ctrlKey&&-1!=="p".indexOf(t.key)&&(this.downloadPdf(),t.preventDefault())}ngOnDestroy(){this.reInitializeGlobalVariables(),this.inspectionItemDataSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.g),s.Pb(n.f),s.Pb(n.a),s.Pb(o.l),s.Pb(m.a),s.Pb(a.e),s.Pb(r.a),s.Pb(b),s.Pb(B.a),s.Pb(s.h),s.Pb(K.b))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-inspection-txn-add-employee-add"]],viewQuery:function(t,e){var i;1&t&&(s.Pc(q.a,!0),s.Pc(P.a,!0)),2&t&&(s.zc(i=s.ec())&&(e.udfViewerComponent=i.first),s.zc(i=s.ec())&&(e.attachmentsComponent=i.first))},hostBindings:function(t,e){1&t&&s.dc("keydown",(function(t){return e.onKeydownHandler(t)}),!1,s.Bc)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-plus-square"],[1,"working-container",3,"formGroup"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row"],[1,"form-group","col-sm-3"],[1,"form-label"],[1,"mandatory"],[1,"col-sm-6"],["formControlName","documentNumberingId","bindLabel","documentNumberingName","bindValue","id","placeholder","--SELECT--",3,"items","change"],["type","text","formControlName","documentNumber",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],["formControlName","rentalItemId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","virtualScroll","search","change"],["ng-option-tmp",""],["formControlName","rentalEquipmentId","bindLabel","equipmentName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],[1,"action-control"],["formControlName","customerBpId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple","focus","change"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["class","info-icon","container","body","tooltip","View Details",3,"click",4,"ngIf"],["formControlName","customerBpContactsId","bindLabel","contactName","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["type","text","formControlName","referenceNumber",1,"form-control","form-control-sm"],[1,"position-relative"],["formControlName","empId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["formControlName","status",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","col-sm-6"],["formControlName","remarks","rows","2",1,"form-control","form-control-sm"],["class","mandatory",4,"ngIf"],["formControlName","distributionRulesId","bindLabel","distributionName","bindValue","id","placeholder","--SELECT--","groupBy","dimensionDescription",3,"items","multiple","add"],[1,"box-body","box-table"],["formControlName","inspectionTemplateId",1,"form-control","form-control-sm",3,"change"],["value",""],[1,"table-responsive",3,"ngStyle"],[1,"table","table-striped","table-bordered"],[2,"min-width","80px"],[2,"min-width","30px"],[2,"min-width","200px"],[2,"min-width","150px"],[2,"min-width","100px"],[4,"ngFor","ngForOf"],[3,"type"],[3,"type","doSuccess"],[1,"btn-group","text-right"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class"," btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[1,"fa","fa-print"],[1,"validation-error"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click"],[1,"fa","fa-plus"],[3,"click"],[1,"fa","fa-redo-alt"],["container","body","tooltip","View Details",1,"info-icon",3,"click"],[1,"fa","fa-info-circle"],[3,"value"],["placement","top","container","body","tooltip","Add Sub Task",1,"action","blue",3,"click"],["placement","top","container","body","tooltip","Delete",1,"action","red",3,"click"],[1,"fa","fa-minus-circle"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"],["colspan","5"],[1,"btn-group","text-left","mb-0"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-save"],[1,"fa","fa-broom"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&s.Jc(0,en,140,44,"ng-container",0),2&t&&s.oc("ngIf",e.screenAcl.view)},directives:[p.m,a.n,a.i,J.a,a.m,a.g,a.b,J.c,a.t,p.l,a.p,a.v,p.n,q.a,P.a,Q.a,r.g,v.a,a.o],styles:[""]}),t})();const nn=["dataTable"];function sn(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",23),s.dc("click",(function(){return s.Dc(t),s.hc().downloadAsExcel()})),s.Qb(1,"i",24),s.Vb(2,"span"),s.Lc(3,"Download as Excel"),s.Ub(),s.Ub()}}function on(t,e){if(1&t&&(s.Vb(0,"div",25),s.Vb(1,"div",26),s.Vb(2,"div",27),s.Lc(3),s.Ub(),s.Vb(4,"div",28),s.Lc(5),s.Ub(),s.Ub(),s.Ub()),2&t){const t=e.$implicit,i=s.hc();s.Cb(3),s.Nc(" ",t.name," "),s.Cb(1),s.oc("ngClass",i.appConstants.TXN_STATUS_COLOR_CLS[t.id]),s.Cb(1),s.Mc(t.count)}}function an(t,e){1&t&&(s.Vb(0,"th",34),s.Lc(1," Branch Name "),s.Qb(2,"p-sortIcon",32),s.Ub()),2&t&&(s.oc("pSortableColumn","branchName"),s.Cb(2),s.oc("field","branchName"))}function cn(t,e){if(1&t){const t=s.Wb();s.Vb(0,"th"),s.Vb(1,"input",40),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.branchName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub()}if(2&t){const t=s.hc(2);s.Cb(1),s.oc("ngModel",t.searchForm.branchName)}}function un(t,e){if(1&t&&(s.Vb(0,"option",44),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc(" ",t.name," ")}}function mn(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tr"),s.Vb(1,"th",29),s.Lc(2,"Actions"),s.Ub(),s.Jc(3,an,3,2,"th",30),s.Vb(4,"th",31),s.Lc(5,"Overdue "),s.Qb(6,"p-sortIcon",32),s.Ub(),s.Vb(7,"th",31),s.Lc(8,"Doc No "),s.Qb(9,"p-sortIcon",32),s.Ub(),s.Vb(10,"th",33),s.Lc(11,"Customer Name "),s.Qb(12,"p-sortIcon",32),s.Ub(),s.Vb(13,"th",34),s.Lc(14,"Item Name "),s.Qb(15,"p-sortIcon",32),s.Ub(),s.Vb(16,"th",35),s.Lc(17,"Start Date "),s.Qb(18,"p-sortIcon",32),s.Ub(),s.Vb(19,"th",35),s.Lc(20,"End Date "),s.Qb(21,"p-sortIcon",32),s.Ub(),s.Vb(22,"th",35),s.Lc(23,"Status "),s.Qb(24,"p-sortIcon",32),s.Ub(),s.Ub(),s.Vb(25,"tr",36),s.Vb(26,"th"),s.Vb(27,"a",37),s.dc("click",(function(){return s.Dc(t),s.hc().clearSearchForm()})),s.Qb(28,"i",38),s.Lc(29,"Clear"),s.Ub(),s.Ub(),s.Jc(30,cn,2,1,"th",39),s.Qb(31,"th"),s.Vb(32,"th"),s.Vb(33,"input",40),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().searchForm.documentNumber=e}))("keyup.enter",(function(){return s.Dc(t),s.hc().resetListing()})),s.Ub(),s.Ub(),s.Vb(34,"th"),s.Vb(35,"input",40),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().searchForm.customerBpName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc().resetListing()})),s.Ub(),s.Ub(),s.Vb(36,"th"),s.Vb(37,"input",40),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().searchForm.rentalItemName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc().resetListing()})),s.Ub(),s.Ub(),s.Vb(38,"th"),s.Vb(39,"p-calendar",11),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().searchForm.startDate=e}))("onSelect",(function(){return s.Dc(t),s.hc().resetListing()})),s.Ub(),s.Ub(),s.Vb(40,"th"),s.Vb(41,"p-calendar",11),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().searchForm.endDate=e}))("onSelect",(function(){return s.Dc(t),s.hc().resetListing()})),s.Ub(),s.Ub(),s.Vb(42,"th"),s.Vb(43,"select",41),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc().searchForm.status=e}))("change",(function(){return s.Dc(t),s.hc().resetListing()})),s.Vb(44,"option",42),s.Lc(45,"--SELECT--"),s.Ub(),s.Jc(46,un,2,2,"option",43),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=s.hc();s.Cb(3),s.oc("ngIf",!t.storageService.get("isSingleBranchUser")),s.Cb(1),s.oc("pSortableColumn","overDueValue"),s.Cb(2),s.oc("field","overDueValue"),s.Cb(1),s.oc("pSortableColumn","documentNumber"),s.Cb(2),s.oc("field","documentNumber"),s.Cb(1),s.oc("pSortableColumn","customerBpName"),s.Cb(2),s.oc("field","customerBpName"),s.Cb(1),s.oc("pSortableColumn","itemName"),s.Cb(2),s.oc("field","rentalItemName"),s.Cb(1),s.oc("pSortableColumn","startDate"),s.Cb(2),s.oc("field","startDate"),s.Cb(1),s.oc("pSortableColumn","endDate"),s.Cb(2),s.oc("field","endDate"),s.Cb(1),s.oc("pSortableColumn","status"),s.Cb(2),s.oc("field","status"),s.Cb(6),s.oc("ngIf",!t.storageService.get("isSingleBranchUser")),s.Cb(3),s.oc("ngModel",t.searchForm.documentNumber),s.Cb(2),s.oc("ngModel",t.searchForm.customerBpName),s.Cb(2),s.oc("ngModel",t.searchForm.rentalItemName),s.Cb(2),s.oc("ngModel",t.searchForm.startDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(2),s.oc("ngModel",t.searchForm.endDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(2),s.oc("ngModel",t.searchForm.status),s.Cb(3),s.oc("ngForOf",t.statusList)}}function ln(t,e){if(1&t&&(s.Vb(0,"td"),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Mc(t.branchName)}}function bn(t,e){if(1&t&&(s.Vb(0,"span",49),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Nc("",t.overDueValue," Days")}}function dn(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tr"),s.Vb(1,"td"),s.Vb(2,"a",45),s.dc("click",(function(){s.Dc(t);const i=e.$implicit;return s.hc().redirectToEdit(i.id,i.isDraft)})),s.Qb(3,"i",46),s.Ub(),s.Ub(),s.Jc(4,ln,2,1,"td",39),s.Vb(5,"td"),s.Jc(6,bn,2,1,"span",47),s.Ub(),s.Vb(7,"td"),s.Lc(8),s.Ub(),s.Vb(9,"td"),s.Lc(10),s.Ub(),s.Vb(11,"td"),s.Lc(12),s.Ub(),s.Vb(13,"td"),s.Lc(14),s.Ub(),s.Vb(15,"td"),s.Lc(16),s.Ub(),s.Vb(17,"td"),s.Vb(18,"span",48),s.Lc(19),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=e.$implicit,i=s.hc();s.Cb(4),s.oc("ngIf",!i.storageService.get("isSingleBranchUser")),s.Cb(2),s.oc("ngIf",1==t.status&&t.overDueValue<0),s.Cb(2),s.Mc(t.documentNumber),s.Cb(2),s.Oc("",t.customerBpCode," - ",t.customerBpName,""),s.Cb(2),s.Oc(" ",t.rentalItemCode," - ",t.rentalItemName," "),s.Cb(2),s.Mc(t.startDate),s.Cb(2),s.Mc(t.endDate),s.Cb(2),s.oc("ngClass",i.appConstants.TXN_STATUS_COLOR_CLS[t.status]),s.Cb(1),s.Mc(t.statusName)}}let hn=(()=>{class t{constructor(t,e,i,r,s,o,a){this.utilsService=t,this.storageService=e,this.authGuardService=i,this.commonDataService=r,this.rentalWorklogDataService=s,this.branchUtilsService=o,this.worklogUtilsService=a,this.appConstants=n.h,this.screenAcl={},this.statusList=[],this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={fromDate:"",toDate:"",isDraft:!1,branchName:"",documentNumber:"",customerBpName:"",rentalItemName:"",startDate:"",endDate:"",status:1}}ngOnInit(){if(this.screenAcl=this.authGuardService.getScreenAcl("25"),!this.screenAcl.view)return this.utilsService.showFailureMsg(n.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;this.getAutoSuggestionList("getRentalTransStatusList"),this.getAnalyticsData()}getListing(t){const e=Object.assign({},this.searchForm);e.fromDate=this.utilsService.getBackendDateFormat(this.searchForm.fromDate),e.toDate=this.utilsService.getBackendDateFormat(this.searchForm.toDate),e.isDraft=e.isDraft?1:0,e.startDate=this.utilsService.getBackendDateFormat(this.searchForm.startDate),e.endDate=this.utilsService.getBackendDateFormat(this.searchForm.endDate);const i=this.utilsService.dataTableParameterFormation(t,e);this.listingProperties=i,this.rentalWorklogDataService.getList(i).subscribe(t=>{"SUCCESS"===t.status?(this.listing.data=t.results.searchResults,this.listing.totalRecords=t.results.totalRecords):this.utilsService.showFailureMsg(t)})}clearSearchForm(){this.searchForm={fromDate:"",toDate:"",isDraft:!1,branchName:"",documentNumber:"",customerBpName:"",rentalItemName:"",startDate:"",endDate:"",status:1},this.resetListing()}resetListing(){this.dataTable.reset()}redirectToEdit(t,e){this.utilsService.redirect("1"===e?"/branch/rental/worklog-edit-draft/worklog/"+this.utilsService.encrypt(t):"/branch/rental/worklog-edit/worklog/"+this.utilsService.encrypt(t))}getAutoSuggestionList(t){this.commonDataService.getAutoSuggestionList(t).subscribe(t=>{"SUCCESS"===t.status?this.statusList=t.results:this.utilsService.showFailureMsg(t)})}getAnalyticsData(){this.rentalWorklogDataService.getAnalyticsData().subscribe(t=>{this.analyticsData=t.results})}downloadAsExcel(){this.rentalWorklogDataService.downloadAsExcel(this.listingProperties).subscribe(t=>{"SUCCESS"===t.status?this.utilsService.externalRedirect(t.fileUrl):this.utilsService.showFailureMsg(t)})}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.g),s.Pb(n.f),s.Pb(n.a),s.Pb(o.l),s.Pb(o.T),s.Pb(m.a),s.Pb(h))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-worklog-list"]],viewQuery:function(t,e){var i;1&t&&s.Pc(nn,!0),2&t&&s.zc(i=s.ec())&&(e.dataTable=i.first)},decls:37,vars:19,consts:[[1,"page-title"],[1,"btn-group"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],["routerLink","/branch/rental/worklog-add/worklog",1,"btn","btn-primary","btn-sm"],[1,"fa","fa-plus"],[1,"working-container"],[1,"analytics"],[1,"row"],["class","col-lg-2 col-md-3 col-sm-4 col-xs-12",4,"ngFor","ngForOf"],[1,"form-group","col-sm-3"],[1,"form-label"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","ngModelChange","onSelect"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","minDate","ngModelChange","onSelect"],[1,"form-group","col-sm-6","text-right"],[1,"checkbox","mt-3"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"checkmark"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-file-excel"],[1,"col-lg-2","col-md-3","col-sm-4","col-xs-12"],[1,"item"],[1,"name"],[1,"count",3,"ngClass"],[2,"width","80px"],["style","width:150px",3,"pSortableColumn",4,"ngIf"],[2,"width","100px",3,"pSortableColumn"],[3,"field"],[2,"width","200px",3,"pSortableColumn"],[2,"width","150px",3,"pSortableColumn"],[2,"width","120px",3,"pSortableColumn"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],[4,"ngIf"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"click"],[1,"fa","fa-edit"],["class","badge badge-danger",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&(s.Vb(0,"div",0),s.Vb(1,"span"),s.Lc(2,"W"),s.Ub(),s.Lc(3,"orklog - List "),s.Vb(4,"div",1),s.Jc(5,sn,4,0,"button",2),s.Vb(6,"button",3),s.Qb(7,"i",4),s.Vb(8,"span"),s.Lc(9,"Add Worklog"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(10,"div",5),s.Vb(11,"div",6),s.Vb(12,"div",7),s.Jc(13,on,6,3,"div",8),s.Ub(),s.Ub(),s.Vb(14,"div",7),s.Vb(15,"div",9),s.Vb(16,"label",10),s.Vb(17,"strong"),s.Lc(18,"From Date"),s.Ub(),s.Ub(),s.Vb(19,"p-calendar",11),s.dc("ngModelChange",(function(t){return e.searchForm.startDate=t}))("onSelect",(function(){return e.resetListing()})),s.Ub(),s.Ub(),s.Vb(20,"div",9),s.Vb(21,"label",10),s.Vb(22,"strong"),s.Lc(23,"To Date"),s.Ub(),s.Ub(),s.Vb(24,"p-calendar",12),s.dc("ngModelChange",(function(t){return e.searchForm.endDate=t}))("onSelect",(function(){return e.resetListing()})),s.Ub(),s.Ub(),s.Vb(25,"div",13),s.Vb(26,"label",14),s.Vb(27,"input",15),s.dc("ngModelChange",(function(t){return e.searchForm.isDraft=t}))("change",(function(){return e.resetListing()})),s.Ub(),s.Qb(28,"span",16),s.Lc(29," Show Only Drafts "),s.Ub(),s.Ub(),s.Ub(),s.Vb(30,"div",7),s.Vb(31,"div",17),s.Vb(32,"div",18),s.Vb(33,"p-table",19,20),s.dc("onLazyLoad",(function(t){return e.getListing(t)})),s.Jc(35,mn,47,31,"ng-template",21),s.Jc(36,dn,20,11,"ng-template",22),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&t&&(s.Cb(5),s.oc("ngIf",e.screenAcl.download),s.Cb(8),s.oc("ngForOf",e.analyticsData),s.Cb(6),s.oc("ngModel",e.searchForm.startDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),s.Cb(5),s.oc("ngModel",e.searchForm.endDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT)("minDate",e.searchForm.startDate),s.Cb(3),s.oc("ngModel",e.searchForm.isDraft),s.Cb(6),s.oc("value",e.listing.data)("lazy",!0)("paginator",!0)("rows",e.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",e.listing.totalRecords))},directives:[p.m,r.e,p.l,g.a,a.m,a.o,a.a,f.c,y.b,p.k,f.b,f.a,v.a,a.b,a.t,a.p,a.v],styles:[""]}),t})();const pn=["fileUpload"];function gn(t,e){1&t&&(s.Tb(0),s.Lc(1,"Add"),s.Sb())}function fn(t,e){1&t&&(s.Tb(0),s.Lc(1,"Edit"),s.Sb())}function yn(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",6),s.dc("click",(function(){return s.Dc(t),s.hc(2).downloadPdf()})),s.Qb(1,"i",54),s.Vb(2,"span"),s.Lc(3,"Print"),s.Ub(),s.Ub()}}function vn(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.documentNumberingId?t.myFormErrors.documentNumberingId:t.myFormErrors.documentNumber," ")}}function Sn(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.rentalItemName,"\xa0"),s.Cb(2),s.Nc("(",t.rentalItemCode,")")}}function In(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.rentalItemId," ")}}function Cn(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.partnerName,"\xa0"),s.Cb(2),s.Nc("(",t.partnerCode,")")}}function Un(t,e){if(1&t){const t=s.Wb();s.Vb(0,"a",56),s.dc("click",(function(){return s.Dc(t),s.hc(2).bizRefreshFlag=!0})),s.Qb(1,"i",57),s.Ub()}}function Ln(t,e){if(1&t){const t=s.Wb();s.Vb(0,"a",58),s.dc("click",(function(){s.Dc(t);const e=s.hc(2);return e.getCustomerBpList(),e.bizRefreshFlag=!1})),s.Qb(1,"i",59),s.Ub()}}function Vn(t,e){if(1&t){const t=s.Wb();s.Vb(0,"span",60),s.dc("click",(function(){s.Dc(t);const e=s.hc(2);return e.popupExternalService.showDetailPopup("biz-partner",e.myFormData.customerBpId)})),s.Qb(1,"i",61),s.Ub()}}function Dn(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.customerBpId," ")}}function Nn(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Ub(),s.Vb(2,"small"),s.Lc(3),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Mc(t.contactName),s.Cb(2),s.Oc("",t.contactTypeName," / ",t.contactNumber,"")}}function Fn(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.startDate," ")}}function En(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.endDate," ")}}function Tn(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",null==t.myForm.errors?null:t.myForm.errors.invalidEndDate," ")}}function xn(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.shiftStartHour?t.myFormErrors.shiftStartHour:t.myFormErrors.shiftStartMinute," ")}}function An(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.shiftEndHour?t.myFormErrors.shiftEndHour:t.myFormErrors.shiftEndMinute," ")}}function Rn(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",null==t.myForm.errors?null:t.myForm.errors.invalidShiftEndTime," ")}}function Mn(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.documentDate," ")}}function kn(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.employeeName,"\xa0"),s.Cb(2),s.Nc("(",t.empCode,")")}}function wn(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.empId," ")}}function On(t,e){if(1&t&&(s.Vb(0,"option",62),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Mc(t.name)}}function qn(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Nc(" ",t.myFormErrors.status," ")}}function Pn(t,e){1&t&&(s.Vb(0,"span",16),s.Lc(1,"*"),s.Ub())}function Bn(t,e){if(1&t){const t=s.Wb();s.Vb(0,"a",91),s.dc("click",(function(){s.Dc(t);const e=s.hc().index;return s.hc(3).removeItemFields(e)})),s.Qb(1,"i",92),s.Ub()}}function Kn(t,e){if(1&t&&(s.Vb(0,"option",62),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Mc(t.name)}}function Jn(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc().index,e=s.hc(3);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].worklogItemTypeId," ")}}function Qn(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.employeeName,"\xa0"),s.Cb(2),s.Nc("(",t.empCode,")")}}function _n(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc().index,e=s.hc(3);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].startDateTime," ")}}function Wn(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Nc(" ",null==t.errors?null:t.errors.invalidItemStartDateTime," ")}}function Hn(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc().index,e=s.hc(3);s.Cb(1),s.Nc(" ",e.myFormErrors.itemListArray[t].endDateTime," ")}}function Gn(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Nc(" ",null==t.errors?null:t.errors.invalidEndDateTime," ")}}function zn(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Nc(" ",null==t.errors?null:t.errors.invalidItemEndDateTime," ")}}function jn(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tr",83),s.Vb(1,"td"),s.Jc(2,Bn,2,0,"a",84),s.Ub(),s.Vb(3,"td"),s.Lc(4),s.Ub(),s.Vb(5,"td"),s.Vb(6,"select",85),s.dc("change",(function(){s.Dc(t);const e=s.hc(3);return e.worklogUtilsService.overAllTimeCalc(e.myForm)})),s.Vb(7,"option",86),s.Lc(8,"--SELECT--"),s.Ub(),s.Jc(9,Kn,2,2,"option",43),s.Ub(),s.Jc(10,Jn,2,1,"div",20),s.Ub(),s.Vb(11,"td"),s.Vb(12,"ng-select",87),s.Jc(13,Qn,4,2,"ng-template",22),s.Ub(),s.Ub(),s.Vb(14,"td"),s.Vb(15,"p-calendar",88),s.dc("onSelect",(function(){s.Dc(t);const i=e.index;return s.hc(3).onDateChange(i)})),s.Ub(),s.Jc(16,_n,2,1,"div",20),s.Jc(17,Wn,2,1,"div",20),s.Ub(),s.Vb(18,"td"),s.Vb(19,"p-calendar",89),s.dc("onSelect",(function(){s.Dc(t);const i=e.index;return s.hc(3).onDateChange(i)})),s.Ub(),s.Jc(20,Hn,2,1,"div",20),s.Jc(21,Gn,2,1,"div",20),s.Jc(22,zn,2,1,"div",20),s.Ub(),s.Vb(23,"td"),s.Lc(24),s.Ub(),s.Vb(25,"td"),s.Qb(26,"input",90),s.Ub(),s.Ub()}if(2&t){const t=e.$implicit,i=e.index,r=s.hc(3);s.oc("formGroupName",i),s.Cb(2),s.oc("ngIf",r.myFormData.itemListArray.length>1),s.Cb(2),s.Mc(i+1),s.Cb(5),s.oc("ngForOf",r.workLogItemList),s.Cb(1),s.oc("ngIf",r.myFormErrors.itemListArray[i].worklogItemTypeId),s.Cb(2),s.oc("items",r.employeeList)("multiple",!1),s.Cb(3),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",r.myFormErrors.itemListArray[i].startDateTime),s.Cb(1),s.oc("ngIf",null==t.errors?null:t.errors.invalidItemStartDateTime),s.Cb(2),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",r.myFormErrors.itemListArray[i].endDateTime),s.Cb(1),s.oc("ngIf",null==t.errors?null:t.errors.invalidEndDateTime),s.Cb(1),s.oc("ngIf",null==t.errors?null:t.errors.invalidItemEndDateTime),s.Cb(2),s.Mc(t.value.totalHours)}}function $n(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div"),s.Vb(1,"div",63),s.Vb(2,"div",64),s.Lc(3," Select file \xa0 "),s.Qb(4,"input",65,66),s.Lc(6," \xa0 "),s.Vb(7,"button",6),s.dc("click",(function(){return s.Dc(t),s.hc(2).upload()})),s.Lc(8,"Upload"),s.Ub(),s.Lc(9," \xa0 "),s.Vb(10,"button",6),s.dc("click",(function(){return s.Dc(t),s.hc(2).utilsService.externalRedirect("http://sapservice.smileshopy.com/public/project_assets/Worklog_upload_template.xlsx")})),s.Lc(11," Download Template"),s.Ub(),s.Ub(),s.Ub(),s.Vb(12,"div",63),s.Vb(13,"div",67),s.Vb(14,"table",68),s.Vb(15,"thead"),s.Vb(16,"tr"),s.Vb(17,"th",69),s.Lc(18,"Action"),s.Ub(),s.Vb(19,"th",70),s.Lc(20,"#"),s.Ub(),s.Vb(21,"th",71),s.Lc(22,"Type"),s.Vb(23,"span",16),s.Lc(24,"*"),s.Ub(),s.Ub(),s.Vb(25,"th",72),s.Lc(26,"Resource"),s.Ub(),s.Vb(27,"th",72),s.Lc(28,"Start Date/Time"),s.Vb(29,"span",16),s.Lc(30,"*"),s.Ub(),s.Ub(),s.Vb(31,"th",72),s.Lc(32,"End Date/Time"),s.Vb(33,"span",16),s.Lc(34,"*"),s.Ub(),s.Ub(),s.Vb(35,"th",73),s.Lc(36,"Total Time"),s.Ub(),s.Vb(37,"th",73),s.Lc(38,"Remarks"),s.Ub(),s.Ub(),s.Ub(),s.Vb(39,"tbody",74),s.Jc(40,jn,27,21,"tr",75),s.Ub(),s.Vb(41,"tfoot"),s.Vb(42,"tr"),s.Vb(43,"td",76),s.Vb(44,"button",77),s.dc("click",(function(){return s.Dc(t),s.hc(2).addItemFields()})),s.Qb(45,"i",57),s.Vb(46,"span"),s.Lc(47,"Add Log"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(48,"div",13),s.Vb(49,"div",78),s.Qb(50,"div",79),s.Ub(),s.Vb(51,"div",34),s.Vb(52,"table",80),s.Vb(53,"tbody"),s.Vb(54,"tr"),s.Vb(55,"td",72),s.Vb(56,"strong"),s.Lc(57,"Total Working Hours"),s.Ub(),s.Ub(),s.Vb(58,"td",81),s.Vb(59,"strong"),s.Lc(60),s.Ub(),s.Ub(),s.Ub(),s.Vb(61,"tr"),s.Vb(62,"td"),s.Lc(63,"Total Breakdown Hours "),s.Ub(),s.Vb(64,"td",82),s.Lc(65),s.Ub(),s.Ub(),s.Vb(66,"tr"),s.Vb(67,"td"),s.Lc(68,"Total Overtime Hours"),s.Ub(),s.Vb(69,"td",82),s.Lc(70),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=s.hc(2);s.Cb(40),s.oc("ngForOf",t.myForm.controls.itemListArray.controls),s.Cb(20),s.Nc(" ",t.myForm.controls.totalWorkingHours.value," "),s.Cb(5),s.Nc(" ",t.myForm.controls.totalBreakDownHours.value," "),s.Cb(5),s.Nc(" ",t.myForm.controls.totalOverTimeHours.value," ")}}function Yn(t,e){if(1&t){const t=s.Wb();s.Vb(0,"a",91),s.dc("click",(function(){s.Dc(t);const e=s.hc().index;return s.hc(4).removeItemFields(e)})),s.Qb(1,"i",92),s.Ub()}}function Zn(t,e){if(1&t&&(s.Vb(0,"option",62),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t),s.Cb(1),s.Mc(t)}}function Xn(t,e){if(1&t&&(s.Vb(0,"option",62),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t),s.Cb(1),s.Mc(t)}}function ts(t,e){if(1&t&&(s.Vb(0,"option",62),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t),s.Cb(1),s.Mc(t)}}function es(t,e){if(1&t&&(s.Vb(0,"option",62),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t),s.Cb(1),s.Mc(t)}}function is(t,e){if(1&t&&(s.Vb(0,"div",55),s.Lc(1),s.Ub()),2&t){const t=s.hc().$implicit;s.Cb(1),s.Nc(" ",null==t.errors?null:t.errors.invalidShiftEndTime," ")}}function rs(t,e){if(1&t&&(s.Vb(0,"option",62),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t),s.Cb(1),s.Mc(t)}}function ns(t,e){if(1&t&&(s.Vb(0,"option",62),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t),s.Cb(1),s.Mc(t)}}function ss(t,e){if(1&t&&(s.Vb(0,"option",62),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t),s.Cb(1),s.Mc(t)}}function os(t,e){if(1&t&&(s.Vb(0,"option",62),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t),s.Cb(1),s.Mc(t)}}function as(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tr",83),s.Vb(1,"td"),s.Jc(2,Yn,2,0,"a",84),s.Ub(),s.Vb(3,"td"),s.Lc(4),s.Ub(),s.Vb(5,"td"),s.Lc(6),s.Ub(),s.Vb(7,"td"),s.Lc(8),s.Ub(),s.Vb(9,"td"),s.Vb(10,"span"),s.Vb(11,"select",94),s.dc("change",(function(){s.Dc(t);const i=e.index;return s.hc(4).onShiftTimeChange(i)})),s.Jc(12,Zn,2,2,"option",43),s.Ub(),s.Vb(13,"div"),s.Lc(14,":"),s.Ub(),s.Vb(15,"select",95),s.dc("change",(function(){s.Dc(t);const i=e.index;return s.hc(4).onShiftTimeChange(i)})),s.Jc(16,Xn,2,2,"option",43),s.Ub(),s.Ub(),s.Ub(),s.Vb(17,"td"),s.Vb(18,"span"),s.Vb(19,"select",96),s.dc("change",(function(){s.Dc(t);const i=e.index;return s.hc(4).onShiftTimeChange(i)})),s.Jc(20,ts,2,2,"option",43),s.Ub(),s.Vb(21,"div"),s.Lc(22,":"),s.Ub(),s.Vb(23,"select",97),s.dc("change",(function(){s.Dc(t);const i=e.index;return s.hc(4).onShiftTimeChange(i)})),s.Jc(24,es,2,2,"option",43),s.Ub(),s.Ub(),s.Jc(25,is,2,1,"div",20),s.Ub(),s.Vb(26,"td",82),s.Lc(27),s.Ub(),s.Vb(28,"td"),s.Vb(29,"span"),s.Vb(30,"select",98),s.dc("change",(function(){s.Dc(t);const i=e.index;return s.hc(4).onShiftTimeChange(i)})),s.Jc(31,rs,2,2,"option",43),s.Ub(),s.Vb(32,"div"),s.Lc(33,":"),s.Ub(),s.Vb(34,"select",99),s.dc("change",(function(){s.Dc(t);const i=e.index;return s.hc(4).onShiftTimeChange(i)})),s.Jc(35,ns,2,2,"option",43),s.Ub(),s.Ub(),s.Ub(),s.Vb(36,"td"),s.Vb(37,"span"),s.Vb(38,"select",100),s.dc("change",(function(){s.Dc(t);const i=e.index;return s.hc(4).onShiftTimeChange(i)})),s.Jc(39,ss,2,2,"option",43),s.Ub(),s.Vb(40,"select",101),s.dc("change",(function(){s.Dc(t);const i=e.index;return s.hc(4).onShiftTimeChange(i)})),s.Jc(41,os,2,2,"option",43),s.Ub(),s.Ub(),s.Ub(),s.Vb(42,"td",82),s.Lc(43),s.Ub(),s.Ub()}if(2&t){const t=e.$implicit,i=e.index,r=s.hc(4);s.oc("formGroupName",i),s.Cb(2),s.oc("ngIf",r.myFormData.itemListArray.length>1),s.Cb(2),s.Mc(i+1),s.Cb(2),s.Nc(" ",t.value.day," "),s.Cb(2),s.Nc(" ",t.value.date," "),s.Cb(4),s.oc("ngForOf",r.appConstants.HOURS_ARRAY),s.Cb(4),s.oc("ngForOf",r.appConstants.MINUTES_ARRAY),s.Cb(4),s.oc("ngForOf",r.appConstants.HOURS_ARRAY),s.Cb(4),s.oc("ngForOf",r.appConstants.MINUTES_ARRAY),s.Cb(1),s.oc("ngIf",null==t.errors?null:t.errors.invalidShiftEndTime),s.Cb(2),s.Mc(t.value.totalHours),s.Cb(4),s.oc("ngForOf",r.appConstants.HOURS_ARRAY),s.Cb(4),s.oc("ngForOf",r.appConstants.MINUTES_ARRAY),s.Cb(4),s.oc("ngForOf",r.appConstants.HOURS_ARRAY),s.Cb(2),s.oc("ngForOf",r.appConstants.MINUTES_ARRAY),s.Cb(2),s.Nc(" ",t.value.billableHour," ")}}function cs(t,e){if(1&t&&(s.Tb(0),s.Jc(1,as,44,16,"tr",75),s.Sb()),2&t){const t=s.hc(3);s.Cb(1),s.oc("ngForOf",t.myForm.controls.itemListArray.controls)}}function us(t,e){if(1&t){const t=s.Wb();s.Vb(0,"div"),s.Vb(1,"div",63),s.Qb(2,"div",64),s.Ub(),s.Vb(3,"div",63),s.Vb(4,"div",67),s.Vb(5,"table",68),s.Vb(6,"thead"),s.Vb(7,"tr"),s.Vb(8,"th",69),s.Lc(9,"Action"),s.Ub(),s.Vb(10,"th",70),s.Lc(11,"#"),s.Ub(),s.Vb(12,"th",73),s.Lc(13,"Day"),s.Ub(),s.Vb(14,"th",72),s.Lc(15,"Date"),s.Ub(),s.Vb(16,"th",72),s.Lc(17,"Shift Start Time"),s.Vb(18,"span",16),s.Lc(19,"*"),s.Ub(),s.Ub(),s.Vb(20,"th",72),s.Lc(21,"Shift End Time"),s.Vb(22,"span",16),s.Lc(23,"*"),s.Ub(),s.Ub(),s.Vb(24,"th",73),s.Lc(25,"Total Hours"),s.Ub(),s.Vb(26,"th",72),s.Lc(27,"Breakdown Hours"),s.Ub(),s.Vb(28,"th",72),s.Lc(29,"Overtime Hours"),s.Ub(),s.Vb(30,"th",72),s.Lc(31,"Billable Hours"),s.Ub(),s.Ub(),s.Ub(),s.Vb(32,"tbody",74),s.Jc(33,cs,2,1,"ng-container",0),s.Ub(),s.Vb(34,"tfoot"),s.Vb(35,"tr"),s.Vb(36,"td",93),s.Vb(37,"button",77),s.dc("click",(function(){return s.Dc(t),s.hc(2).generateWorklogFields()})),s.Lc(38," Generate"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(39,"div",13),s.Vb(40,"div",78),s.Qb(41,"div",79),s.Ub(),s.Vb(42,"div",34),s.Vb(43,"table",80),s.Vb(44,"tbody"),s.Vb(45,"tr"),s.Vb(46,"td",72),s.Vb(47,"strong"),s.Lc(48,"Total Working Hours"),s.Ub(),s.Ub(),s.Vb(49,"td",81),s.Vb(50,"strong"),s.Lc(51),s.Ub(),s.Ub(),s.Ub(),s.Vb(52,"tr"),s.Vb(53,"td"),s.Lc(54,"Total Breakdown Hours "),s.Ub(),s.Vb(55,"td",82),s.Lc(56),s.Ub(),s.Ub(),s.Vb(57,"tr"),s.Vb(58,"td"),s.Lc(59,"Total Overtime Hours"),s.Ub(),s.Vb(60,"td",82),s.Lc(61),s.Ub(),s.Ub(),s.Vb(62,"tr"),s.Vb(63,"td"),s.Lc(64,"Total Billable Hours"),s.Ub(),s.Vb(65,"td",82),s.Lc(66),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=s.hc(2);s.Cb(33),s.oc("ngIf",t.myForm.controls.itemListArray.controls.length>0),s.Cb(18),s.Nc(" ",t.myForm.controls.totalWorkingHours.value," "),s.Cb(5),s.Nc(" ",t.myForm.controls.totalBreakDownHours.value," "),s.Cb(5),s.Nc(" ",t.myForm.controls.totalOverTimeHours.value," "),s.Cb(5),s.Nc(" ",t.myForm.controls.totalBillableHours.value," ")}}function ms(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",6),s.dc("click",(function(){return s.Dc(t),s.hc(2).saveUpdate()})),s.Qb(1,"i",102),s.Vb(2,"span"),s.Lc(3,"Save"),s.Ub(),s.Ub()}}function ls(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",6),s.dc("click",(function(){return s.Dc(t),s.hc(2).addUpdateDraft()})),s.Qb(1,"i",102),s.Vb(2,"span"),s.Lc(3,"Save as Draft"),s.Ub(),s.Ub()}}function bs(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",3),s.dc("click",(function(){return s.Dc(t),s.hc(2).clearForm()})),s.Qb(1,"i",103),s.Vb(2,"span"),s.Lc(3,"Clear"),s.Ub(),s.Ub()}}function ds(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",6),s.dc("click",(function(){return s.Dc(t),s.hc(2).saveUpdate()})),s.Qb(1,"i",59),s.Vb(2,"span"),s.Lc(3,"Update"),s.Ub(),s.Ub()}}function hs(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",3),s.dc("click",(function(){return s.Dc(t),s.hc(2).utilsService.redirect("/branch/rental/worklog-list")})),s.Qb(1,"i",104),s.Vb(2,"span"),s.Lc(3,"Cancel"),s.Ub(),s.Ub()}}function ps(t,e){1&t&&(s.Vb(0,"div",107),s.Vb(1,"span",108),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," You are unauthorized to "),s.Vb(4,"strong"),s.Lc(5,"update"),s.Ub(),s.Lc(6," this transaction! "),s.Ub())}function gs(t,e){1&t&&(s.Vb(0,"div",107),s.Vb(1,"span",108),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," Cannot update "),s.Vb(4,"strong"),s.Lc(5,"Cancelled"),s.Ub(),s.Lc(6," / "),s.Vb(7,"strong"),s.Lc(8,"Closed"),s.Ub(),s.Lc(9," transactions! "),s.Ub())}function fs(t,e){if(1&t&&(s.Vb(0,"div",105),s.Vb(1,"div"),s.Vb(2,"strong"),s.Lc(3,"Created By:"),s.Ub(),s.Lc(4),s.Ub(),s.Jc(5,ps,7,0,"div",106),s.Jc(6,gs,10,0,"div",106),s.Ub()),2&t){const t=s.hc(2);s.Cb(4),s.Nc(" ",t.txnKeys.editCreatedName,""),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"updateAclNote")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"updateNote"))}}function ys(t,e){1&t&&(s.Vb(0,"div",105),s.Vb(1,"span",108),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," You are unauthorized to "),s.Vb(4,"strong"),s.Lc(5,"add"),s.Ub(),s.Lc(6," this transaction!. "),s.Ub())}function vs(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"div",1),s.Vb(2,"span"),s.Lc(3),s.Ub(),s.Lc(4),s.Jc(5,gn,2,0,"ng-container",0),s.Jc(6,fn,2,0,"ng-container",0),s.Vb(7,"div",2),s.Vb(8,"button",3),s.dc("click",(function(){return s.Dc(t),s.hc().utilsService.goBack()})),s.Qb(9,"i",4),s.Vb(10,"span"),s.Lc(11,"Back"),s.Ub(),s.Ub(),s.Jc(12,yn,4,0,"button",5),s.Vb(13,"button",6),s.dc("click",(function(){return s.Dc(t),s.hc().showTxnOptionsSidebar()})),s.Qb(14,"i",7),s.Vb(15,"span"),s.Lc(16,"More"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(17,"div",8),s.Vb(18,"div",9),s.Vb(19,"div",10),s.Qb(20,"i",11),s.Lc(21,"Basic Info "),s.Ub(),s.Vb(22,"div",12),s.Vb(23,"div",13),s.Vb(24,"div",14),s.Vb(25,"label",15),s.Lc(26,"Doc No"),s.Vb(27,"span",16),s.Lc(28,"*"),s.Ub(),s.Ub(),s.Vb(29,"div",13),s.Vb(30,"div",17),s.Vb(31,"ng-select",18),s.dc("change",(function(){s.Dc(t);const e=s.hc();return e.branchUtilsService.onDocumentNumberingChange(e.documentNumberingList,e.myForm)})),s.Ub(),s.Ub(),s.Vb(32,"div",17),s.Qb(33,"input",19),s.Ub(),s.Ub(),s.Jc(34,vn,2,1,"div",20),s.Ub(),s.Vb(35,"div",14),s.Vb(36,"label",15),s.Lc(37,"Item Name"),s.Vb(38,"span",16),s.Lc(39,"*"),s.Ub(),s.Ub(),s.Vb(40,"ng-select",21),s.dc("search",(function(e){return s.Dc(t),s.hc().onItemSearch(e)}))("change",(function(){return s.Dc(t),s.hc().onItemChange()})),s.Jc(41,Sn,4,2,"ng-template",22),s.Ub(),s.Jc(42,In,2,1,"div",20),s.Ub(),s.Vb(43,"div",14),s.Vb(44,"label",15),s.Lc(45,"Equipment card"),s.Vb(46,"span",16),s.Lc(47,"*"),s.Ub(),s.Ub(),s.Qb(48,"ng-select",23),s.Ub(),s.Vb(49,"div",14),s.Vb(50,"label",15),s.Lc(51,"Business Partner Name"),s.Vb(52,"span",16),s.Lc(53,"*"),s.Ub(),s.Ub(),s.Vb(54,"div",24),s.Vb(55,"ng-select",25),s.dc("focus",(function(){return s.Dc(t),s.hc().onCustomerNameChange()}))("change",(function(){s.Dc(t);const e=s.hc();return e.getCustomerBpContactList(),e.showTxnOptionsSidebar(!1)})),s.Jc(56,Cn,4,2,"ng-template",22),s.Ub(),s.Vb(57,"span"),s.Jc(58,Un,2,0,"a",26),s.Jc(59,Ln,2,0,"a",27),s.Ub(),s.Jc(60,Vn,2,0,"span",28),s.Ub(),s.Jc(61,Dn,2,1,"div",20),s.Ub(),s.Vb(62,"div",14),s.Vb(63,"label",15),s.Lc(64,"Contact Person"),s.Ub(),s.Vb(65,"ng-select",29),s.Jc(66,Nn,4,3,"ng-template",22),s.Ub(),s.Ub(),s.Vb(67,"div",14),s.Vb(68,"label",15),s.Lc(69,"Reference No"),s.Ub(),s.Qb(70,"input",30),s.Ub(),s.Vb(71,"div",14),s.Vb(72,"label",15),s.Lc(73,"Start Date"),s.Vb(74,"span",16),s.Lc(75,"*"),s.Ub(),s.Ub(),s.Vb(76,"p-calendar",31),s.dc("onFocus",(function(){return s.Dc(t),s.hc().onBasicDateChange()})),s.Ub(),s.Jc(77,Fn,2,1,"div",32),s.Ub(),s.Vb(78,"div",14),s.Vb(79,"label",15),s.Lc(80,"End Date"),s.Vb(81,"span",16),s.Lc(82,"*"),s.Ub(),s.Ub(),s.Vb(83,"p-calendar",33),s.dc("onFocus",(function(){return s.Dc(t),s.hc().onBasicDateChange()})),s.Ub(),s.Jc(84,En,2,1,"div",20),s.Jc(85,Tn,2,1,"div",20),s.Ub(),s.Vb(86,"div",14),s.Vb(87,"label",15),s.Lc(88,"Shift Start Time"),s.Vb(89,"span",16),s.Lc(90,"*"),s.Ub(),s.Ub(),s.Vb(91,"div",13),s.Vb(92,"div",34),s.Vb(93,"ng-select",35),s.dc("focus",(function(){return s.Dc(t),s.hc().onBasicDateChange()})),s.Ub(),s.Ub(),s.Vb(94,"div",34),s.Vb(95,"ng-select",36),s.dc("focus",(function(){return s.Dc(t),s.hc().onBasicDateChange()})),s.Ub(),s.Ub(),s.Ub(),s.Jc(96,xn,2,1,"div",20),s.Ub(),s.Vb(97,"div",14),s.Vb(98,"label",15),s.Lc(99,"Shift End Time"),s.Vb(100,"span",16),s.Lc(101,"*"),s.Ub(),s.Ub(),s.Vb(102,"div",13),s.Vb(103,"div",34),s.Vb(104,"ng-select",37),s.dc("focus",(function(){return s.Dc(t),s.hc().onBasicDateChange()})),s.Ub(),s.Ub(),s.Vb(105,"div",34),s.Vb(106,"ng-select",38),s.dc("focus",(function(){return s.Dc(t),s.hc().onBasicDateChange()})),s.Ub(),s.Ub(),s.Ub(),s.Jc(107,An,2,1,"div",32),s.Jc(108,Rn,2,1,"div",20),s.Ub(),s.Vb(109,"div",14),s.Vb(110,"label",15),s.Lc(111,"Document Date"),s.Vb(112,"span",16),s.Lc(113,"*"),s.Ub(),s.Ub(),s.Qb(114,"p-calendar",39),s.Jc(115,Mn,2,1,"div",20),s.Ub(),s.Vb(116,"div",14),s.Vb(117,"label",15),s.Lc(118,"Employee"),s.Ub(),s.Vb(119,"div",40),s.Vb(120,"ng-select",41),s.Jc(121,kn,4,2,"ng-template",22),s.Ub(),s.Ub(),s.Jc(122,wn,2,1,"div",20),s.Ub(),s.Vb(123,"div",14),s.Vb(124,"label",15),s.Lc(125,"Status"),s.Vb(126,"span",16),s.Lc(127,"*"),s.Ub(),s.Ub(),s.Vb(128,"select",42),s.Jc(129,On,2,2,"option",43),s.Ub(),s.Jc(130,qn,2,1,"div",20),s.Ub(),s.Vb(131,"div",14),s.Vb(132,"label",15),s.Lc(133,"Distribution Rules"),s.Jc(134,Pn,2,0,"span",44),s.Ub(),s.Vb(135,"ng-select",45),s.dc("add",(function(){return s.Dc(t),s.hc().onDistRuleAdd()})),s.Ub(),s.Ub(),s.Vb(136,"div",46),s.Vb(137,"label",15),s.Lc(138,"Remarks"),s.Ub(),s.Qb(139,"textarea",47),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(140,"div",9),s.Vb(141,"div",10),s.Qb(142,"i",11),s.Lc(143,"Content Info "),s.Ub(),s.Jc(144,$n,71,4,"div",0),s.Jc(145,us,67,5,"div",0),s.Ub(),s.Qb(146,"app-udf-viewer",48),s.Vb(147,"app-attachments",49),s.dc("doSuccess",(function(){return s.Dc(t),s.hc().utilsService.redirect("/branch/rental/worklog-list")})),s.Ub(),s.Vb(148,"div",50),s.Jc(149,ms,4,0,"button",5),s.Jc(150,ls,4,0,"button",5),s.Jc(151,bs,4,0,"button",51),s.Jc(152,ds,4,0,"button",5),s.Jc(153,hs,4,0,"button",52),s.Ub(),s.Jc(154,fs,7,3,"div",53),s.Jc(155,ys,7,0,"div",53),s.Ub(),s.Qb(156,"app-spi-txn-options"),s.Sb()}if(2&t){const t=s.hc();s.Cb(3),s.Mc(t.branchUtilsService.txnGetTitle(t.screenAttributes.title,!0)),s.Cb(1),s.Nc("",t.branchUtilsService.txnGetTitle(t.screenAttributes.title)," - "),s.Cb(1),s.oc("ngIf",!t.txnKeys.inputEditId),s.Cb(1),s.oc("ngIf",t.txnKeys.inputEditId),s.Cb(6),s.oc("ngIf",t.txnKeys.inputEditId),s.Cb(5),s.oc("formGroup",t.myForm),s.Cb(14),s.oc("items",t.documentNumberingList),s.Cb(3),s.oc("ngIf",t.myFormErrors.documentNumberingId||t.myFormErrors.documentNumber),s.Cb(6),s.oc("items",t.itemList)("multiple",!1)("virtualScroll",!0),s.Cb(2),s.oc("ngIf",t.myFormErrors.rentalItemId),s.Cb(6),s.oc("items",t.myFormData.equipmentList)("multiple",!1),s.Cb(7),s.oc("items",t.businessPartnerList)("multiple",!1),s.Cb(3),s.oc("ngIf",!t.bizRefreshFlag),s.Cb(1),s.oc("ngIf",t.bizRefreshFlag),s.Cb(1),s.oc("ngIf",t.myFormData.customerBpId),s.Cb(1),s.oc("ngIf",t.myFormErrors.customerBpId),s.Cb(4),s.oc("items",t.bpContactList)("multiple",!1),s.Cb(11),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",t.myFormErrors.startDate),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",t.myFormErrors.endDate),s.Cb(1),s.oc("ngIf",null==t.myForm.errors?null:t.myForm.errors.invalidEndDate),s.Cb(8),s.oc("items",t.appConstants.HOURS_ARRAY)("multiple",!1)("clearable",!1),s.Cb(2),s.oc("items",t.appConstants.MINUTES_ARRAY)("multiple",!1)("clearable",!1),s.Cb(1),s.oc("ngIf",t.myFormErrors.shiftStartHour||t.myFormErrors.shiftStartMinute),s.Cb(8),s.oc("items",t.appConstants.HOURS_ARRAY)("multiple",!1),s.Cb(2),s.oc("items",t.appConstants.MINUTES_ARRAY)("multiple",!1),s.Cb(1),s.oc("ngIf",t.myFormErrors.shiftEndHour||t.myFormErrors.shiftEndMinute),s.Cb(1),s.oc("ngIf",null==t.myForm.errors?null:t.myForm.errors.invalidShiftEndTime),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.appConstants.PICKER_YEAR_RANGE)("dateFormat",t.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",t.myFormErrors.documentDate),s.Cb(5),s.oc("items",t.employeeList)("multiple",!1),s.Cb(2),s.oc("ngIf",t.myFormErrors.empId),s.Cb(7),s.oc("ngForOf",t.rentalStatusList),s.Cb(1),s.oc("ngIf",t.myFormErrors.status),s.Cb(4),s.oc("ngIf",t.storageService.get("distRulesMode")),s.Cb(1),s.oc("items",t.distributionList)("multiple",!0),s.Cb(9),s.oc("ngIf","1"===t.storageService.get("worklogType")),s.Cb(1),s.oc("ngIf","2"===t.storageService.get("worklogType")),s.Cb(1),s.oc("type","RENTAL_WORKLOG"),s.Cb(1),s.oc("type","RENTAL_WORKLOG"),s.Cb(2),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"save")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"saveDraft")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"clear")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"update")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"cancel")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"editMsgContainer")),s.Cb(1),s.oc("ngIf",t.branchUtilsService.txnValidateBtn(t.myForm,t.txnKeys,"addAclNote"))}}let Ss=(()=>{class t{constructor(t,e,i,r,s,o,a,c,u,m,l,b,d){this.utilsService=t,this.storageService=e,this.authGuardService=i,this.worklogUtilsService=r,this.commonDataService=s,this.branchUtilsService=o,this.formBuilder=a,this.activatedRoute=c,this.popupExternalService=u,this.rentalWorklogDataService=m,this.rentalOrderDataService=l,this.modalService=b,this.changeDetectorRef=d,this.appConstants=n.h,this.screenAcl={},this.txnKeys={inputScreenName:"",inputEditId:"",inputDraftId:"",inputCopyIds:"",inputCopyScreenName:"",inputDuplicateId:"",editStatusId:"",editCreatedName:""},this.screenAttributes={},this.rentalStatusList=[],this.bpContactList=[],this.businessPartnerList=[],this.employeeList=[],this.documentNumberingList=[],this.itemList=[],this.bizRefreshFlag=!1,this.workLogItemList=[],this.distributionList=[],this.myFormData={},this.myFormErrors={},this.myFormItemErrors={worklogItemTypeId:"",startDateTime:"",endDateTime:""},this.myFormValidationMsgs={}}ngOnInit(){this.initializeSubscriptions()}ngAfterViewInit(){this.attachmentsComponent&&this.udfViewerComponent&&(this.attachmentsComponent.loadAttachments(this.txnKeys.inputEditId||this.txnKeys.inputDraftId),this.udfViewerComponent.getFields(this.txnKeys.inputEditId||this.txnKeys.inputDuplicateId||this.txnKeys.inputDraftId),this.changeDetectorRef.detectChanges())}initializeSubscriptions(){this.activatedRoute.params.subscribe(t=>{if(!this.worklogUtilsService.checkScreenNameValid(t.screenName))return this.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),this.utilsService.goBack(),!1;if(this.screenAcl=this.authGuardService.getScreenAcl(this.branchUtilsService.screenAttributes[t.screenName].documentTypeId),!this.screenAcl.view)return this.utilsService.showFailureMsg(n.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;if(this.reInitializeGlobalVariables(),this.txnKeys.inputScreenName=t.screenName,this.transactionInitialization(),t.id&&(this.txnKeys.inputEditId=this.utilsService.decrypt(t.id),this.get()),t.copyScreenName&&t.copyId){const e=this.utilsService.decrypt(t.copyId);this.txnKeys.inputCopyIds=e.split(","),this.txnKeys.inputCopyScreenName=t.copyScreenName,this.copyFrom()}t.duplicateId&&(this.txnKeys.inputDuplicateId=this.utilsService.decrypt(t.duplicateId),this.getDuplicate()),t.draftId&&(this.txnKeys.inputDraftId=this.utilsService.decrypt(t.draftId),this.getDraft()),this.txnKeys.inputEditId||this.txnKeys.inputCopyIds||this.txnKeys.inputDuplicateId||this.txnKeys.inputDraftId||(this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),this.getCustomerBpList(),this.getEmployeeList(),this.getAutoSuggestionList("getRentalTransStatusList"),this.getAutoSuggestionList("getRentalItemList"),this.getAutoSuggestionList("getWorklogItemTypeList"),this.getDistributionList())}),this.inspectionItemDataSubscription=this.branchUtilsService.inspectionItemData.subscribe(t=>{this.copyWorklogItem(t)}),this.branchUtilsService.itemSearch.pipe(Object(k.a)(700),Object(w.a)(),Object(O.a)(t=>{this.getItemList(t)})).subscribe()}reInitializeGlobalVariables(){this.txnKeys.inputEditId="",this.txnKeys.inputScreenName="",this.txnKeys.inputCopyIds="",this.txnKeys.inputDuplicateId="",this.txnKeys.inputCopyScreenName="",this.txnKeys.editStatusId="",this.txnKeys.editCreatedName="",this.screenAttributes={},this.rentalStatusList=[],this.bpContactList=[],this.businessPartnerList=[],this.employeeList=[],this.documentNumberingList=[],this.itemList=[],this.bizRefreshFlag=!1,this.workLogItemList=[],this.distributionList=[]}transactionInitialization(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.txnKeys.inputScreenName],this.myFormErrors=this.worklogUtilsService.getFormErrors(),this.myFormValidationMsgs=this.worklogUtilsService.getFormValMsgs(),this.initializeForm()}initializeForm(){this.myForm=this.worklogUtilsService.getFormMainFields(),this.myForm.valueChanges.subscribe(t=>{this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs),this.myFormData=this.myForm.getRawValue()}),this.myFormData=this.myForm.getRawValue()}saveUpdate(){const t=this.myForm.getRawValue(),e=u.findIndex(this.documentNumberingList,{id:t.documentNumberingId});if("DRAFT"===this.documentNumberingList[e].documentNumberingType)return this.utilsService.showFailureMsg("Cannot Proceed - Select other than draft document numbering from Doc No field!"),!1;if(!this.myForm.valid||!this.udfViewerComponent.valid())return this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs,!0),this.udfViewerComponent.checkValidations(),!1;if(0===this.myFormData.itemListArray.length)return this.utilsService.showFailureMsg("Cannot save / update - No item added!"),!1;const i=this.worklogUtilsService.getSaveUpdateDataFormation(this.myForm);let r;i.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),i.isDraft=this.txnKeys.inputDraftId?"2":"0",this.txnKeys.inputEditId||this.txnKeys.inputDraftId?(r="update",i.id=this.txnKeys.inputEditId||this.txnKeys.inputDraftId):r="save",this.rentalWorklogDataService[r](i).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.attachmentsComponent.save("save"===r?t.sId:this.txnKeys.inputEditId||this.txnKeys.inputDraftId)):this.utilsService.showFailureMsg(t)})}addUpdateDraft(){const t=this.myForm.getRawValue(),e=u.findIndex(this.documentNumberingList,{id:t.documentNumberingId});if("DRAFT"!==this.documentNumberingList[e].documentNumberingType)return this.utilsService.showFailureMsg("Cannot Proceed - Select draft document numbering from Doc No field!"),!1;if(0===t.itemListArray.length)return this.utilsService.showFailureMsg("Cannot save / update draft - No item added!"),!1;const i=this.worklogUtilsService.getSaveUpdateDataFormation(this.myForm);let r;i.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),i.isDraft="1",this.txnKeys.inputDraftId?(r="update",i.id=this.txnKeys.inputDraftId):r="save",this.rentalWorklogDataService[r](i).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.attachmentsComponent.save("save"===r?t.sId:this.txnKeys.inputDraftId)):this.utilsService.showFailureMsg(t)})}get(){this.rentalWorklogDataService.get(this.txnKeys.inputEditId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results,i=this.worklogUtilsService.getMainFieldsWithData(e);this.myForm.patchValue(i),this.myForm.controls.documentNumberingId.disable(),this.myForm.controls.documentNumber.disable(),this.myForm.controls.rentalItemId.disable(),this.myForm.controls.rentalEquipmentId.disable(),this.myForm.controls.customerBpId.disable(),this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.branchUtilsService.screenAttributes.worklog.documentTypeId,"edit",e.documentNumberingInfo).subscribe(t=>{this.documentNumberingList=t}),this.getCustomerBpList(!0,e.customerBpInfo),this.getEmployeeList(e.empInfo),this.getAutoSuggestionList("getRentalTransStatusList",e.statusInfo),this.getItemList("",!0,e.rentalItemInfo),this.getAutoSuggestionList("getWorklogItemTypeList"),this.getDistributionList(e.distributionRulesInfo),e.itemListArray.forEach(t=>{"1"===this.storageService.get("worklogType")?this.addItemFields(t):this.addItemFieldsType2("","",t)}),"1"===this.storageService.get("worklogType")?this.worklogUtilsService.overAllTimeCalc(this.myForm):this.worklogUtilsService.timeCalc(this.myForm),this.txnKeys.editStatusId=e.status,this.txnKeys.editCreatedName=e.createdByInfo[0].employeeName}else this.utilsService.showFailureMsg(t)})}copyFrom(){this.rentalOrderDataService.copy(this.txnKeys.inputCopyIds).subscribe(t=>{if("SUCCESS"===t.status){const e={backdrop:"static"};e.initialState={list:t.results,inputScreenName:this.txnKeys.inputScreenName},this.modalService.show(Sr,e)}else this.utilsService.showFailureMsg(t)})}copyWorklogItem(t){delete t.documentNumberingId,delete t.documentNumber,delete t.documentNumberingInfo;const e=this.worklogUtilsService.getMainFieldsWithData(t);this.myForm.patchValue(e),this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),this.myForm.controls.rentalItemId.disable(),this.myForm.controls.rentalEquipmentId.disable(),this.myForm.controls.customerBpId.disable(),this.getCustomerBpList(!0,t.customerBpInfo),this.getEmployeeList(t.empInfo),this.getAutoSuggestionList("getRentalTransStatusList",t.statusInfo),this.getItemList("",!0,t.rentalItemInfo),this.getAutoSuggestionList("getWorklogItemTypeList"),this.getDistributionList(t.distributionRulesInfo)}getDraft(){this.rentalWorklogDataService.get(this.txnKeys.inputDraftId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results,i=this.worklogUtilsService.getMainFieldsWithData(e);this.myForm.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId,"draft",e.documentNumberingInfo).subscribe(t=>{this.documentNumberingList=t}),this.getCustomerBpList(!0,e.customerBpInfo),this.getEmployeeList(e.empInfo),this.getAutoSuggestionList("getRentalTransStatusList",e.statusInfo),this.getItemList("",!0,e.rentalItemInfo),this.getAutoSuggestionList("getWorklogItemTypeList"),this.getDistributionList(e.distributionRulesInfo),e.itemListArray.forEach(t=>{"1"===this.storageService.get("worklogType")?this.addItemFields(t):this.addItemFieldsType2("","",t)}),"1"===this.storageService.get("worklogType")?this.worklogUtilsService.overAllTimeCalc(this.myForm):this.worklogUtilsService.timeCalc(this.myForm),this.txnKeys.editStatusId=e.status,this.txnKeys.editCreatedName=e.createdByInfo[0].employeeName}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}getDuplicate(){this.rentalWorklogDataService.get(this.txnKeys.inputDuplicateId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results;delete e.documentNumberingId,delete e.documentNumber,delete e.documentNumberingInfo,delete e.status;const i=this.worklogUtilsService.getMainFieldsWithData(e);this.myForm.patchValue(i),this.branchUtilsService.getMasterDocumentNumbering(this.myForm,this.screenAttributes.documentTypeId).subscribe(t=>{this.documentNumberingList=t}),this.getCustomerBpList(!0,e.customerBpInfo),this.getEmployeeList(e.empInfo),this.getAutoSuggestionList("getRentalTransStatusList",e.statusInfo),this.getItemList("",!0,e.rentalItemInfo),this.getAutoSuggestionList("getWorklogItemTypeList"),this.getDistributionList(e.distributionRulesInfo),e.itemListArray.forEach(t=>{"1"===this.storageService.get("worklogType")?this.addItemFields(t):this.addItemFieldsType2("","",t)}),"1"===this.storageService.get("worklogType")?this.worklogUtilsService.overAllTimeCalc(this.myForm):this.worklogUtilsService.timeCalc(this.myForm)}else this.utilsService.showFailureMsg(t),this.utilsService.goBack()})}addItemFields(t){this.myForm.controls.itemListArray.push(this.initItemFields(t))}initItemFields(t){const e=d(this.myFormData.endDate).add(1,"days"),i={totalHours:0,worklogItemTypeId:"",startDateTime:"",endDateTime:"",empId:null,startDate:this.utilsService.getFrontendDateFormat(this.myFormData.startDate,!0),endDate:this.utilsService.getFrontendDateFormat(e,!0),remarks:"",id:""};t&&(i.worklogItemTypeId=t.worklogItemTypeId,i.startDateTime=this.utilsService.getFrontendDateFormat(t.startDateTime,!0),i.endDateTime=this.utilsService.getFrontendDateFormat(t.endDateTime,!0),i.empId=this.utilsService.isEmpty(t.empId)?null:t.empId,i.startDate=this.utilsService.getFrontendDateFormat(this.myFormData.startDate,!0),i.endDate=this.utilsService.getFrontendDateFormat(e,!0),i.totalHours=t.totalHours,i.remarks=t.remarks,i.id=t.id),this.myFormErrors.itemListArray.push(this.myFormItemErrors);const r=this.formBuilder.group({totalHours:[i.totalHours],worklogItemTypeId:[i.worklogItemTypeId,[a.u.required]],startDateTime:[i.startDateTime,[a.u.required]],endDateTime:[i.endDateTime,[a.u.required]],empId:[i.empId],startDate:[i.startDate],endDate:[i.endDate],remarks:[i.remarks],id:[i.id]});return this.setItemCustomValidation(r),r}setItemCustomValidation(t){const e=[];e.push(this.utilsService.startEndDateTimeValidator("startDate","startDateTime","invalidItemStartDateTime","should >= Basic info start Date")),e.push(this.utilsService.startEndDateTimeValidator("endDateTime","endDate","invalidItemEndDateTime","should =< Basic info end date")),e.push(this.utilsService.startEndDateTimeValidator("startDateTime","endDateTime","invalidEndDateTime","Should >= Start Date Time")),t.setValidators(a.u.compose(e)),t.updateValueAndValidity()}generateWorklogFields(){this.myFormData.startDate&&this.myFormData.endDate?this.myFormData.itemListArray.length>1?this.utilsService.confirmDialog("Confirmation","Regenerate leads to remove the items. Do you want to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe(t=>{t&&(this.myForm.controls.itemListArray.clear(),this.workLogGeneration())}):this.workLogGeneration():this.utilsService.showFailureMsg("Please add start date and end date to generate fields")}workLogGeneration(){const t=d(this.myFormData.startDate,"YYYY-MM-DD"),e=d(this.myFormData.endDate,"YYYY-MM-DD").diff(t,"days");for(let i=0;i<=e;i++){const t=d(this.myFormData.startDate).add(i,"days"),e=t.day(),r=this.appConstants.WEEK_DAY[e],n=this.utilsService.getFrontendDateFormat(t);this.addItemFieldsType2(n,r),this.onShiftTimeChange(i)}}addItemFieldsType2(t,e,i){this.myForm.controls.itemListArray.push(t?this.initItemFieldsType2(t,e):this.initItemFieldsType2("","",i))}initItemFieldsType2(t,e,i){const r={day:e,date:t,shiftStartHour:this.myFormData.shiftStartHour?this.myFormData.shiftStartHour:"00",shiftStartMinute:this.myFormData.shiftStartMinute?this.myFormData.shiftStartMinute:"00",shiftEndHour:this.myFormData.shiftEndHour?this.myFormData.shiftEndHour:"00",shiftEndMinute:this.myFormData.shiftEndMinute?this.myFormData.shiftEndMinute:"00",totalHours:0,breakdownHour:"00",breakdownMinute:"00",overtimeHour:"00",overtimeMinute:"00",billableHour:0,id:""};i&&(r.day=i.entryDay,r.date=this.utilsService.getFrontendDateFormat(i.entryDate),r.shiftStartHour=i.shiftStartTime.substring(0,2),r.shiftStartMinute=i.shiftStartTime.substring(3,5),r.shiftEndHour=i.shiftEndTime.substring(0,2),r.shiftEndMinute=i.shiftEndTime.substring(3,5),r.totalHours=i.totalHours,r.breakdownHour=i.breakdownHours.substring(0,2),r.breakdownMinute=i.breakdownHours.substring(3,5),r.overtimeHour=i.overtimeHours.substring(0,2),r.overtimeMinute=i.overtimeHours.substring(3,5),r.billableHour=i.billableHours,r.id=i.id);const n=this.formBuilder.group({day:[r.day],date:[r.date],shiftStartHour:[r.shiftStartHour],shiftStartMinute:[r.shiftStartMinute],shiftEndHour:[r.shiftEndHour],shiftEndMinute:[r.shiftEndMinute],totalHours:[r.totalHours],breakdownHour:[r.breakdownHour],breakdownMinute:[r.breakdownMinute],overtimeHour:[r.overtimeHour],overtimeMinute:[r.overtimeMinute],billableHour:[r.billableHour],id:[r.id]});return this.setItemCustomValidationType2(n),n}setItemCustomValidationType2(t){t.getRawValue();const e=[];e.push(this.utilsService.startEndTimeValidator("shiftStartHour","shiftStartMinute","shiftEndHour","shiftEndMinute","invalidShiftEndTime","Should >= shift start time")),t.setValidators(a.u.compose(e)),t.updateValueAndValidity()}removeItemFields(t){const e=this.myFormData.itemListArray[t].id;if(e){const t=this.myFormData.deletedItemChildIds;t.push(e),this.myForm.patchValue({deletedItemChildIds:t})}this.myForm.controls.itemListArray.removeAt(t),"1"===this.storageService.get("worklogType")?this.worklogUtilsService.overAllTimeCalc(this.myForm):this.worklogUtilsService.timeCalc(this.myForm)}clearForm(){this.initializeForm()}onItemSearch(t){this.branchUtilsService.itemSearch.next(t)}onItemChange(){if(this.myFormData.rentalItemId){const t=u.findIndex(this.itemList,t=>this.myFormData.rentalItemId===t.id);this.myForm.patchValue({equipmentList:this.itemList[t].rentalEquipmentList})}else this.myForm.patchValue({equipmentList:[],rentalEquipmentId:null})}onCustomerNameChange(){if(this.myFormData.customerBpId){const t=this.myForm.controls.itemListArray;t.length>0&&this.utilsService.confirmDialog("Confirmation","If changing the customer leads to remove the items. Do you want to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe(e=>{e&&(this.myForm.patchValue({customerBpId:null}),t.clear())})}}onBasicDateChange(){if(this.myFormData.startDate&&this.myFormData.endDate&&this.myFormData.shiftStartHour&&this.myFormData.shiftStartMinute&&this.myFormData.shiftEndHour&&this.myFormData.shiftEndMinute){const t=this.myForm.controls.itemListArray;t.length>0&&this.utilsService.confirmDialog("Confirmation","If start date and end date leads to remove the items. Do you want to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe(e=>{e&&(this.myFormData.itemListArray.forEach(t=>{if(t.id){const e=this.myFormData.deletedItemChildIds;e.push(t.id),this.myForm.patchValue({deletedItemChildIds:e})}}),t.clear())})}}onDateChange(t){if(this.myFormData.startDate&&this.myFormData.endDate){if(this.myFormData.itemListArray[t].startDateTime&&this.myFormData.itemListArray[t].endDateTime){const e=this.myForm.controls.itemListArray.at(t),i=d(this.myFormData.itemListArray[t].startDateTime,"YYYY-MM-DD HH:mm"),r=d(this.myFormData.itemListArray[t].endDateTime,"YYYY-MM-DD HH:mm"),n=this.worklogUtilsService.totalHoursCalc(i,r);e.patchValue({totalHours:n}),this.worklogUtilsService.overAllTimeCalc(this.myForm)}}else this.utilsService.showFailureMsg("Please select start date, end date to add start time and end time"),this.myForm.controls.itemListArray.at(t).patchValue({startDateTime:"",endDateTime:""})}onShiftTimeChange(t){const e=this.myForm.controls.itemListArray.at(t),i=`${this.myFormData.itemListArray[t].shiftEndHour}:${this.myFormData.itemListArray[t].shiftEndMinute}`,r=d(`${this.myFormData.itemListArray[t].shiftStartHour}:${this.myFormData.itemListArray[t].shiftStartMinute}`,"HH:mm"),n=d(i,"HH:mm"),s=this.worklogUtilsService.totalHoursCalc(r,n),o=this.worklogUtilsService.totalBillableHour(s,`${this.myFormData.itemListArray[t].breakdownHour}:${this.myFormData.itemListArray[t].breakdownMinute}`,`${this.myFormData.itemListArray[t].overtimeHour}:${this.myFormData.itemListArray[t].overtimeMinute}`);e.patchValue({totalHours:s,billableHour:o}),this.worklogUtilsService.timeCalc(this.myForm)}onDistRuleAdd(){this.branchUtilsService.distRulesCheckUnique(this.distributionList,this.myForm,"distributionRulesId")}getItemList(t,e,i,r){return e?(this.itemList=i.map(t=>(t.searchText=t.rentalItemName+" - "+t.rentalItemCode,t)),!1):!t.term||t.term.length<3?(this.itemList=[],!1):void this.commonDataService.getRentalItemList(t.term).subscribe(t=>{"SUCCESS"===t.status?this.itemList=t.results.map(t=>(t.searchText=t.rentalItemName+" - "+t.rentalItemCode,t)):this.utilsService.showFailureMsg(t)})}getEmployeeList(t){this.commonDataService.getEmployeeList(1).subscribe(e=>{"SUCCESS"===e.status?(this.utilsService.ifNotPushToList(e.results,t),this.employeeList=e.results.map(t=>(t.searchText=t.employeeName+" - "+t.empCode,t))):this.utilsService.showFailureMsg(e)})}getCustomerBpList(t,e){this.commonDataService.getBusinessPartnerList([1,3]).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.ifNotPushToList(t.results,e),this.businessPartnerList=t.results.map(t=>(t.searchText=t.partnerName+" - "+t.partnerCode,t))):this.utilsService.showFailureMsg(t)})}getCustomerBpContactList(t,e){this.bpContactList=[],this.branchUtilsService.getBpContactListAndSet(this.myForm,"customerBpContactsId","customerBpId",t,e).subscribe(t=>{this.bpContactList=t})}getAutoSuggestionList(t,e){this.commonDataService.getAutoSuggestionList(t).subscribe(i=>{"SUCCESS"===i.status?(this.utilsService.ifNotPushToList(i.results,e),"getRentalTransStatusList"===t?(this.txnKeys.inputEditId||(i.results=i.results.filter(t=>"1"===t.id)),this.txnKeys.inputEditId&&(i.results=i.results.filter(t=>"2"!==t.id)),this.rentalStatusList=i.results):"getWorklogItemTypeList"===t&&(this.workLogItemList=i.results)):this.utilsService.showFailureMsg(i)})}getDistributionList(t){this.commonDataService.getDistributionList(!0).subscribe(e=>{"SUCCESS"===e.status?(this.utilsService.ifNotPushToList(e.results,t),this.distributionList=e.results):this.utilsService.showFailureMsg(e)})}upload(){if(!this.myFormData.startDate&&!this.myFormData.endDate)return this.utilsService.showFailureMsg("Please select start date and end date!"),!1;const t=this.fileUpload.nativeElement.files||this.fileUpload.srcElement.files;if(0===t.length)return this.utilsService.showFailureMsg("Please select the file!"),!1;0===this.myFormData.itemListArray.length?this.uploadContentInfo(t):this.utilsService.confirmDialog("Confirmation","Excel upload will append the items, Do you want to continue?").content.confirmation.subscribe(e=>{e&&this.uploadContentInfo(t)})}uploadContentInfo(t){this.rentalWorklogDataService.upload(t).subscribe(t=>{"SUCCESS"===t.status?(this.formatExcelData(t.data).forEach(t=>{this.addItemFields(t)}),this.worklogUtilsService.overAllTimeCalc(this.myForm)):this.utilsService.showFailureMsg(t),this.fileUpload.nativeElement.value=""})}formatExcelData(t){const e=[];return t.forEach(t=>{const i={worklogItemTypeId:"Working"===t.type?"1":"Breakdown"===t.type?"2":"3",startDateTime:t.startDateTime?d(t.startDateTime,"DD-MMM-YY HH.mm").format(this.appConstants.FRONTEND_DATE_TIME_FORMAT):"",endDateTime:t.endDateTime?d(t.endDateTime,"DD-MMM-YY HH.mm").format(this.appConstants.FRONTEND_DATE_TIME_FORMAT):"",totalHours:"",empId:null},r=d(i.startDateTime,"YYYY-MM-DD HH:mm"),n=d(i.endDateTime,"YYYY-MM-DD HH:mm");i.totalHours=this.worklogUtilsService.totalHoursCalc(r,n),e.push(i)}),e}showTxnOptionsSidebar(t){this.branchUtilsService.spiTxnOptions.next(!1===t?{show:!1}:{show:!0,spiName:this.branchUtilsService.spiTxnId.worklog,screenName:this.txnKeys.inputScreenName,editId:this.txnKeys.inputEditId,bpId:this.myFormData.customerBpId,status:this.myFormData.status})}downloadPdf(){this.branchUtilsService.spiTxnOptionsDownloadPdf.next({spiName:this.branchUtilsService.spiTxnId.worklog,screenName:this.txnKeys.inputScreenName,id:this.txnKeys.inputEditId})}onKeydownHandler(t){t.ctrlKey&&"s"===t.key.toLowerCase()&&(this.txnKeys.inputEditId&&"1"===this.txnKeys.editStatusId||!this.txnKeys.inputEditId)&&(this.saveUpdate(),t.preventDefault()),this.txnKeys.inputEditId&&t.ctrlKey&&-1!=="p".indexOf(t.key)&&(this.downloadPdf(),t.preventDefault())}ngOnDestroy(){this.inspectionItemDataSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.g),s.Pb(n.f),s.Pb(n.a),s.Pb(h),s.Pb(o.l),s.Pb(m.a),s.Pb(a.e),s.Pb(r.a),s.Pb(B.a),s.Pb(o.T),s.Pb(o.Q),s.Pb(K.b),s.Pb(s.h))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-worklog-add-employee-add"]],viewQuery:function(t,e){var i;1&t&&(s.Pc(pn,!0),s.Pc(q.a,!0),s.Pc(P.a,!0)),2&t&&(s.zc(i=s.ec())&&(e.fileUpload=i.first),s.zc(i=s.ec())&&(e.udfViewerComponent=i.first),s.zc(i=s.ec())&&(e.attachmentsComponent=i.first))},hostBindings:function(t,e){1&t&&s.dc("keydown",(function(t){return e.onKeydownHandler(t)}),!1,s.Bc)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-plus-square"],[1,"working-container",3,"formGroup"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row"],[1,"form-group","col-sm-3"],[1,"form-label"],[1,"mandatory"],[1,"col-sm-6"],["formControlName","documentNumberingId","bindLabel","documentNumberingName","bindValue","id","placeholder","--SELECT--",3,"items","change"],["type","text","formControlName","documentNumber",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],["formControlName","rentalItemId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","virtualScroll","search","change"],["ng-option-tmp",""],["formControlName","rentalEquipmentId","bindLabel","equipmentName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],[1,"action-control"],["formControlName","customerBpId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple","focus","change"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["class","info-icon","container","body","tooltip","View Details",3,"click",4,"ngIf"],["formControlName","customerBpContactsId","bindLabel","contactName","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["type","text","formControlName","referenceNumber",1,"form-control","form-control-sm"],["formControlName","startDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onFocus"],["class"," validation-error",4,"ngIf"],["formControlName","endDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onFocus"],[1,"col-sm-5"],["formControlName","shiftStartHour","placeholder","--",3,"items","multiple","clearable","focus"],["formControlName","shiftStartMinute",3,"items","multiple","clearable","focus"],["formControlName","shiftEndHour","placeholder","--",3,"items","multiple","focus"],["formControlName","shiftEndMinute","placeholder","--",3,"items","multiple","focus"],["formControlName","documentDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],[1,"position-relative"],["formControlName","empId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["formControlName","status",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],["class","mandatory",4,"ngIf"],["formControlName","distributionRulesId","bindLabel","distributionName","bindValue","id","placeholder","--SELECT--","groupBy","dimensionDescription",3,"items","multiple","add"],[1,"form-group","col-sm-6"],["formControlName","remarks","rows","2",1,"form-control","form-control-sm"],[3,"type"],[3,"type","doSuccess"],[1,"btn-group","text-right"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class"," btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[1,"fa","fa-print"],[1,"validation-error"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click"],[1,"fa","fa-plus"],[3,"click"],[1,"fa","fa-redo-alt"],["container","body","tooltip","View Details",1,"info-icon",3,"click"],[1,"fa","fa-info-circle"],[3,"value"],[1,"box-body","box-table"],["colspan","12"],["type","file",1,"btn","btn-success","btn-sm"],["fileUpload",""],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],[2,"min-width","80px"],[2,"min-width","30px"],[2,"min-width","200px"],[2,"min-width","150px"],[2,"min-width","100px"],["formArrayName","itemListArray"],[3,"formGroupName",4,"ngFor","ngForOf"],["colspan","2"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"col-sm-7","text-center"],[1,"calc-img"],[1,"table","table-striped","table-bordered","calculation"],[1,"text-right",2,"min-width","150px"],[1,"text-right"],[3,"formGroupName"],["class","action red","placement","top","container","body","tooltip","Delete",3,"click",4,"ngIf"],["formControlName","worklogItemTypeId",1,"form-control","form-control-sm",3,"change"],["value",""],["formControlName","empId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["formControlName","startDateTime","showTime","true","hourFormat","24","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onSelect"],["formControlName","endDateTime","showTime","true","hourFormat","24","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat","onSelect"],["type","text","formControlName","remarks",1,"form-control","form-control-sm"],["placement","top","container","body","tooltip","Delete",1,"action","red",3,"click"],[1,"fa","fa-minus-circle"],["colspan","10"],["formControlName","shiftStartHour",1,"form-control","form-control-sm",3,"change"],["formControlName","shiftStartMinute",1,"form-control","form-control-sm",3,"change"],["formControlName","shiftEndHour",1,"form-control","form-control-sm",3,"change"],["formControlName","shiftEndMinute",1,"form-control","form-control-sm",3,"change"],["formControlName","breakdownHour",1,"form-control","form-control-sm",3,"change"],["formControlName","breakdownMinute",1,"form-control","form-control-sm",3,"change"],["formControlName","overtimeHour",1,"form-control","form-control-sm",3,"change"],["formControlName","overtimeMinute",1,"form-control","form-control-sm",3,"change"],[1,"fa","fa-save"],[1,"fa","fa-broom"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&s.Jc(0,vs,157,70,"ng-container",0),2&t&&s.oc("ngIf",e.screenAcl.view)},directives:[p.m,a.n,a.i,J.a,a.m,a.g,a.b,J.c,g.a,a.t,p.l,q.a,P.a,Q.a,r.g,v.a,a.p,a.v,a.d,a.j],styles:["td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-flex}td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-right:8px}"]}),t})();const Is=["dataTable"];function Cs(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",15),s.dc("click",(function(){return s.Dc(t),s.hc(2).downloadAsExcel()})),s.Qb(1,"i",16),s.Vb(2,"span"),s.Lc(3,"Download as Excel"),s.Ub(),s.Ub()}}function Us(t,e){1&t&&(s.Vb(0,"colgroup"),s.Qb(1,"col",17),s.Qb(2,"col",17),s.Qb(3,"col",18),s.Qb(4,"col",19),s.Qb(5,"col",19),s.Qb(6,"col",19),s.Ub())}function Ls(t,e){if(1&t&&(s.Vb(0,"option",29),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc(" ",t.name," ")}}function Vs(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tr"),s.Vb(1,"th",17),s.Lc(2,"Actions"),s.Ub(),s.Vb(3,"th"),s.Lc(4,"Item Image"),s.Ub(),s.Vb(5,"th",20),s.Lc(6,"Item Name"),s.Qb(7,"p-sortIcon",21),s.Ub(),s.Vb(8,"th",20),s.Lc(9,"Stock"),s.Qb(10,"p-sortIcon",21),s.Ub(),s.Vb(11,"th",20),s.Lc(12,"Item Group"),s.Qb(13,"p-sortIcon",21),s.Ub(),s.Vb(14,"th",20),s.Lc(15,"Status"),s.Qb(16,"p-sortIcon",21),s.Ub(),s.Ub(),s.Vb(17,"tr",22),s.Vb(18,"th"),s.Vb(19,"a",23),s.dc("click",(function(){return s.Dc(t),s.hc(2).clearSearchForm()})),s.Qb(20,"i",24),s.Lc(21,"Clear"),s.Ub(),s.Ub(),s.Qb(22,"th"),s.Vb(23,"th"),s.Vb(24,"input",25),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.rentalItemName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Vb(25,"th"),s.Vb(26,"input",25),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.stock=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Vb(27,"th"),s.Vb(28,"input",25),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.itemGroupId=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Vb(29,"th"),s.Vb(30,"select",26),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.status=e}))("change",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Vb(31,"option",27),s.Lc(32,"--SELECT--"),s.Ub(),s.Jc(33,Ls,2,2,"option",28),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=s.hc(2);s.Cb(5),s.oc("pSortableColumn","rentalItemName"),s.Cb(2),s.oc("field","rentalItemName"),s.Cb(1),s.oc("pSortableColumn","stock"),s.Cb(2),s.oc("field","stock"),s.Cb(1),s.oc("pSortableColumn","itemGroupId"),s.Cb(2),s.oc("field","itemGroupId"),s.Cb(1),s.oc("pSortableColumn","status"),s.Cb(2),s.oc("field","status"),s.Cb(8),s.oc("ngModel",t.searchForm.rentalItemName),s.Cb(2),s.oc("ngModel",t.searchForm.stock),s.Cb(2),s.oc("ngModel",t.searchForm.itemGroupId),s.Cb(2),s.oc("ngModel",t.searchForm.status),s.Cb(3),s.oc("ngForOf",t.statusList)}}function Ds(t,e){if(1&t&&(s.Vb(0,"tr"),s.Vb(1,"td"),s.Vb(2,"a",30),s.Qb(3,"i",31),s.Ub(),s.Ub(),s.Vb(4,"td"),s.Qb(5,"img",32),s.Ub(),s.Vb(6,"td"),s.Lc(7),s.Ub(),s.Vb(8,"td"),s.Lc(9),s.Ub(),s.Vb(10,"td"),s.Lc(11),s.Ub(),s.Vb(12,"td"),s.Vb(13,"span",33),s.Lc(14),s.Ub(),s.Ub(),s.Ub()),2&t){const t=e.$implicit,i=s.hc(2);s.Cb(2),s.qc("routerLink","/branch/rental/rental-item-edit/",i.utilsService.encrypt(t.id),""),s.Cb(3),s.oc("src",t.rentalItemImgUrl?t.rentalItemImgUrl:i.appConstants.DEFAULT_IMAGE_ICON,s.Fc),s.Cb(2),s.Oc(" ",t.rentalItemCode," - ",t.rentalItemName," "),s.Cb(2),s.Mc(t.stock),s.Cb(2),s.Oc("",t.groupCode," - ",t.groupName,""),s.Cb(2),s.oc("ngClass",i.appConstants.TXN_STATUS_COLOR_CLS[t.status]),s.Cb(1),s.Mc(t.statusName)}}function Ns(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"div",1),s.Vb(2,"span"),s.Lc(3,"R"),s.Ub(),s.Lc(4,"ental Item Master Data - List "),s.Vb(5,"div",2),s.Jc(6,Cs,4,0,"button",3),s.Vb(7,"button",4),s.Qb(8,"i",5),s.Vb(9,"span"),s.Lc(10,"Add Rental Item"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(11,"div",6),s.Vb(12,"div",7),s.Vb(13,"div",8),s.Vb(14,"div",9),s.Vb(15,"p-table",10,11),s.dc("onLazyLoad",(function(e){return s.Dc(t),s.hc().getListing(e)})),s.Jc(17,Us,7,0,"ng-template",12),s.Jc(18,Vs,34,13,"ng-template",13),s.Jc(19,Ds,15,9,"ng-template",14),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Sb()}if(2&t){const t=s.hc();s.Cb(6),s.oc("ngIf",t.screenAcl.download),s.Cb(9),s.oc("value",t.listing.data)("lazy",!0)("paginator",!0)("rows",t.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",t.listing.totalRecords)}}let Fs=(()=>{class t{constructor(t,e,i,r){this.utilsService=t,this.authGuardService=e,this.commonDataService=i,this.rentalItemDataService=r,this.appConstants=n.h,this.screenAcl={},this.statusList=[],this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={rentalItemName:"",stock:"",itemGroupId:"",status:1}}ngOnInit(){if(this.screenAcl=this.authGuardService.getScreenAcl("35"),!this.screenAcl.view)return this.utilsService.showFailureMsg(n.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;this.getAutoSuggestionList("getCommonStatusList")}getListing(t){const e=this.utilsService.dataTableParameterFormation(t,this.searchForm);this.listingProperties=e,this.rentalItemDataService.getList(e).subscribe(t=>{"SUCCESS"===t.status?(this.listing.data=t.results.searchResults,this.listing.totalRecords=t.results.totalRecords):this.utilsService.showFailureMsg(t)})}clearSearchForm(){this.searchForm={rentalItemName:"",stock:"",itemGroupId:"",status:1},this.resetListing()}resetListing(){this.dataTable.reset()}downloadAsExcel(){this.rentalItemDataService.downloadAsExcel(this.listingProperties).subscribe(t=>{"SUCCESS"===t.status?this.utilsService.externalRedirect(t.fileUrl):this.utilsService.showFailureMsg(t)})}getAutoSuggestionList(t){this.commonDataService.getAutoSuggestionList(t).subscribe(t=>{"SUCCESS"===t.status?this.statusList=t.results:this.utilsService.showFailureMsg(t)})}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.g),s.Pb(n.a),s.Pb(o.l),s.Pb(o.P))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-rental-item-list"]],viewQuery:function(t,e){var i;1&t&&s.Pc(Is,!0),2&t&&s.zc(i=s.ec())&&(e.dataTable=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],["routerLink","/branch/rental/rental-item-add",1,"btn","btn-primary","btn-sm"],[1,"fa","fa-plus"],[1,"working-container"],[1,"row"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-file-excel"],[2,"width","100px"],[2,"width","200px"],[2,"width","120px"],[3,"pSortableColumn"],[3,"field"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"routerLink"],[1,"fa","fa-edit"],["height","20px",3,"src"],[1,"badge",3,"ngClass"]],template:function(t,e){1&t&&s.Jc(0,Ns,20,6,"ng-container",0),2&t&&s.oc("ngIf",e.screenAcl.view)},directives:[p.m,r.e,f.c,y.b,f.b,f.a,v.a,a.b,a.m,a.o,a.t,a.p,a.v,p.l,r.g,p.k],styles:[""]}),t})();function Es(t,e){1&t&&(s.Tb(0),s.Lc(1,"Add"),s.Sb())}function Ts(t,e){1&t&&(s.Tb(0),s.Lc(1,"Edit"),s.Sb())}function xs(t,e){if(1&t&&(s.Vb(0,"div",51),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.rentalItemCode," ")}}function As(t,e){if(1&t&&(s.Vb(0,"div",51),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.rentalItemName," ")}}function Rs(t,e){if(1&t&&(s.Vb(0,"option",52),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Mc(t.groupName)}}function Ms(t,e){if(1&t&&(s.Vb(0,"div",51),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.itemGroupId," ")}}function ks(t,e){if(1&t&&(s.Vb(0,"option",52),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Mc(t.uomName)}}function ws(t,e){if(1&t&&(s.Vb(0,"div",51),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.uomId," ")}}function Os(t,e){if(1&t&&(s.Vb(0,"tr"),s.Vb(1,"td"),s.Lc(2),s.Ub(),s.Vb(3,"td"),s.Lc(4),s.Ub(),s.Vb(5,"td"),s.Lc(6),s.Ub(),s.Vb(7,"td"),s.Lc(8),s.Ub(),s.Vb(9,"td"),s.Lc(10," - "),s.Ub(),s.Vb(11,"td"),s.Lc(12),s.Ub(),s.Vb(13,"td"),s.Lc(14),s.Ub(),s.Vb(15,"td"),s.Lc(16),s.Ub(),s.Vb(17,"td"),s.Lc(18),s.Ub(),s.Vb(19,"td"),s.Lc(20),s.Ub(),s.Vb(21,"td"),s.Lc(22),s.Ub(),s.Ub()),2&t){const t=e.$implicit,i=e.index;s.Cb(2),s.Mc(i+1),s.Cb(2),s.Oc("",t.equipmentCode," - ",t.equipmentName,""),s.Cb(2),s.Nc(" ",t.mfrSerialNumber," "),s.Cb(2),s.Nc(" ",t.serialNumber," "),s.Cb(4),s.Nc(" ",t.ownership," "),s.Cb(2),s.Nc(" ",t.warehouseName," "),s.Cb(2),s.Nc(" ",t.rentalEquipmentStatusInfo[0].equipmentStatusName,""),s.Cb(2),s.Nc(" ",t.rentalStatusInfo[0].name," "),s.Cb(2),s.Nc(" ",null==t.documentTypeInfo[0]?null:t.documentTypeInfo[0].name," "),s.Cb(2),s.Nc(" ",null==t.documentInfo[0]?null:t.documentInfo[0].documentNumber," ")}}function qs(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",53),s.dc("click",(function(){return s.Dc(t),s.hc().saveUpdate()})),s.Qb(1,"i",54),s.Vb(2,"span"),s.Lc(3,"Save"),s.Ub(),s.Ub()}}function Ps(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",3),s.dc("click",(function(){return s.Dc(t),s.hc().clearForm()})),s.Qb(1,"i",55),s.Vb(2,"span"),s.Lc(3,"Clear"),s.Ub(),s.Ub()}}function Bs(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",53),s.dc("click",(function(){return s.Dc(t),s.hc().saveUpdate()})),s.Qb(1,"i",56),s.Vb(2,"span"),s.Lc(3,"Update"),s.Ub(),s.Ub()}}function Ks(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",3),s.dc("click",(function(){return s.Dc(t),s.hc().utilsService.goBack()})),s.Qb(1,"i",57),s.Vb(2,"span"),s.Lc(3,"Cancel"),s.Ub(),s.Ub()}}function Js(t,e){1&t&&(s.Vb(0,"div",58),s.Vb(1,"span",59),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," You are unauthorized to "),s.Vb(4,"strong"),s.Lc(5,"update"),s.Ub(),s.Lc(6," this transaction! "),s.Ub())}function Qs(t,e){1&t&&(s.Vb(0,"div",58),s.Vb(1,"span",59),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," You are unauthorized to "),s.Vb(4,"strong"),s.Lc(5,"add"),s.Ub(),s.Lc(6," this transaction!. "),s.Ub())}const _s=function(){return{"max-height.px":300}};let Ws=(()=>{class t{constructor(t,e,i,r,s,o,a,c,u){this.utilsService=t,this.authGuardService=e,this.commonDataService=i,this.branchUtilsService=r,this.formBuilder=s,this.activatedRoute=o,this.rentalItemDataService=a,this.modalService=c,this.popupExternalService=u,this.appConstants=n.h,this.screenAcl={},this.uomList=[],this.itemGroupList=[],this.equipmentDetails=[],this.hsnList=[],this.photoUrl="",this.myFormData={},this.myFormErrors={rentalItemCode:"",rentalItemName:"",itemGroupId:"",uomId:""},this.myFormValidationMsgs={rentalItemCode:{required:"Item Code is required"},rentalItemName:{required:"Item Name is required"},itemGroupId:{required:"Item Group is required"},uomId:{required:"UOM is required"}}}ngOnInit(){if(this.screenAcl=this.authGuardService.getScreenAcl("35"),!this.screenAcl.view)return this.utilsService.showFailureMsg(n.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;this.initializeForm(),this.initializeSubscriptions()}ngAfterViewInit(){this.attachmentsComponent.loadAttachments(this.inputEditId)}initializeSubscriptions(){this.activatedRoute.params.subscribe(t=>{t.id?(this.inputEditId=this.utilsService.decrypt(t.id),this.get(),this.getEquipmentDetails()):(this.getAutoSuggestionList("getItemGroupList"),this.getAutoSuggestionList("getUomList"),this.getAutoSuggestionList("getHsnList"))}),this.branchUtilsService.actionSaveUpdate.subscribe(t=>{"item-group"===t.triggerType?this.getAutoSuggestionList("getItemGroupList"):"uom"===t.triggerType?this.getAutoSuggestionList("getUomList"):"hsn"===t.triggerType&&this.getAutoSuggestionList("getHsnList")})}initializeForm(){this.myForm=this.formBuilder.group({rentalItemCode:["",[a.u.required]],rentalItemName:["",[a.u.required]],foreignName:[""],stock:[{value:"",disabled:!0}],itemGroupId:["",[a.u.required]],uomId:["",[a.u.required]],rentalItemImage:[""],hsnId:[null]}),this.myForm.valueChanges.subscribe(t=>{this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs),this.myFormData=this.myForm.getRawValue()}),this.myFormData=this.myForm.getRawValue()}saveUpdate(){if(!this.myForm.valid)return this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs,!0),!1;const t={rentalItemCode:this.myFormData.rentalItemCode,rentalItemName:this.myFormData.rentalItemName,foreignName:this.myFormData.foreignName,stock:this.myFormData.stock,itemGroupId:this.myFormData.itemGroupId,uomId:this.myFormData.uomId,rentalItemImage:this.myFormData.rentalItemImage,hsnId:this.myFormData.hsnId};let e;this.inputEditId?(e="update",t.id=this.inputEditId):e="save",this.rentalItemDataService[e](t).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.attachmentsComponent.save("save"===e?t.sId:this.inputEditId)):this.utilsService.showFailureMsg(t)})}get(){this.rentalItemDataService.get(this.inputEditId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results[0];this.photoUrl=e.itemImgUrl,this.myForm.patchValue({rentalItemCode:e.rentalItemCode,rentalItemName:e.rentalItemName,foreignName:e.foreignName,stock:e.stock,itemGroupId:e.itemGroupId,uomId:e.uomId,rentalItemImage:e.rentalItemImage,hsnId:this.utilsService.isEmpty(e.hsnId)?null:e.hsnId}),this.getAutoSuggestionList("getItemGroupList",e.itemGroupInfo[0]),this.getAutoSuggestionList("getUomList",e.uomInfo[0]),this.getAutoSuggestionList("getHsnList",e.hsnInfo[0])}else this.utilsService.showFailureMsg(t)})}uploadImage(t){this.rentalItemDataService.imageUpload(t.target.files||t.srcElement.files).subscribe(t=>{"SUCCESS"===t.status?(this.myForm.patchValue({rentalItemImage:t.results.fileName}),this.photoUrl=t.results.fullUrl):this.utilsService.showFailureMsg(t)})}clearForm(){this.initializeForm()}getAutoSuggestionList(t,e){this.commonDataService.getAutoSuggestionList(t).subscribe(i=>{"SUCCESS"===i.status?(this.utilsService.ifNotPushToList(i.results,e),"getItemGroupList"===t?this.itemGroupList=i.results:"getUomList"===t?this.uomList=i.results:"getHsnList"===t&&(this.hsnList=i.results.map(t=>(t.hsnLabel=t.chapter+"."+t.heading+"."+t.subHeading,t)))):this.utilsService.showFailureMsg(i)})}getEquipmentDetails(){this.commonDataService.getEquipmentDetailsByItemId(this.inputEditId).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.equipmentDetails=t.results):this.utilsService.showFailureMsg(t)})}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.g),s.Pb(n.a),s.Pb(o.l),s.Pb(m.a),s.Pb(a.e),s.Pb(r.a),s.Pb(o.P),s.Pb(K.b),s.Pb(B.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-rental-item-add"]],viewQuery:function(t,e){var i;1&t&&s.Pc(P.a,!0),2&t&&s.zc(i=s.ec())&&(e.attachmentsComponent=i.first)},decls:129,vars:22,consts:[[1,"page-title"],[4,"ngIf"],[1,"btn-group"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],[1,"working-container",3,"formGroup"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row"],[1,"col-sm-3"],[1,"form-group"],[1,"form-label"],[1,"image-container"],[3,"src"],["type","file",3,"change"],["type","hidden","formControlName","rentalItemImage"],[1,"small-text"],[1,"col-sm-9"],[1,"form-group","col-sm-4"],[1,"mandatory"],["type","text","formControlName","rentalItemCode",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],["type","text","formControlName","rentalItemName",1,"form-control","form-control-sm"],["type","text","formControlName","foreignName",1,"form-control","form-control-sm"],["type","text","formControlName","stock",1,"form-control","form-control-sm"],[1,"action-control"],["formControlName","itemGroupId",1,"form-control","form-control-sm"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"click"],[1,"fa","fa-plus"],["formControlName","uomId",1,"form-control","form-control-sm"],[1,"form-group","col-sm-3"],["formControlName","hsnId","bindLabel","hsnCode","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],[1,"box-body","box-table"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-striped","table-bordered"],[2,"min-width","30px"],[2,"min-width","150px"],[2,"min-width","130px"],[2,"min-width","120px"],[2,"min-width","100px"],[4,"ngFor","ngForOf"],[3,"type","doSuccess"],[1,"btn-group","text-right"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class"," btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[1,"validation-error"],[3,"value"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save"],[1,"fa","fa-broom"],[1,"fa","fa-redo-alt"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&(s.Vb(0,"div",0),s.Vb(1,"span"),s.Lc(2,"R"),s.Ub(),s.Lc(3,"ental Item Master Data - "),s.Jc(4,Es,2,0,"ng-container",1),s.Jc(5,Ts,2,0,"ng-container",1),s.Vb(6,"div",2),s.Vb(7,"button",3),s.dc("click",(function(){return e.utilsService.goBack()})),s.Qb(8,"i",4),s.Vb(9,"span"),s.Lc(10,"Back"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(11,"div",5),s.Vb(12,"div",6),s.Vb(13,"div",7),s.Qb(14,"i",8),s.Lc(15,"Basic Info "),s.Ub(),s.Vb(16,"div",9),s.Vb(17,"div",10),s.Vb(18,"div",11),s.Vb(19,"div",12),s.Vb(20,"label",13),s.Lc(21,"Item Image"),s.Ub(),s.Vb(22,"div",14),s.Qb(23,"img",15),s.Ub(),s.Vb(24,"input",16),s.dc("change",(function(t){return e.uploadImage(t)})),s.Ub(),s.Qb(25,"input",17),s.Vb(26,"div",18),s.Lc(27,"Only jpg, png are allowed. Maximum 2 Mb"),s.Ub(),s.Ub(),s.Ub(),s.Vb(28,"div",19),s.Vb(29,"div",10),s.Vb(30,"div",20),s.Vb(31,"label",13),s.Lc(32,"Item Code"),s.Vb(33,"span",21),s.Lc(34,"*"),s.Ub(),s.Ub(),s.Qb(35,"input",22),s.Jc(36,xs,2,1,"div",23),s.Ub(),s.Vb(37,"div",20),s.Vb(38,"label",13),s.Lc(39,"Item Name"),s.Vb(40,"span",21),s.Lc(41,"*"),s.Ub(),s.Ub(),s.Qb(42,"input",24),s.Jc(43,As,2,1,"div",23),s.Ub(),s.Vb(44,"div",20),s.Vb(45,"label",13),s.Lc(46,"Foreign Name"),s.Ub(),s.Qb(47,"input",25),s.Ub(),s.Vb(48,"div",20),s.Vb(49,"label",13),s.Lc(50,"Stock"),s.Ub(),s.Qb(51,"input",26),s.Ub(),s.Vb(52,"div",20),s.Vb(53,"label",13),s.Lc(54,"Item Group"),s.Vb(55,"span",21),s.Lc(56,"*"),s.Ub(),s.Ub(),s.Vb(57,"div",27),s.Vb(58,"select",28),s.Vb(59,"option",29),s.Lc(60,"--SELECT--"),s.Ub(),s.Jc(61,Rs,2,2,"option",30),s.Ub(),s.Vb(62,"a",31),s.dc("click",(function(){return e.popupExternalService.showAddPopup("item-group")})),s.Qb(63,"i",32),s.Ub(),s.Jc(64,Ms,2,1,"div",23),s.Ub(),s.Ub(),s.Vb(65,"div",20),s.Vb(66,"label",13),s.Lc(67,"UOM "),s.Vb(68,"span",18),s.Lc(69,"(Unit of Measure)"),s.Ub(),s.Vb(70,"span",21),s.Lc(71,"*"),s.Ub(),s.Ub(),s.Vb(72,"div",27),s.Vb(73,"select",33),s.Vb(74,"option",29),s.Lc(75,"--SELECT--"),s.Ub(),s.Jc(76,ks,2,2,"option",30),s.Ub(),s.Vb(77,"a",31),s.dc("click",(function(){return e.popupExternalService.showAddPopup("uom")})),s.Qb(78,"i",32),s.Ub(),s.Jc(79,ws,2,1,"div",23),s.Ub(),s.Ub(),s.Vb(80,"div",34),s.Vb(81,"label",13),s.Lc(82,"HSN"),s.Ub(),s.Vb(83,"div",27),s.Qb(84,"ng-select",35),s.Vb(85,"span"),s.Vb(86,"a",31),s.dc("click",(function(){return e.popupExternalService.showAddPopup("hsn")})),s.Qb(87,"i",32),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(88,"div",6),s.Vb(89,"div",7),s.Qb(90,"i",8),s.Lc(91,"Equipment Info "),s.Ub(),s.Vb(92,"div",36),s.Vb(93,"div",37),s.Vb(94,"table",38),s.Vb(95,"thead"),s.Vb(96,"tr"),s.Vb(97,"th",39),s.Lc(98,"#"),s.Ub(),s.Vb(99,"th",40),s.Lc(100,"Equipment Name"),s.Ub(),s.Vb(101,"th",41),s.Lc(102,"Mfg Serial No"),s.Ub(),s.Vb(103,"th",42),s.Lc(104,"Serial No"),s.Ub(),s.Vb(105,"th",42),s.Lc(106,"General Details"),s.Ub(),s.Vb(107,"th",43),s.Lc(108,"Ownership"),s.Ub(),s.Vb(109,"th",41),s.Lc(110,"Warehouse"),s.Ub(),s.Vb(111,"th",42),s.Lc(112,"Equipment Status"),s.Ub(),s.Vb(113,"th",42),s.Lc(114,"Rental Status"),s.Ub(),s.Vb(115,"th",43),s.Lc(116,"Doc Type"),s.Ub(),s.Vb(117,"th",43),s.Lc(118,"Doc No"),s.Ub(),s.Ub(),s.Ub(),s.Vb(119,"tbody"),s.Jc(120,Os,23,11,"tr",44),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(121,"app-attachments",45),s.dc("doSuccess",(function(){return e.utilsService.redirect("/branch/rental/rental-item-list")})),s.Ub(),s.Vb(122,"div",46),s.Jc(123,qs,4,0,"button",47),s.Jc(124,Ps,4,0,"button",48),s.Jc(125,Bs,4,0,"button",49),s.Jc(126,Ks,4,0,"button",48),s.Ub(),s.Jc(127,Js,7,0,"div",50),s.Jc(128,Qs,7,0,"div",50),s.Ub()),2&t&&(s.Cb(4),s.oc("ngIf",!e.inputEditId),s.Cb(1),s.oc("ngIf",e.inputEditId),s.Cb(6),s.oc("formGroup",e.myForm),s.Cb(12),s.oc("src",e.photoUrl?e.photoUrl:e.appConstants.DEFAULT_IMAGE_ICON,s.Fc),s.Cb(13),s.oc("ngIf",e.myFormErrors.rentalItemCode),s.Cb(7),s.oc("ngIf",e.myFormErrors.rentalItemName),s.Cb(18),s.oc("ngForOf",e.itemGroupList),s.Cb(3),s.oc("ngIf",e.myFormErrors.itemGroupId),s.Cb(12),s.oc("ngForOf",e.uomList),s.Cb(3),s.oc("ngIf",e.myFormErrors.uomId),s.Cb(5),s.oc("items",e.hsnList)("multiple",!1),s.Cb(9),s.oc("ngStyle",s.rc(21,_s)),s.Cb(27),s.oc("ngForOf",e.equipmentDetails),s.Cb(1),s.oc("type","MASTER_RENTAL_ITEM"),s.Cb(2),s.oc("ngIf",e.screenAcl.add&&!e.inputEditId),s.Cb(1),s.oc("ngIf",!e.inputEditId),s.Cb(1),s.oc("ngIf",e.screenAcl.update&&e.inputEditId),s.Cb(1),s.oc("ngIf",e.inputEditId),s.Cb(1),s.oc("ngIf",e.inputEditId&&!e.screenAcl.update),s.Cb(1),s.oc("ngIf",!e.inputEditId&&!e.screenAcl.add))},directives:[p.m,a.n,a.i,a.b,a.m,a.g,a.t,a.p,a.v,p.l,J.a,p.n,P.a],styles:[""]}),t})();const Hs=["dataTable"];function Gs(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",14),s.dc("click",(function(){return s.Dc(t),s.hc(2).downloadAsExcel()})),s.Qb(1,"i",15),s.Vb(2,"span"),s.Lc(3,"Download as Excel"),s.Ub(),s.Ub()}}function zs(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tr"),s.Vb(1,"th",16),s.Lc(2,"Actions"),s.Ub(),s.Vb(3,"th",17),s.Lc(4,"Equipment Image"),s.Ub(),s.Vb(5,"th",18),s.Lc(6,"Equipment Name"),s.Qb(7,"p-sortIcon",19),s.Ub(),s.Vb(8,"th",20),s.Lc(9,"Ownership"),s.Qb(10,"p-sortIcon",19),s.Ub(),s.Vb(11,"th",20),s.Lc(12,"Warehouse"),s.Qb(13,"p-sortIcon",19),s.Ub(),s.Vb(14,"th",20),s.Lc(15,"Equipment Status"),s.Qb(16,"p-sortIcon",19),s.Ub(),s.Vb(17,"th",20),s.Lc(18,"Rental Status"),s.Qb(19,"p-sortIcon",19),s.Ub(),s.Ub(),s.Vb(20,"tr",21),s.Vb(21,"th"),s.Vb(22,"a",22),s.dc("click",(function(){return s.Dc(t),s.hc(2).clearSearchForm()})),s.Qb(23,"i",23),s.Lc(24,"Clear"),s.Ub(),s.Ub(),s.Qb(25,"th"),s.Vb(26,"th"),s.Vb(27,"input",24),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.equipmentName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Vb(28,"th"),s.Vb(29,"input",24),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.ownershipName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Vb(30,"th"),s.Vb(31,"input",24),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.warehouseName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Vb(32,"th"),s.Vb(33,"input",24),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.equipmentStatusName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Vb(34,"th"),s.Vb(35,"input",24),s.dc("ngModelChange",(function(e){return s.Dc(t),s.hc(2).searchForm.rentalStatusName=e}))("keyup.enter",(function(){return s.Dc(t),s.hc(2).resetListing()})),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=s.hc(2);s.Cb(5),s.oc("pSortableColumn","equipmentName"),s.Cb(2),s.oc("field","equipmentName"),s.Cb(1),s.oc("pSortableColumn","ownershipName"),s.Cb(2),s.oc("field","ownershipName"),s.Cb(1),s.oc("pSortableColumn","warehouseName"),s.Cb(2),s.oc("field","warehouseName"),s.Cb(1),s.oc("pSortableColumn","equipmentStatusName"),s.Cb(2),s.oc("field","equipmentStatusName"),s.Cb(1),s.oc("pSortableColumn","rentalStatusName"),s.Cb(2),s.oc("field","rentalStatusName"),s.Cb(8),s.oc("ngModel",t.searchForm.equipmentName),s.Cb(2),s.oc("ngModel",t.searchForm.ownershipName),s.Cb(2),s.oc("ngModel",t.searchForm.warehouseName),s.Cb(2),s.oc("ngModel",t.searchForm.equipmentStatusName),s.Cb(2),s.oc("ngModel",t.searchForm.rentalStatusName)}}function js(t,e){if(1&t){const t=s.Wb();s.Vb(0,"tr"),s.Vb(1,"td"),s.Vb(2,"a",25),s.dc("click",(function(){s.Dc(t);const i=e.$implicit;return s.hc(2).editItem(i.id)})),s.Qb(3,"i",26),s.Ub(),s.Ub(),s.Vb(4,"td"),s.Qb(5,"img",27),s.Ub(),s.Vb(6,"td"),s.Lc(7),s.Ub(),s.Vb(8,"td"),s.Lc(9),s.Ub(),s.Vb(10,"td"),s.Lc(11),s.Ub(),s.Vb(12,"td"),s.Lc(13),s.Ub(),s.Vb(14,"td"),s.Lc(15),s.Ub(),s.Ub()}if(2&t){const t=e.$implicit,i=s.hc(2);s.Cb(5),s.oc("src",t.rentalEquipmentImgUrl?t.rentalEquipmentImgUrl:i.appConstants.DEFAULT_IMAGE_ICON,s.Fc),s.Cb(2),s.Oc(" ",t.equipmentCode," - ",t.equipmentName," "),s.Cb(2),s.Mc(t.ownershipName),s.Cb(2),s.Mc(t.warehouseName),s.Cb(2),s.Mc(t.statusName),s.Cb(2),s.Mc(t.rentalStatusName)}}function $s(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"div",1),s.Vb(2,"span"),s.Lc(3,"E"),s.Ub(),s.Lc(4,"quipment Master Data - List "),s.Vb(5,"div",2),s.Jc(6,Gs,4,0,"button",3),s.Vb(7,"button",4),s.Qb(8,"i",5),s.Vb(9,"span"),s.Lc(10,"Add Equipment"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(11,"div",6),s.Vb(12,"div",7),s.Vb(13,"div",8),s.Vb(14,"div",9),s.Vb(15,"p-table",10,11),s.dc("onLazyLoad",(function(e){return s.Dc(t),s.hc().getListing(e)})),s.Jc(17,zs,36,15,"ng-template",12),s.Jc(18,js,16,7,"ng-template",13),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Sb()}if(2&t){const t=s.hc();s.Cb(6),s.oc("ngIf",t.screenAcl.download),s.Cb(9),s.oc("value",t.listing.data)("lazy",!0)("paginator",!0)("rows",t.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",t.listing.totalRecords)}}let Ys=(()=>{class t{constructor(t,e,i){this.utilsService=t,this.authGuardService=e,this.rentalEquipmentDataService=i,this.appConstants=n.h,this.screenAcl={},this.statusList=[],this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={equipmentName:"",ownershipName:"",warehouseName:"",equipmentStatusName:"",rentalStatusName:""}}ngOnInit(){if(this.screenAcl=this.authGuardService.getScreenAcl("26"),!this.screenAcl.view)return this.utilsService.showFailureMsg(n.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1}getListing(t){const e=this.utilsService.dataTableParameterFormation(t,this.searchForm);this.listingProperties=e,this.rentalEquipmentDataService.getList(e).subscribe(t=>{"SUCCESS"===t.status?(this.listing.data=t.results.searchResults,this.listing.totalRecords=t.results.totalRecords):this.utilsService.showFailureMsg(t)})}editItem(t){const e="/branch/rental/equipment-edit/"+this.utilsService.encrypt(t);this.utilsService.redirect(e)}clearSearchForm(){this.searchForm={equipmentName:"",ownershipName:"",warehouseName:"",equipmentStatusName:"",rentalStatusName:""},this.resetListing()}resetListing(){this.dataTable.reset()}downloadAsExcel(){this.rentalEquipmentDataService.downloadAsExcel(this.listingProperties).subscribe(t=>{"SUCCESS"===t.status?this.utilsService.externalRedirect(t.fileUrl):this.utilsService.showFailureMsg(t)})}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.g),s.Pb(n.a),s.Pb(o.N))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-equipment-list"]],viewQuery:function(t,e){var i;1&t&&s.Pc(Hs,!0),2&t&&s.zc(i=s.ec())&&(e.dataTable=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],["routerLink","/branch/rental/equipment-add",1,"btn","btn-primary","btn-sm"],[1,"fa","fa-plus"],[1,"working-container"],[1,"row"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-file-excel"],[2,"width","100px"],[2,"width","150px"],[2,"width","200px",3,"pSortableColumn"],[3,"field"],[2,"width","120px",3,"pSortableColumn"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"click"],[1,"fa","fa-edit"],["height","20px",3,"src"]],template:function(t,e){1&t&&s.Jc(0,$s,19,6,"ng-container",0),2&t&&s.oc("ngIf",e.screenAcl.view)},directives:[p.m,r.e,f.c,y.b,f.b,f.a,v.a,a.b,a.m,a.o],styles:[""]}),t})();function Zs(t,e){if(1&t&&(s.Vb(0,"div",19),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors1.categoryName," ")}}function Xs(t,e){if(1&t&&(s.Vb(0,"option",20),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Mc(t.name)}}function to(t,e){if(1&t&&(s.Vb(0,"div",19),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors1.status," ")}}let eo=(()=>{class t{constructor(t,e,i,r,n,s){this.utilsService=t,this.commonDataService=e,this.rentalEquipmentDataService=i,this.branchUtilsService=r,this.activeModal=n,this.formBuilder=s,this.statusList=[],this.myForm1Data={},this.myFormErrors1={categoryName:"",status:""},this.myFormValidationMsgs1={categoryName:{required:"Category Name is required"},status:{required:"Status is required"}}}ngOnInit(){this.initializeForm1(),this.getAutoSuggestionList("getCommonStatusList")}initializeForm1(){this.myForm1=this.formBuilder.group({categoryName:["",[a.u.required]],status:["",[a.u.required]]}),this.myForm1.valueChanges.subscribe(t=>{this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1),this.myForm1Data=this.myForm1.getRawValue()}),this.myForm1Data=this.myForm1.getRawValue()}saveUpdate(){if(!this.myForm1.valid)return this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1,!0),!1;this.rentalEquipmentDataService.addEquipmentCategory({categoryName:this.myForm1Data.categoryName,status:this.myForm1Data.status}).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.branchUtilsService.actionSaveUpdate.next({triggerType:"equipment-category"}),this.activeModal.hide()):this.utilsService.showFailureMsg(t)})}getAutoSuggestionList(t){this.commonDataService.getAutoSuggestionList(t).subscribe(e=>{"SUCCESS"===e.status?"getCommonStatusList"===t&&(this.statusList=e.results):this.utilsService.showFailureMsg(e)})}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.g),s.Pb(o.l),s.Pb(o.N),s.Pb(m.a),s.Pb(K.a),s.Pb(a.e))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-vehicle-category-add-popup"]],decls:35,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],[1,"close",3,"click"],[1,"modal-body"],[1,"row",3,"formGroup"],[1,"form-group","col-sm-6"],[1,"form-label"],[1,"mandatory"],["type","text","formControlName","categoryName",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],["formControlName","status",1,"form-control","form-control-sm"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn-group","text-right"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-times"],[1,"validation-error"],[3,"value"]],template:function(t,e){1&t&&(s.Vb(0,"div",0),s.Vb(1,"h5",1),s.Lc(2,"Add Category"),s.Ub(),s.Vb(3,"button",2),s.dc("click",(function(){return e.activeModal.hide()})),s.Vb(4,"span"),s.Lc(5,"\xd7"),s.Ub(),s.Ub(),s.Ub(),s.Vb(6,"div",3),s.Vb(7,"div",4),s.Vb(8,"div",5),s.Vb(9,"label",6),s.Lc(10,"Category Name"),s.Vb(11,"span",7),s.Lc(12,"*"),s.Ub(),s.Ub(),s.Qb(13,"input",8),s.Jc(14,Zs,2,1,"div",9),s.Ub(),s.Vb(15,"div",5),s.Vb(16,"label",6),s.Lc(17,"Status"),s.Vb(18,"span",7),s.Lc(19,"*"),s.Ub(),s.Ub(),s.Vb(20,"select",10),s.Vb(21,"option",11),s.Lc(22,"--SELECT--"),s.Ub(),s.Jc(23,Xs,2,2,"option",12),s.Ub(),s.Jc(24,to,2,1,"div",9),s.Ub(),s.Ub(),s.Ub(),s.Vb(25,"div",13),s.Vb(26,"div",14),s.Vb(27,"button",15),s.dc("click",(function(){return e.saveUpdate()})),s.Qb(28,"i",16),s.Vb(29,"span"),s.Lc(30,"Save"),s.Ub(),s.Ub(),s.Vb(31,"button",17),s.dc("click",(function(){return e.activeModal.hide()})),s.Qb(32,"i",18),s.Vb(33,"span"),s.Lc(34,"Cancel"),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&t&&(s.Cb(7),s.oc("formGroup",e.myForm1),s.Cb(7),s.oc("ngIf",e.myFormErrors1.categoryName),s.Cb(9),s.oc("ngForOf",e.statusList),s.Cb(1),s.oc("ngIf",e.myFormErrors1.status))},directives:[a.n,a.i,a.b,a.m,a.g,p.m,a.t,a.p,a.v,p.l],styles:[""]}),t})();function io(t,e){1&t&&(s.Tb(0),s.Lc(1,"Add"),s.Sb())}function ro(t,e){1&t&&(s.Tb(0),s.Lc(1,"Edit"),s.Sb())}function no(t,e){if(1&t&&(s.Vb(0,"option",75),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Mc(t.rentalItemName)}}function so(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.rentalItemId," ")}}function oo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.equipmentCode," ")}}function ao(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.equipmentName," ")}}function co(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.unitPrice," ")}}function uo(t,e){if(1&t&&(s.Vb(0,"div"),s.Lc(1),s.Vb(2,"small"),s.Lc(3),s.Ub(),s.Ub(),s.Vb(4,"small"),s.Lc(5),s.Ub()),2&t){const t=e.item;s.Cb(1),s.Nc("",t.warehouseName,"\xa0"),s.Cb(2),s.Nc("(",t.warehouseCode,")"),s.Cb(2),s.Mc(t.branchName)}}function mo(t,e){if(1&t&&(s.Vb(0,"option",75),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc("",t.equipmentStatusName," ")}}function lo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.status," ")}}function bo(t,e){if(1&t&&(s.Vb(0,"option",75),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Mc(t.name)}}function ho(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.rentalStatus," ")}}function po(t,e){1&t&&(s.Vb(0,"div",20),s.Vb(1,"label",13),s.Lc(2,"Document Type / No"),s.Ub(),s.Vb(3,"div",10),s.Vb(4,"div",77),s.Qb(5,"input",78),s.Ub(),s.Vb(6,"div",79),s.Qb(7,"input",80),s.Ub(),s.Ub(),s.Ub())}function go(t,e){if(1&t&&(s.Vb(0,"option",75),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Mc(t.name)}}function fo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.ownershipId," ")}}function yo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.mfrSerialNumber," ")}}function vo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.serialNumber," ")}}function So(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.equipmentCategoryId," ")}}function Io(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.model," ")}}function Co(t,e){if(1&t&&(s.Vb(0,"option",75),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc("",t.name," ")}}function Uo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.meterReadingId," ")}}function Lo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.assetValue," ")}}function Vo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.purchaseDate," ")}}function Do(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.warrantyDate," ")}}function No(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.yearOfManufacturing," ")}}function Fo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.yearOfRegistered," ")}}function Eo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.yearOfPurchase," ")}}function To(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.chasisNumber," ")}}function xo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.manufacturer," ")}}function Ao(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.regNumber," ")}}function Ro(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.lastServiceReading," ")}}function Mo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.lastServiceDate," ")}}function ko(t,e){if(1&t&&(s.Vb(0,"option",75),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc("",t.countryCode," ")}}function wo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.countryId," ")}}function Oo(t,e){if(1&t&&(s.Vb(0,"option",75),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc("",t.stateName," ")}}function qo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.stateId," ")}}function Po(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.operatorName," ")}}function Bo(t,e){if(1&t&&(s.Vb(0,"option",75),s.Lc(1),s.Ub()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Cb(1),s.Nc("",t.name," ")}}function Ko(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.maintenancePriorityId," ")}}function Jo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.insuranceExpiry," ")}}function Qo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.fitnessExpiry," ")}}function _o(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.purchaseExpiry," ")}}function Wo(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.roadTaxExpiry," ")}}function Ho(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.sapAssetNo," ")}}function Go(t,e){if(1&t&&(s.Vb(0,"div",76),s.Lc(1),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.Nc(" ",t.myFormErrors.assetNo," ")}}function zo(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",81),s.dc("click",(function(){return s.Dc(t),s.hc().saveUpdate()})),s.Qb(1,"i",82),s.Vb(2,"span"),s.Lc(3,"Save"),s.Ub(),s.Ub()}}function jo(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",3),s.dc("click",(function(){return s.Dc(t),s.hc().clearForm()})),s.Qb(1,"i",83),s.Vb(2,"span"),s.Lc(3,"Clear"),s.Ub(),s.Ub()}}function $o(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",81),s.dc("click",(function(){return s.Dc(t),s.hc().saveUpdate()})),s.Qb(1,"i",84),s.Vb(2,"span"),s.Lc(3,"Update"),s.Ub(),s.Ub()}}function Yo(t,e){if(1&t){const t=s.Wb();s.Vb(0,"button",3),s.dc("click",(function(){return s.Dc(t),s.hc().utilsService.goBack()})),s.Qb(1,"i",85),s.Vb(2,"span"),s.Lc(3,"Cancel"),s.Ub(),s.Ub()}}function Zo(t,e){1&t&&(s.Vb(0,"div",86),s.Vb(1,"span",87),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," You are unauthorized to "),s.Vb(4,"strong"),s.Lc(5,"update"),s.Ub(),s.Lc(6," this transaction! "),s.Ub())}function Xo(t,e){1&t&&(s.Vb(0,"div",86),s.Vb(1,"span",87),s.Lc(2,"Note:"),s.Ub(),s.Lc(3," You are unauthorized to "),s.Vb(4,"strong"),s.Lc(5,"add"),s.Ub(),s.Lc(6," this transaction!. "),s.Ub())}let ta=(()=>{class t{constructor(t,e,i,r,s,o,a,c,u,m){this.utilsService=t,this.storageService=e,this.authGuardService=i,this.commonDataService=r,this.branchUtilsService=s,this.formBuilder=o,this.activatedRoute=a,this.rentalEquipmentDataService=c,this.modalService=u,this.popupExternalService=m,this.appConstants=n.h,this.screenAcl={},this.rentalItemList=[],this.equipmentOwnershipList=[],this.rentalStatusList=[],this.rentalEquipmentStatusList=[],this.warehouseList=[],this.categoryList=[],this.meterReadingList=[],this.regCountryList=[],this.regStateList=[],this.maintenancePriorityList=[],this.myFormData={},this.myFormErrors={rentalItemId:"",equipmentCode:"",equipmentName:"",unitPrice:"",mfrSerialNumber:"",serialNumber:"",ownershipId:"",rentalStatus:"",status:"",equipmentCategoryId:"",model:"",meterReadingId:"",assetValue:"",purchaseDate:"",warrantyDate:"",yearOfManufacturing:"",yearOfRegistered:"",yearOfPurchase:"",chasisNumber:"",manufacturer:"",regNumber:"",lastServiceReading:"",lastServiceDate:"",countryId:"",stateId:"",operatorName:"",maintenancePriorityId:"",vNotes:[""],insuranceExpiry:"",fitnessExpiry:"",purchaseExpiry:"",roadTaxExpiry:"",sapAssetNo:"",assetNo:""},this.myFormValidationMsgs={rentalItemId:{required:"Item Name is required"},equipmentCode:{required:"Equipment Code is required"},equipmentName:{required:"Equipment Name is required"},unitPrice:{required:"Uint Price is required",pattern:"Only numbers are allowed"},status:{required:"Equipment Status is required"},rentalStatus:{required:"Rental Status is required"},ownershipId:{required:"Ownership is required"},mfrSerialNumber:{required:"Mfr Serial No is required",pattern:"Only alpha numeric is allowed"},serialNumber:{required:"Serial Number is required",pattern:"Only alpha numeric is allowed"},equipmentCategoryId:{required:"Category is required"},model:{required:"Model is required",pattern:"Only alpha numeric are allowed"},meterReadingId:{required:"Meter Reading is required"},assetValue:{required:"Asset Value is required",pattern:"only numbers allowed"},purchaseDate:{required:"Purchase Date is required"},warrantyDate:{required:"Warranty Date is required"},yearOfManufacturing:{required:"Year of Manufacturing is required"},yearOfRegistered:{required:"Year of Registered is required"},yearOfPurchase:{required:"Year of Purchase is required"},chasisNumber:{required:"Chasis No. is required",pattern:"Only alpha numeric is allowed"},manufacturer:{required:"Manufacturer is required",pattern:"Only alpha numeric is allowed"},regNumber:{required:"Registration No. is required",pattern:"Only alpha numeric is allowed"},lastServiceReading:{required:"Last Service Reading is required",pattern:"Only number is allowed"},lastServiceDate:{required:"Last Service Date is required"},countryId:{required:"Registration Country is required"},stateId:{required:"Registration Sate is required"},operatorName:{required:"Operator Name is required",pattern:"Only alpha numeric are allowed"},maintenancePriorityId:{required:"Maintenance Priority is required"},insuranceExpiry:{required:"Insurance Expiry is required"},fitnessExpiry:{required:"Fitness Expiry is required"},purchaseExpiry:{required:"Purchase Expiry is required"},roadTaxExpiry:{required:"Last Service Date is required"},sapAssetNo:{required:"SAP Asset No. is required",pattern:"Only alpha numeric are allowed"},assetNo:{required:"Asset No. is required",pattern:"Only alpha numeric are allowed"}}}ngOnInit(){if(this.screenAcl=this.authGuardService.getScreenAcl("26"),!this.screenAcl.view)return this.utilsService.showFailureMsg(n.h.ACL_UNAUTHORIZED_MSG),this.utilsService.goBack(),!1;this.initializeForm(),this.initializeSubscriptions()}ngAfterViewInit(){this.attachmentsComponent.loadAttachments(this.inputEditId)}initializeSubscriptions(){this.activatedRoute.params.subscribe(t=>{t.id?(this.inputEditId=this.utilsService.decrypt(t.id),this.get()):(this.getAutoSuggestionList("getRentalItemList"),this.getAutoSuggestionList("getEquipmentOwnershipList"),this.getAutoSuggestionList("getRentalStatusList"),this.getAutoSuggestionList("getRentalEquipmentStatusList"),this.getAutoSuggestionList("getWarehouseList"),this.getAutoSuggestionList("getRentalEquipmentCategoryList"),this.getAutoSuggestionList("getMeterReadingList"),this.getAutoSuggestionList("getRentalMaintenancePriorityList"),this.getAutoSuggestionList("getCountryList"),this.getAutoSuggestionList("getStateList")),this.branchUtilsService.actionSaveUpdate.subscribe(t=>{"equipment-category"===t.triggerType&&this.getAutoSuggestionList("getRentalEquipmentCategoryList")})})}initializeForm(){this.myForm=this.formBuilder.group({rentalItemId:["",[a.u.required]],equipmentCode:["",[a.u.required]],equipmentName:["",[a.u.required]],equipmentImage:[""],unitPrice:["",[a.u.required,a.u.pattern(n.h.VALIDATION_PATTERNS.positiveFloatNumber)]],warehouseId:[null],status:[{value:"",disabled:!1},[a.u.required]],rentalStatus:[{value:"",disabled:!0},[a.u.required]],documentNumber:[{value:"",disabled:!0}],documentTypeName:[{value:"",disabled:!0}],fixedAsset:[!1],remarks:[""],ownershipId:["",[a.u.required]],mfrSerialNumber:["",[a.u.required,a.u.pattern(n.h.VALIDATION_PATTERNS.alphaNumericWithSpace)]],serialNumber:["",[a.u.required,a.u.pattern(n.h.VALIDATION_PATTERNS.alphaNumericWithSpace)]],equipmentCategoryId:[null,[a.u.required]],model:["",[a.u.required,a.u.pattern(n.h.VALIDATION_PATTERNS.alphaNumericWithSpace)]],meterReadingId:["",[a.u.required]],assetValue:["",[a.u.required,a.u.pattern(n.h.VALIDATION_PATTERNS.positiveIntNumber)]],purchaseDate:["",[a.u.required]],warrantyDate:["",[a.u.required]],yearOfManufacturing:["",[a.u.required]],yearOfRegistered:["",[a.u.required]],yearOfPurchase:["",[a.u.required]],chasisNumber:["",[a.u.required,a.u.pattern(n.h.VALIDATION_PATTERNS.alphaNumericWithSpace)]],manufacturer:["",[a.u.required,a.u.pattern(n.h.VALIDATION_PATTERNS.alphaNumericWithSpace)]],regNumber:["",[a.u.required,a.u.pattern(n.h.VALIDATION_PATTERNS.alphaNumericWithSpace)]],lastServiceReading:["",[a.u.required,a.u.pattern(n.h.VALIDATION_PATTERNS.positiveIntNumber)]],lastServiceDate:["",[a.u.required]],countryId:["",[a.u.required]],stateId:["",[a.u.required]],operatorName:["",[a.u.required,a.u.pattern(n.h.VALIDATION_PATTERNS.alphaNumericWithSpace)]],maintenancePriorityId:["",[a.u.required]],vNotes:[""],insuranceExpiry:["",[a.u.required]],fitnessExpiry:["",[a.u.required]],purchaseExpiry:["",[a.u.required]],roadTaxExpiry:["",[a.u.required]],sapAssetNo:["",[a.u.required,a.u.pattern(n.h.VALIDATION_PATTERNS.alphaNumeric)]],assetNo:["",[a.u.required,a.u.pattern(n.h.VALIDATION_PATTERNS.alphaNumeric)]]}),this.myForm.valueChanges.subscribe(t=>{this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs),this.myFormData=this.myForm.getRawValue()}),this.myFormData=this.myForm.getRawValue()}saveUpdate(){if(!this.myForm.valid)return this.utilsService.validation(this.myForm,this.myFormErrors,this.myFormValidationMsgs,!0),!1;const t={rentalItemId:this.myFormData.rentalItemId,equipmentCode:this.myFormData.equipmentCode,equipmentName:this.myFormData.equipmentName,equipmentImage:this.myFormData.equipmentImage,unitPrice:this.myFormData.unitPrice,warehouseId:this.myFormData.warehouseId,status:this.myFormData.status,rentalStatus:this.myFormData.rentalStatus,remarks:this.myFormData.remarks,fixedAsset:this.myFormData.fixedAsset?1:0,ownershipId:this.myFormData.ownershipId,mfrSerialNumber:this.myFormData.mfrSerialNumber,serialNumber:this.myFormData.serialNumber,equipmentCategoryId:this.myFormData.equipmentCategoryId,model:this.myFormData.model,meterReadingId:this.myFormData.meterReadingId,assetValue:this.myFormData.assetValue,purchaseDate:this.utilsService.getBackendDateFormat(this.myFormData.purchaseDate),warrantyDate:this.utilsService.getBackendDateFormat(this.myFormData.warrantyDate),yearOfManufacturing:this.utilsService.getBackendDateFormat(this.myFormData.yearOfManufacturing),yearOfRegistered:this.utilsService.getBackendDateFormat(this.myFormData.yearOfRegistered),yearOfPurchase:this.utilsService.getBackendDateFormat(this.myFormData.yearOfPurchase),manufacturer:this.myFormData.manufacturer,regNumber:this.myFormData.regNumber,lastServiceReading:this.myFormData.lastServiceReading,lastServiceDate:this.utilsService.getBackendDateFormat(this.myFormData.lastServiceDate),countryId:this.myFormData.countryId,stateId:this.myFormData.stateId,operatorName:this.myFormData.operatorName,maintenancePriorityId:this.myFormData.maintenancePriorityId,insuranceExpiry:this.utilsService.getBackendDateFormat(this.myFormData.insuranceExpiry),fitnessExpiry:this.utilsService.getBackendDateFormat(this.myFormData.fitnessExpiry),purchaseExpiry:this.utilsService.getBackendDateFormat(this.myFormData.purchaseExpiry),roadtaxExpiry:this.utilsService.getBackendDateFormat(this.myFormData.roadTaxExpiry),sapAssetNo:this.myFormData.sapAssetNo,assetNo:this.myFormData.assetNo,chasisNumber:this.myFormData.chasisNumber};let e;this.inputEditId?(e="update",t.id=this.inputEditId):e="save",this.rentalEquipmentDataService[e](t).subscribe(t=>{"SUCCESS"===t.status?(this.utilsService.showSuccessMsg(t),this.attachmentsComponent.save("save"===e?t.sId:this.inputEditId)):this.utilsService.showFailureMsg(t)})}get(){this.rentalEquipmentDataService.get(this.inputEditId).subscribe(t=>{if("SUCCESS"===t.status){const e=t.results[0];this.photoUrl=e.rentalEquipmentImgUrl,this.myForm.patchValue({rentalItemId:e.rentalItemId,equipmentCode:e.equipmentCode,equipmentName:e.equipmentName,equipmentImage:e.equipmentImage,unitPrice:e.unitPrice,warehouseId:this.utilsService.isEmpty(e.warehouseId)?null:e.warehouseId,status:e.status,rentalStatus:e.rentalStatus,documentNumber:e.documentInfo[0]?e.documentInfo[0].documentNumber:"",documentTypeName:e.documentTypeInfo[0]?e.documentTypeInfo[0].name:"",remarks:e.remarks,fixedAsset:"1"===e.fixedAsset,ownershipId:e.ownershipId,mfrSerialNumber:e.mfrSerialNumber,serialNumber:e.serialNumber,equipmentCategoryId:e.equipmentCategoryId,model:e.model,meterReadingId:e.meterReadingId,assetValue:e.assetValue,purchaseDate:this.utilsService.getFrontendDateFormat(e.purchaseDate),warrantyDate:this.utilsService.getFrontendDateFormat(e.warrantyDate),yearOfManufacturing:this.utilsService.getFrontendDateFormat(e.yearOfManufacturing),yearOfRegistered:this.utilsService.getFrontendDateFormat(e.yearOfRegistered),yearOfPurchase:this.utilsService.getFrontendDateFormat(e.yearOfPurchase),manufacturer:e.manufacturer,regNumber:e.regNumber,lastServiceReading:e.lastServiceReading,lastServiceDate:this.utilsService.getFrontendDateFormat(e.lastServiceDate),countryId:e.countryId,stateId:e.stateId,operatorName:e.operatorName,maintenancePriorityId:e.maintenancePriorityId,insuranceExpiry:this.utilsService.getFrontendDateFormat(e.insuranceExpiry),fitnessExpiry:this.utilsService.getFrontendDateFormat(e.fitnessExpiry),purchaseExpiry:this.utilsService.getFrontendDateFormat(e.purchaseExpiry),roadTaxExpiry:this.utilsService.getFrontendDateFormat(e.roadtaxExpiry),sapAssetNo:e.sapAssetNo,assetNo:e.assetNo,chasisNumber:e.chasisNumber}),"1"===this.myFormData.rentalStatus?this.myForm.controls.status.enable():this.myForm.controls.status.disable(),this.getAutoSuggestionList("getRentalItemList",e.rentalItemInfo[0]),this.getAutoSuggestionList("getEquipmentOwnershipList",e.equipmentOwnershipInfo[0]),this.getAutoSuggestionList("getRentalStatusList",e.rentalStatusInfo[0]),this.getAutoSuggestionList("getRentalEquipmentStatusList",e.rentalEquipmentStatusInfo[0]),this.getAutoSuggestionList("getWarehouseList",e.warehouseInfo[0]),this.getAutoSuggestionList("getRentalEquipmentCategoryList",e.rentalEquipmentCategoryInfo[0]),this.getAutoSuggestionList("getRentalMaintenancePriorityList",e.rentalMaintenancePriorityInfo[0]),this.getAutoSuggestionList("getMeterReadingList",e.meterReadingInfo[0]),this.getAutoSuggestionList("getCountryList"),this.getAutoSuggestionList("getStateList")}else this.utilsService.showFailureMsg(t)})}clearForm(){this.initializeForm()}uploadImage(t){this.rentalEquipmentDataService.imageUpload(t.target.files||t.srcElement.files).subscribe(t=>{"SUCCESS"===t.status?(this.myForm.patchValue({equipmentImage:t.results.fileName}),this.photoUrl=t.results.fullUrl):this.utilsService.showFailureMsg(t)})}onEquipmentStatusChange(){this.myForm.controls.rentalStatus.setValue("1"===this.myFormData.status?"1":"5")}redirectToList(){this.utilsService.redirect("/branch/rental/equipment-list")}showVehicleAddPopup(){this.modalService.show(eo,{backdrop:"static"})}getAutoSuggestionList(t,e){this.commonDataService.getAutoSuggestionList(t).subscribe(i=>{"SUCCESS"===i.status?(this.utilsService.ifNotPushToList(i.results,e),"getRentalItemList"===t?this.rentalItemList=i.results:"getEquipmentOwnershipList"===t?this.equipmentOwnershipList=i.results:"getRentalStatusList"===t?this.rentalStatusList=i.results:"getRentalEquipmentStatusList"===t?this.rentalEquipmentStatusList=i.results:"getWarehouseList"===t?this.warehouseList=i.results.map(t=>(t.searchText=t.warehouseName+" - "+t.warehouseCode,t)):"getRentalEquipmentCategoryList"===t?this.categoryList=i.results:"getMeterReadingList"===t?this.meterReadingList=i.results:"getRentalMaintenancePriorityList"===t?this.maintenancePriorityList=i.results:"getCountryList"===t?this.regCountryList=i.results:"getStateList"===t&&(this.regStateList=i.results)):this.utilsService.showFailureMsg(i)})}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.g),s.Pb(n.f),s.Pb(n.a),s.Pb(o.l),s.Pb(m.a),s.Pb(a.e),s.Pb(r.a),s.Pb(o.N),s.Pb(K.b),s.Pb(B.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-equipment-add-employee-add"]],viewQuery:function(t,e){var i;1&t&&s.Pc(P.a,!0),2&t&&s.zc(i=s.ec())&&(e.attachmentsComponent=i.first)},decls:319,vars:97,consts:[[1,"page-title"],[4,"ngIf"],[1,"btn-group"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],[1,"working-container",3,"formGroup"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row"],[1,"col-sm-3"],[1,"form-group"],[1,"form-label"],[1,"image-container"],[3,"src"],["type","file",3,"change"],["type","hidden","formControlName","equipmentImage"],[1,"small-text"],[1,"col-sm-9"],[1,"form-group","col-sm-4"],[1,"mandatory"],["formControlName","rentalItemId",1,"form-control","form-control-sm"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","validation-error",4,"ngIf"],["type","text","formControlName","equipmentCode",1,"form-control","form-control-sm"],["type","text","formControlName","equipmentName",1,"form-control","form-control-sm"],["type","text","formControlName","unitPrice",1,"form-control","form-control-sm"],["formControlName","warehouseId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["ng-option-tmp",""],["formControlName","status",1,"form-control","form-control-sm",3,"change"],[1,"form-group","col-sm-3"],["formControlName","rentalStatus",1,"form-control","form-control-sm"],["class","form-group col-sm-4",4,"ngIf"],[1,"checkbox"],["type","checkbox","formControlName","fixedAsset"],[1,"checkmark"],["formControlName","ownershipId",1,"form-control","form-control-sm"],["type","text","formControlName","mfrSerialNumber",1,"form-control","form-control-sm"],["type","text","formControlName","serialNumber",1,"form-control","form-control-sm"],[1,"action-control"],["formControlName","equipmentCategoryId","bindLabel","categoryName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],[3,"click"],[1,"fa","fa-plus"],["type","text","formControlName","model",1,"form-control","form-control-sm"],["formControlName","meterReadingId",1,"form-control","form-control-sm"],["type","text","formControlName","assetValue",1,"form-control","form-control-sm"],["formControlName","purchaseDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["class"," validation-error",4,"ngIf"],["formControlName","warrantyDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","yearOfManufacturing",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","yearOfRegistered",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","yearOfPurchase",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["type","text","formControlName","chasisNumber",1,"form-control","form-control-sm"],["type","text","formControlName","manufacturer",1,"form-control","form-control-sm"],["type","text","formControlName","regNumber",1,"form-control","form-control-sm"],["type","text","formControlName","lastServiceReading",1,"form-control","form-control-sm"],["formControlName","lastServiceDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","countryId",1,"form-control","form-control-sm"],["formControlName","stateId",1,"form-control","form-control-sm"],["type","text","formControlName","operatorName",1,"form-control","form-control-sm"],["formControlName","maintenancePriorityId",1,"form-control","form-control-sm"],["formControlName","insuranceExpiry",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","fitnessExpiry",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","purchaseExpiry",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","roadTaxExpiry",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["type","text","formControlName","sapAssetNo",1,"form-control","form-control-sm"],["type","text","formControlName","assetNo",1,"form-control","form-control-sm"],["formControlName","remarks",1,"form-control","form-control-sm"],[3,"type","doSuccess"],[1,"btn-group","text-right"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[3,"value"],[1,"validation-error"],[1,"col-sm-7"],["type","text","formControlName","documentTypeName",1,"form-control","form-control-sm"],[1,"col-sm-5"],["type","text","formControlName","documentNumber",1,"form-control","form-control-sm"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save"],[1,"fa","fa-broom"],[1,"fa","fa-sync"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&(s.Vb(0,"div",0),s.Vb(1,"span"),s.Lc(2,"E"),s.Ub(),s.Lc(3,"quipment Master Data - "),s.Jc(4,io,2,0,"ng-container",1),s.Jc(5,ro,2,0,"ng-container",1),s.Vb(6,"div",2),s.Vb(7,"button",3),s.dc("click",(function(){return e.utilsService.goBack()})),s.Qb(8,"i",4),s.Vb(9,"span"),s.Lc(10,"Back"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(11,"div",5),s.Vb(12,"div",6),s.Vb(13,"div",7),s.Qb(14,"i",8),s.Lc(15,"Basic Info "),s.Ub(),s.Vb(16,"div",9),s.Vb(17,"div",10),s.Vb(18,"div",11),s.Vb(19,"div",12),s.Vb(20,"label",13),s.Lc(21,"Equipment Image"),s.Ub(),s.Vb(22,"div",14),s.Qb(23,"img",15),s.Ub(),s.Vb(24,"input",16),s.dc("change",(function(t){return e.uploadImage(t)})),s.Ub(),s.Qb(25,"input",17),s.Vb(26,"div",18),s.Lc(27,"Only jpg, png are allowed. Maximum 2 Mb"),s.Ub(),s.Ub(),s.Ub(),s.Vb(28,"div",19),s.Vb(29,"div",10),s.Vb(30,"div",20),s.Vb(31,"label",13),s.Lc(32,"Item"),s.Vb(33,"span",21),s.Lc(34,"*"),s.Ub(),s.Ub(),s.Vb(35,"select",22),s.Vb(36,"option",23),s.Lc(37,"--SELECT--"),s.Ub(),s.Jc(38,no,2,2,"option",24),s.Ub(),s.Jc(39,so,2,1,"div",25),s.Ub(),s.Vb(40,"div",20),s.Vb(41,"label",13),s.Lc(42,"Equipment Code"),s.Vb(43,"span",21),s.Lc(44,"*"),s.Ub(),s.Ub(),s.Qb(45,"input",26),s.Jc(46,oo,2,1,"div",25),s.Ub(),s.Vb(47,"div",20),s.Vb(48,"label",13),s.Lc(49,"Equipment Name"),s.Vb(50,"span",21),s.Lc(51,"*"),s.Ub(),s.Ub(),s.Qb(52,"input",27),s.Jc(53,ao,2,1,"div",25),s.Ub(),s.Vb(54,"div",20),s.Vb(55,"label",13),s.Lc(56,"Unit Price"),s.Vb(57,"span",21),s.Lc(58,"*"),s.Ub(),s.Ub(),s.Qb(59,"input",28),s.Jc(60,co,2,1,"div",25),s.Ub(),s.Vb(61,"div",20),s.Vb(62,"label",13),s.Lc(63,"Warehouse"),s.Ub(),s.Vb(64,"ng-select",29),s.Jc(65,uo,6,3,"ng-template",30),s.Ub(),s.Ub(),s.Vb(66,"div",20),s.Vb(67,"label",13),s.Lc(68,"Equipment Status"),s.Vb(69,"span",21),s.Lc(70,"*"),s.Ub(),s.Ub(),s.Vb(71,"select",31),s.dc("change",(function(){return e.onEquipmentStatusChange()})),s.Vb(72,"option",23),s.Lc(73,"--SELECT--"),s.Ub(),s.Jc(74,mo,2,2,"option",24),s.Ub(),s.Jc(75,lo,2,1,"div",25),s.Ub(),s.Vb(76,"div",32),s.Vb(77,"label",13),s.Lc(78,"Rental Status"),s.Vb(79,"span",21),s.Lc(80,"*"),s.Ub(),s.Ub(),s.Vb(81,"select",33),s.Vb(82,"option",23),s.Lc(83,"--SELECT--"),s.Ub(),s.Jc(84,bo,2,2,"option",24),s.Ub(),s.Jc(85,ho,2,1,"div",25),s.Ub(),s.Jc(86,po,8,0,"div",34),s.Vb(87,"div",32),s.Vb(88,"label",13),s.Lc(89,"Lock"),s.Ub(),s.Vb(90,"label",35),s.Qb(91,"input",36),s.Qb(92,"span",37),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(93,"div",6),s.Vb(94,"div",7),s.Qb(95,"i",8),s.Lc(96,"Equipment Info "),s.Ub(),s.Vb(97,"div",9),s.Vb(98,"div",10),s.Vb(99,"div",32),s.Vb(100,"label",13),s.Lc(101,"Ownership"),s.Vb(102,"span",21),s.Lc(103,"*"),s.Ub(),s.Ub(),s.Vb(104,"select",38),s.Vb(105,"option",23),s.Lc(106,"--SELECT--"),s.Ub(),s.Jc(107,go,2,2,"option",24),s.Ub(),s.Jc(108,fo,2,1,"div",25),s.Ub(),s.Vb(109,"div",32),s.Vb(110,"label",13),s.Lc(111,"Mfr Serial No."),s.Vb(112,"span",21),s.Lc(113,"*"),s.Ub(),s.Ub(),s.Qb(114,"input",39),s.Jc(115,yo,2,1,"div",25),s.Ub(),s.Vb(116,"div",32),s.Vb(117,"label",13),s.Lc(118,"Serial Number"),s.Vb(119,"span",21),s.Lc(120,"*"),s.Ub(),s.Ub(),s.Qb(121,"input",40),s.Jc(122,vo,2,1,"div",25),s.Ub(),s.Vb(123,"div",32),s.Vb(124,"label",13),s.Lc(125,"V. Category"),s.Vb(126,"span",21),s.Lc(127,"*"),s.Ub(),s.Ub(),s.Vb(128,"div",41),s.Qb(129,"ng-select",42),s.Vb(130,"span"),s.Vb(131,"a",43),s.dc("click",(function(){return e.showVehicleAddPopup()})),s.Qb(132,"i",44),s.Ub(),s.Ub(),s.Ub(),s.Jc(133,So,2,1,"div",25),s.Ub(),s.Vb(134,"div",32),s.Vb(135,"label",13),s.Lc(136,"V. Model"),s.Vb(137,"span",21),s.Lc(138,"*"),s.Ub(),s.Ub(),s.Qb(139,"input",45),s.Jc(140,Io,2,1,"div",25),s.Ub(),s.Vb(141,"div",32),s.Vb(142,"label",13),s.Lc(143,"Meter Reading"),s.Vb(144,"span",21),s.Lc(145,"*"),s.Ub(),s.Ub(),s.Vb(146,"select",46),s.Vb(147,"option",23),s.Lc(148,"--SELECT--"),s.Ub(),s.Jc(149,Co,2,2,"option",24),s.Ub(),s.Jc(150,Uo,2,1,"div",25),s.Ub(),s.Vb(151,"div",32),s.Vb(152,"label",13),s.Lc(153,"Asset Value"),s.Vb(154,"span",21),s.Lc(155,"*"),s.Ub(),s.Ub(),s.Qb(156,"input",47),s.Jc(157,Lo,2,1,"div",25),s.Ub(),s.Vb(158,"div",32),s.Vb(159,"label",13),s.Lc(160,"Purchase Date"),s.Vb(161,"span",21),s.Lc(162,"*"),s.Ub(),s.Ub(),s.Qb(163,"p-calendar",48),s.Jc(164,Vo,2,1,"div",49),s.Ub(),s.Vb(165,"div",32),s.Vb(166,"label",13),s.Lc(167,"Warranty Date"),s.Vb(168,"span",21),s.Lc(169,"*"),s.Ub(),s.Ub(),s.Qb(170,"p-calendar",50),s.Jc(171,Do,2,1,"div",49),s.Ub(),s.Vb(172,"div",32),s.Vb(173,"label",13),s.Lc(174,"Yomanufacturing"),s.Vb(175,"span",21),s.Lc(176,"*"),s.Ub(),s.Ub(),s.Qb(177,"p-calendar",51),s.Jc(178,No,2,1,"div",49),s.Ub(),s.Vb(179,"div",32),s.Vb(180,"label",13),s.Lc(181,"Yoregistered"),s.Vb(182,"span",21),s.Lc(183,"*"),s.Ub(),s.Ub(),s.Qb(184,"p-calendar",52),s.Jc(185,Fo,2,1,"div",49),s.Ub(),s.Vb(186,"div",32),s.Vb(187,"label",13),s.Lc(188,"Yopurchase"),s.Vb(189,"span",21),s.Lc(190,"*"),s.Ub(),s.Ub(),s.Qb(191,"p-calendar",53),s.Jc(192,Eo,2,1,"div",49),s.Ub(),s.Vb(193,"div",32),s.Vb(194,"label",13),s.Lc(195,"Chasis No"),s.Vb(196,"span",21),s.Lc(197,"*"),s.Ub(),s.Ub(),s.Qb(198,"input",54),s.Jc(199,To,2,1,"div",25),s.Ub(),s.Vb(200,"div",32),s.Vb(201,"label",13),s.Lc(202,"Manufacturer"),s.Vb(203,"span",21),s.Lc(204,"*"),s.Ub(),s.Ub(),s.Qb(205,"input",55),s.Jc(206,xo,2,1,"div",25),s.Ub(),s.Vb(207,"div",32),s.Vb(208,"label",13),s.Lc(209,"Registeration No"),s.Vb(210,"span",21),s.Lc(211,"*"),s.Ub(),s.Ub(),s.Qb(212,"input",56),s.Jc(213,Ao,2,1,"div",25),s.Ub(),s.Vb(214,"div",32),s.Vb(215,"label",13),s.Lc(216,"Last Service Reading"),s.Vb(217,"span",21),s.Lc(218,"*"),s.Ub(),s.Ub(),s.Qb(219,"input",57),s.Jc(220,Ro,2,1,"div",25),s.Ub(),s.Vb(221,"div",32),s.Vb(222,"label",13),s.Lc(223,"Last Service Date"),s.Vb(224,"span",21),s.Lc(225,"*"),s.Ub(),s.Ub(),s.Qb(226,"p-calendar",58),s.Jc(227,Mo,2,1,"div",49),s.Ub(),s.Vb(228,"div",32),s.Vb(229,"label",13),s.Lc(230,"Registration Country"),s.Vb(231,"span",21),s.Lc(232,"*"),s.Ub(),s.Ub(),s.Vb(233,"select",59),s.Vb(234,"option",23),s.Lc(235,"--SELECT--"),s.Ub(),s.Jc(236,ko,2,2,"option",24),s.Ub(),s.Jc(237,wo,2,1,"div",25),s.Ub(),s.Vb(238,"div",32),s.Vb(239,"label",13),s.Lc(240,"Registration State"),s.Vb(241,"span",21),s.Lc(242,"*"),s.Ub(),s.Ub(),s.Vb(243,"select",60),s.Vb(244,"option",23),s.Lc(245,"--SELECT--"),s.Ub(),s.Jc(246,Oo,2,2,"option",24),s.Ub(),s.Jc(247,qo,2,1,"div",25),s.Ub(),s.Vb(248,"div",32),s.Vb(249,"label",13),s.Lc(250,"Operator Name"),s.Vb(251,"span",21),s.Lc(252,"*"),s.Ub(),s.Ub(),s.Qb(253,"input",61),s.Jc(254,Po,2,1,"div",25),s.Ub(),s.Vb(255,"div",32),s.Vb(256,"label",13),s.Lc(257,"Maintenance Priority"),s.Vb(258,"span",21),s.Lc(259,"*"),s.Ub(),s.Ub(),s.Vb(260,"select",62),s.Vb(261,"option",23),s.Lc(262,"--SELECT--"),s.Ub(),s.Jc(263,Bo,2,2,"option",24),s.Ub(),s.Jc(264,Ko,2,1,"div",25),s.Ub(),s.Vb(265,"div",32),s.Vb(266,"label",13),s.Lc(267,"Insurance Expiry"),s.Vb(268,"span",21),s.Lc(269,"*"),s.Ub(),s.Ub(),s.Qb(270,"p-calendar",63),s.Jc(271,Jo,2,1,"div",49),s.Ub(),s.Vb(272,"div",32),s.Vb(273,"label",13),s.Lc(274,"Fitness Expiry"),s.Vb(275,"span",21),s.Lc(276,"*"),s.Ub(),s.Ub(),s.Qb(277,"p-calendar",64),s.Jc(278,Qo,2,1,"div",49),s.Ub(),s.Vb(279,"div",32),s.Vb(280,"label",13),s.Lc(281,"Puc Expiry"),s.Vb(282,"span",21),s.Lc(283,"*"),s.Ub(),s.Ub(),s.Qb(284,"p-calendar",65),s.Jc(285,_o,2,1,"div",49),s.Ub(),s.Vb(286,"div",32),s.Vb(287,"label",13),s.Lc(288,"Road Tax Expiry"),s.Vb(289,"span",21),s.Lc(290,"*"),s.Ub(),s.Ub(),s.Qb(291,"p-calendar",66),s.Jc(292,Wo,2,1,"div",49),s.Ub(),s.Vb(293,"div",32),s.Vb(294,"label",13),s.Lc(295,"SAP Asset No"),s.Vb(296,"span",21),s.Lc(297,"*"),s.Ub(),s.Ub(),s.Qb(298,"input",67),s.Jc(299,Ho,2,1,"div",25),s.Ub(),s.Vb(300,"div",32),s.Vb(301,"label",13),s.Lc(302,"Asset No"),s.Vb(303,"span",21),s.Lc(304,"*"),s.Ub(),s.Ub(),s.Qb(305,"input",68),s.Jc(306,Go,2,1,"div",25),s.Ub(),s.Vb(307,"div",32),s.Vb(308,"label",13),s.Lc(309,"V.Notes"),s.Ub(),s.Qb(310,"textarea",69),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(311,"app-attachments",70),s.dc("doSuccess",(function(){return e.redirectToList()})),s.Ub(),s.Vb(312,"div",71),s.Jc(313,zo,4,0,"button",72),s.Jc(314,jo,4,0,"button",73),s.Jc(315,$o,4,0,"button",72),s.Jc(316,Yo,4,0,"button",73),s.Ub(),s.Jc(317,Zo,7,0,"div",74),s.Jc(318,Xo,7,0,"div",74),s.Ub()),2&t&&(s.Cb(4),s.oc("ngIf",!e.inputEditId),s.Cb(1),s.oc("ngIf",e.inputEditId),s.Cb(6),s.oc("formGroup",e.myForm),s.Cb(12),s.oc("src",e.photoUrl?e.photoUrl:e.appConstants.DEFAULT_IMAGE_ICON,s.Fc),s.Cb(15),s.oc("ngForOf",e.rentalItemList),s.Cb(1),s.oc("ngIf",e.myFormErrors.rentalItemId),s.Cb(7),s.oc("ngIf",e.myFormErrors.equipmentCode),s.Cb(7),s.oc("ngIf",e.myFormErrors.equipmentName),s.Cb(7),s.oc("ngIf",e.myFormErrors.unitPrice),s.Cb(4),s.oc("items",e.warehouseList)("multiple",!1),s.Cb(10),s.oc("ngForOf",e.rentalEquipmentStatusList),s.Cb(1),s.oc("ngIf",e.myFormErrors.status),s.Cb(9),s.oc("ngForOf",e.rentalStatusList),s.Cb(1),s.oc("ngIf",e.myFormErrors.rentalStatus),s.Cb(1),s.oc("ngIf",e.inputEditId),s.Cb(21),s.oc("ngForOf",e.equipmentOwnershipList),s.Cb(1),s.oc("ngIf",e.myFormErrors.ownershipId),s.Cb(7),s.oc("ngIf",e.myFormErrors.mfrSerialNumber),s.Cb(7),s.oc("ngIf",e.myFormErrors.serialNumber),s.Cb(7),s.oc("items",e.categoryList)("multiple",!1),s.Cb(4),s.oc("ngIf",e.myFormErrors.equipmentCategoryId),s.Cb(7),s.oc("ngIf",e.myFormErrors.model),s.Cb(9),s.oc("ngForOf",e.meterReadingList),s.Cb(1),s.oc("ngIf",e.myFormErrors.meterReadingId),s.Cb(7),s.oc("ngIf",e.myFormErrors.assetValue),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",e.myFormErrors.purchaseDate),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",e.myFormErrors.warrantyDate),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",e.myFormErrors.yearOfManufacturing),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",e.myFormErrors.yearOfRegistered),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",e.myFormErrors.yearOfPurchase),s.Cb(7),s.oc("ngIf",e.myFormErrors.chasisNumber),s.Cb(7),s.oc("ngIf",e.myFormErrors.manufacturer),s.Cb(7),s.oc("ngIf",e.myFormErrors.regNumber),s.Cb(7),s.oc("ngIf",e.myFormErrors.lastServiceReading),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",e.myFormErrors.lastServiceDate),s.Cb(9),s.oc("ngForOf",e.regCountryList),s.Cb(1),s.oc("ngIf",e.myFormErrors.countryId),s.Cb(9),s.oc("ngForOf",e.regStateList),s.Cb(1),s.oc("ngIf",e.myFormErrors.stateId),s.Cb(7),s.oc("ngIf",e.myFormErrors.operatorName),s.Cb(9),s.oc("ngForOf",e.maintenancePriorityList),s.Cb(1),s.oc("ngIf",e.myFormErrors.maintenancePriorityId),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",e.myFormErrors.insuranceExpiry),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",e.myFormErrors.fitnessExpiry),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",e.myFormErrors.purchaseExpiry),s.Cb(6),s.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.appConstants.PICKER_YEAR_RANGE)("dateFormat",e.appConstants.PICKER_DATE_FORMAT),s.Cb(1),s.oc("ngIf",e.myFormErrors.roadTaxExpiry),s.Cb(7),s.oc("ngIf",e.myFormErrors.sapAssetNo),s.Cb(7),s.oc("ngIf",e.myFormErrors.assetNo),s.Cb(5),s.oc("type","MASTER_RENTAL_EQUIPMENT"),s.Cb(2),s.oc("ngIf",e.screenAcl.add&&!e.inputEditId),s.Cb(1),s.oc("ngIf",!e.inputEditId),s.Cb(1),s.oc("ngIf",e.screenAcl.update&&e.inputEditId),s.Cb(1),s.oc("ngIf",e.inputEditId),s.Cb(1),s.oc("ngIf",e.inputEditId&&!e.screenAcl.update),s.Cb(1),s.oc("ngIf",!e.inputEditId&&!e.screenAcl.add))},directives:[p.m,a.n,a.i,a.b,a.m,a.g,a.t,a.p,a.v,p.l,J.a,J.c,a.a,g.a,P.a],styles:[""]}),t})();const ea=r.h.forChild([{path:"rental-txn-list/:screenName",component:M},{path:"rental-txn-add/:screenName",component:Zi},{path:"rental-txn-edit/:screenName/:id",component:Zi},{path:"rental-txn-edit-draft/:screenName/:draftId",component:Zi},{path:"rental-txn-copy/:screenName/:copyScreenName/:copyId",component:Zi},{path:"rental-txn-duplicate/:screenName/:duplicateId",component:Zi},{path:"inspection-txn-list/:screenName",component:ur},{path:"inspection-txn-add/:screenName",component:rn},{path:"inspection-txn-edit/:screenName/:id",component:rn},{path:"inspection-txn-edit-draft/:screenName/:draftId",component:rn},{path:"inspection-txn-copy/:screenName/:copyScreenName/:copyId",component:rn},{path:"inspection-txn-duplicate/:screenName/:duplicateId",component:rn},{path:"worklog-list",component:hn},{path:"worklog-add/:screenName",component:Ss},{path:"worklog-edit/:screenName/:id",component:Ss},{path:"worklog-edit-draft/:screenName/:draftId",component:Ss},{path:"worklog-copy/:screenName/:copyScreenName/:copyId",component:Ss},{path:"worklog-duplicate/:screenName/:duplicateId",component:Ss},{path:"rental-item-list",component:Fs},{path:"rental-item-add",component:Ws},{path:"rental-item-edit/:id",component:Ws},{path:"equipment-list",component:Ys},{path:"equipment-add",component:ta},{path:"equipment-edit/:id",component:ta}]);var ia=i("o+NB"),ra=i("N5hj"),na=i("dJ0z"),sa=i("7zUj");let oa=(()=>{class t{}return t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({factory:function(e){return new(e||t)},providers:[l,b,h],imports:[[ea,ia.BranchModule,ra.a,na.a,sa.a]]}),t})()}}]);