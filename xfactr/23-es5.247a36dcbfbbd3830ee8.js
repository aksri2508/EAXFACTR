function _createForOfIteratorHelper(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw s}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{XLNE:function(e,t,i){"use strict";i.r(t),i.d(t,"SalesModule",(function(){return sn}));var r,n=i("tyNb"),s=i("ey9i"),a=i("fXoL"),o=i("IzNV"),c=i("XNiG"),u=i("HDdC"),l=i("3Pt+"),m=i("LvDl"),b=i("oARB"),d=((r=function(){function e(t,i,r,n,a,o,u,l,m,b,d){_classCallCheck(this,e),this.utilsService=t,this.storageService=i,this.branchUtilsService=r,this.salesQuoteDataService=n,this.salesOrderDataService=a,this.salesDeliveryDataService=o,this.salesArInvoiceDataService=u,this.salesArDpInvoiceDataService=l,this.salesArCreditMemoDataService=m,this.formBuilder=b,this.salesReturnDataService=d,this.appConstants=s.h,this.selectedItemsByWarehouseSubscription=new c.a,this.initializeSubscriptions()}return _createClass(e,[{key:"initializeSubscriptions",value:function(){var e=this;this.branchUtilsService.spiTxnOptionsDownloadPdf.subscribe((function(t){e.downloadPDF(t)})),this.branchUtilsService.spiTxnOptionsDownloadPickListPdf.subscribe((function(t){e.downloadPickListPDF(t)}))}},{key:"checkScreenNameValid",value:function(e){return!(!this.branchUtilsService.screenAttributes.hasOwnProperty(e)||"salesQuote"!==e&&"salesOrder"!==e&&"salesDelivery"!==e&&"salesArInvoice"!==e&&"salesArDpInvoice"!==e&&"salesArCreditMemo"!==e&&"salesReturn"!==e)}},{key:"getScreenDataService",value:function(e){return"salesQuote"===e?this.salesQuoteDataService:"salesOrder"===e?this.salesOrderDataService:"salesDelivery"===e?this.salesDeliveryDataService:"salesArInvoice"===e?this.salesArInvoiceDataService:"salesArDpInvoice"===e?this.salesArDpInvoiceDataService:"salesArCreditMemo"===e?this.salesArCreditMemoDataService:"salesReturn"===e?this.salesReturnDataService:void 0}},{key:"addFieldsVisibility",value:function(e,t){return"salesQuote"===e&&("fnValidUntil"===t||"fnDiscountTab"===t)||!("salesOrder"!==e&&"salesDelivery"!==e||"fnDeliveryDate"!==t&&"fnDiscountTab"!==t)||"salesArInvoice"===e&&("fnDueDate"===t||"fnGatepassStatus"===t||"fnDiscountTab"===t||"fnDpInvoice"===t||"courier"===t||"trackingNumber"===t||"deliveryStatus"===t)||"salesArCreditMemo"===e&&("fnDueDate"===t||"fnDiscountTab"===t||"fnWithoutQtyPosting"===t||"fnOriginalRefNumber"===t||"fnOriginalRefDate"===t||"fnIssuingNoteId"===t||"fnDpInvoice"===t)||"salesArDpInvoice"===e&&("fnDueDate"===t||"fnDpmTab"===t)||"salesReturn"===e&&("fnDueDate"===t||"fnDiscountTab"===t)}},{key:"getFormErrors",value:function(e,t){if("mainFields"===t){var i={documentNumberingId:"",documentNumber:"",customerBpId:"",currencyId:"",postingDate:"",documentDate:"",status:"",discountPercentage:"",rounding:"",totalAmount:"",itemListArray:[]};return"salesQuote"===e?i.validUntil="":"salesOrder"===e||"salesDelivery"===e?i.deliveryDate="":"salesArInvoice"!==e&&"salesArDpInvoice"!==e&&"salesArCreditMemo"!==e&&"salesReturn"!==e||(i.dueDate="","salesArDpInvoice"===e&&(i.dpmPercentage="",i.dpmValue=""),"salesArInvoice"!==e&&"salesArCreditMemo"!==e||(i.salesArDpInvoiceUsedAmount="")),i}if("itemFields"===t){var r={itemId:"",quantity:"",unitPrice:"",warehouseId:"",binId:"",discountPercentage:"",taxId:"",distributionRulesId:""};return"salesOrder"===e&&(r.dealerDiscountPercentage=""),r}}},{key:"getFormValMsgs",value:function(e){var t={documentNumberingId:{required:"Document No is required"},documentNumber:{required:"Document No is required"},customerBpId:{required:"Customer Name is required"},currencyId:{required:"Currency is required"},postingDate:{required:"Posting Date is required"},documentDate:{required:"Document Date is required"},status:{required:"Status is required"},discountPercentage:{min:"Enter 0 to 100",max:"Enter 0 to 100",pattern:"Only positive numbers are allowed"},rounding:{pattern:"Only numbers are allowed"},totalAmount:{required:"Total Amount is required"}};return"salesQuote"===e?t.validUntil={required:"Valid Until is required"}:"salesOrder"===e||"salesDelivery"===e?t.deliveryDate={required:"Delivery Date is required"}:"salesArInvoice"!==e&&"salesArDpInvoice"!==e&&"salesArCreditMemo"!==e&&"salesReturn"!==e||(t.dueDate={required:"Due Date is required"},"salesArDpInvoice"===e&&(t.dpmPercentage={required:"DPM % is required",min:"Enter 0 to 100",max:"Enter 0 to 100",pattern:"Only positive numbers are allowed"},t.dpmValue={required:"DPM is required",min:"Minimum 1",pattern:"Only positive numbers are allowed"}),"salesArInvoice"!==e&&"salesArCreditMemo"!==e||(t.salesArDpInvoiceUsedAmount={pattern:"Only positive numbers are allowed"})),t.itemListArray={itemId:{required:"Item Name is required"},quantity:{required:"Quantity is required",min:"Minimum 1",pattern:"Only positive numbers are allowed"},unitPrice:{pattern:"Only positive numbers are allowed"},warehouseId:{required:"Warehouse is required"},binId:{required:"Bin is required"},discountPercentage:{min:"Enter 0 to 100",max:"Enter 0 to 100",pattern:"Only positive numbers are allowed"},taxId:{required:"Tax Code is required"},distributionRulesId:{required:"Dist.Rules is required"}},"salesOrder"===e&&(t.itemListArray.dealerDiscountPercentage={min:"Enter 0 to 100",max:"Enter 0 to 100",pattern:"Only positive numbers are allowed"}),t}},{key:"getFormMainFields",value:function(e){var t={documentNumberingId:[null,[l.u.required]],documentNumber:["",[l.u.required]],documentNumberingType:[""],customerBpId:[null,[l.u.required]],customerBpContactsId:[null],currencyId:["",[l.u.required]],referenceNumber:[""],postingDate:[new Date,[l.u.required]],documentDate:[new Date,[l.u.required]],salesEmpId:[null],status:["1",[l.u.required]],remarks:[""],totalBeforeDiscount:["0.00"],discountPercentage:["0.00",[l.u.min(0),l.u.max(100),l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],discountValue:["0.00"],taxPercentage:["0.00"],roundingOffCheckbox:[!1],rounding:[{value:"0.00",disabled:!0},[l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveNegativeFloatNumber)]],totalAmount:[0,[l.u.required]],customerShipToBpAddressId:[""],customerShipToAddress:[""],customerBillToBpAddressId:[""],customerBillToAddress:[""],paymentTermsId:[""],paymentMethodId:[""],taxCode:[""],originalRefNumber:[""],originalRefDate:[""],issuingNoteId:[""],deletedItemChildIds:[[]],approvalStatus:["4"],showAddButton:[""],itemsTotalAmount:["0.00"],editFlag:[!1]};"salesQuote"===e?t.validUntil=["",[l.u.required]]:"salesOrder"===e||"salesDelivery"===e?t.deliveryDate=["",[l.u.required]]:"salesArInvoice"!==e&&"salesArDpInvoice"!==e&&"salesArCreditMemo"!==e&&"salesReturn"!==e||(t.dueDate=["",[l.u.required]],"salesArInvoice"===e&&(t.gatepassStatus=["1"],t.salesArDpInvoiceId=[null],t.salesArDpInvoiceUsedAmount=[0,[l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],t.salesArDpInvoiceUsedTaxAmount=[{value:0,disabled:!0}],t.courier=[""],t.trackingNumber=[""],t.deliveryStatus=[1]),"salesArCreditMemo"===e&&(t.salesArDpInvoiceId=[{value:null,disabled:!0}],t.salesArDpInvoiceUsedAmount=[{value:0,disabled:!0},[l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],t.salesArDpInvoiceUsedTaxAmount=[{value:0,disabled:!0}]),"salesArDpInvoice"===e&&(t.dpmPercentage=[0,[l.u.required,l.u.min(0),l.u.max(100),l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],t.dpmValue=[0,[l.u.required,l.u.min(1),l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]])),t.itemListArray=this.formBuilder.array([]);var i=this.formBuilder.group(t);return this.setItemFieldsCustomValidations(i,e),i}},{key:"setItemFieldsCustomValidations",value:function(e,t){var i=[];"salesQuote"===t&&i.push(this.utilsService.startEndDateValidator("documentDate","validUntil","invalidValidUntilDate","Should => Document Date")),"salesOrder"!==t&&"salesDelivery"!==t||i.push(this.utilsService.startEndDateValidator("documentDate","deliveryDate","invalidDeliveryDate","Should => Document Date")),"salesArInvoice"!==t&&"salesArDpInvoice"!==t&&"salesArCreditMemo"!==t&&"salesReturn"!==t||i.push(this.utilsService.startEndDateValidator("documentDate","dueDate","invalidDueDate","Should => Document Date")),i.push(this.utilsService.startEndDateValidator("postingDate","documentDate","invalidPostingDate","Should <= Document Date")),e.setValidators(l.u.compose(i)),e.updateValueAndValidity()}},{key:"getMainFieldsWithData",value:function(e,t){var i={};return this.utilsService.updateObject(i,"documentNumberingId",t.documentNumberingId),this.utilsService.updateObject(i,"documentNumber",t.documentNumber),t.documentNumberingInfo&&this.utilsService.updateObject(i,"documentNumberingType",t.documentNumberingInfo.length>0?t.documentNumberingInfo[0].documentNumberingType:""),this.utilsService.updateObject(i,"customerBpId",t.customerBpId),this.utilsService.updateObject(i,"customerBpContactsId",t.customerBpContactsId),this.utilsService.updateObject(i,"currencyId",t.currencyId),this.utilsService.updateObject(i,"referenceNumber",t.referenceNumber),this.utilsService.updateObject(i,"postingDate",t.postingDate,"date"),this.utilsService.updateObject(i,"documentDate",t.documentDate,"date"),this.utilsService.updateObject(i,"salesEmpId",t.salesEmpId),this.utilsService.updateObject(i,"status",t.status),this.utilsService.updateObject(i,"remarks",t.remarks),this.utilsService.updateObject(i,"totalBeforeDiscount",t.totalBeforeDiscount),this.utilsService.updateObject(i,"discountPercentage",t.discountPercentage),this.utilsService.updateObject(i,"discountValue",t.discountValue),this.utilsService.updateObject(i,"taxPercentage",t.taxPercentage),"1"===t.roundingFlag&&(i.roundingOffCheckbox=!0),this.utilsService.updateObject(i,"rounding",t.rounding),this.utilsService.updateObject(i,"totalAmount",t.totalAmount),this.utilsService.updateObject(i,"customerShipToBpAddressId",t.customerShipToBpAddressId),this.utilsService.updateObject(i,"customerShipToAddress",t.customerShipToAddress),this.utilsService.updateObject(i,"customerBillToBpAddressId",t.customerBillToBpAddressId),this.utilsService.updateObject(i,"customerBillToAddress",t.customerBillToAddress),this.utilsService.updateObject(i,"paymentTermsId",t.paymentTermsId),this.utilsService.updateObject(i,"paymentMethodId",t.paymentMethodId),this.utilsService.updateObject(i,"taxCode",t.taxCode),this.utilsService.updateObject(i,"originalRefNumber",t.originalRefNumber),this.utilsService.updateObject(i,"originalRefDate",t.originalRefDate,"date"),this.utilsService.updateObject(i,"issuingNoteId",t.issuingNoteId),"salesQuote"===e?this.utilsService.updateObject(i,"validUntil",t.validUntil,"date"):"salesOrder"===e||"salesDelivery"===e?this.utilsService.updateObject(i,"deliveryDate",t.deliveryDate,"date"):"salesArInvoice"!==e&&"salesArDpInvoice"!==e&&"salesArCreditMemo"!==e&&"salesReturn"!==e||(this.utilsService.updateObject(i,"dueDate",t.dueDate,"date"),"salesArInvoice"===e&&(this.utilsService.updateObject(i,"gatepassStatus",t.gatepassStatus),this.utilsService.updateObject(i,"courier",t.courier),this.utilsService.updateObject(i,"trackingNumber",t.trackingNumber),this.utilsService.updateObject(i,"deliveryStatus",t.deliveryStatus)),"salesArInvoice"!==e&&"salesArCreditMemo"!==e||(this.utilsService.updateObject(i,"salesArDpInvoiceId",t.salesArDpInvoiceId),this.utilsService.updateObject(i,"salesArDpInvoiceUsedAmount",t.salesArDpInvoiceUsedAmount),this.utilsService.updateObject(i,"salesArDpInvoiceUsedTaxAmount",t.salesArDpInvoiceUsedTaxAmount)),"salesArDpInvoice"===e&&(this.utilsService.updateObject(i,"dpmPercentage",t.dpmPercentage),this.utilsService.updateObject(i,"dpmValue",t.dpmValue))),this.utilsService.updateObject(i,"editFlag",t.editFlag),this.utilsService.updateObject(i,"showAddButton",t.showAddButton),this.utilsService.updateObject(i,"approvalStatus",t.approvalStatus),i}},{key:"getFormItemFields",value:function(e,t,i){var r=[];this.storageService.get("distRulesMode")&&r.push(l.u.required);var n={itemId:[null,[l.u.required]],lastPrice:["-"],quantity:[1,[l.u.required,l.u.min(1),l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveIntNumber)]],openQuantity:[0],uomId:[null],unitPrice:["0.00",[l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],warehouseId:[this.storageService.get("defaultWarehouseId")?this.storageService.get("defaultWarehouseId"):null],binId:[null],binList:[[]],hsnId:[null],discountPercentage:["0.00",[l.u.min(0),l.u.max(100),l.u.pattern(this.appConstants.VALIDATION_PATTERNS.positiveFloatNumber)]],taxId:[this.storageService.get("salesTaxId")?this.storageService.get("salesTaxId"):null,[l.u.required]],itemTaxPercentage:["0.00"],itemTaxValue:["0.00"],totalItemAmount:["0.00"],distributionRulesId:[null,r],id:[""],copyFromType:[""],copyFromId:[""],showDeleteIcon:[!0],orderedQuantity:[0],stockDetails:[""],copyFromOpenQuantity:[0],availableStock:[{value:0,disabled:!0}],committedStock:[{value:0,disabled:!0}],orderedStock:[{value:0,disabled:!0}]};"salesOrder"===e&&(n.serialNumber=[""],n.expiryDate=[""],n.bpApproval=[!1],n.remarks=[""],n.dealerDiscountPercentage=["0.00"]),"salesDelivery"!==e&&"salesArInvoice"!==e&&"salesArDpInvoice"!==e&&"salesArCreditMemo"!==e&&"salesReturn"!==e||(n.warehouseId[1]=l.u.required,n.binId[1]=l.u.required,"salesArCreditMemo"===e&&(n.withoutQtyPosting=[!1])),t&&this.setDataToItemFields(e,n,t);var s=this.formBuilder.group(n);return i&&this.setItemFieldsCustomValidation(s,i),s}},{key:"setItemFieldsCustomValidation",value:function(e,t){var i=e.getRawValue(),r=[];"edit"===t?r.push(this.utilsService.minValidator("quantity",i.orderedQuantity,"invalidMinQuantity","Minimum : "+i.orderedQuantity)):"copy"===t&&"SALES_QUOTE"!==i.copyFromType&&"SALES_ORDER"!==i.copyFromType&&r.push(this.utilsService.maxValidator("quantity",i.copyFromOpenQuantity,"invalidMaxQuantity","Maximim : "+i.orderedQuantity)),e.setValidators(l.u.compose(r)),e.updateValueAndValidity()}},{key:"setDataToItemFields",value:function(e,t,i){this.utilsService.updateObject(t,"itemId",i.itemId),this.utilsService.updateObject(t,"lastPrice",i.lastPrice),this.utilsService.updateObject(t,"quantity",i.quantity),this.utilsService.updateObject(t,"openQuantity",parseInt(i.openQuantity,0)<0?0:i.openQuantity),this.utilsService.updateObject(t,"uomId",i.uomId),this.utilsService.updateObject(t,"unitPrice",i.unitPrice),this.utilsService.updateObject(t,"warehouseId",i.warehouseId),this.utilsService.updateObject(t,"binId",i.binId),this.utilsService.updateObject(t,"hsnId",i.hsnId),this.utilsService.updateObject(t,"discountPercentage",i.discountPercentage),this.utilsService.updateObject(t,"taxId",i.taxId),this.utilsService.updateObject(t,"itemTaxPercentage",i.itemTaxPercentage),this.utilsService.updateObject(t,"itemTaxValue",i.itemTaxValue),this.utilsService.updateObject(t,"totalItemAmount",i.totalItemAmount),this.utilsService.isEmpty(i.distributionRulesId)||(t.distributionRulesId[0]=this.branchUtilsService.distRulesRemoveZeroPatternOnEdit(i.distributionRulesId)),this.utilsService.updateObject(t,"id",i.id),this.utilsService.updateObject(t,"copyFromType",i.copyFromType),this.utilsService.updateObject(t,"copyFromId",i.copyFromId),this.utilsService.updateObject(t,"copyFromOpenQuantity",i.copyFromOpenQuantity),"salesOrder"===e&&(this.utilsService.updateObject(t,"serialNumber",i.serialNumber),this.utilsService.updateObject(t,"expiryDate",i.expiryDate,"date"),t.bpApproval="1"===i.bpApproval,this.utilsService.updateObject(t,"remarks",i.remarks),this.utilsService.updateObject(t,"dealerDiscountPercentage",i.dealerDiscountPercentage)),"salesArCreditMemo"===e&&(t.withoutQtyPosting="1"===i.withoutQtyPosting),this.utilsService.updateObject(t,"orderedQuantity",i.orderedQuantity)}},{key:"getSaveUpdateDataFormation",value:function(e,t){var i=this,r=t.getRawValue(),n={documentNumberingId:r.documentNumberingId,documentNumber:r.documentNumber,documentNumberingType:r.documentNumberingType,customerBpId:r.customerBpId,customerBpContactsId:r.customerBpContactsId,currencyId:r.currencyId,referenceNumber:r.referenceNumber,postingDate:this.utilsService.getBackendDateFormat(r.postingDate),documentDate:this.utilsService.getBackendDateFormat(r.documentDate),salesEmpId:r.salesEmpId,status:r.status,remarks:r.remarks,totalBeforeDiscount:r.totalBeforeDiscount,discountPercentage:r.discountPercentage,discountValue:r.discountValue,taxPercentage:r.taxPercentage,roundingFlag:r.roundingOffCheckbox?1:0,rounding:r.rounding,totalAmount:r.totalAmount,customerShipToBpAddressId:r.customerShipToBpAddressId,customerShipToAddress:r.customerShipToAddress,customerBillToBpAddressId:r.customerBillToBpAddressId,customerBillToAddress:r.customerBillToAddress,paymentTermsId:r.paymentTermsId,paymentMethodId:r.paymentMethodId,taxCode:r.taxCode,originalRefNumber:r.originalRefNumber,originalRefDate:this.utilsService.getBackendDateFormat(r.originalRefDate),issuingNoteId:r.issuingNoteId,itemListArray:[]};return"salesQuote"===e?n.validUntil=this.utilsService.getBackendDateFormat(r.validUntil):"salesOrder"===e||"salesDelivery"===e?n.deliveryDate=this.utilsService.getBackendDateFormat(r.deliveryDate):"salesArInvoice"!==e&&"salesArDpInvoice"!==e&&"salesArCreditMemo"!==e&&"salesReturn"!==e||(n.dueDate=this.utilsService.getBackendDateFormat(r.dueDate),"salesArInvoice"===e&&(n.gatepassStatus=r.gatepassStatus,n.courier=r.courier,n.trackingNumber=r.trackingNumber,n.deliveryStatus=r.deliveryStatus),"salesArInvoice"!==e&&"salesArCreditMemo"!==e||(n.salesArDpInvoiceId=r.salesArDpInvoiceId,n.salesArDpInvoiceUsedAmount=r.salesArDpInvoiceUsedAmount,n.salesArDpInvoiceUsedTaxAmount=r.salesArDpInvoiceUsedTaxAmount),"salesArDpInvoice"===e&&(n.dpmPercentage=r.dpmPercentage,n.dpmValue=r.dpmValue)),r.itemListArray.forEach((function(t){if("3"===r.status&&i.utilsService.isEmpty(t.id));else{var s={itemId:t.itemId,lastPrice:t.lastPrice,quantity:t.quantity,uomId:t.uomId,unitPrice:t.unitPrice,warehouseId:t.warehouseId,binId:t.binId,hsnId:t.hsnId,discountPercentage:t.discountPercentage,taxId:t.taxId,itemTaxPercentage:t.itemTaxPercentage,itemTaxValue:t.itemTaxValue,totalItemAmount:t.totalItemAmount,distributionRulesId:Array.isArray(t.distributionRulesId)?t.distributionRulesId.join(","):"",id:t.id,copyFromType:t.copyFromType,copyFromId:t.copyFromId};"salesOrder"===e&&(s.serialNumber=t.serialNumber,s.expiryDate=i.utilsService.getBackendDateFormat(t.expiryDate),s.bpApproval=t.bpApproval?"1":"0",s.remarks=t.remarks,s.dealerDiscountPercentage=t.dealerDiscountPercentage),"salesArCreditMemo"===e&&(s.withoutQtyPosting=t.withoutQtyPosting?"1":"0"),n.itemListArray.push(s)}})),n}},{key:"manipulationsOnEdit",value:function(e,t){"1"===t.value.status?(t.controls.documentNumberingId.disable(),t.controls.documentNumber.disable(),t.controls.customerBpId.disable(),t.controls.roundingOffCheckbox.disable(),t.controls.rounding.disable(),t.controls.itemListArray.controls.forEach((function(t){var i=t.getRawValue();t.controls.itemId.disable(),parseInt(i.orderedQuantity,0)>0&&t.patchValue({showDeleteIcon:!1}),parseInt(i.openQuantity,0)<=0&&(t.disable(),t.patchValue({showDeleteIcon:!1})),"salesDelivery"!==e&&"salesArInvoice"!==e&&"salesArDpInvoice"!==e&&"salesArCreditMemo"!==e&&"salesReturn"!==e||t.patchValue({showDeleteIcon:!1})})),"salesDelivery"!==e&&"salesArInvoice"!==e&&"salesArDpInvoice"!==e&&"salesArCreditMemo"!==e&&"salesReturn"!==e||(t.disable(),t.controls.customerBpContactsId.enable(),t.controls.documentDate.enable(),t.controls.salesEmpId.enable(),t.controls.remarks.enable(),t.controls.status.enable(),"salesArInvoice"!==e&&"salesArDpInvoice"!==e&&"salesReturn"!==e||t.controls.dueDate.enable(),"salesArInvoice"===e&&t.controls.gatepassStatus.enable())):t.enable()}},{key:"manipulationsOnAddEditBasedOnRole",value:function(e,t,i){"2"===this.storageService.get("employeeTypeId")&&"salesOrder"===e&&t.controls.itemListArray.controls.forEach((function(e){e.controls.bpApproval.disable(),e.controls.remarks.disable()})),"3"===this.storageService.get("employeeTypeId")&&"salesOrder"===e&&(t.disable(),t.controls.customerBpContactsId.enable(),t.controls.deliveryDate.enable(),t.controls.remarks.enable(),t.controls.discountPercentage.enable(),t.controls.itemListArray.controls.forEach((function(e){e.disable(),e.controls.itemId.enable(),e.controls.quantity.enable(),e.controls.uomId.enable(),e.controls.discountPercentage.enable(),e.controls.serialNumber.enable(),e.controls.expiryDate.enable(),e.controls.bpApproval.enable(),e.controls.remarks.enable()}))),"5"===this.storageService.get("employeeTypeId")&&"salesOrder"===e&&(t.disable(),t.controls.customerBpContactsId.enable(),t.controls.deliveryDate.enable(),t.controls.remarks.enable(),t.controls.discountPercentage.enable(),i||t.controls.customerBpId.enable(),t.controls.itemListArray.controls.forEach((function(e){e.disable(),e.controls.itemId.enable(),e.controls.quantity.enable(),e.controls.uomId.enable(),e.controls.discountPercentage.enable()})))}},{key:"manipulationsOnCopy",value:function(e,t){t.controls.customerBpId.disable(),"salesArInvoice"!==e&&"salesArCreditMemo"!==e||(t.controls.salesArDpInvoiceId.enable(),t.controls.salesArDpInvoiceUsedAmount.enable()),t.controls.itemListArray.controls.forEach((function(e){e.controls.itemId.disable()}))}},{key:"redirectToList",value:function(e){this.utilsService.redirect("/branch/sales/sales-txn-list/"+e)}},{key:"listFieldsVisibility",value:function(e,t){if("salesQuote"===e){if("validUntil"===t)return!0}else if("salesOrder"===e||"salesDelivery"===e){if("deliveryDate"===t)return!0}else if("salesArInvoice"===e||"salesArDpInvoice"===e||"salesArCreditMemo"===e||"salesReturn"===e){if("dueDate"===t)return!0;if("salesArInvoice"===e&&("courier"===t||"trackingNumber"===t||"deliveryStatus"===t))return!0}return!1}},{key:"getFormSearchFields",value:function(e){var t={fromDate:"",toDate:"",isDraft:!1,branchName:"",documentNumber:"",sapId:"",customerBpName:"",postingDate:"",status:"1",totalAmount:"",approvalStatus:""};return"salesQuote"===e?t.validUntil="":"salesOrder"===e||"salesDelivery"===e?t.deliveryDate="":"salesArInvoice"!==e&&"salesArDpInvoice"!==e&&"salesArCreditMemo"!==e&&"salesReturn"!==e||(t.dueDate="","salesArInvoice"===e&&(t.courier="",t.trackingNumber="",t.deliveryStatus="")),t}},{key:"getSearchDataFormation",value:function(e,t){var i={fromDate:this.utilsService.getBackendDateFormat(t.fromDate),toDate:this.utilsService.getBackendDateFormat(t.toDate),isDraft:t.isDraft?1:0,branchName:t.branchName,documentNumber:t.documentNumber,sapId:t.sapId,customerBpName:t.customerBpName,postingDate:this.utilsService.getBackendDateFormat(t.postingDate),status:t.status,totalAmount:t.totalAmount,approvalStatus:t.approvalStatus};return"salesQuote"===e?i.validUntil=this.utilsService.getBackendDateFormat(t.validUntil):"salesOrder"===e||"salesDelivery"===e?i.deliveryDate=this.utilsService.getBackendDateFormat(t.deliveryDate):"salesArInvoice"!==e&&"salesArDpInvoice"!==e&&"salesArCreditMemo"!==e&&"salesReturn"!==e||(i.dueDate=this.utilsService.getBackendDateFormat(t.dueDate),"salesArInvoice"===e&&(i.courier=t.courier,i.trackingNumber=t.trackingNumber,i.deliveryStatus=t.deliveryStatus)),i}},{key:"redirectToAdd",value:function(e){this.utilsService.redirect("/branch/sales/sales-txn-add/"+e)}},{key:"redirectToEdit",value:function(e,t,i){this.utilsService.redirect("1"===i?"/branch/sales/sales-txn-edit-draft/"+e+"/"+this.utilsService.encrypt(t):"/branch/sales/sales-txn-edit/"+e+"/"+this.utilsService.encrypt(t))}},{key:"getAnalyticsData",value:function(e){var t=this,i=this.getScreenDataService(e);return new u.a((function(e){i.getAnalyticsData().subscribe((function(i){if("SUCCESS"===i.status){var r=m.orderBy(i.results,["id"],["asc"]);e.next(r),e.complete()}else t.utilsService.showFailureMsg(i),e.error(),e.complete()}))}))}},{key:"downloadAsExcel",value:function(e,t){var i=this;this.utilsService.showSuccessMsg("Processing to download the Excel..."),this.getScreenDataService(e).downloadAsExcel(t).subscribe((function(e){"SUCCESS"===e.status?i.utilsService.externalRedirect(e.fileUrl):i.utilsService.showFailureMsg(e)}))}},{key:"downloadPDF",value:function(e){var t=this;e.spiName===this.branchUtilsService.spiTxnId.sales&&(this.utilsService.showSuccessMsg("Processing to download the PDF..."),this.getScreenDataService(e.screenName).downloadPDF(e.id).subscribe((function(e){t.utilsService.externalRedirect(e.url,!0)})))}},{key:"downloadPickListPDF",value:function(e){var t=this;e.spiName===this.branchUtilsService.spiTxnId.sales&&(this.utilsService.showSuccessMsg("Processing to download the PDF..."),this.getScreenDataService(e.screenName).downloadPickListPDF(e.id).subscribe((function(e){t.utilsService.externalRedirect(e.url,!0)})))}}]),e}()).\u0275fac=function(e){return new(e||r)(a.Zb(s.g),a.Zb(s.f),a.Zb(o.a),a.Zb(b.Z),a.Zb(b.Y),a.Zb(b.X),a.Zb(b.W),a.Zb(b.V),a.Zb(b.U),a.Zb(l.e),a.Zb(b.ab))},r.\u0275prov=a.Lb({token:r,factory:r.\u0275fac}),r),p=i("ofXK"),h=i("eO1q"),v=i("rEr+"),f=i("7zfz"),y=i("Mfq2"),g=["dataTable"];function S(e,t){if(1&e){var i=a.Wb();a.Vb(0,"button",24),a.dc("click",(function(){a.Dc(i);var e=a.hc(2);return e.sTxnUtilsService.downloadAsExcel(e.inputScreenName,e.listingProperties)})),a.Qb(1,"i",25),a.Vb(2,"span"),a.Lc(3,"Download as Excel"),a.Ub(),a.Ub()}}function I(e,t){if(1&e&&(a.Vb(0,"div",26),a.Vb(1,"div",27),a.Vb(2,"div",28),a.Lc(3),a.Ub(),a.Vb(4,"div",29),a.Lc(5),a.Ub(),a.Ub(),a.Ub()),2&e){var i=t.$implicit,r=a.hc(2);a.Cb(3),a.Nc(" ",i.name," "),a.Cb(1),a.oc("ngClass",r.appConstants.TXN_STATUS_COLOR_CLS[i.id]),a.Cb(1),a.Mc(i.count)}}function C(e,t){1&e&&(a.Vb(0,"th",48),a.Lc(1," Branch Name "),a.Qb(2,"p-sortIcon",33),a.Ub()),2&e&&(a.oc("pSortableColumn","branchName"),a.Cb(2),a.oc("field","branchName"))}function U(e,t){1&e&&(a.Vb(0,"th",49),a.Lc(1,"Sap Doc No "),a.Qb(2,"p-sortIcon",33),a.Ub()),2&e&&(a.oc("pSortableColumn","sapId"),a.Cb(2),a.oc("field","sapId"))}function D(e,t){1&e&&(a.Vb(0,"th",38),a.Lc(1,"Valid Until "),a.Qb(2,"p-sortIcon",33),a.Ub()),2&e&&(a.oc("pSortableColumn","validUntil"),a.Cb(2),a.oc("field","validUntil"))}function L(e,t){1&e&&(a.Vb(0,"th",50),a.Lc(1,"Delivery Date "),a.Qb(2,"p-sortIcon",33),a.Ub()),2&e&&(a.oc("pSortableColumn","deliveryDate"),a.Cb(2),a.oc("field","deliveryDate"))}function V(e,t){1&e&&(a.Vb(0,"th",38),a.Lc(1,"Due Date "),a.Qb(2,"p-sortIcon",33),a.Ub()),2&e&&(a.oc("pSortableColumn","dueDate"),a.Cb(2),a.oc("field","dueDate"))}function A(e,t){1&e&&(a.Vb(0,"th",38),a.Lc(1,"Courier "),a.Qb(2,"p-sortIcon",33),a.Ub()),2&e&&(a.oc("pSortableColumn","courier"),a.Cb(2),a.oc("field","courier"))}function N(e,t){1&e&&(a.Vb(0,"th",38),a.Lc(1,"Tracking Number "),a.Qb(2,"p-sortIcon",33),a.Ub()),2&e&&(a.oc("pSortableColumn","trackingNumber"),a.Cb(2),a.oc("field","trackingNumber"))}function x(e,t){1&e&&(a.Vb(0,"th",38),a.Lc(1,"Delivery Status "),a.Qb(2,"p-sortIcon",33),a.Ub()),2&e&&(a.oc("pSortableColumn","deliveryStatus"),a.Cb(2),a.oc("field","deliveryStatus"))}function F(e,t){if(1&e){var i=a.Wb();a.Vb(0,"th"),a.Vb(1,"input",44),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc(3).searchForm.branchName=e}))("keyup.enter",(function(){return a.Dc(i),a.hc(3).resetListing()})),a.Ub(),a.Ub()}if(2&e){var r=a.hc(3);a.Cb(1),a.oc("ngModel",r.searchForm.branchName)}}function T(e,t){if(1&e){var i=a.Wb();a.Vb(0,"th"),a.Vb(1,"input",44),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc(3).searchForm.sapId=e}))("keyup.enter",(function(){return a.Dc(i),a.hc(3).resetListing()})),a.Ub(),a.Ub()}if(2&e){var r=a.hc(3);a.Cb(1),a.oc("ngModel",r.searchForm.sapId)}}function E(e,t){if(1&e){var i=a.Wb();a.Vb(0,"th"),a.Vb(1,"p-calendar",12),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc(3).searchForm.validUntil=e}))("onSelect",(function(){return a.Dc(i),a.hc(3).resetListing()})),a.Ub(),a.Ub()}if(2&e){var r=a.hc(3);a.Cb(1),a.oc("ngModel",r.searchForm.validUntil)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT)}}function k(e,t){if(1&e){var i=a.Wb();a.Vb(0,"th"),a.Vb(1,"p-calendar",12),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc(3).searchForm.deliveryDate=e}))("onSelect",(function(){return a.Dc(i),a.hc(3).resetListing()})),a.Ub(),a.Ub()}if(2&e){var r=a.hc(3);a.Cb(1),a.oc("ngModel",r.searchForm.deliveryDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT)}}function O(e,t){if(1&e){var i=a.Wb();a.Vb(0,"th"),a.Vb(1,"p-calendar",12),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc(3).searchForm.dueDate=e}))("onSelect",(function(){return a.Dc(i),a.hc(3).resetListing()})),a.Ub(),a.Ub()}if(2&e){var r=a.hc(3);a.Cb(1),a.oc("ngModel",r.searchForm.dueDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT)}}function P(e,t){if(1&e&&(a.Vb(0,"option",51),a.Lc(1),a.Ub()),2&e){var i=t.$implicit;a.oc("value",i.id),a.Cb(1),a.Nc(" ",i.name," ")}}function B(e,t){if(1&e&&(a.Vb(0,"option",51),a.Lc(1),a.Ub()),2&e){var i=t.$implicit;a.oc("value",i.id),a.Cb(1),a.Nc(" ",i.name," ")}}function K(e,t){if(1&e){var i=a.Wb();a.Vb(0,"th"),a.Vb(1,"input",44),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc(3).searchForm.courier=e}))("keyup.enter",(function(){return a.Dc(i),a.hc(3).resetListing()})),a.Ub(),a.Ub()}if(2&e){var r=a.hc(3);a.Cb(1),a.oc("ngModel",r.searchForm.courier)}}function M(e,t){if(1&e){var i=a.Wb();a.Vb(0,"th"),a.Vb(1,"input",44),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc(3).searchForm.trackingNumber=e}))("keyup.enter",(function(){return a.Dc(i),a.hc(3).resetListing()})),a.Ub(),a.Ub()}if(2&e){var r=a.hc(3);a.Cb(1),a.oc("ngModel",r.searchForm.trackingNumber)}}function R(e,t){if(1&e){var i=a.Wb();a.Vb(0,"th"),a.Vb(1,"select",45),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc(3).searchForm.deliveryStatus=e}))("change",(function(){return a.Dc(i),a.hc(3).resetListing()})),a.Vb(2,"option",46),a.Lc(3,"--SELECT--"),a.Ub(),a.Vb(4,"option",52),a.Lc(5,"Yes"),a.Ub(),a.Vb(6,"option",53),a.Lc(7,"No"),a.Ub(),a.Ub(),a.Ub()}if(2&e){var r=a.hc(3);a.Cb(1),a.oc("ngModel",r.searchForm.deliveryStatus)}}function w(e,t){if(1&e){var i=a.Wb();a.Vb(0,"tr"),a.Vb(1,"th",30),a.Lc(2,"Actions"),a.Ub(),a.Jc(3,C,3,2,"th",31),a.Vb(4,"th",32),a.Lc(5,"Overdue "),a.Qb(6,"p-sortIcon",33),a.Ub(),a.Vb(7,"th",34),a.Lc(8,"Doc No "),a.Qb(9,"p-sortIcon",33),a.Ub(),a.Jc(10,U,3,2,"th",35),a.Vb(11,"th",36),a.Lc(12,"Customer Name "),a.Qb(13,"p-sortIcon",33),a.Ub(),a.Vb(14,"th",37),a.Lc(15,"Line Items Count"),a.Ub(),a.Vb(16,"th",38),a.Lc(17,"Posting Date "),a.Qb(18,"p-sortIcon",33),a.Ub(),a.Jc(19,D,3,2,"th",39),a.Jc(20,L,3,2,"th",40),a.Jc(21,V,3,2,"th",39),a.Vb(22,"th",38),a.Lc(23,"Status "),a.Qb(24,"p-sortIcon",33),a.Ub(),a.Vb(25,"th",32),a.Lc(26,"Amount "),a.Qb(27,"p-sortIcon",33),a.Ub(),a.Vb(28,"th",32),a.Lc(29,"Approval Status "),a.Qb(30,"p-sortIcon",33),a.Ub(),a.Jc(31,A,3,2,"th",39),a.Jc(32,N,3,2,"th",39),a.Jc(33,x,3,2,"th",39),a.Ub(),a.Vb(34,"tr",41),a.Vb(35,"th"),a.Vb(36,"a",42),a.dc("click",(function(){return a.Dc(i),a.hc(2).clearSearchForm()})),a.Qb(37,"i",43),a.Lc(38,"Clear"),a.Ub(),a.Ub(),a.Jc(39,F,2,1,"th",0),a.Qb(40,"th"),a.Vb(41,"th"),a.Vb(42,"input",44),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc(2).searchForm.documentNumber=e}))("keyup.enter",(function(){return a.Dc(i),a.hc(2).resetListing()})),a.Ub(),a.Ub(),a.Jc(43,T,2,1,"th",0),a.Vb(44,"th"),a.Vb(45,"input",44),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc(2).searchForm.customerBpName=e}))("keyup.enter",(function(){return a.Dc(i),a.hc(2).resetListing()})),a.Ub(),a.Ub(),a.Qb(46,"th"),a.Vb(47,"th"),a.Vb(48,"p-calendar",12),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc(2).searchForm.postingDate=e}))("onSelect",(function(){return a.Dc(i),a.hc(2).resetListing()})),a.Ub(),a.Ub(),a.Jc(49,E,2,5,"th",0),a.Jc(50,k,2,5,"th",0),a.Jc(51,O,2,5,"th",0),a.Vb(52,"th"),a.Vb(53,"select",45),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc(2).searchForm.status=e}))("change",(function(){return a.Dc(i),a.hc(2).resetListing()})),a.Vb(54,"option",46),a.Lc(55,"--SELECT--"),a.Ub(),a.Jc(56,P,2,2,"option",47),a.Ub(),a.Ub(),a.Vb(57,"th"),a.Vb(58,"input",44),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc(2).searchForm.totalAmount=e}))("keyup.enter",(function(){return a.Dc(i),a.hc(2).resetListing()})),a.Ub(),a.Ub(),a.Vb(59,"th"),a.Vb(60,"select",45),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc(2).searchForm.approvalStatus=e}))("change",(function(){return a.Dc(i),a.hc(2).resetListing()})),a.Vb(61,"option",46),a.Lc(62,"--SELECT--"),a.Ub(),a.Jc(63,B,2,2,"option",47),a.Ub(),a.Ub(),a.Jc(64,K,2,1,"th",0),a.Jc(65,M,2,1,"th",0),a.Jc(66,R,8,1,"th",0),a.Ub()}if(2&e){var r=a.hc(2);a.Cb(3),a.oc("ngIf",!r.storageService.get("isSingleBranchUser")),a.Cb(1),a.oc("pSortableColumn","overDueValue"),a.Cb(2),a.oc("field","overDueValue"),a.Cb(1),a.oc("pSortableColumn","documentNumber"),a.Cb(2),a.oc("field","documentNumber"),a.Cb(1),a.oc("ngIf",r.storageService.get("isSap")),a.Cb(1),a.oc("pSortableColumn","customerBpName"),a.Cb(2),a.oc("field","customerBpName"),a.Cb(3),a.oc("pSortableColumn","postingDate"),a.Cb(2),a.oc("field","postingDate"),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.listFieldsVisibility(r.inputScreenName,"validUntil")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.listFieldsVisibility(r.inputScreenName,"deliveryDate")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.listFieldsVisibility(r.inputScreenName,"dueDate")),a.Cb(1),a.oc("pSortableColumn","status"),a.Cb(2),a.oc("field","status"),a.Cb(1),a.oc("pSortableColumn","totalAmount"),a.Cb(2),a.oc("field","totalAmount"),a.Cb(1),a.oc("pSortableColumn","approvalStatus"),a.Cb(2),a.oc("field","approvalStatus"),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.listFieldsVisibility(r.inputScreenName,"courier")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.listFieldsVisibility(r.inputScreenName,"trackingNumber")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.listFieldsVisibility(r.inputScreenName,"deliveryStatus")),a.Cb(6),a.oc("ngIf",!r.storageService.get("isSingleBranchUser")),a.Cb(3),a.oc("ngModel",r.searchForm.documentNumber),a.Cb(1),a.oc("ngIf",r.storageService.get("isSap")),a.Cb(2),a.oc("ngModel",r.searchForm.customerBpName),a.Cb(3),a.oc("ngModel",r.searchForm.postingDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.listFieldsVisibility(r.inputScreenName,"validUntil")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.listFieldsVisibility(r.inputScreenName,"deliveryDate")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.listFieldsVisibility(r.inputScreenName,"dueDate")),a.Cb(2),a.oc("ngModel",r.searchForm.status),a.Cb(3),a.oc("ngForOf",r.statusList),a.Cb(2),a.oc("ngModel",r.searchForm.totalAmount),a.Cb(2),a.oc("ngModel",r.searchForm.approvalStatus),a.Cb(3),a.oc("ngForOf",r.approvalStatusList),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.listFieldsVisibility(r.inputScreenName,"courier")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.listFieldsVisibility(r.inputScreenName,"trackingNumber")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.listFieldsVisibility(r.inputScreenName,"deliveryStatus"))}}function J(e,t){if(1&e&&(a.Vb(0,"td"),a.Lc(1),a.Ub()),2&e){var i=a.hc().$implicit;a.Cb(1),a.Mc(i.branchName)}}function Q(e,t){if(1&e&&(a.Vb(0,"span",58),a.Lc(1),a.Ub()),2&e){var i=a.hc().$implicit;a.Cb(1),a.Nc("",i.overDueValue," Days")}}function _(e,t){if(1&e&&(a.Vb(0,"td"),a.Lc(1),a.Ub()),2&e){var i=a.hc().$implicit;a.Cb(1),a.Mc(i.sapId)}}function G(e,t){if(1&e&&(a.Vb(0,"td"),a.Lc(1),a.Ub()),2&e){var i=a.hc().$implicit;a.Cb(1),a.Nc("",i.validUntil," ")}}function z(e,t){if(1&e&&(a.Vb(0,"td"),a.Lc(1),a.Ub()),2&e){var i=a.hc().$implicit;a.Cb(1),a.Nc("",i.deliveryDate," ")}}function j(e,t){if(1&e&&(a.Vb(0,"td"),a.Lc(1),a.Ub()),2&e){var i=a.hc().$implicit;a.Cb(1),a.Mc(i.dueDate)}}function q(e,t){if(1&e&&(a.Vb(0,"td"),a.Lc(1),a.Ub()),2&e){var i=a.hc().$implicit;a.Cb(1),a.Nc("",i.courier," ")}}function W(e,t){if(1&e&&(a.Vb(0,"td"),a.Lc(1),a.Ub()),2&e){var i=a.hc().$implicit;a.Cb(1),a.Nc("",i.trackingNumber," ")}}function H(e,t){if(1&e&&(a.Vb(0,"td"),a.Lc(1),a.Ub()),2&e){var i=a.hc().$implicit;a.Cb(1),a.Nc("","2"===i.deliveryStatus?"Yes":"No"," ")}}function $(e,t){if(1&e){var i=a.Wb();a.Vb(0,"tr"),a.Vb(1,"td"),a.Vb(2,"a",54),a.dc("click",(function(){a.Dc(i);var e=t.$implicit,r=a.hc(2);return r.sTxnUtilsService.redirectToEdit(r.inputScreenName,e.id,e.isDraft)})),a.Qb(3,"i",55),a.Ub(),a.Ub(),a.Jc(4,J,2,1,"td",0),a.Vb(5,"td"),a.Jc(6,Q,2,1,"span",56),a.Ub(),a.Vb(7,"td"),a.Lc(8),a.Ub(),a.Jc(9,_,2,1,"td",0),a.Vb(10,"td"),a.Lc(11),a.Ub(),a.Vb(12,"td"),a.Lc(13),a.Ub(),a.Vb(14,"td"),a.Lc(15),a.Ub(),a.Jc(16,G,2,1,"td",0),a.Jc(17,z,2,1,"td",0),a.Jc(18,j,2,1,"td",0),a.Vb(19,"td"),a.Vb(20,"span",57),a.Lc(21),a.Ub(),a.Ub(),a.Vb(22,"td"),a.Lc(23),a.Ub(),a.Vb(24,"td"),a.Vb(25,"span",57),a.Lc(26),a.Ub(),a.Ub(),a.Jc(27,q,2,1,"td",0),a.Jc(28,W,2,1,"td",0),a.Jc(29,H,2,1,"td",0),a.Ub()}if(2&e){var r=t.$implicit,n=a.hc(2);a.Cb(4),a.oc("ngIf",!n.storageService.get("isSingleBranchUser")),a.Cb(2),a.oc("ngIf",1==r.status&&r.overDueValue<0),a.Cb(2),a.Mc(r.documentNumber),a.Cb(1),a.oc("ngIf",n.storageService.get("isSap")),a.Cb(2),a.Oc("",r.customerBpCode," - ",r.customerBpName,""),a.Cb(2),a.Mc(r.lineItemInfo.length),a.Cb(2),a.Mc(r.postingDate),a.Cb(1),a.oc("ngIf",n.sTxnUtilsService.listFieldsVisibility(n.inputScreenName,"validUntil")),a.Cb(1),a.oc("ngIf",n.sTxnUtilsService.listFieldsVisibility(n.inputScreenName,"deliveryDate")),a.Cb(1),a.oc("ngIf",n.sTxnUtilsService.listFieldsVisibility(n.inputScreenName,"dueDate")),a.Cb(2),a.oc("ngClass",n.appConstants.TXN_STATUS_COLOR_CLS[r.status]),a.Cb(1),a.Mc(r.statusName),a.Cb(2),a.Mc(r.totalAmount),a.Cb(2),a.oc("ngClass",n.appConstants.APPROVAL_STATUS_COLOR_CLS[r.approvalStatus]),a.Cb(1),a.Mc(r.approvalStatusName),a.Cb(1),a.oc("ngIf",n.sTxnUtilsService.listFieldsVisibility(n.inputScreenName,"courier")),a.Cb(1),a.oc("ngIf",n.sTxnUtilsService.listFieldsVisibility(n.inputScreenName,"trackingNumber")),a.Cb(1),a.oc("ngIf",n.sTxnUtilsService.listFieldsVisibility(n.inputScreenName,"deliveryStatus"))}}function Y(e,t){if(1&e){var i=a.Wb();a.Tb(0),a.Vb(1,"div",1),a.Vb(2,"span"),a.Lc(3),a.Ub(),a.Lc(4),a.Vb(5,"div",2),a.Jc(6,S,4,0,"button",3),a.Vb(7,"button",4),a.dc("click",(function(){a.Dc(i);var e=a.hc();return e.sTxnUtilsService.redirectToAdd(e.inputScreenName)})),a.Qb(8,"i",5),a.Vb(9,"span"),a.Lc(10),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Vb(11,"div",6),a.Vb(12,"div",7),a.Vb(13,"div",8),a.Jc(14,I,6,3,"div",9),a.Ub(),a.Ub(),a.Vb(15,"div",8),a.Vb(16,"div",10),a.Vb(17,"label",11),a.Vb(18,"strong"),a.Lc(19,"From Date"),a.Ub(),a.Ub(),a.Vb(20,"p-calendar",12),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc().searchForm.fromDate=e}))("onSelect",(function(){return a.Dc(i),a.hc().resetListing()})),a.Ub(),a.Ub(),a.Vb(21,"div",10),a.Vb(22,"label",11),a.Vb(23,"strong"),a.Lc(24,"To Date"),a.Ub(),a.Ub(),a.Vb(25,"p-calendar",13),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc().searchForm.toDate=e}))("onSelect",(function(){return a.Dc(i),a.hc().resetListing()})),a.Ub(),a.Ub(),a.Vb(26,"div",14),a.Vb(27,"label",15),a.Vb(28,"input",16),a.dc("ngModelChange",(function(e){return a.Dc(i),a.hc().searchForm.isDraft=e}))("change",(function(){return a.Dc(i),a.hc().resetListing()})),a.Ub(),a.Qb(29,"span",17),a.Lc(30," Show Only Drafts "),a.Ub(),a.Ub(),a.Ub(),a.Vb(31,"div",8),a.Vb(32,"div",18),a.Vb(33,"div",19),a.Vb(34,"p-table",20,21),a.dc("onLazyLoad",(function(e){return a.Dc(i),a.hc().getListing(e)})),a.Jc(36,w,67,42,"ng-template",22),a.Jc(37,$,30,19,"ng-template",23),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Sb()}if(2&e){var r=a.hc();a.Cb(3),a.Mc(r.branchUtilsService.txnGetTitle(r.screenAttributes.title,!0)),a.Cb(1),a.Nc("",r.branchUtilsService.txnGetTitle(r.screenAttributes.title)," - List "),a.Cb(2),a.oc("ngIf",r.screenAcl.download),a.Cb(4),a.Nc("Add ",r.screenAttributes.title,""),a.Cb(4),a.oc("ngForOf",r.analyticsData),a.Cb(6),a.oc("ngModel",r.searchForm.fromDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),a.Cb(5),a.oc("ngModel",r.searchForm.toDate)("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT)("minDate",r.searchForm.fromDate),a.Cb(3),a.oc("ngModel",r.searchForm.isDraft),a.Cb(6),a.oc("value",r.listing.data)("lazy",!0)("paginator",!0)("rows",r.appConstants.TABLE_DEFAULT_ROWS)("totalRecords",r.listing.totalRecords)}}var Z,X=((Z=function(){function e(t,i,r,n,a,o,c){_classCallCheck(this,e),this.activatedRoute=t,this.utilsService=i,this.storageService=r,this.authGuardService=n,this.branchUtilsService=a,this.sTxnUtilsService=o,this.commonDataService=c,this.appConstants=s.h,this.screenAcl={},this.analyticsData=[],this.statusList=[],this.approvalStatusList=[],this.screenAttributes={},this.screenDataService={},this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}return _createClass(e,[{key:"ngOnInit",value:function(){this.initializeSubscriptions()}},{key:"initializeSubscriptions",value:function(){var e=this;this.activatedRoute.params.subscribe((function(t){return e.sTxnUtilsService.checkScreenNameValid(t.screenName)?(e.screenAcl=e.authGuardService.getScreenAcl(e.branchUtilsService.screenAttributes[t.screenName].documentTypeId),e.screenAcl.view?(e.reInitializeGlobalVariables(),e.inputScreenName=t.screenName,void e.transactionInitialization()):(e.utilsService.showFailureMsg(s.h.ACL_UNAUTHORIZED_MSG),e.utilsService.goBack(),!1)):(e.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),e.utilsService.goBack(),!1)}))}},{key:"reInitializeGlobalVariables",value:function(){this.inputScreenName="",this.screenAttributes={},this.screenDataService={},this.analyticsData=[],this.statusList=[],this.listingProperties={},this.listing={data:[],totalRecords:0},this.searchForm={}}},{key:"transactionInitialization",value:function(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.inputScreenName],this.screenDataService=this.sTxnUtilsService.getScreenDataService(this.inputScreenName),this.searchForm=this.sTxnUtilsService.getFormSearchFields(this.inputScreenName),this.getAutoSuggestionList("getSalesTransStatusList"),this.getAutoSuggestionList("getApprovalStatusList"),this.getAnalyticsData(),this.dataTable&&this.resetListing()}},{key:"getListing",value:function(e){var t=this,i=this.sTxnUtilsService.getSearchDataFormation(this.inputScreenName,this.searchForm),r=this.utilsService.dataTableParameterFormation(e,i);this.listingProperties=r,this.screenDataService.getList(r).subscribe((function(e){"SUCCESS"===e.status?(t.listing.data=e.results.searchResults,t.listing.totalRecords=e.results.totalRecords):t.utilsService.showFailureMsg(e)}))}},{key:"clearSearchForm",value:function(){this.searchForm=this.sTxnUtilsService.getFormSearchFields(this.inputScreenName),this.resetListing()}},{key:"resetListing",value:function(){this.dataTable.reset()}},{key:"getAutoSuggestionList",value:function(e){var t=this;this.commonDataService.getAutoSuggestionList(e).subscribe((function(i){"SUCCESS"===i.status?"getSalesTransStatusList"===e?t.statusList=i.results:"getApprovalStatusList"===e&&(t.approvalStatusList=i.results,t.approvalStatusList.push({id:"4",name:"No Approval Process"})):t.utilsService.showFailureMsg(i)}))}},{key:"getAnalyticsData",value:function(){var e=this;this.sTxnUtilsService.getAnalyticsData(this.inputScreenName).subscribe((function(t){e.analyticsData=t}))}}]),e}()).\u0275fac=function(e){return new(e||Z)(a.Pb(n.a),a.Pb(s.g),a.Pb(s.f),a.Pb(s.a),a.Pb(o.a),a.Pb(d),a.Pb(b.l))},Z.\u0275cmp=a.Jb({type:Z,selectors:[["app-sales-txn-list"]],viewQuery:function(e,t){var i;1&e&&a.Pc(g,!0),2&e&&a.zc(i=a.ec())&&(t.dataTable=i.first)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-plus"],[1,"working-container"],[1,"analytics"],[1,"row"],["class","col-lg-2 col-md-3 col-sm-4 col-xs-12",4,"ngFor","ngForOf"],[1,"form-group","col-sm-3"],[1,"form-label"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","ngModelChange","onSelect"],["appendTo","body",3,"ngModel","monthNavigator","yearNavigator","yearRange","dateFormat","minDate","ngModelChange","onSelect"],[1,"form-group","col-sm-6","text-right"],[1,"checkbox","mt-3"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"checkmark"],[1,"col-12"],[1,"datatable-responsive"],[3,"value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-file-excel"],[1,"col-lg-2","col-md-3","col-sm-4","col-xs-12"],[1,"item"],[1,"name"],[1,"count",3,"ngClass"],[2,"width","80px"],["style","width:150px",3,"pSortableColumn",4,"ngIf"],[2,"width","100px",3,"pSortableColumn"],[3,"field"],[2,"width","90px",3,"pSortableColumn"],["style","width:110px",3,"pSortableColumn",4,"ngIf"],[2,"width","250px",3,"pSortableColumn"],[2,"width","120px"],[2,"width","120px",3,"pSortableColumn"],["style","width:120px",3,"pSortableColumn",4,"ngIf"],["style","width:130px",3,"pSortableColumn",4,"ngIf"],["placement","top","container","body","tooltip","Press Enter key to search",1,"search"],[1,"clear-search",3,"click"],[1,"fa","fa-times"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[2,"width","150px",3,"pSortableColumn"],[2,"width","110px",3,"pSortableColumn"],[2,"width","130px",3,"pSortableColumn"],[3,"value"],["value","2"],["value","1"],["placement","top","container","body","tooltip","Edit",1,"action","blue",3,"click"],[1,"fa","fa-edit"],["class","badge badge-danger",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"badge","badge-danger"]],template:function(e,t){1&e&&a.Jc(0,Y,38,22,"ng-container",0),2&e&&a.oc("ngIf",t.screenAcl.view)},directives:[p.m,p.l,h.a,l.m,l.o,l.a,v.c,f.b,p.k,v.b,v.a,y.a,l.b,l.t,l.p,l.v],styles:[""]}),Z),ee=i("Kj3r"),te=i("/uUt"),ie=i("vkgz"),re=i("w9rb"),ne=i("TlXv"),se=i("K3ix");function ae(e,t){if(1&e&&(a.Vb(0,"option",20),a.Lc(1),a.Ub()),2&e){var i=t.$implicit;a.oc("value",i.id),a.Cb(1),a.Mc(i.manufacturerName)}}function oe(e,t){if(1&e){var i=a.Wb();a.Vb(0,"tr"),a.Vb(1,"td"),a.Vb(2,"input",21),a.dc("change",(function(e){a.Dc(i);var r=t.$implicit,n=t.index;return a.hc().selectItemCheckboxChange("ITEM",e.target.checked,r,n)})),a.Ub(),a.Ub(),a.Vb(3,"td"),a.Lc(4),a.Ub(),a.Vb(5,"td"),a.Lc(6),a.Ub(),a.Ub()}if(2&e){var r=t.$implicit,n=t.index,s=a.hc();a.Cb(2),a.oc("checked",s.checkboxSelection[n]),a.Cb(2),a.Mc(r.itemCode),a.Cb(2),a.Mc(r.itemName)}}var ce,ue=function(){return{"max-height.px":300}},le=((ce=function(){function e(t,i,r,n){_classCallCheck(this,e),this.utilsService=t,this.commonDataService=i,this.sTxnUtilsService=r,this.activeModal=n,this.selectedItemList=new Set,this.manufacturerList=[],this.itemList=[],this.checkboxSelection=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.getAutoSuggestionList("getManufacturerList")}},{key:"getItemList",value:function(e){var t=this;if(!e)return this.itemList=[],!1;this.commonDataService.getItemList("",1,!0,e).subscribe((function(e){"SUCCESS"===e.status?(t.itemList=e.results,t.checkboxSelection=[]):t.utilsService.showFailureMsg(e)}))}},{key:"selectItemCheckboxChange",value:function(e,t,i,r){var n=this;"ALL"===e?t?(this.selectedItemList.clear(),this.itemList.forEach((function(e,t){n.selectedItemList.add(e),n.checkboxSelection[t]=!0}))):(this.selectedItemList.clear(),this.checkboxSelection=[]):t?(this.selectedItemList.add(i),this.checkboxSelection[r]=!0):(this.selectedItemList.delete(i),this.checkboxSelection[r]=!1)}},{key:"loadItems",value:function(){var e,t=[],i=_createForOfIteratorHelper(this.selectedItemList);try{for(i.s();!(e=i.n()).done;){var r=e.value;t.push(r)}}catch(n){i.e(n)}finally{i.f()}this.sTxnUtilsService.selectedItemsByWarehouseSubscription.next(t),this.activeModal.hide()}},{key:"getAutoSuggestionList",value:function(e){var t=this;this.commonDataService.getAutoSuggestionList(e).subscribe((function(e){"SUCCESS"===e.status?t.manufacturerList=e.results:t.utilsService.showFailureMsg(e)}))}}]),e}()).\u0275fac=function(e){return new(e||ce)(a.Pb(s.g),a.Pb(b.l),a.Pb(d),a.Pb(se.a))},ce.\u0275cmp=a.Jb({type:ce,selectors:[["app-select-item-by-manufacturer-popup"]],decls:37,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],[1,"close",3,"click"],[1,"modal-body"],[1,"row"],[1,"form-group","col-sm-6"],[1,"form-label"],[1,"form-control","form-control-sm",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-bordered","table-striped"],["type","checkbox",3,"change"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn-group","text-right"],[1,"btn","btn-primary","btn-sm",3,"disabled","click"],[1,"fa","fa-upload"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-times"],[3,"value"],["type","checkbox",3,"checked","change"]],template:function(e,t){1&e&&(a.Vb(0,"div",0),a.Vb(1,"h5",1),a.Lc(2," Select Items by Manufacturer "),a.Ub(),a.Vb(3,"button",2),a.dc("click",(function(){return t.activeModal.hide()})),a.Vb(4,"span"),a.Lc(5,"\xd7"),a.Ub(),a.Ub(),a.Ub(),a.Vb(6,"div",3),a.Vb(7,"div",4),a.Vb(8,"div",5),a.Vb(9,"label",6),a.Lc(10,"Manufacturer"),a.Ub(),a.Vb(11,"select",7),a.dc("change",(function(e){return t.getItemList(e.target.value)})),a.Vb(12,"option",8),a.Lc(13,"--SELECT--"),a.Ub(),a.Jc(14,ae,2,2,"option",9),a.Ub(),a.Ub(),a.Ub(),a.Vb(15,"div",10),a.Vb(16,"table",11),a.Vb(17,"thead"),a.Vb(18,"tr"),a.Vb(19,"th"),a.Vb(20,"input",12),a.dc("change",(function(e){return t.selectItemCheckboxChange("ALL",e.target.checked)})),a.Ub(),a.Ub(),a.Vb(21,"th"),a.Lc(22,"Item Code"),a.Ub(),a.Vb(23,"th"),a.Lc(24,"Item Name"),a.Ub(),a.Ub(),a.Ub(),a.Vb(25,"tbody"),a.Jc(26,oe,7,3,"tr",13),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Vb(27,"div",14),a.Vb(28,"div",15),a.Vb(29,"button",16),a.dc("click",(function(){return t.loadItems()})),a.Qb(30,"i",17),a.Vb(31,"span"),a.Lc(32,"Load"),a.Ub(),a.Ub(),a.Vb(33,"button",18),a.dc("click",(function(){return t.activeModal.hide()})),a.Qb(34,"i",19),a.Vb(35,"span"),a.Lc(36,"Cancel"),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&e&&(a.Cb(14),a.oc("ngForOf",t.manufacturerList),a.Cb(1),a.oc("ngStyle",a.rc(4,ue)),a.Cb(11),a.oc("ngForOf",t.itemList),a.Cb(3),a.oc("disabled",0===t.selectedItemList.size))},directives:[l.p,l.v,p.l,p.n],styles:[""]}),ce);function me(e,t){if(1&e&&(a.Vb(0,"tr"),a.Vb(1,"td"),a.Lc(2),a.Ub(),a.Vb(3,"td"),a.Lc(4),a.Ub(),a.Vb(5,"td"),a.Lc(6),a.Ub(),a.Vb(7,"td"),a.Lc(8),a.Ub(),a.Vb(9,"td"),a.Lc(10),a.Ub(),a.Ub()),2&e){var i=t.$implicit;a.Cb(2),a.Mc(i.documentNumber),a.Cb(2),a.Oc("",i.itemCode," - ",i.itemName,""),a.Cb(2),a.Mc(i.uomName),a.Cb(2),a.Mc(i.quantity),a.Cb(2),a.Mc(i.deliveryDate)}}var be,de=function(){return{"max-height.px":400}},pe=((be=function(){function e(t,i,r){_classCallCheck(this,e),this.utilsService=t,this.salesOrderDataService=i,this.activeModal=r,this.salesOrderList=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.getOpenSalesOrders()}},{key:"getOpenSalesOrders",value:function(){var e=this;this.salesOrderDataService.getOpenSalesOrdersByItemId(this.itemId).subscribe((function(t){"SUCCESS"===t.status?e.salesOrderList=t.results:e.utilsService.showFailureMsg(t)}))}}]),e}()).\u0275fac=function(e){return new(e||be)(a.Pb(s.g),a.Pb(b.Y),a.Pb(se.a))},be.\u0275cmp=a.Jb({type:be,selectors:[["app-open-sales-orders-by-item-popup"]],inputs:{itemId:"itemId"},decls:23,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],[1,"close",3,"click"],[1,"modal-body"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(a.Vb(0,"div",0),a.Vb(1,"h5",1),a.Lc(2," Open Sales Orders "),a.Ub(),a.Vb(3,"button",2),a.dc("click",(function(){return t.activeModal.hide()})),a.Vb(4,"span"),a.Lc(5,"\xd7"),a.Ub(),a.Ub(),a.Ub(),a.Vb(6,"div",3),a.Vb(7,"div",4),a.Vb(8,"table",5),a.Vb(9,"thead"),a.Vb(10,"tr"),a.Vb(11,"th"),a.Lc(12,"Doc No "),a.Ub(),a.Vb(13,"th"),a.Lc(14,"Item Name"),a.Ub(),a.Vb(15,"th"),a.Lc(16,"UOM"),a.Ub(),a.Vb(17,"th"),a.Lc(18,"Quantity"),a.Ub(),a.Vb(19,"th"),a.Lc(20,"Delivery Date"),a.Ub(),a.Ub(),a.Ub(),a.Vb(21,"tbody"),a.Jc(22,me,11,6,"tr",6),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&e&&(a.Cb(7),a.oc("ngStyle",a.rc(2,de)),a.Cb(15),a.oc("ngForOf",t.salesOrderList))},directives:[p.n,p.l],styles:[""]}),be),he=i("fIZe"),ve=i("ZOsW"),fe=i("umDy"),ye=i("dZIy"),ge=i("EDFS"),Se=["hActions"],Ie=["hSno"],Ce=["hWithoutQtyPosting"],Ue=["hItemName"],De=["hQuantity"],Le=["hOpenQty"],Ve=["hUOM"],Ae=["hUnitPrice"],Ne=["hWarehouse"],xe=["hBin"],Fe=["hAvailable"],Te=["hCommitted"],Ee=["hOrdered"],ke=["hHSN"],Oe=["hDiscount"],Pe=["hTaxCode"],Be=["hTax"],Ke=["hTotal"],Me=["hDistRules"],Re=["hSerialNumber"],we=["hExpiryDate"],Je=["hBpApproval"],Qe=["hRemarks"],_e=["hDealerDiscountPercentage"],Ge=["bActions"],ze=["bSno"],je=["bWithoutQtyPosting"],qe=["bItemName"],We=["bQuantity"],He=["bOpenQty"],$e=["bUOM"],Ye=["bUnitPrice"],Ze=["bWarehouse"],Xe=["bBin"],et=["bAvailable"],tt=["bCommitted"],it=["bOrdered"],rt=["bHSN"],nt=["bDiscount"],st=["bTaxCode"],at=["bTax"],ot=["bTotal"],ct=["bDistRules"],ut=["bSerialNumber"],lt=["bExpiryDate"],mt=["bBpApproval"],bt=["bRemarks"],dt=["bDealerDiscountPercentage"];function pt(e,t){1&e&&(a.Tb(0),a.Lc(1,"Add"),a.Sb())}function ht(e,t){1&e&&(a.Tb(0),a.Lc(1,"Edit"),a.Sb())}function vt(e,t){if(1&e){var i=a.Wb();a.Vb(0,"button",5),a.dc("click",(function(){return a.Dc(i),a.hc(2).downloadPdf()})),a.Qb(1,"i",121),a.Vb(2,"span"),a.Lc(3,"Print"),a.Ub(),a.Ub()}}function ft(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(2);a.Cb(1),a.Nc(" ",i.myFormErrors1.documentNumberingId?i.myFormErrors1.documentNumberingId:i.myFormErrors1.documentNumber," ")}}function yt(e,t){if(1&e&&(a.Vb(0,"div"),a.Lc(1),a.Vb(2,"small"),a.Lc(3),a.Ub(),a.Ub()),2&e){var i=t.item;a.Cb(1),a.Nc("",i.partnerName,"\xa0"),a.Cb(2),a.Nc("(",i.partnerCode,")")}}function gt(e,t){if(1&e){var i=a.Wb();a.Vb(0,"a",123),a.dc("click",(function(){return a.Dc(i),a.hc(2).bizRefreshFlag=!0})),a.Qb(1,"i",124),a.Ub()}}function St(e,t){if(1&e){var i=a.Wb();a.Vb(0,"a",125),a.dc("click",(function(){a.Dc(i);var e=a.hc(2);return e.getCustomerBpList(),e.bizRefreshFlag=!1})),a.Qb(1,"i",126),a.Ub()}}function It(e,t){if(1&e){var i=a.Wb();a.Vb(0,"span",127),a.dc("click",(function(){a.Dc(i);var e=a.hc(2);return e.popupExternalService.showDetailPopup("biz-partner",e.myForm1Data.customerBpId)})),a.Qb(1,"i",128),a.Ub()}}function Ct(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(2);a.Cb(1),a.Nc(" ",i.myFormErrors1.customerBpId," ")}}function Ut(e,t){if(1&e&&(a.Vb(0,"div"),a.Lc(1),a.Ub(),a.Vb(2,"small"),a.Lc(3),a.Ub()),2&e){var i=t.item;a.Cb(1),a.Mc(i.contactName),a.Cb(2),a.Oc("",i.contactTypeName," / ",i.contactNumber,"")}}function Dt(e,t){if(1&e&&(a.Vb(0,"option",129),a.Lc(1),a.Ub()),2&e){var i=t.$implicit;a.oc("value",i.id),a.Cb(1),a.Mc(i.currencyName)}}function Lt(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(2);a.Cb(1),a.Nc(" ",i.myFormErrors1.currencyId," ")}}function Vt(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(2);a.Cb(1),a.Nc(" ",i.myFormErrors1.postingDate," ")}}function At(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(2);a.Cb(1),a.Nc(" ",null==i.myForm1.errors?null:i.myForm1.errors.invalidPostingDate," ")}}function Nt(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(3);a.Cb(1),a.Nc(" ",i.myFormErrors1.validUntil," ")}}function xt(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(3);a.Cb(1),a.Nc(" ",null==i.myForm1.errors?null:i.myForm1.errors.invalidValidUntilDate," ")}}function Ft(e,t){if(1&e&&(a.Vb(0,"div",15),a.Vb(1,"label",16),a.Lc(2,"Valid Until"),a.Vb(3,"span",17),a.Lc(4,"*"),a.Ub(),a.Ub(),a.Qb(5,"p-calendar",130),a.Jc(6,Nt,2,1,"div",21),a.Jc(7,xt,2,1,"div",21),a.Ub()),2&e){var i=a.hc(2);a.Cb(5),a.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.appConstants.PICKER_YEAR_RANGE)("dateFormat",i.appConstants.PICKER_DATE_FORMAT),a.Cb(1),a.oc("ngIf",i.myFormErrors1.validUntil),a.Cb(1),a.oc("ngIf",null==i.myForm1.errors?null:i.myForm1.errors.invalidValidUntilDate)}}function Tt(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(3);a.Cb(1),a.Nc(" ",i.myFormErrors1.deliveryDate," ")}}function Et(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(3);a.Cb(1),a.Nc(" ",null==i.myForm1.errors?null:i.myForm1.errors.invalidDeliveryDate," ")}}function kt(e,t){if(1&e&&(a.Vb(0,"div",15),a.Vb(1,"label",16),a.Lc(2,"Delivery Date"),a.Vb(3,"span",17),a.Lc(4,"*"),a.Ub(),a.Ub(),a.Qb(5,"p-calendar",131),a.Jc(6,Tt,2,1,"div",21),a.Jc(7,Et,2,1,"div",21),a.Ub()),2&e){var i=a.hc(2);a.Cb(5),a.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.appConstants.PICKER_YEAR_RANGE)("dateFormat",i.appConstants.PICKER_DATE_FORMAT),a.Cb(1),a.oc("ngIf",i.myFormErrors1.deliveryDate),a.Cb(1),a.oc("ngIf",null==i.myForm1.errors?null:i.myForm1.errors.invalidDeliveryDate)}}function Ot(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(3);a.Cb(1),a.Nc(" ",i.myFormErrors1.dueDate," ")}}function Pt(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(3);a.Cb(1),a.Nc(" ",null==i.myForm1.errors?null:i.myForm1.errors.invalidDueDate," ")}}function Bt(e,t){if(1&e&&(a.Vb(0,"div",15),a.Vb(1,"label",16),a.Lc(2,"Due Date"),a.Vb(3,"span",17),a.Lc(4,"*"),a.Ub(),a.Ub(),a.Qb(5,"p-calendar",132),a.Jc(6,Ot,2,1,"div",21),a.Jc(7,Pt,2,1,"div",21),a.Ub()),2&e){var i=a.hc(2);a.Cb(5),a.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.appConstants.PICKER_YEAR_RANGE)("dateFormat",i.appConstants.PICKER_DATE_FORMAT),a.Cb(1),a.oc("ngIf",i.myFormErrors1.dueDate),a.Cb(1),a.oc("ngIf",null==i.myForm1.errors?null:i.myForm1.errors.invalidDueDate)}}function Kt(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(2);a.Cb(1),a.Nc(" ",i.myFormErrors1.documentDate," ")}}function Mt(e,t){if(1&e&&(a.Vb(0,"div"),a.Lc(1),a.Vb(2,"small"),a.Lc(3),a.Ub(),a.Ub()),2&e){var i=t.item;a.Cb(1),a.Nc("",i.employeeName,"\xa0"),a.Cb(2),a.Nc("(",i.empCode,")")}}function Rt(e,t){if(1&e){var i=a.Wb();a.Vb(0,"span",127),a.dc("click",(function(){a.Dc(i);var e=a.hc(2);return e.popupExternalService.showDetailPopup("employee",e.myForm1Data.salesEmpId)})),a.Qb(1,"i",128),a.Ub()}}function wt(e,t){if(1&e&&(a.Vb(0,"option",129),a.Lc(1),a.Ub()),2&e){var i=t.$implicit;a.oc("value",i.id),a.Cb(1),a.Nc(" ",i.name," ")}}function Jt(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(2);a.Cb(1),a.Nc(" ",i.myFormErrors1.status," ")}}function Qt(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(2);a.Cb(1),a.Nc(" ",i.myFormErrors1.remarks," ")}}function _t(e,t){1&e&&(a.Vb(0,"div",15),a.Vb(1,"label",16),a.Lc(2,"Gatepass"),a.Ub(),a.Vb(3,"select",133),a.Vb(4,"option",134),a.Lc(5,"Not available"),a.Ub(),a.Vb(6,"option",135),a.Lc(7,"Open for Gatepass"),a.Ub(),a.Ub(),a.Ub())}var Gt=function(e){return{data:e}};function zt(e,t){if(1&e&&(a.Tb(0),a.Qb(1,"template",136),a.Sb()),2&e){var i=t.$implicit,r=a.hc(2);a.Cb(1),a.oc("ngTemplateOutlet",r[i.headerRef])("ngTemplateOutletContext",a.sc(2,Gt,i))}}var jt=function(e,t){return{formItemListRow:e,i:t}};function qt(e,t){if(1&e&&(a.Tb(0),a.Qb(1,"template",136),a.Sb()),2&e){var i=t.$implicit,r=a.hc(),n=r.$implicit,s=r.index,o=a.hc(2);a.Cb(1),a.oc("ngTemplateOutlet",o[i.bodyRef])("ngTemplateOutletContext",a.tc(2,jt,n,s))}}function Wt(e,t){if(1&e&&(a.Vb(0,"tr",137),a.Jc(1,qt,2,5,"ng-container",43),a.Ub()),2&e){var i=t.index,r=a.hc(2);a.oc("formGroupName",i),a.Cb(1),a.oc("ngForOf",r.itemListColumnOrder)}}function Ht(e,t){if(1&e){var i=a.Wb();a.Vb(0,"tfoot"),a.Vb(1,"tr"),a.Vb(2,"td",138),a.Vb(3,"button",139),a.dc("click",(function(){return a.Dc(i),a.hc(2).addItemFields()})),a.Qb(4,"i",124),a.Vb(5,"span"),a.Lc(6,"Add Item"),a.Ub(),a.Ub(),a.Lc(7," \xa0 "),a.Vb(8,"button",140),a.dc("click",(function(){return a.Dc(i),a.hc(2).showSelectItemsByManufacturerPopup()})),a.Qb(9,"i",124),a.Vb(10,"span"),a.Lc(11,"Add Items by Manufacturer"),a.Ub(),a.Ub(),a.Lc(12," \xa0 "),a.Vb(13,"span",141),a.Lc(14,"Note:"),a.Ub(),a.Lc(15," Select Customer to add items "),a.Ub(),a.Ub(),a.Ub()}if(2&e){var r=a.hc(2);a.Cb(3),a.oc("disabled",!r.myForm1Data.customerBpId),a.Cb(5),a.oc("disabled",!r.myForm1Data.customerBpId)}}function $t(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(3);a.Cb(1),a.Nc(" ",i.myFormErrors1.discountPercentage," ")}}function Yt(e,t){if(1&e){var i=a.Wb();a.Vb(0,"tr"),a.Vb(1,"td"),a.Lc(2,"Discount %"),a.Ub(),a.Vb(3,"td",53),a.Vb(4,"input",142),a.dc("keyup",(function(){a.Dc(i);var e=a.hc(2);return e.branchUtilsService.txnCalcTotal(e.myForm1)})),a.Ub(),a.Jc(5,$t,2,1,"div",21),a.Ub(),a.Vb(6,"td",53),a.Lc(7),a.Ub(),a.Ub()}if(2&e){var r=a.hc(2);a.Cb(5),a.oc("ngIf",r.myFormErrors1.discountPercentage),a.Cb(2),a.Oc(" ",r.myForm1Data.discountValue," ",r.branchUtilsService.txnGetActiveCurrency(r.currencyList,r.myForm1,"currencyId")," ")}}function Zt(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(3);a.Cb(1),a.Nc(" ",i.myFormErrors1.dpmPercentage," ")}}function Xt(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(3);a.Cb(1),a.Nc(" ",i.myFormErrors1.dpmValue," ")}}function ei(e,t){if(1&e){var i=a.Wb();a.Vb(0,"tr"),a.Vb(1,"td"),a.Lc(2,"DPM %"),a.Ub(),a.Vb(3,"td",53),a.Vb(4,"input",143),a.dc("keyup",(function(){a.Dc(i);var e=a.hc(2);return e.branchUtilsService.txnCalcTotal(e.myForm1)})),a.Ub(),a.Jc(5,Zt,2,1,"div",21),a.Ub(),a.Vb(6,"td",53),a.Vb(7,"input",144),a.dc("keyup",(function(){return a.Dc(i),a.hc(2).convertDpmValueToPercentage()})),a.Ub(),a.Jc(8,Xt,2,1,"div",21),a.Ub(),a.Ub()}if(2&e){var r=a.hc(2);a.Cb(4),a.Db("disabled",!(r.myForm1Data.totalBeforeDiscount>0)||null),a.Cb(1),a.oc("ngIf",r.myFormErrors1.dpmPercentage),a.Cb(2),a.Db("disabled",!(r.myForm1Data.totalBeforeDiscount>0)||null),a.Cb(1),a.oc("ngIf",r.myFormErrors1.dpmValue)}}function ti(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(2);a.Cb(1),a.Nc(" ",i.myFormErrors1.rounding," ")}}function ii(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc(3);a.Cb(1),a.Nc(" ",i.myFormErrors1.salesArDpInvoiceUsedAmount," ")}}function ri(e,t){if(1&e&&(a.Vb(0,"span",148),a.Lc(1),a.Ub()),2&e){var i=a.hc(3);a.Cb(1),a.Nc("Maximum: ",i.txnKeys.salesArDpInvoiceUsedOriginalAmount,"")}}function ni(e,t){if(1&e){var i=a.Wb();a.Vb(0,"tr"),a.Vb(1,"td"),a.Lc(2," Down Payment "),a.Ub(),a.Vb(3,"td"),a.Vb(4,"ng-select",145),a.dc("change",(function(){return a.Dc(i),a.hc(2).setDpAmount()})),a.Ub(),a.Ub(),a.Vb(5,"td",53),a.Vb(6,"input",146),a.dc("keyup",(function(){return a.Dc(i),a.hc(2).setDpTaxAmount()})),a.Ub(),a.Jc(7,ii,2,1,"div",21),a.Jc(8,ri,2,1,"span",147),a.Ub(),a.Ub()}if(2&e){var r=a.hc(2);a.Cb(4),a.oc("items",r.dpDocumentNoList)("multiple",!1),a.Cb(3),a.oc("ngIf",r.myFormErrors1.salesArDpInvoiceUsedAmount),a.Cb(1),a.oc("ngIf",r.myForm1Data.salesArDpInvoiceId&&!r.txnKeys.inputEditId)}}function si(e,t){1&e&&(a.Vb(0,"tr"),a.Vb(1,"td"),a.Lc(2," Down Payment Tax "),a.Ub(),a.Qb(3,"td"),a.Vb(4,"td",53),a.Qb(5,"input",149),a.Ub(),a.Ub())}function ai(e,t){if(1&e&&(a.Vb(0,"option",129),a.Lc(1),a.Ub()),2&e){var i=t.$implicit;a.oc("value",i.id),a.Cb(1),a.Oc(" ",i.address," - ",i.city," ")}}function oi(e,t){if(1&e&&(a.Vb(0,"option",129),a.Lc(1),a.Ub()),2&e){var i=t.$implicit;a.oc("value",i.id),a.Cb(1),a.Oc(" ",i.address," - ",i.city," ")}}function ci(e,t){1&e&&(a.Vb(0,"div",15),a.Vb(1,"label",16),a.Lc(2,"Courier"),a.Ub(),a.Qb(3,"input",150),a.Ub())}function ui(e,t){1&e&&(a.Vb(0,"div",15),a.Vb(1,"label",16),a.Lc(2,"Tracking NUmber"),a.Ub(),a.Qb(3,"input",151),a.Ub())}function li(e,t){1&e&&(a.Vb(0,"div",15),a.Vb(1,"label",16),a.Lc(2,"Delivery Status"),a.Ub(),a.Vb(3,"select",152),a.Vb(4,"option",134),a.Lc(5,"No"),a.Ub(),a.Vb(6,"option",135),a.Lc(7,"Yes"),a.Ub(),a.Ub(),a.Ub())}function mi(e,t){if(1&e&&(a.Vb(0,"option",129),a.Lc(1),a.Ub()),2&e){var i=t.$implicit;a.oc("value",i.id),a.Cb(1),a.Nc(" ",i.paymentTermName," ")}}function bi(e,t){if(1&e&&(a.Vb(0,"option",129),a.Lc(1),a.Ub()),2&e){var i=t.$implicit;a.oc("value",i.id),a.Cb(1),a.Nc(" ",i.paymentMethodName," ")}}function di(e,t){1&e&&(a.Vb(0,"div",15),a.Vb(1,"label",16),a.Lc(2,"Original Ref. No"),a.Ub(),a.Qb(3,"input",153),a.Ub())}function pi(e,t){if(1&e&&(a.Vb(0,"div",15),a.Vb(1,"label",16),a.Lc(2,"Original Ref. Date"),a.Ub(),a.Qb(3,"p-calendar",154),a.Ub()),2&e){var i=a.hc(2);a.Cb(3),a.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.appConstants.PICKER_YEAR_RANGE)("dateFormat",i.appConstants.PICKER_DATE_FORMAT)}}function hi(e,t){if(1&e&&(a.Vb(0,"option",129),a.Lc(1),a.Ub()),2&e){var i=t.$implicit;a.oc("value",i.id),a.Cb(1),a.Mc(i.noteName)}}function vi(e,t){if(1&e&&(a.Vb(0,"div",15),a.Vb(1,"label",16),a.Lc(2,"Reason for Issue Note"),a.Ub(),a.Vb(3,"select",155),a.Vb(4,"option",30),a.Lc(5,"--SELECT--"),a.Ub(),a.Jc(6,hi,2,2,"option",31),a.Ub(),a.Ub()),2&e){var i=a.hc(2);a.Cb(6),a.oc("ngForOf",i.issuingNoteList)}}function fi(e,t){if(1&e&&(a.Vb(0,"tr"),a.Vb(1,"td"),a.Lc(2),a.Ub(),a.Vb(3,"td"),a.Lc(4),a.Ub(),a.Vb(5,"td"),a.Vb(6,"span",158),a.Lc(7),a.Ub(),a.Ub(),a.Vb(8,"td"),a.Lc(9),a.Ub(),a.Vb(10,"td"),a.Lc(11),a.Ub(),a.Ub()),2&e){var i=t.$implicit,r=t.index,n=a.hc(3);a.Cb(2),a.Mc(r+1),a.Cb(2),a.Mc(i.employeeName),a.Cb(2),a.oc("ngClass",n.appConstants.APPROVAL_STATUS_COLOR_CLS[i.approvalStatus]),a.Cb(1),a.Nc(" ",i.approvalStatusName,""),a.Cb(2),a.Mc(i.remarks),a.Cb(2),a.Mc(i.createdDateTime)}}var yi=function(){return{"max-height.px":300}};function gi(e,t){if(1&e&&(a.Vb(0,"div",10),a.Vb(1,"div",11),a.Qb(2,"i",12),a.Lc(3,"Approval History "),a.Ub(),a.Vb(4,"div",40),a.Vb(5,"div",41),a.Vb(6,"table",42),a.Vb(7,"thead"),a.Vb(8,"tr"),a.Vb(9,"th",156),a.Lc(10,"S.No"),a.Ub(),a.Vb(11,"th",51),a.Lc(12,"Approver / Rejecter"),a.Ub(),a.Vb(13,"th",51),a.Lc(14,"Status"),a.Ub(),a.Vb(15,"th",157),a.Lc(16,"History"),a.Ub(),a.Vb(17,"th",51),a.Lc(18,"Date / Time"),a.Ub(),a.Ub(),a.Ub(),a.Vb(19,"tbody"),a.Jc(20,fi,12,6,"tr",43),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&e){var i=a.hc(2);a.Cb(5),a.oc("ngStyle",a.rc(2,yi)),a.Cb(15),a.oc("ngForOf",i.approvalHistory)}}function Si(e,t){if(1&e){var i=a.Wb();a.Vb(0,"button",5),a.dc("click",(function(){return a.Dc(i),a.hc(2).confirmSaveUpdate()})),a.Qb(1,"i",159),a.Vb(2,"span"),a.Lc(3,"Save"),a.Ub(),a.Ub()}}function Ii(e,t){if(1&e){var i=a.Wb();a.Vb(0,"button",5),a.dc("click",(function(){return a.Dc(i),a.hc(2).addUpdateDraft()})),a.Qb(1,"i",159),a.Vb(2,"span"),a.Lc(3,"Save as Draft"),a.Ub(),a.Ub()}}function Ci(e,t){if(1&e){var i=a.Wb();a.Vb(0,"button",3),a.dc("click",(function(){return a.Dc(i),a.hc(2).clearForm()})),a.Qb(1,"i",160),a.Vb(2,"span"),a.Lc(3,"Clear"),a.Ub(),a.Ub()}}function Ui(e,t){if(1&e){var i=a.Wb();a.Vb(0,"button",5),a.dc("click",(function(){return a.Dc(i),a.hc(2).confirmSaveUpdate("add")})),a.Qb(1,"i",126),a.Vb(2,"span"),a.Lc(3,"Add"),a.Ub(),a.Ub()}}function Di(e,t){if(1&e){var i=a.Wb();a.Vb(0,"button",5),a.dc("click",(function(){return a.Dc(i),a.hc(2).confirmSaveUpdate()})),a.Qb(1,"i",126),a.Vb(2,"span"),a.Lc(3,"Update"),a.Ub(),a.Ub()}}function Li(e,t){if(1&e){var i=a.Wb();a.Vb(0,"button",3),a.dc("click",(function(){a.Dc(i);var e=a.hc(2);return e.sTxnUtilsService.redirectToList(e.txnKeys.inputScreenName)})),a.Qb(1,"i",161),a.Vb(2,"span"),a.Lc(3,"Cancel"),a.Ub(),a.Ub()}}function Vi(e,t){1&e&&(a.Vb(0,"div",164),a.Vb(1,"span",141),a.Lc(2,"Note:"),a.Ub(),a.Lc(3," You are unauthorized to "),a.Vb(4,"strong"),a.Lc(5,"update"),a.Ub(),a.Lc(6," this transaction! "),a.Ub())}function Ai(e,t){1&e&&(a.Vb(0,"div",164),a.Vb(1,"span",141),a.Lc(2,"Note:"),a.Ub(),a.Lc(3," Cannot update "),a.Vb(4,"strong"),a.Lc(5,"Cancelled"),a.Ub(),a.Lc(6," / "),a.Vb(7,"strong"),a.Lc(8,"Closed"),a.Ub(),a.Lc(9," / "),a.Vb(10,"strong"),a.Lc(11," Approved"),a.Ub(),a.Lc(12," transactions! "),a.Ub())}function Ni(e,t){if(1&e&&(a.Vb(0,"div",162),a.Vb(1,"div"),a.Vb(2,"strong"),a.Lc(3,"Created By:"),a.Ub(),a.Lc(4),a.Ub(),a.Jc(5,Vi,7,0,"div",163),a.Jc(6,Ai,13,0,"div",163),a.Ub()),2&e){var i=a.hc(2);a.Cb(4),a.Nc(" ",i.txnKeys.editCreatedName,""),a.Cb(1),a.oc("ngIf",i.branchUtilsService.txnValidateBtn(i.myForm1,i.txnKeys,"updateAclNote")),a.Cb(1),a.oc("ngIf",i.branchUtilsService.txnValidateBtn(i.myForm1,i.txnKeys,"updateNote"))}}function xi(e,t){1&e&&(a.Vb(0,"div",162),a.Vb(1,"span",141),a.Lc(2,"Note:"),a.Ub(),a.Lc(3," You are unauthorized to "),a.Vb(4,"strong"),a.Lc(5,"add"),a.Ub(),a.Lc(6," this transaction!. "),a.Ub())}function Fi(e,t){if(1&e&&(a.Vb(0,"th",165),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function Ti(e,t){if(1&e&&(a.Vb(0,"th",166),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function Ei(e,t){if(1&e&&(a.Vb(0,"th",168),a.Lc(1),a.Ub()),2&e){var i=a.hc().data;a.Cb(1),a.Nc(" ",i.name,"")}}function ki(e,t){if(1&e&&a.Jc(0,Ei,2,1,"th",167),2&e){var i=a.hc(2);a.oc("ngIf",i.sTxnUtilsService.addFieldsVisibility(i.txnKeys.inputScreenName,"fnWithoutQtyPosting"))}}function Oi(e,t){if(1&e&&(a.Vb(0,"th",169),a.Lc(1),a.Vb(2,"span",17),a.Lc(3,"*"),a.Ub(),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function Pi(e,t){if(1&e&&(a.Vb(0,"th",168),a.Lc(1),a.Vb(2,"span",17),a.Lc(3,"*"),a.Ub(),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function Bi(e,t){if(1&e&&(a.Vb(0,"th",168),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function Ki(e,t){if(1&e&&(a.Vb(0,"th",168),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function Mi(e,t){if(1&e&&(a.Vb(0,"th",168),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function Ri(e,t){1&e&&(a.Vb(0,"span",17),a.Lc(1,"*"),a.Ub())}function wi(e,t){if(1&e&&(a.Vb(0,"th",50),a.Lc(1),a.Jc(2,Ri,2,0,"span",170),a.Ub()),2&e){var i=t.data,r=a.hc(2);a.Cb(1),a.Nc("",i.name," "),a.Cb(1),a.oc("ngIf","salesDelivery"===r.txnKeys.inputScreenName||"salesArInvoice"===r.txnKeys.inputScreenName||"salesArDpInvoice"===r.txnKeys.inputScreenName||"salesArCreditMemo"===r.txnKeys.inputScreenName||"salesReturn"===r.txnKeys.inputScreenName)}}function Ji(e,t){1&e&&(a.Vb(0,"span",17),a.Lc(1,"*"),a.Ub())}function Qi(e,t){if(1&e&&(a.Vb(0,"th",168),a.Lc(1),a.Jc(2,Ji,2,0,"span",170),a.Ub()),2&e){var i=t.data,r=a.hc(2);a.Cb(1),a.Nc("",i.name," "),a.Cb(1),a.oc("ngIf","salesDelivery"===r.txnKeys.inputScreenName||"salesArInvoice"===r.txnKeys.inputScreenName||"salesArDpInvoice"===r.txnKeys.inputScreenName||"salesArCreditMemo"===r.txnKeys.inputScreenName||"salesReturn"===r.txnKeys.inputScreenName)}}function _i(e,t){if(1&e&&(a.Vb(0,"th",171),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function Gi(e,t){if(1&e&&(a.Vb(0,"th",171),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function zi(e,t){if(1&e&&(a.Vb(0,"th",171),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function ji(e,t){if(1&e&&(a.Vb(0,"th",168),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function qi(e,t){if(1&e&&(a.Vb(0,"th",168),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function Wi(e,t){if(1&e&&(a.Vb(0,"th",172),a.Lc(1),a.Vb(2,"span",17),a.Lc(3,"*"),a.Ub(),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function Hi(e,t){if(1&e&&(a.Vb(0,"th",168),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function $i(e,t){if(1&e&&(a.Vb(0,"th",173),a.Lc(1),a.Vb(2,"small"),a.Lc(3,"(Auto Fill)"),a.Ub(),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function Yi(e,t){1&e&&(a.Vb(0,"span",17),a.Lc(1,"*"),a.Ub())}function Zi(e,t){if(1&e&&(a.Vb(0,"th",169),a.Lc(1),a.Jc(2,Yi,2,0,"span",170),a.Ub()),2&e){var i=t.data,r=a.hc(2);a.Cb(1),a.Mc(i.name),a.Cb(1),a.oc("ngIf",r.storageService.get("distRulesMode"))}}function Xi(e,t){if(1&e&&(a.Vb(0,"th",172),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function er(e,t){if(1&e&&(a.Vb(0,"th",172),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function tr(e,t){if(1&e&&(a.Vb(0,"th",168),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function ir(e,t){if(1&e&&(a.Vb(0,"th",50),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Mc(i.name)}}function rr(e,t){if(1&e&&(a.Vb(0,"th",172),a.Lc(1),a.Ub()),2&e){var i=t.data;a.Cb(1),a.Nc("",i.name," ")}}function nr(e,t){if(1&e){var i=a.Wb();a.Tb(0),a.Vb(1,"a",175),a.dc("click",(function(){a.Dc(i);var e=a.hc().i,t=a.hc(2);return t.removeItemFields(e),t.branchUtilsService.txnCalcItemsTotal(t.myForm1)})),a.Qb(2,"i",176),a.Ub(),a.Sb()}}function sr(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Jc(3,nr,3,0,"ng-container",0),a.Ub(),a.Sb(),a.Sb()),2&e){var i=t.i,r=a.hc(2);a.oc("formGroup",r.myForm1),a.Cb(2),a.oc("formGroupName",i),a.Cb(1),a.oc("ngIf",r.myForm1Data.itemListArray[i].showDeleteIcon)}}function ar(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Lc(3),a.Ub(),a.Sb(),a.Sb()),2&e){var i=t.i,r=a.hc(2);a.oc("formGroup",r.myForm1),a.Cb(2),a.oc("formGroupName",i),a.Cb(1),a.Mc(i+1)}}function or(e,t){if(1&e&&(a.Vb(0,"td",137),a.Vb(1,"label",54),a.Qb(2,"input",178),a.Qb(3,"span",56),a.Ub(),a.Ub()),2&e){var i=a.hc().i;a.oc("formGroupName",i)}}function cr(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Jc(2,or,4,1,"td",177),a.Sb(),a.Sb()),2&e){var i=a.hc(2);a.oc("formGroup",i.myForm1),a.Cb(2),a.oc("ngIf",i.sTxnUtilsService.addFieldsVisibility(i.txnKeys.inputScreenName,"fnWithoutQtyPosting"))}}function ur(e,t){if(1&e&&(a.Vb(0,"div"),a.Lc(1),a.Vb(2,"small"),a.Lc(3),a.Ub(),a.Ub()),2&e){var i=t.item;a.Cb(1),a.Nc("",i.itemName,"\xa0"),a.Cb(2),a.Nc("(",i.itemCode,")")}}function lr(e,t){if(1&e){var i=a.Wb();a.Vb(0,"li"),a.Vb(1,"a",185),a.dc("click",(function(){a.Dc(i);var e=a.hc(3).i,t=a.hc(2);return t.popupExternalService.showDetailPopup("item",t.myForm1Data.itemListArray[e].itemId)})),a.Lc(2,"View Item Details"),a.Ub(),a.Ub()}}function mr(e,t){if(1&e){var i=a.Wb();a.Vb(0,"li"),a.Vb(1,"a",185),a.dc("click",(function(){a.Dc(i);var e=a.hc(3).i,t=a.hc(2);return t.showOpenSalesOrdersByItemPopup(t.myForm1Data.itemListArray[e].itemId)})),a.Lc(2,"View Open Orders of this Item"),a.Ub(),a.Ub()}}function br(e,t){if(1&e&&(a.Vb(0,"ul",184),a.Jc(1,lr,3,0,"li",0),a.Jc(2,mr,3,0,"li",0),a.Ub()),2&e){var i=a.hc(4);a.Cb(1),a.oc("ngIf","3"!==i.storageService.get("employeeTypeId")&&"5"!==i.storageService.get("employeeTypeId")),a.Cb(1),a.oc("ngIf","3"===i.storageService.get("employeeTypeId")||"5"===i.storageService.get("employeeTypeId"))}}function dr(e,t){1&e&&(a.Vb(0,"span",181),a.Qb(1,"i",182),a.Jc(2,br,3,2,"ul",183),a.Ub())}function pr(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc().i,r=a.hc(2);a.Cb(1),a.Nc(" ",r.myFormErrors1.itemListArray[i].itemId," ")}}function hr(e,t){if(1&e){var i=a.Wb();a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Vb(3,"div",36),a.Vb(4,"ng-select",179),a.dc("search",(function(e){return a.Dc(i),a.hc(2).onItemSearch(e)}))("change",(function(){a.Dc(i);var e=t.i;return a.hc(2).onItemChange(e)})),a.Jc(5,ur,4,2,"ng-template",24),a.Ub(),a.Jc(6,dr,3,0,"span",180),a.Ub(),a.Vb(7,"div",148),a.Lc(8),a.Ub(),a.Jc(9,pr,2,1,"div",21),a.Ub(),a.Sb(),a.Sb()}if(2&e){var r=t.i,n=a.hc(2);a.oc("formGroup",n.myForm1),a.Cb(2),a.oc("formGroupName",r),a.Cb(2),a.oc("items",n.itemList)("multiple",!1)("virtualScroll",!0),a.Cb(2),a.oc("ngIf",n.myForm1Data.itemListArray[r].itemId),a.Cb(2),a.Nc("Last Price: ",n.myForm1Data.itemListArray[r].lastPrice,""),a.Cb(1),a.oc("ngIf",n.myFormErrors1.itemListArray[r].itemId)}}function vr(e,t){if(1&e){var i=a.Wb();a.Vb(0,"span",188),a.dc("click",(function(){a.Dc(i);var e=a.hc().i,t=a.hc(2);return t.popupExternalService.showAvailabletoPromisePopup(t.myForm1Data.itemListArray[e].itemId,t.myForm1Data.itemListArray[e].warehouseId)})),a.Qb(1,"i",128),a.Ub()}}function fr(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc().formItemListRow;a.Cb(1),a.Nc(" ",null==i.errors?null:i.errors.invalidMaxQuantity," ")}}function yr(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc().formItemListRow;a.Cb(1),a.Nc(" ",null==i.errors?null:i.errors.invalidMinQuantity," ")}}function gr(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc().i,r=a.hc(2);a.Cb(1),a.Nc(" ",r.myFormErrors1.itemListArray[i].quantity," ")}}function Sr(e,t){if(1&e){var i=a.Wb();a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Vb(3,"div",36),a.Vb(4,"input",186),a.dc("keyup",(function(){a.Dc(i);var e=a.hc(2);return e.branchUtilsService.txnCalcItemsTotal(e.myForm1)})),a.Ub(),a.Jc(5,vr,2,0,"span",187),a.Ub(),a.Jc(6,fr,2,1,"div",21),a.Jc(7,yr,2,1,"div",21),a.Jc(8,gr,2,1,"div",21),a.Ub(),a.Sb(),a.Sb()}if(2&e){var r=t.formItemListRow,n=t.i,s=a.hc(2);a.oc("formGroup",s.myForm1),a.Cb(2),a.oc("formGroupName",n),a.Cb(3),a.oc("ngIf",s.myForm1Data.itemListArray[n].itemId&&s.myForm1Data.itemListArray[n].warehouseId),a.Cb(1),a.oc("ngIf",null==r.errors?null:r.errors.invalidMaxQuantity),a.Cb(1),a.oc("ngIf",null==r.errors?null:r.errors.invalidMinQuantity),a.Cb(1),a.oc("ngIf",s.myFormErrors1.itemListArray[n].quantity)}}function Ir(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Lc(3),a.Ub(),a.Sb(),a.Sb()),2&e){var i=t.i,r=a.hc(2);a.oc("formGroup",r.myForm1),a.Cb(2),a.oc("formGroupName",i),a.Cb(1),a.Nc(" ",r.myForm1Data.itemListArray[i].openQuantity," ")}}function Cr(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Qb(3,"ng-select",189),a.Ub(),a.Sb(),a.Sb()),2&e){var i=t.i,r=a.hc(2);a.oc("formGroup",r.myForm1),a.Cb(2),a.oc("formGroupName",i),a.Cb(1),a.oc("items",r.uomList)("multiple",!1)}}function Ur(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc().i,r=a.hc(2);a.Cb(1),a.Nc(" ",r.myFormErrors1.itemListArray[i].unitPrice," ")}}function Dr(e,t){if(1&e){var i=a.Wb();a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Vb(3,"input",190),a.dc("keyup",(function(){a.Dc(i);var e=a.hc(2);return e.branchUtilsService.txnCalcItemsTotal(e.myForm1)})),a.Ub(),a.Jc(4,Ur,2,1,"div",21),a.Ub(),a.Sb(),a.Sb()}if(2&e){var r=t.i,n=a.hc(2);a.oc("formGroup",n.myForm1),a.Cb(2),a.oc("formGroupName",r),a.Cb(2),a.oc("ngIf",n.myFormErrors1.itemListArray[r].unitPrice)}}function Lr(e,t){if(1&e&&(a.Vb(0,"div"),a.Lc(1),a.Vb(2,"small"),a.Lc(3),a.Ub(),a.Ub()),2&e){var i=t.item;a.Cb(1),a.Nc("",i.warehouseName,"\xa0"),a.Cb(2),a.Nc("(",i.warehouseCode,")")}}function Vr(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc().i,r=a.hc(2);a.Cb(1),a.Nc(" ",r.myFormErrors1.itemListArray[i].warehouseId," ")}}function Ar(e,t){if(1&e){var i=a.Wb();a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Vb(3,"ng-select",191),a.dc("change",(function(){a.Dc(i);var e=t.i;return a.hc(2).setBinList(e)})),a.Jc(4,Lr,4,2,"ng-template",24),a.Ub(),a.Jc(5,Vr,2,1,"div",21),a.Ub(),a.Sb(),a.Sb()}if(2&e){var r=t.i,n=a.hc(2);a.oc("formGroup",n.myForm1),a.Cb(2),a.oc("formGroupName",r),a.Cb(1),a.oc("items",n.warehouseList)("multiple",!1),a.Cb(2),a.oc("ngIf",n.myFormErrors1.itemListArray[r].warehouseId)}}function Nr(e,t){if(1&e&&(a.Vb(0,"div",196),a.Vb(1,"strong"),a.Lc(2,"Only available stock bin's will be listed"),a.Ub(),a.Ub(),a.Lc(3)),2&e){var i=a.hc().i,r=a.hc(2);a.Cb(3),a.Nc(" ",r.myForm1Data.itemListArray[i].stockDetails?r.myForm1Data.itemListArray[i].stockDetails:"..."," ")}}function xr(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc().i,r=a.hc(2);a.Cb(1),a.Nc(" ",r.myFormErrors1.itemListArray[i].binId," ")}}function Fr(e,t){if(1&e){var i=a.Wb();a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Vb(3,"div",36),a.Qb(4,"ng-select",192),a.Vb(5,"span",193),a.dc("click",(function(){a.Dc(i);var e=t.i,r=a.hc(2);return r.branchUtilsService.txnSetItemStockToBinTooltip(r.myForm1,e,"warehouseId","stockDetails")})),a.Jc(6,Nr,4,1,"ng-template",null,194,a.Kc),a.Vb(8,"span",195),a.Qb(9,"i",128),a.Ub(),a.Ub(),a.Ub(),a.Jc(10,xr,2,1,"div",21),a.Ub(),a.Sb(),a.Sb()}if(2&e){var r=t.i,n=a.Ac(7),s=a.hc(2);a.oc("formGroup",s.myForm1),a.Cb(2),a.oc("formGroupName",r),a.Cb(2),a.oc("items",s.myForm1Data.itemListArray[r].binList)("multiple",!1),a.Cb(4),a.oc("popover",n)("outsideClick",!0),a.Cb(2),a.oc("ngIf",s.myFormErrors1.itemListArray[r].binId)}}function Tr(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Lc(3),a.Ub(),a.Sb(),a.Sb()),2&e){var i=t.i,r=a.hc(2);a.oc("formGroup",r.myForm1),a.Cb(2),a.oc("formGroupName",i),a.Cb(1),a.Nc(" ",r.myForm1Data.itemListArray[i].availableStock," ")}}function Er(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Lc(3),a.Ub(),a.Sb(),a.Sb()),2&e){var i=t.i,r=a.hc(2);a.oc("formGroup",r.myForm1),a.Cb(2),a.oc("formGroupName",i),a.Cb(1),a.Nc(" ",r.myForm1Data.itemListArray[i].committedStock," ")}}function kr(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Lc(3),a.Ub(),a.Sb(),a.Sb()),2&e){var i=t.i,r=a.hc(2);a.oc("formGroup",r.myForm1),a.Cb(2),a.oc("formGroupName",i),a.Cb(1),a.Nc(" ",r.myForm1Data.itemListArray[i].orderedStock," ")}}function Or(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Qb(3,"ng-select",197),a.Ub(),a.Sb(),a.Sb()),2&e){var i=t.i,r=a.hc(2);a.oc("formGroup",r.myForm1),a.Cb(2),a.oc("formGroupName",i),a.Cb(1),a.oc("items",r.hsnList)("multiple",!1)}}function Pr(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc().i,r=a.hc(2);a.Cb(1),a.Nc(" ",r.myFormErrors1.itemListArray[i].discountPercentage," ")}}function Br(e,t){if(1&e){var i=a.Wb();a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Vb(3,"input",142),a.dc("keyup",(function(){a.Dc(i);var e=a.hc(2);return e.branchUtilsService.txnCalcItemsTotal(e.myForm1)})),a.Ub(),a.Jc(4,Pr,2,1,"div",21),a.Ub(),a.Sb(),a.Sb()}if(2&e){var r=t.i,n=a.hc(2);a.oc("formGroup",n.myForm1),a.Cb(2),a.oc("formGroupName",r),a.Cb(2),a.oc("ngIf",n.myFormErrors1.itemListArray[r].discountPercentage)}}function Kr(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc().i,r=a.hc(2);a.Cb(1),a.Nc(" ",r.myFormErrors1.itemListArray[i].taxId," ")}}function Mr(e,t){if(1&e){var i=a.Wb();a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Vb(3,"ng-select",198),a.dc("change",(function(){a.Dc(i);var e=t.i,r=a.hc(2);return r.branchUtilsService.txnTaxChange(r.taxList,r.myForm1,e)})),a.Ub(),a.Jc(4,Kr,2,1,"div",21),a.Ub(),a.Sb(),a.Sb()}if(2&e){var r=t.i,n=a.hc(2);a.oc("formGroup",n.myForm1),a.Cb(2),a.oc("formGroupName",r),a.Cb(1),a.oc("items",n.taxList)("multiple",!1),a.Cb(1),a.oc("ngIf",n.myFormErrors1.itemListArray[r].taxId)}}function Rr(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Lc(3),a.Ub(),a.Sb(),a.Sb()),2&e){var i=t.i,r=a.hc(2);a.oc("formGroup",r.myForm1),a.Cb(2),a.oc("formGroupName",i),a.Cb(1),a.Nc(" ",r.myForm1Data.itemListArray[i].itemTaxPercentage," ")}}function wr(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",199),a.Lc(3),a.Ub(),a.Sb(),a.Sb()),2&e){var i=t.i,r=a.hc(2);a.oc("formGroup",r.myForm1),a.Cb(2),a.oc("formGroupName",i),a.Cb(1),a.Nc(" ",r.myForm1Data.itemListArray[i].totalItemAmount," ")}}function Jr(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc().i,r=a.hc(2);a.Cb(1),a.Nc(" ",r.myFormErrors1.itemListArray[i].distributionRulesId," ")}}function Qr(e,t){if(1&e){var i=a.Wb();a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Vb(3,"ng-select",200),a.dc("add",(function(){a.Dc(i);var e=t.i;return a.hc(2).onDistRuleAdd(e)})),a.Ub(),a.Jc(4,Jr,2,1,"div",21),a.Ub(),a.Sb(),a.Sb()}if(2&e){var r=t.i,n=a.hc(2);a.oc("formGroup",n.myForm1),a.Cb(2),a.oc("formGroupName",r),a.Cb(1),a.oc("items",n.distributionList)("multiple",!0),a.Cb(1),a.oc("ngIf",n.myFormErrors1.itemListArray[r].distributionRulesId)}}function _r(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Qb(3,"input",201),a.Ub(),a.Sb(),a.Sb()),2&e){var i=t.i,r=a.hc(2);a.oc("formGroup",r.myForm1),a.Cb(2),a.oc("formGroupName",i)}}function Gr(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Qb(3,"p-calendar",202),a.Ub(),a.Sb(),a.Sb()),2&e){var i=t.i,r=a.hc(2);a.oc("formGroup",r.myForm1),a.Cb(2),a.oc("formGroupName",i),a.Cb(1),a.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT)}}function zr(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Qb(3,"input",203),a.Ub(),a.Sb(),a.Sb()),2&e){var i=t.i,r=a.hc(2);a.oc("formGroup",r.myForm1),a.Cb(2),a.oc("formGroupName",i)}}function jr(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Qb(3,"input",204),a.Ub(),a.Sb(),a.Sb()),2&e){var i=t.i,r=a.hc(2);a.oc("formGroup",r.myForm1),a.Cb(2),a.oc("formGroupName",i)}}function qr(e,t){if(1&e&&(a.Vb(0,"div",122),a.Lc(1),a.Ub()),2&e){var i=a.hc().i,r=a.hc(2);a.Cb(1),a.Nc(" ",r.myFormErrors1.itemListArray[i].dealerDiscountPercentage," ")}}function Wr(e,t){if(1&e&&(a.Tb(0,174),a.Tb(1,44),a.Vb(2,"td",137),a.Qb(3,"input",205),a.Jc(4,qr,2,1,"div",21),a.Ub(),a.Sb(),a.Sb()),2&e){var i=t.i,r=a.hc(2);a.oc("formGroup",r.myForm1),a.Cb(2),a.oc("formGroupName",i),a.Cb(2),a.oc("ngIf",r.myFormErrors1.itemListArray[i].dealerDiscountPercentage)}}function Hr(e,t){if(1&e){var i=a.Wb();a.Tb(0),a.Vb(1,"div",1),a.Vb(2,"span"),a.Lc(3),a.Ub(),a.Lc(4),a.Jc(5,pt,2,0,"ng-container",0),a.Jc(6,ht,2,0,"ng-container",0),a.Vb(7,"div",2),a.Vb(8,"button",3),a.dc("click",(function(){return a.Dc(i),a.hc().utilsService.goBack()})),a.Qb(9,"i",4),a.Vb(10,"span"),a.Lc(11,"Back"),a.Ub(),a.Ub(),a.Vb(12,"button",5),a.dc("click",(function(){a.Dc(i);var e=a.hc();return e.popupExternalService.showManageColumnsPopup(e.txnKeys.inputScreenName)})),a.Qb(13,"i",6),a.Vb(14,"span"),a.Lc(15,"Manage Item Columns"),a.Ub(),a.Ub(),a.Jc(16,vt,4,0,"button",7),a.Vb(17,"button",5),a.dc("click",(function(){return a.Dc(i),a.hc().showTxnOptionsSidebar()})),a.Qb(18,"i",8),a.Vb(19,"span"),a.Lc(20,"More"),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Vb(21,"div",9),a.Vb(22,"div",10),a.Vb(23,"div",11),a.Qb(24,"i",12),a.Lc(25,"Basic Info "),a.Ub(),a.Vb(26,"div",13),a.Vb(27,"div",14),a.Vb(28,"div",15),a.Vb(29,"label",16),a.Lc(30,"Doc No"),a.Vb(31,"span",17),a.Lc(32,"*"),a.Ub(),a.Ub(),a.Vb(33,"div",14),a.Vb(34,"div",18),a.Vb(35,"ng-select",19),a.dc("change",(function(){a.Dc(i);var e=a.hc();return e.branchUtilsService.onDocumentNumberingChange(e.documentNumberingList,e.myForm1)})),a.Ub(),a.Ub(),a.Vb(36,"div",18),a.Qb(37,"input",20),a.Ub(),a.Ub(),a.Jc(38,ft,2,1,"div",21),a.Ub(),a.Vb(39,"div",15),a.Vb(40,"label",16),a.Lc(41,"Customer Name"),a.Vb(42,"span",17),a.Lc(43,"*"),a.Ub(),a.Ub(),a.Vb(44,"div",22),a.Vb(45,"ng-select",23),a.dc("focus",(function(){return a.Dc(i),a.hc().onCustomerNameChange()}))("change",(function(){return a.Dc(i),a.hc().onBpChange()})),a.Jc(46,yt,4,2,"ng-template",24),a.Ub(),a.Vb(47,"span"),a.Jc(48,gt,2,0,"a",25),a.Jc(49,St,2,0,"a",26),a.Ub(),a.Jc(50,It,2,0,"span",27),a.Ub(),a.Jc(51,Ct,2,1,"div",21),a.Ub(),a.Vb(52,"div",15),a.Vb(53,"label",16),a.Lc(54,"Contact Person"),a.Ub(),a.Vb(55,"ng-select",28),a.Jc(56,Ut,4,3,"ng-template",24),a.Ub(),a.Ub(),a.Vb(57,"div",15),a.Vb(58,"label",16),a.Lc(59,"Currency"),a.Vb(60,"span",17),a.Lc(61,"*"),a.Ub(),a.Ub(),a.Vb(62,"select",29),a.Vb(63,"option",30),a.Lc(64,"--SELECT--"),a.Ub(),a.Jc(65,Dt,2,2,"option",31),a.Ub(),a.Jc(66,Lt,2,1,"div",21),a.Ub(),a.Vb(67,"div",15),a.Vb(68,"label",16),a.Lc(69,"Reference No"),a.Ub(),a.Qb(70,"input",32),a.Ub(),a.Vb(71,"div",15),a.Vb(72,"label",16),a.Lc(73,"Posting Date"),a.Vb(74,"span",17),a.Lc(75,"*"),a.Ub(),a.Ub(),a.Qb(76,"p-calendar",33),a.Jc(77,Vt,2,1,"div",21),a.Jc(78,At,2,1,"div",21),a.Ub(),a.Jc(79,Ft,8,6,"div",34),a.Jc(80,kt,8,6,"div",34),a.Jc(81,Bt,8,6,"div",34),a.Vb(82,"div",15),a.Vb(83,"label",16),a.Lc(84,"Document Date"),a.Vb(85,"span",17),a.Lc(86,"*"),a.Ub(),a.Ub(),a.Qb(87,"p-calendar",35),a.Jc(88,Kt,2,1,"div",21),a.Ub(),a.Vb(89,"div",15),a.Vb(90,"label",16),a.Lc(91,"Sales Employee"),a.Ub(),a.Vb(92,"div",36),a.Vb(93,"ng-select",37),a.Jc(94,Mt,4,2,"ng-template",24),a.Ub(),a.Jc(95,Rt,2,0,"span",27),a.Ub(),a.Ub(),a.Vb(96,"div",15),a.Vb(97,"label",16),a.Lc(98,"Status"),a.Vb(99,"span",17),a.Lc(100,"*"),a.Ub(),a.Ub(),a.Vb(101,"select",38),a.Jc(102,wt,2,2,"option",31),a.Ub(),a.Jc(103,Jt,2,1,"div",21),a.Ub(),a.Vb(104,"div",15),a.Vb(105,"label",16),a.Lc(106,"Remarks"),a.Ub(),a.Qb(107,"textarea",39),a.Jc(108,Qt,2,1,"div",21),a.Ub(),a.Jc(109,_t,8,0,"div",34),a.Ub(),a.Ub(),a.Ub(),a.Vb(110,"div",10),a.Vb(111,"div",11),a.Qb(112,"i",12),a.Lc(113,"Content Info "),a.Ub(),a.Vb(114,"div",40),a.Vb(115,"div",41),a.Vb(116,"table",42),a.Vb(117,"thead"),a.Vb(118,"tr"),a.Jc(119,zt,2,4,"ng-container",43),a.Ub(),a.Ub(),a.Vb(120,"tbody",44),a.Jc(121,Wt,2,2,"tr",45),a.Ub(),a.Jc(122,Ht,16,2,"tfoot",0),a.Ub(),a.Ub(),a.Vb(123,"div",14),a.Vb(124,"div",46),a.Qb(125,"div",47),a.Ub(),a.Vb(126,"div",48),a.Vb(127,"table",49),a.Vb(128,"tbody"),a.Vb(129,"tr"),a.Vb(130,"td",50),a.Vb(131,"strong"),a.Lc(132,"Total Before Discount"),a.Ub(),a.Ub(),a.Qb(133,"td",51),a.Vb(134,"td",52),a.Vb(135,"strong"),a.Lc(136),a.Ub(),a.Ub(),a.Ub(),a.Jc(137,Yt,8,3,"tr",0),a.Jc(138,ei,9,4,"tr",0),a.Vb(139,"tr"),a.Vb(140,"td"),a.Lc(141,"Tax"),a.Ub(),a.Qb(142,"td"),a.Vb(143,"td",53),a.Lc(144),a.Ub(),a.Ub(),a.Vb(145,"tr"),a.Vb(146,"td"),a.Lc(147," Rounding "),a.Vb(148,"div"),a.Vb(149,"label",54),a.Vb(150,"input",55),a.dc("ngModelChange",(function(){a.Dc(i);var e=a.hc();return e.branchUtilsService.txnRoundingOffChange(e.myForm1)})),a.Ub(),a.Qb(151,"span",56),a.Lc(152,"Edit "),a.Ub(),a.Ub(),a.Ub(),a.Vb(153,"td"),a.Vb(154,"input",57),a.dc("keyup",(function(){a.Dc(i);var e=a.hc();return e.branchUtilsService.txnCalcTotal(e.myForm1,!0)})),a.Ub(),a.Jc(155,ti,2,1,"div",21),a.Ub(),a.Vb(156,"td",53),a.Lc(157),a.Ub(),a.Ub(),a.Jc(158,ni,9,4,"tr",0),a.Jc(159,si,6,0,"tr",0),a.Vb(160,"tr"),a.Vb(161,"td",58),a.Lc(162,"Total "),a.Vb(163,"small"),a.Lc(164,"(Rounded off):"),a.Ub(),a.Ub(),a.Qb(165,"td"),a.Vb(166,"td",59),a.Lc(167),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Vb(168,"div",10),a.Vb(169,"div",11),a.Qb(170,"i",12),a.Lc(171,"Logistics Info "),a.Ub(),a.Vb(172,"div",13),a.Vb(173,"div",14),a.Vb(174,"div",15),a.Vb(175,"label",16),a.Lc(176,"Ship To"),a.Ub(),a.Vb(177,"select",60),a.dc("change",(function(){a.Dc(i);var e=a.hc();return e.branchUtilsService.txnBpAddressChange(e.customerBpAddressShipToList,e.myForm1,"customerShipToBpAddressId","customerShipToAddress"),e.branchUtilsService.txnSetTaxCode(e.customerBpAddressShipToList,e.myForm1,"customerShipToBpAddressId")})),a.Vb(178,"option",30),a.Lc(179,"--SELECT--"),a.Ub(),a.Jc(180,ai,2,3,"option",31),a.Ub(),a.Qb(181,"textarea",61),a.Ub(),a.Vb(182,"div",15),a.Vb(183,"label",16),a.Lc(184,"Bill To"),a.Ub(),a.Vb(185,"select",62),a.dc("change",(function(){a.Dc(i);var e=a.hc();return e.branchUtilsService.txnBpAddressChange(e.customerBpAddressBillToList,e.myForm1,"customerBillToBpAddressId","customerBillToAddress")})),a.Vb(186,"option",30),a.Lc(187,"--SELECT--"),a.Ub(),a.Jc(188,oi,2,3,"option",31),a.Ub(),a.Qb(189,"textarea",63),a.Ub(),a.Jc(190,ci,4,0,"div",34),a.Jc(191,ui,4,0,"div",34),a.Jc(192,li,8,0,"div",34),a.Ub(),a.Ub(),a.Ub(),a.Vb(193,"div",10),a.Vb(194,"div",11),a.Qb(195,"i",12),a.Lc(196,"Accounting Info "),a.Ub(),a.Vb(197,"div",13),a.Vb(198,"div",14),a.Vb(199,"div",15),a.Vb(200,"label",16),a.Lc(201,"Payment Terms"),a.Ub(),a.Vb(202,"select",64),a.dc("change",(function(){a.Dc(i);var e=a.hc();return e.branchUtilsService.txnPaymentTermsChange(e.txnKeys.inputScreenName,e.paymentTermsList,e.myForm1,"paymentTermsId")})),a.Vb(203,"option",30),a.Lc(204,"--SELECT--"),a.Ub(),a.Jc(205,mi,2,2,"option",31),a.Ub(),a.Ub(),a.Vb(206,"div",15),a.Vb(207,"label",16),a.Lc(208,"Payment Method"),a.Ub(),a.Vb(209,"select",65),a.Vb(210,"option",30),a.Lc(211,"--SELECT--"),a.Ub(),a.Jc(212,bi,2,2,"option",31),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Vb(213,"div",10),a.Vb(214,"div",11),a.Qb(215,"i",12),a.Lc(216,"Tax Info "),a.Ub(),a.Vb(217,"div",13),a.Vb(218,"div",14),a.Vb(219,"div",15),a.Vb(220,"label",16),a.Lc(221,"Tax code / GST / VAT"),a.Ub(),a.Qb(222,"input",66),a.Ub(),a.Jc(223,di,4,0,"div",34),a.Jc(224,pi,4,4,"div",34),a.Jc(225,vi,7,1,"div",34),a.Ub(),a.Ub(),a.Ub(),a.Qb(226,"app-udf-viewer",67),a.Vb(227,"app-attachments",68),a.dc("doSuccess",(function(){a.Dc(i);var e=a.hc();return e.sTxnUtilsService.redirectToList(e.txnKeys.inputScreenName)})),a.Ub(),a.Jc(228,gi,21,3,"div",69),a.Vb(229,"div",70),a.Jc(230,Si,4,0,"button",7),a.Jc(231,Ii,4,0,"button",7),a.Jc(232,Ci,4,0,"button",71),a.Jc(233,Ui,4,0,"button",7),a.Jc(234,Di,4,0,"button",7),a.Jc(235,Li,4,0,"button",71),a.Ub(),a.Jc(236,Ni,7,3,"div",72),a.Jc(237,xi,7,0,"div",72),a.Ub(),a.Qb(238,"app-spi-txn-options"),a.Jc(239,Fi,2,1,"ng-template",null,73,a.Kc),a.Jc(241,Ti,2,1,"ng-template",null,74,a.Kc),a.Jc(243,ki,1,1,"ng-template",null,75,a.Kc),a.Jc(245,Oi,4,1,"ng-template",null,76,a.Kc),a.Jc(247,Pi,4,1,"ng-template",null,77,a.Kc),a.Jc(249,Bi,2,1,"ng-template",null,78,a.Kc),a.Jc(251,Ki,2,1,"ng-template",null,79,a.Kc),a.Jc(253,Mi,2,1,"ng-template",null,80,a.Kc),a.Jc(255,wi,3,2,"ng-template",null,81,a.Kc),a.Jc(257,Qi,3,2,"ng-template",null,82,a.Kc),a.Jc(259,_i,2,1,"ng-template",null,83,a.Kc),a.Jc(261,Gi,2,1,"ng-template",null,84,a.Kc),a.Jc(263,zi,2,1,"ng-template",null,85,a.Kc),a.Jc(265,ji,2,1,"ng-template",null,86,a.Kc),a.Jc(267,qi,2,1,"ng-template",null,87,a.Kc),a.Jc(269,Wi,4,1,"ng-template",null,88,a.Kc),a.Jc(271,Hi,2,1,"ng-template",null,89,a.Kc),a.Jc(273,$i,4,1,"ng-template",null,90,a.Kc),a.Jc(275,Zi,3,2,"ng-template",null,91,a.Kc),a.Jc(277,Xi,2,1,"ng-template",null,92,a.Kc),a.Jc(279,er,2,1,"ng-template",null,93,a.Kc),a.Jc(281,tr,2,1,"ng-template",null,94,a.Kc),a.Jc(283,ir,2,1,"ng-template",null,95,a.Kc),a.Jc(285,rr,2,1,"ng-template",null,96,a.Kc),a.Jc(287,sr,4,3,"ng-template",null,97,a.Kc),a.Jc(289,ar,4,3,"ng-template",null,98,a.Kc),a.Jc(291,cr,3,2,"ng-template",null,99,a.Kc),a.Jc(293,hr,10,8,"ng-template",null,100,a.Kc),a.Jc(295,Sr,9,6,"ng-template",null,101,a.Kc),a.Jc(297,Ir,4,3,"ng-template",null,102,a.Kc),a.Jc(299,Cr,4,4,"ng-template",null,103,a.Kc),a.Jc(301,Dr,5,3,"ng-template",null,104,a.Kc),a.Jc(303,Ar,6,5,"ng-template",null,105,a.Kc),a.Jc(305,Fr,11,7,"ng-template",null,106,a.Kc),a.Jc(307,Tr,4,3,"ng-template",null,107,a.Kc),a.Jc(309,Er,4,3,"ng-template",null,108,a.Kc),a.Jc(311,kr,4,3,"ng-template",null,109,a.Kc),a.Jc(313,Or,4,4,"ng-template",null,110,a.Kc),a.Jc(315,Br,5,3,"ng-template",null,111,a.Kc),a.Jc(317,Mr,5,5,"ng-template",null,112,a.Kc),a.Jc(319,Rr,4,3,"ng-template",null,113,a.Kc),a.Jc(321,wr,4,3,"ng-template",null,114,a.Kc),a.Jc(323,Qr,5,5,"ng-template",null,115,a.Kc),a.Jc(325,_r,4,2,"ng-template",null,116,a.Kc),a.Jc(327,Gr,4,6,"ng-template",null,117,a.Kc),a.Jc(329,zr,4,2,"ng-template",null,118,a.Kc),a.Jc(331,jr,4,2,"ng-template",null,119,a.Kc),a.Jc(333,Wr,5,3,"ng-template",null,120,a.Kc),a.Sb()}if(2&e){var r=a.hc();a.Cb(3),a.Mc(r.branchUtilsService.txnGetTitle(r.screenAttributes.title,!0)),a.Cb(1),a.Nc("",r.branchUtilsService.txnGetTitle(r.screenAttributes.title)," - "),a.Cb(1),a.oc("ngIf",!r.txnKeys.inputEditId),a.Cb(1),a.oc("ngIf",r.txnKeys.inputEditId),a.Cb(10),a.oc("ngIf",r.txnKeys.inputEditId),a.Cb(5),a.oc("formGroup",r.myForm1),a.Cb(14),a.oc("items",r.documentNumberingList),a.Cb(3),a.oc("ngIf",r.myFormErrors1.documentNumberingId||r.myFormErrors1.documentNumber),a.Cb(7),a.oc("items",r.customerBpList)("multiple",!1),a.Cb(3),a.oc("ngIf",!r.bizRefreshFlag),a.Cb(1),a.oc("ngIf",r.bizRefreshFlag),a.Cb(1),a.oc("ngIf",r.myForm1Data.customerBpId),a.Cb(1),a.oc("ngIf",r.myFormErrors1.customerBpId),a.Cb(4),a.oc("items",r.customerBpContactList)("multiple",!1),a.Cb(10),a.oc("ngForOf",r.currencyList),a.Cb(1),a.oc("ngIf",r.myFormErrors1.currencyId),a.Cb(10),a.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),a.Cb(1),a.oc("ngIf",r.myFormErrors1.postingDate),a.Cb(1),a.oc("ngIf",null==r.myForm1.errors?null:r.myForm1.errors.invalidPostingDate),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnValidUntil")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnDeliveryDate")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnDueDate")),a.Cb(6),a.oc("monthNavigator",!0)("yearNavigator",!0)("yearRange",r.appConstants.PICKER_YEAR_RANGE)("dateFormat",r.appConstants.PICKER_DATE_FORMAT),a.Cb(1),a.oc("ngIf",r.myFormErrors1.documentDate),a.Cb(5),a.oc("items",r.salesEmployeeList)("multiple",!1),a.Cb(2),a.oc("ngIf",r.myForm1Data.salesEmpId),a.Cb(7),a.oc("ngForOf",r.statusList),a.Cb(1),a.oc("ngIf",r.myFormErrors1.status),a.Cb(5),a.oc("ngIf",r.myFormErrors1.remarks),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnGatepassStatus")),a.Cb(6),a.oc("ngStyle",a.rc(77,yi)),a.Cb(4),a.oc("ngForOf",r.itemListColumnOrder),a.Cb(2),a.oc("ngForOf",r.myForm1.controls.itemListArray.controls),a.Cb(1),a.oc("ngIf",r.branchUtilsService.txnAddItemAccess(r.txnKeys.inputScreenName,r.myForm1,r.txnKeys.inputEditId)),a.Cb(14),a.Oc(" ",r.myForm1Data.totalBeforeDiscount," ",r.branchUtilsService.txnGetActiveCurrency(r.currencyList,r.myForm1,"currencyId")," "),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnDiscountTab")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnDpmTab")),a.Cb(6),a.Oc(" ",r.myForm1Data.taxPercentage," ",r.branchUtilsService.txnGetActiveCurrency(r.currencyList,r.myForm1,"currencyId")," "),a.Cb(11),a.oc("ngIf",r.myFormErrors1.rounding),a.Cb(2),a.Oc(" ",r.myForm1Data.rounding," ",r.branchUtilsService.txnGetActiveCurrency(r.currencyList,r.myForm1,"currencyId")," "),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnDpInvoice")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnDpInvoice")),a.Cb(8),a.Oc(" ",r.myForm1Data.totalAmount," ",r.branchUtilsService.txnGetActiveCurrency(r.currencyList,r.myForm1,"currencyId")," "),a.Cb(13),a.oc("ngForOf",r.customerBpAddressShipToList),a.Cb(8),a.oc("ngForOf",r.customerBpAddressBillToList),a.Cb(2),a.oc("ngIf",r.sTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"courier")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"trackingNumber")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"deliveryStatus")),a.Cb(13),a.oc("ngForOf",r.paymentTermsList),a.Cb(7),a.oc("ngForOf",r.paymentMethodsList),a.Cb(11),a.oc("ngIf",r.sTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnOriginalRefNumber")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnOriginalRefDate")),a.Cb(1),a.oc("ngIf",r.sTxnUtilsService.addFieldsVisibility(r.txnKeys.inputScreenName,"fnIssuingNoteId")),a.Cb(1),a.oc("type",r.screenAttributes.backendKey),a.Cb(1),a.oc("type",r.screenAttributes.backendKey),a.Cb(1),a.oc("ngIf",0!==r.approvalHistory.length),a.Cb(2),a.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"save")),a.Cb(1),a.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"saveDraft")),a.Cb(1),a.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"clear")),a.Cb(1),a.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"add")),a.Cb(1),a.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"update")),a.Cb(1),a.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"cancel")),a.Cb(1),a.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"editMsgContainer")),a.Cb(1),a.oc("ngIf",r.branchUtilsService.txnValidateBtn(r.myForm1,r.txnKeys,"addAclNote"))}}var $r,Yr,Zr=(($r=function(){function e(t,i,r,n,a,o,c,u,l,m,b,d){_classCallCheck(this,e),this.utilsService=t,this.storageService=i,this.authGuardService=r,this.commonDataService=n,this.branchUtilsService=a,this.sTxnUtilsService=o,this.popupExternalService=c,this.formBuilder=u,this.activatedRoute=l,this.changeDetectorRef=m,this.modalService=b,this.approvalStatusReportDataService=d,this.appConstants=s.h,this.screenAcl={},this.txnKeys={inputScreenName:"",inputEditId:"",inputDraftId:"",inputCopyIds:"",inputCopyScreenName:"",inputDuplicateId:"",editStatusId:"",editCreatedName:"",editTotalAmount:"",salesArDpInvoiceUsedOriginalAmount:""},this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.bizRefreshFlag=!1,this.documentNumberingList=[],this.customerBpList=[],this.customerBpContactList=[],this.currencyList=[],this.salesEmployeeList=[],this.statusList=[],this.itemList=[],this.warehouseList=[],this.binList=[],this.hsnList=[],this.taxList=[],this.uomList=[],this.distributionList=[],this.customerBpAddressShipToList=[],this.customerBpAddressBillToList=[],this.paymentTermsList=[],this.paymentMethodsList=[],this.issuingNoteList=[],this.approvalHistory=[],this.dpDocumentNoList=[],this.myForm1Data={},this.myFormErrors1={},this.myFormValidationMsgs1={}}return _createClass(e,[{key:"ngOnInit",value:function(){this.initializeSubscriptions()}},{key:"ngAfterViewInit",value:function(){this.attachmentsComponent&&this.udfViewerComponent&&(this.attachmentsComponent.loadAttachments(this.txnKeys.inputEditId||this.txnKeys.inputDraftId),this.udfViewerComponent.getFields(this.txnKeys.inputEditId||this.txnKeys.inputDuplicateId||this.txnKeys.inputDraftId),this.changeDetectorRef.detectChanges())}},{key:"initializeSubscriptions",value:function(){var e=this;this.activatedRoute.params.subscribe((function(t){if(!e.sTxnUtilsService.checkScreenNameValid(t.screenName))return e.utilsService.showFailureMsg("Screen that you are trying to is not valid!"),e.utilsService.goBack(),!1;if(e.screenAcl=e.authGuardService.getScreenAcl(e.branchUtilsService.screenAttributes[t.screenName].documentTypeId),!e.screenAcl.view)return e.utilsService.showFailureMsg(s.h.ACL_UNAUTHORIZED_MSG),e.utilsService.goBack(),!1;if(e.reInitializeGlobalVariables(),e.txnKeys.inputScreenName=t.screenName,e.transactionInitialization(),t.id&&(e.txnKeys.inputEditId=e.utilsService.decrypt(t.id),e.get()),t.copyScreenName&&t.copyId){var i=e.utilsService.decrypt(t.copyId);e.txnKeys.inputCopyIds=i.split(","),e.txnKeys.inputCopyScreenName=t.copyScreenName,e.copyFrom()}t.duplicateId&&(e.txnKeys.inputDuplicateId=e.utilsService.decrypt(t.duplicateId),e.getDuplicate()),t.draftId&&(e.txnKeys.inputDraftId=e.utilsService.decrypt(t.draftId),e.getDraft()),e.txnKeys.inputEditId||e.txnKeys.inputCopyIds||e.txnKeys.inputDuplicateId||e.txnKeys.inputDraftId||(e.branchUtilsService.getMasterDocumentNumbering(e.myForm1,e.screenAttributes.documentTypeId).subscribe((function(t){e.documentNumberingList=t})),e.getAutoSuggestionList("getCurrencyList"),e.getCustomerBpList(),e.getSalesEmployeeList(),e.getAutoSuggestionList("getHsnList"),e.getAutoSuggestionList("getTaxList"),e.getAutoSuggestionList("getUomList"),e.getWarehouseList(),e.getDistributionList())})),this.branchUtilsService.itemSearch.pipe(Object(ee.a)(700),Object(te.a)(),Object(ie.a)((function(t){e.getItemList(t)}))).subscribe(),this.itemListColumnOrderChangesSubscription=this.branchUtilsService.itemListColumnOrderChanges.subscribe((function(t){"salesQuote"!==t.triggerType&&"salesOrder"!==t.triggerType&&"salesDelivery"!==t.triggerType&&"salesArInvoice"!==t.triggerType&&"salesArDpInvoice"!==t.triggerType&&"salesArCreditMemo"!==t.triggerType&&"salesReturn"!==t.triggerType||(e.itemListColumnOrder=e.branchUtilsService.getSelectedItemColumnDataByTxn(e.txnKeys.inputScreenName))})),this.sTxnUtilsService.selectedItemsByWarehouseSubscription.subscribe((function(t){e.itemList=t.map((function(e){return e.searchText=e.itemName+" - "+e.itemCode,e})),t.forEach((function(t){e.addItemFields();var i=e.myForm1.controls.itemListArray,r=i.length-1;i.at(r).patchValue({itemId:t.id}),e.onItemChange(r)}))}))}},{key:"reInitializeGlobalVariables",value:function(){this.txnKeys.inputScreenName="",this.txnKeys.inputEditId="",this.txnKeys.inputCopyIds="",this.txnKeys.inputCopyScreenName="",this.txnKeys.inputDuplicateId="",this.txnKeys.editStatusId="",this.txnKeys.editCreatedName="",this.txnKeys.editTotalAmount=0,this.txnKeys.salesArDpInvoiceUsedOriginalAmount=0,this.screenAttributes={},this.screenDataService={},this.itemListColumnOrder=[],this.bizRefreshFlag=!1,this.documentNumberingList=[],this.customerBpList=[],this.customerBpContactList=[],this.currencyList=[],this.salesEmployeeList=[],this.statusList=[],this.itemList=[],this.warehouseList=[],this.binList=[],this.hsnList=[],this.taxList=[],this.uomList=[],this.distributionList=[],this.customerBpAddressShipToList=[],this.customerBpAddressBillToList=[],this.paymentTermsList=[],this.paymentMethodsList=[],this.dpDocumentNoList=[]}},{key:"transactionInitialization",value:function(){this.screenAttributes=this.branchUtilsService.screenAttributes[this.txnKeys.inputScreenName],this.itemListColumnOrder=this.branchUtilsService.getSelectedItemColumnDataByTxn(this.txnKeys.inputScreenName),this.screenDataService=this.sTxnUtilsService.getScreenDataService(this.txnKeys.inputScreenName),this.myFormErrors1=this.sTxnUtilsService.getFormErrors(this.txnKeys.inputScreenName,"mainFields"),this.myFormValidationMsgs1=this.sTxnUtilsService.getFormValMsgs(this.txnKeys.inputScreenName),this.initializeForm1(),this.getAutoSuggestionList("getSalesTransStatusList"),this.getAutoSuggestionList("getPaymentTermsList"),this.getAutoSuggestionList("getPaymentMethodsList"),this.getAutoSuggestionList("getIssuingNoteList"),this.branchUtilsService.spiTxnOptions.next({show:!1})}},{key:"initializeForm1",value:function(){var e=this;this.myForm1=this.sTxnUtilsService.getFormMainFields(this.txnKeys.inputScreenName),this.myForm1.valueChanges.subscribe((function(t){e.utilsService.validation(e.myForm1,e.myFormErrors1,e.myFormValidationMsgs1),e.myForm1Data=e.myForm1.getRawValue()})),this.myForm1Data=this.myForm1.getRawValue(),this.sTxnUtilsService.manipulationsOnAddEditBasedOnRole(this.txnKeys.inputScreenName,this.myForm1,this.txnKeys.inputEditId)}},{key:"addItemFields",value:function(e,t){var i=this.myForm1.controls.itemListArray;i.push(this.initItemFields(e,t)),e||(this.branchUtilsService.txnTaxChange(this.taxList,this.myForm1,i.length-1),this.setBinList(i.length-1,!0)),this.sTxnUtilsService.manipulationsOnAddEditBasedOnRole(this.txnKeys.inputScreenName,this.myForm1,this.txnKeys.inputEditId)}},{key:"initItemFields",value:function(e,t){return this.myFormErrors1.itemListArray.push(this.sTxnUtilsService.getFormErrors(this.txnKeys.inputScreenName,"itemFields")),this.sTxnUtilsService.getFormItemFields(this.txnKeys.inputScreenName,e,t)}},{key:"removeItemFields",value:function(e){var t=this.myForm1Data.itemListArray[e].id;if(t){var i=this.myForm1Data.deletedItemChildIds;i.push(t),this.myForm1.patchValue({deletedItemChildIds:i})}this.myForm1.controls.itemListArray.removeAt(e)}},{key:"confirmSaveUpdate",value:function(e){var t=this,i=this.myForm1.getRawValue();if("3"!==i.approvalStatus&&"1"!==i.approvalStatus){var r=m.findIndex(this.documentNumberingList,{id:i.documentNumberingId});if("DRAFT"===this.documentNumberingList[r].documentNumberingType&&"add"!==e)return this.utilsService.showFailureMsg("Cannot Proceed - Select other than draft document numbering from Doc No field!"),!1}if(!this.myForm1.valid||!this.udfViewerComponent.valid())return this.utilsService.validation(this.myForm1,this.myFormErrors1,this.myFormValidationMsgs1,!0),this.udfViewerComponent.checkValidations(),!1;if(0===i.itemListArray.length)return this.utilsService.showFailureMsg("Cannot save / update - No item added!"),!1;if("salesArDpInvoice"===this.txnKeys.inputScreenName&&parseFloat(i.dpmValue)>parseFloat(i.totalBeforeDiscount))return this.utilsService.showFailureMsg("Cannot save - DPM Value should not exceed Total Before Discount"),!1;if(("salesArInvoice"===this.txnKeys.inputScreenName||"salesArCreditMemo"===this.txnKeys.inputScreenName&&this.txnKeys.inputCopyIds)&&!this.txnKeys.inputEditId){var n=this.txnKeys.salesArDpInvoiceUsedOriginalAmount?this.txnKeys.salesArDpInvoiceUsedOriginalAmount:0;if(parseFloat(this.myForm1Data.salesArDpInvoiceUsedAmount?this.myForm1Data.salesArDpInvoiceUsedAmount:0)>parseFloat(n))return this.utilsService.showFailureMsg("Cannot exceed maximum amount specified in Down Payment"),!1}if(this.txnKeys.inputCopyIds){var s=!1;if(this.myForm1Data.itemListArray.forEach((function(e){e.copyFromId&&"SALES_QUOTE"!==e.copyFromType&&"SALES_ORDER"!==e.copyFromType&&parseInt(e.quantity,0)>parseInt(e.copyFromOpenQuantity,0)&&(s=!0)})),s)return this.utilsService.showFailureMsg("Quantity should not exceed maximum quantity specified under quantity field."),!1}if("salesOrder"===this.txnKeys.inputScreenName||"salesDelivery"===this.txnKeys.inputScreenName||"salesArInvoice"===this.txnKeys.inputScreenName){var a=m.find(this.customerBpList,{id:this.myForm1Data.customerBpId}),o=parseFloat(a.accountBalance)-parseFloat(a.creditLimit),c=parseFloat(this.myForm1Data.totalAmount);if(this.txnKeys.inputEditId&&(this.txnKeys.editTotalAmount=parseFloat(this.txnKeys.editTotalAmount),this.txnKeys.editTotalAmount<c&&(c-=this.txnKeys.editTotalAmount)),c>o&&("1"==this.storageService.get("bpCreditLimitStrictMode")||"1"!==this.storageService.get("bpCreditLimitStrictMode")&&"0"!==a.creditLimit)){var u;u="1"!==this.storageService.get("bpCreditLimitStrictMode")?"".concat(a.partnerCode," - ").concat(a.partnerName," has exceeded the credit limit by ").concat(c-o,"\n        ").concat(this.branchUtilsService.txnGetActiveCurrency(this.currencyList,this.myForm1,"currencyId"),". Do you want to continue?"):"".concat(a.partnerCode," - ").concat(a.partnerName," has exceeded the credit limit by ").concat(c-o,"\n          ").concat(this.branchUtilsService.txnGetActiveCurrency(this.currencyList,this.myForm1,"currencyId"),".");var l="1"!==this.storageService.get("bpCreditLimitStrictMode")?"Confirmation":"Warning",b="1"!==this.storageService.get("bpCreditLimitStrictMode")?"Ok":"";this.utilsService.confirmDialog(l,u,"modal-sm",b,"Cancel").content.confirmation.subscribe((function(i){i&&t.saveUpdate(e)}))}else this.saveUpdate(e)}else this.saveUpdate(e)}},{key:"saveUpdate",value:function(e){var t,i=this,r=this.sTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm1);r.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),r.isDraft=this.txnKeys.inputDraftId?"2":"0","add"===e?(r.id=this.txnKeys.inputEditId||this.txnKeys.inputDraftId,t="proceed"):this.txnKeys.inputEditId||this.txnKeys.inputDraftId?(t="update",r.id=this.txnKeys.inputEditId||this.txnKeys.inputDraftId,r.deletedItemChildIds=this.myForm1Data.deletedItemChildIds):t="save",this.screenDataService[t](r).subscribe((function(e){"SUCCESS"===e.status?(i.utilsService.showSuccessMsg(e),i.attachmentsComponent.save("save"===t?e.sId:i.txnKeys.inputEditId||i.txnKeys.inputDraftId)):i.utilsService.showFailureMsg(e)}))}},{key:"addUpdateDraft",value:function(){var e=this,t=this.myForm1.getRawValue(),i=m.findIndex(this.documentNumberingList,{id:t.documentNumberingId});if("DRAFT"!==this.documentNumberingList[i].documentNumberingType)return this.utilsService.showFailureMsg("Cannot Proceed - Select draft document numbering from Doc No field!"),!1;if(0===t.itemListArray.length)return this.utilsService.showFailureMsg("Cannot save / update draft - No item added!"),!1;var r,n=this.sTxnUtilsService.getSaveUpdateDataFormation(this.txnKeys.inputScreenName,this.myForm1);n.udfFields=JSON.stringify(this.udfViewerComponent.getFormValues()),n.isDraft="1",this.txnKeys.inputDraftId?(r="update",n.id=this.txnKeys.inputDraftId,n.deletedItemChildIds=this.myForm1Data.deletedItemChildIds):r="save",this.screenDataService[r](n).subscribe((function(t){"SUCCESS"===t.status?(e.utilsService.showSuccessMsg(t),e.attachmentsComponent.save("save"===r?t.sId:e.txnKeys.inputDraftId)):e.utilsService.showFailureMsg(t)}))}},{key:"get",value:function(){var e=this;this.screenDataService.get(this.txnKeys.inputEditId).subscribe((function(t){if("SUCCESS"===t.status){var i=t.results;i.editFlag=!0;var r=e.sTxnUtilsService.getMainFieldsWithData(e.txnKeys.inputScreenName,i);e.myForm1.patchValue(r),e.branchUtilsService.getMasterDocumentNumbering(e.myForm1,e.screenAttributes.documentTypeId,"edit",i.documentNumberingInfo).subscribe((function(t){e.documentNumberingList=t})),e.getAutoSuggestionList("getCurrencyList",i.currencyInfo),e.getCustomerBpList(!0,i.customerBpInfo),e.getCustomerBpContactList(!0,i.customerBpContactsInfo),e.getCustomerBpAddressShipToList(!0,i.customerShipToBpAddressInfo),e.getCustomerBpAddressBillToList(!0,i.customerBillToBpAddressInfo),e.getSalesEmployeeList(i.salesEmpInfo),"salesArInvoice"!==e.txnKeys.inputScreenName&&"salesArCreditMemo"!==e.txnKeys.inputScreenName||e.getDpDocumentNoList(!0,i.salesArDpInvoiceDocumentInfo),"salesDelivery"!==e.txnKeys.inputScreenName&&"salesArInvoice"!==e.txnKeys.inputScreenName&&"salesArDpInvoice"!==e.txnKeys.inputScreenName&&"salesArCreditMemo"!==e.txnKeys.inputScreenName&&"salesReturn"!==e.txnKeys.inputScreenName||"2"===i.status&&e.statusList.push({id:"2",name:"Closed"});var n=[],s=[],a=[],o=[],c=[],u=[];i.itemListArray.forEach((function(t){e.addItemFields(t,"edit"),t.itemInfo[0]&&n.push(t.itemInfo[0]),t.uomInfo[0]&&s.push(t.uomInfo[0]),t.warehouseInfo[0]&&a.push(t.warehouseInfo[0]),t.hsnInfo[0]&&o.push(t.hsnInfo[0]),t.taxInfo[0]&&c.push(t.taxInfo[0]),t.distributionRulesInfo.forEach((function(e){u.push(e)}))})),e.getAutoSuggestionList("getUomList",s),e.getAutoSuggestionList("getHsnList",o),e.getAutoSuggestionList("getTaxList",c),e.getItemList("",!0,n,i),e.getWarehouseList(!0,a,i),e.getDistributionList(u),e.branchUtilsService.txnCalcItemsTotal(e.myForm1),e.txnKeys.editStatusId=i.status,e.txnKeys.editCreatedName=i.createdByInfo[0].employeeName,e.txnKeys.editTotalAmount=i.totalAmount,e.sTxnUtilsService.manipulationsOnEdit(e.txnKeys.inputScreenName,e.myForm1),e.sTxnUtilsService.manipulationsOnAddEditBasedOnRole(e.txnKeys.inputScreenName,e.myForm1,e.txnKeys.inputEditId),e.getApprovalHistory(i.approvalStatusReportId)}else e.utilsService.showFailureMsg(t),e.utilsService.goBack()}))}},{key:"copyFrom",value:function(){var e=this,t=this.sTxnUtilsService.getScreenDataService(this.txnKeys.inputCopyScreenName),i=this.branchUtilsService.screenAttributes[this.txnKeys.inputCopyScreenName];t.copy(this.txnKeys.inputCopyIds).subscribe((function(t){if("SUCCESS"===t.status){var r=t.results;delete r.documentNumberingId,delete r.documentNumber,delete r.documentNumberingInfo;var n=e.sTxnUtilsService.getMainFieldsWithData(e.txnKeys.inputScreenName,r);if(e.myForm1.patchValue(n),e.branchUtilsService.getMasterDocumentNumbering(e.myForm1,e.screenAttributes.documentTypeId).subscribe((function(t){e.documentNumberingList=t})),e.getAutoSuggestionList("getCurrencyList",r.currencyInfo),e.getCustomerBpList(!0,r.customerBpInfo),e.getCustomerBpContactList(!0,r.customerBpContactsInfo),e.getCustomerBpAddressShipToList(!0,r.customerShipToBpAddressInfo),e.getCustomerBpAddressBillToList(!0,r.customerBillToBpAddressInfo),e.getSalesEmployeeList(r.salesEmpInfo),"salesArInvoice"!==e.txnKeys.inputScreenName&&"salesArCreditMemo"!==e.txnKeys.inputScreenName||e.getDpDocumentNoList(!0,r.salesArDpInvoiceDocumentInfo),"salesArDpInvoice"===e.txnKeys.inputScreenName){var s=parseFloat(e.myForm1Data.discountPercentage?e.myForm1Data.discountPercentage:0);e.myForm1.patchValue({dpmPercentage:100-s}),e.myForm1.patchValue({dpmValue:r.totalBeforeDiscount})}"salesArCreditMemo"===e.txnKeys.inputScreenName&&(e.myForm1.patchValue({salesArDpInvoiceUsedAmount:r.salesArDpInvoiceUsedRemainingAmount}),e.txnKeys.salesArDpInvoiceUsedOriginalAmount=r.salesArDpInvoiceUsedRemainingAmount);var a=[],o=[],c=[],u=[],l=[],m=[],b=r.itemListArray.filter((function(e){return parseInt(e.openQuantity,0)>0}));r.itemListArray=b,r.itemListArray.forEach((function(t){t.copyFromId=t.id,t.copyFromType=i.backendKey,t.copyFromOpenQuantity=t.openQuantity,t.quantity=t.openQuantity,delete t.openQuantity,delete t.orderedQuantity,delete t.id,e.addItemFields(t,"copy"),t.itemInfo[0]&&a.push(t.itemInfo[0]),t.uomInfo[0]&&o.push(t.uomInfo[0]),t.warehouseInfo[0]&&c.push(t.warehouseInfo[0]),t.hsnInfo[0]&&u.push(t.hsnInfo[0]),t.taxInfo[0]&&l.push(t.taxInfo[0]),t.distributionRulesInfo.forEach((function(e){m.push(e)}))})),e.getAutoSuggestionList("getUomList",o),e.getAutoSuggestionList("getHsnList",u),e.getAutoSuggestionList("getTaxList",l),e.getItemList("",!0,a,r),e.getWarehouseList(!0,c,r),e.getDistributionList(m),e.branchUtilsService.txnCalcItemsTotal(e.myForm1),e.sTxnUtilsService.manipulationsOnCopy(e.txnKeys.inputScreenName,e.myForm1),e.sTxnUtilsService.manipulationsOnAddEditBasedOnRole(e.txnKeys.inputScreenName,e.myForm1,e.txnKeys.inputEditId)}else e.utilsService.showFailureMsg(t),e.utilsService.goBack()}))}},{key:"getDuplicate",value:function(){var e=this;this.screenDataService.get(this.txnKeys.inputDuplicateId).subscribe((function(t){if("SUCCESS"===t.status){var i=t.results;delete i.documentNumberingId,delete i.documentNumber,delete i.documentNumberingInfo,delete i.status,delete i.courier,delete i.trackingNumber,delete i.deliveryStatus;var r=e.sTxnUtilsService.getMainFieldsWithData(e.txnKeys.inputScreenName,i);e.myForm1.patchValue(r),e.branchUtilsService.getMasterDocumentNumbering(e.myForm1,e.screenAttributes.documentTypeId).subscribe((function(t){e.documentNumberingList=t})),e.getAutoSuggestionList("getCurrencyList"),e.getCustomerBpList(),e.getSalesEmployeeList(i.salesEmpInfo),"salesArInvoice"!==e.txnKeys.inputScreenName&&"salesArCreditMemo"!==e.txnKeys.inputScreenName||e.getDpDocumentNoList(!0,i.salesArDpInvoiceDocumentInfo);var n=[],s=[],a=[],o=[],c=[],u=[];i.itemListArray.forEach((function(t){delete t.id,delete t.openQuantity,delete t.orderedQuantity,delete t.copyFromType,delete t.copyFromId,e.addItemFields(t),t.itemInfo[0]&&n.push(t.itemInfo[0]),t.uomInfo[0]&&s.push(t.uomInfo[0]),t.warehouseInfo[0]&&a.push(t.warehouseInfo[0]),t.hsnInfo[0]&&o.push(t.hsnInfo[0]),t.taxInfo[0]&&c.push(t.taxInfo[0]),t.distributionRulesInfo.forEach((function(e){u.push(e)}))})),e.getAutoSuggestionList("getUomList",s),e.getAutoSuggestionList("getHsnList",o),e.getAutoSuggestionList("getTaxList",c),e.getItemList("",!0,n,i),e.getWarehouseList(!0,a,i),e.getDistributionList(u),e.branchUtilsService.txnCalcItemsTotal(e.myForm1),e.sTxnUtilsService.manipulationsOnAddEditBasedOnRole(e.txnKeys.inputScreenName,e.myForm1,e.txnKeys.inputEditId)}else e.utilsService.showFailureMsg(t),e.utilsService.goBack()}))}},{key:"getDraft",value:function(){var e=this;this.screenDataService.get(this.txnKeys.inputDraftId).subscribe((function(t){if("SUCCESS"===t.status){var i=t.results,r=e.sTxnUtilsService.getMainFieldsWithData(e.txnKeys.inputScreenName,i);e.myForm1.patchValue(r),e.branchUtilsService.getMasterDocumentNumbering(e.myForm1,e.screenAttributes.documentTypeId,"draft",i.documentNumberingInfo).subscribe((function(t){e.documentNumberingList=t})),e.getAutoSuggestionList("getCurrencyList",i.currencyInfo),e.getCustomerBpList(!0,i.customerBpInfo),e.getCustomerBpContactList(!0,i.customerBpContactsInfo),e.getCustomerBpAddressShipToList(!0,i.customerShipToBpAddressInfo),e.getCustomerBpAddressBillToList(!0,i.customerBillToBpAddressInfo),e.getSalesEmployeeList(i.salesEmpInfo),"salesArInvoice"!==e.txnKeys.inputScreenName&&"salesArCreditMemo"!==e.txnKeys.inputScreenName||e.getDpDocumentNoList(!0,i.salesArDpInvoiceDocumentInfo),"salesDelivery"!==e.txnKeys.inputScreenName&&"salesArInvoice"!==e.txnKeys.inputScreenName&&"salesArDpInvoice"!==e.txnKeys.inputScreenName&&"salesArCreditMemo"!==e.txnKeys.inputScreenName&&"salesReturn"!==e.txnKeys.inputScreenName||"2"===i.status&&e.statusList.push({id:"2",name:"Closed"});var n=[],s=[],a=[],o=[],c=[],u=[];i.itemListArray.forEach((function(t){e.addItemFields(t,"edit"),t.itemInfo[0]&&n.push(t.itemInfo[0]),t.uomInfo[0]&&s.push(t.uomInfo[0]),t.warehouseInfo[0]&&a.push(t.warehouseInfo[0]),t.hsnInfo[0]&&o.push(t.hsnInfo[0]),t.taxInfo[0]&&c.push(t.taxInfo[0]),t.distributionRulesInfo.forEach((function(e){u.push(e)}))})),e.getAutoSuggestionList("getUomList",s),e.getAutoSuggestionList("getHsnList",o),e.getAutoSuggestionList("getTaxList",c),e.getItemList("",!0,n,i),e.getWarehouseList(!0,a,i),e.getDistributionList(u),e.branchUtilsService.txnCalcItemsTotal(e.myForm1),e.txnKeys.editStatusId=i.status,e.txnKeys.editCreatedName=i.createdByInfo[0].employeeName,e.txnKeys.editTotalAmount=i.totalAmount,"1"===i.isDraft&&"4"===i.approvalStatus?(e.myForm1.controls.documentNumberingId.enable(),e.myForm1.controls.documentNumber.enable()):(e.myForm1.controls.documentNumberingId.disable(),e.myForm1.controls.documentNumber.disable()),e.sTxnUtilsService.manipulationsOnAddEditBasedOnRole(e.txnKeys.inputScreenName,e.myForm1,e.txnKeys.inputEditId)}else e.utilsService.showFailureMsg(t),e.utilsService.goBack()}))}},{key:"clearForm",value:function(){this.initializeForm1()}},{key:"onBpChange",value:function(){this.getCustomerBpContactList(),this.branchUtilsService.txnSetCurrency(this.customerBpList,this.myForm1,"customerBpId","currencyId"),this.branchUtilsService.txnSetTermsAndMethods(this.customerBpList,this.myForm1,"customerBpId"),this.branchUtilsService.txnPaymentTermsChange(this.txnKeys.inputScreenName,this.paymentTermsList,this.myForm1,"paymentTermsId"),this.getCustomerBpAddressShipToList(),this.getCustomerBpAddressBillToList(),this.showTxnOptionsSidebar(!1),this.getDpDocumentNoList()}},{key:"onCustomerNameChange",value:function(){var e=this;if(this.myForm1Data.customerBpId){var t=this.myForm1.controls.itemListArray;t.length>0&&this.utilsService.confirmDialog("Confirmation","If changing the customer leads to remove the items. Do you want to proceed?","modal-sm","Ok","Cancel").content.confirmation.subscribe((function(i){i&&(e.myForm1.patchValue({customerBpId:null}),t.clear())}))}}},{key:"onItemChange",value:function(e){this.myForm1Data.customerBpId||(this.utilsService.showFailureMsg("Please select customer name to add items"),this.myForm1.controls.itemListArray.at(e).patchValue({itemId:null})),this.branchUtilsService.txnSetUom(this.itemList,this.myForm1,e,"itemId"),this.branchUtilsService.txnSetHsn(this.itemList,this.myForm1,e,"itemId"),this.branchUtilsService.txnSetUnitPrice(this.myForm1,e,this.myForm1Data.customerBpId),this.branchUtilsService.txnCheckItemDuplicate(this.myForm1,e,"itemId",this.itemList),this.branchUtilsService.setLastPriceAndAvailableStock(this.itemList,this.myForm1,e,this.branchUtilsService.spiTxnId.sales),this.branchUtilsService.txnSetDefaultItemBin(this.itemList,this.myForm1,e,"warehouseId","binId","binList")}},{key:"onDistRuleAdd",value:function(e){this.branchUtilsService.distRulesCheckUnique(this.distributionList,this.myForm1.controls.itemListArray.controls[e],"distributionRulesId")}},{key:"onItemSearch",value:function(e){this.branchUtilsService.itemSearch.next(e)}},{key:"getAutoSuggestionList",value:function(e,t){var i=this;this.commonDataService.getAutoSuggestionList(e).subscribe((function(r){"SUCCESS"===r.status?(i.utilsService.ifNotPushToList(r.results,t),"getCurrencyList"===e?i.currencyList=r.results:"getSalesTransStatusList"===e?(i.txnKeys.inputEditId||(r.results=r.results.filter((function(e){return"1"===e.id}))),i.txnKeys.inputEditId&&("salesDelivery"!==i.txnKeys.inputScreenName&&"salesArInvoice"!==i.txnKeys.inputScreenName&&"salesArDpInvoice"!==i.txnKeys.inputScreenName&&"salesArCreditMemo"!==i.txnKeys.inputScreenName&&"salesReturn"!==i.txnKeys.inputScreenName||(r.results=r.results.filter((function(e){return"2"!==e.id})))),i.statusList=r.results):"getUomList"===e?i.uomList=r.results:"getHsnList"===e?i.hsnList=r.results.map((function(e){return e.hsnLabel=e.chapter+"."+e.heading+"."+e.subHeading,e})):"getTaxList"===e?i.taxList=r.results:"getPaymentTermsList"===e?i.paymentTermsList=r.results:"getPaymentMethodsList"===e?i.paymentMethodsList=r.results:"getIssuingNoteList"===e&&(i.issuingNoteList=r.results)):i.utilsService.showFailureMsg(r)}))}},{key:"getDistributionList",value:function(e){var t=this;this.commonDataService.getDistributionList(!0).subscribe((function(i){"SUCCESS"===i.status?(t.utilsService.ifNotPushToList(i.results,e),t.distributionList=i.results):t.utilsService.showFailureMsg(i)}))}},{key:"getCustomerBpList",value:function(e,t){var i=this;this.commonDataService.getBusinessPartnerList([1]).subscribe((function(e){"SUCCESS"===e.status?(i.utilsService.ifNotPushToList(e.results,t),i.customerBpList=e.results.map((function(e){return e.searchText=e.partnerName+" - "+e.partnerCode,e})),"3"!==i.storageService.get("employeeTypeId")||"salesOrder"!==i.txnKeys.inputScreenName||i.txnKeys.inputEditId||i.txnKeys.inputDraftId||(i.myForm1.patchValue({customerBpId:i.storageService.get("customerBpId")}),i.onBpChange())):i.utilsService.showFailureMsg(e)}))}},{key:"getCustomerBpContactList",value:function(e,t){var i=this;this.customerBpContactList=[],this.branchUtilsService.getBpContactListAndSet(this.myForm1,"customerBpContactsId","customerBpId",e,t).subscribe((function(e){i.customerBpContactList=e}))}},{key:"getCustomerBpAddressShipToList",value:function(e,t){var i=this;this.customerBpAddressShipToList=[],this.branchUtilsService.txnGetBpAddressListAndSet("1",this.myForm1,"customerShipToBpAddressId","customerShipToAddress","customerBpId",e,t).subscribe((function(e){i.customerBpAddressShipToList=e}))}},{key:"getCustomerBpAddressBillToList",value:function(e,t){var i=this;this.customerBpAddressBillToList=[],this.branchUtilsService.txnGetBpAddressListAndSet("2",this.myForm1,"customerBillToBpAddressId","customerBillToAddress","customerBpId",e,t).subscribe((function(e){i.customerBpAddressBillToList=e}))}},{key:"getSalesEmployeeList",value:function(e){var t=this;this.commonDataService.getEmployeeList(1).subscribe((function(i){"SUCCESS"===i.status?(t.utilsService.ifNotPushToList(i.results,e),t.salesEmployeeList=i.results.map((function(e){return e.searchText=e.employeeName+" - "+e.empCode,e}))):t.utilsService.showFailureMsg(i)}))}},{key:"getItemList",value:function(e,t,i,r){var n=this;return t?(this.itemList=i.map((function(e){return e.searchText=e.itemName+" - "+e.itemCode,e})),r.itemListArray.forEach((function(e,t){var i=n.myForm1.controls.itemListArray.at(t),r=parseFloat(e.itemInfo[0].stock),s=parseFloat(e.itemInfo[0].salesOpenCount),a=parseFloat(e.itemInfo[0].purchaseOpenCount);i.patchValue({availableStock:r-s+a,committedStock:s,orderedStock:a})})),!1):!e.term||e.term.length<3?(this.itemList=[],!1):void this.commonDataService.getItemList(e.term,1).subscribe((function(e){"SUCCESS"===e.status?n.itemList=e.results.map((function(e){return e.searchText=e.itemName+" - "+e.itemCode,e})):n.utilsService.showFailureMsg(e)}))}},{key:"getWarehouseList",value:function(e,t,i){var r=this;this.commonDataService.getAutoSuggestionList("getWarehouseList").subscribe((function(n){"SUCCESS"===n.status?(r.utilsService.ifNotPushToList(n.results,t),r.warehouseList=n.results.map((function(e){return e.searchText=e.warehouseName+" - "+e.warehouseCode,e})),e&&i.itemListArray.forEach((function(e,t){r.setBinList(t,!0,e.binInfo)}))):r.utilsService.showFailureMsg(n)}))}},{key:"setBinList",value:function(e,t,i){this.branchUtilsService.txnSetBinListAndPreselect(this.warehouseList,this.itemList,this.myForm1,e,"warehouseId","binId","binList",t,i),this.myForm1.controls.itemListArray.at(e).patchValue({stockDetails:""})}},{key:"getDpDocumentNoList",value:function(e,t){var i=this;if("salesArInvoice"!==this.txnKeys.inputScreenName&&"salesArCreditMemo"!==this.txnKeys.inputScreenName)return!1;var r=this.myForm1Data.customerBpId;if(this.dpDocumentNoList=[],e||this.myForm1.patchValue({salesArDpInvoiceId:null,salesArDpInvoiceUsedAmount:0}),!r)return!1;this.commonDataService.getDpDocumentList(r).subscribe((function(r){"SUCCESS"===r.status?(i.dpDocumentNoList=r.results,e&&i.utilsService.ifNotPushToList(i.dpDocumentNoList,t),"salesArInvoice"===i.txnKeys.inputScreenName&&(!i.txnKeys.inputCopyIds||"salesQuote"!==i.txnKeys.inputCopyScreenName&&"salesOrder"!==i.txnKeys.inputCopyScreenName||i.getDpIdBasedOnCopyFromQuoteAndOrder())):i.utilsService.showFailureMsg(r)}))}},{key:"getDpIdBasedOnCopyFromQuoteAndOrder",value:function(){var e=this;this.commonDataService.getDpInvoiceDocumentNumberForArInvoice(this.branchUtilsService.screenAttributes[this.txnKeys.inputCopyScreenName].documentTypeId,this.txnKeys.inputCopyIds[0]).subscribe((function(t){"SUCCESS"===t.status?t.results.length>0&&(e.myForm1.patchValue({salesArDpInvoiceId:t.results[0].id}),e.setDpAmount()):e.utilsService.showFailureMsg(t)}))}},{key:"setDpAmount",value:function(){if(!this.myForm1Data.salesArDpInvoiceId)return this.myForm1.patchValue({salesArDpInvoiceUsedAmount:0,salesArDpInvoiceUsedTaxAmount:0}),this.branchUtilsService.txnCalcTotal(this.myForm1),!1;var e=m.findIndex(this.dpDocumentNoList,{id:this.myForm1Data.salesArDpInvoiceId});e>=0&&(this.myForm1.patchValue({salesArDpInvoiceUsedAmount:this.dpDocumentNoList[e].remainingAmount}),this.txnKeys.salesArDpInvoiceUsedOriginalAmount=this.dpDocumentNoList[e].remainingAmount,this.setDpTaxAmount())}},{key:"setDpTaxAmount",value:function(){if(!this.myForm1Data.salesArDpInvoiceId)return this.myForm1.patchValue({salesArDpInvoiceUsedAmount:0,salesArDpInvoiceUsedTaxAmount:0}),this.branchUtilsService.txnCalcTotal(this.myForm1),!1;var e=m.findIndex(this.dpDocumentNoList,{id:this.myForm1Data.salesArDpInvoiceId});if(e>=0){var t=this.dpDocumentNoList[e].totalAmount;t=parseFloat(t||0);var i=this.dpDocumentNoList[e].taxPercentage;i=parseFloat(i||0);var r=this.myForm1Data.salesArDpInvoiceUsedAmount;r=parseFloat(r||0),this.myForm1.patchValue({salesArDpInvoiceUsedTaxAmount:r*(i/(t-i)*100)/100}),this.branchUtilsService.txnCalcTotal(this.myForm1)}}},{key:"convertDpmValueToPercentage",value:function(){var e=parseFloat(this.myForm1Data.totalBeforeDiscount),t=(parseFloat(this.myForm1Data.dpmValue?this.myForm1Data.dpmValue:0)/e*100).toFixed(2);this.myForm1.patchValue({dpmPercentage:t}),this.branchUtilsService.txnCalcTotal(this.myForm1)}},{key:"showTxnOptionsSidebar",value:function(e){this.branchUtilsService.spiTxnOptions.next(!1===e?{show:!1}:{show:!0,spiName:this.branchUtilsService.spiTxnId.sales,screenName:this.txnKeys.inputScreenName,editId:this.txnKeys.inputEditId,bpId:this.myForm1Data.customerBpId,status:this.myForm1Data.status})}},{key:"downloadPdf",value:function(){this.branchUtilsService.spiTxnOptionsDownloadPdf.next({spiName:this.branchUtilsService.spiTxnId.sales,screenName:this.txnKeys.inputScreenName,id:this.txnKeys.inputEditId})}},{key:"getApprovalHistory",value:function(e){var t=this;e&&this.approvalStatusReportDataService.getHistory(e).subscribe((function(e){"SUCCESS"===e.status?t.approvalHistory=e.results:t.utilsService.showFailureMsg(e)}))}},{key:"showSelectItemsByManufacturerPopup",value:function(){this.modalService.show(le,{backdrop:"static"})}},{key:"showOpenSalesOrdersByItemPopup",value:function(e){var t={backdrop:"static"};t.initialState={itemId:e},this.modalService.show(pe,t)}},{key:"onKeydownHandler",value:function(e){e.ctrlKey&&"s"===e.key.toLowerCase()&&(this.txnKeys.inputEditId&&"1"===this.txnKeys.editStatusId||!this.txnKeys.inputEditId)&&(this.confirmSaveUpdate(),e.preventDefault()),this.txnKeys.inputEditId&&e.ctrlKey&&-1!=="p".indexOf(e.key)&&(this.downloadPdf(),e.preventDefault())}},{key:"ngOnDestroy",value:function(){this.reInitializeGlobalVariables(),this.itemListColumnOrderChangesSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||$r)(a.Pb(s.g),a.Pb(s.f),a.Pb(s.a),a.Pb(b.l),a.Pb(o.a),a.Pb(d),a.Pb(he.a),a.Pb(l.e),a.Pb(n.a),a.Pb(a.h),a.Pb(se.b),a.Pb(b.e))},$r.\u0275cmp=a.Jb({type:$r,selectors:[["app-sales-txn-add"]],viewQuery:function(e,t){var i;1&e&&(a.Pc(re.a,!0),a.Pc(ne.a,!0),a.Pc(Se,!0),a.Pc(Ie,!0),a.Pc(Ce,!0),a.Pc(Ue,!0),a.Pc(De,!0),a.Pc(Le,!0),a.Pc(Ve,!0),a.Pc(Ae,!0),a.Pc(Ne,!0),a.Pc(xe,!0),a.Pc(Fe,!0),a.Pc(Te,!0),a.Pc(Ee,!0),a.Pc(ke,!0),a.Pc(Oe,!0),a.Pc(Pe,!0),a.Pc(Be,!0),a.Pc(Ke,!0),a.Pc(Me,!0),a.Pc(Re,!0),a.Pc(we,!0),a.Pc(Je,!0),a.Pc(Qe,!0),a.Pc(_e,!0),a.Pc(Ge,!0),a.Pc(ze,!0),a.Pc(je,!0),a.Pc(qe,!0),a.Pc(We,!0),a.Pc(He,!0),a.Pc($e,!0),a.Pc(Ye,!0),a.Pc(Ze,!0),a.Pc(Xe,!0),a.Pc(et,!0),a.Pc(tt,!0),a.Pc(it,!0),a.Pc(rt,!0),a.Pc(nt,!0),a.Pc(st,!0),a.Pc(at,!0),a.Pc(ot,!0),a.Pc(ct,!0),a.Pc(ut,!0),a.Pc(lt,!0),a.Pc(mt,!0),a.Pc(bt,!0),a.Pc(dt,!0)),2&e&&(a.zc(i=a.ec())&&(t.attachmentsComponent=i.first),a.zc(i=a.ec())&&(t.udfViewerComponent=i.first),a.zc(i=a.ec())&&(t.hActions=i.first),a.zc(i=a.ec())&&(t.hSno=i.first),a.zc(i=a.ec())&&(t.hWithoutQtyPosting=i.first),a.zc(i=a.ec())&&(t.hItemName=i.first),a.zc(i=a.ec())&&(t.hQuantity=i.first),a.zc(i=a.ec())&&(t.hOpenQty=i.first),a.zc(i=a.ec())&&(t.hUOM=i.first),a.zc(i=a.ec())&&(t.hUnitPrice=i.first),a.zc(i=a.ec())&&(t.hWarehouse=i.first),a.zc(i=a.ec())&&(t.hBin=i.first),a.zc(i=a.ec())&&(t.hAvailable=i.first),a.zc(i=a.ec())&&(t.hCommitted=i.first),a.zc(i=a.ec())&&(t.hOrdered=i.first),a.zc(i=a.ec())&&(t.hHSN=i.first),a.zc(i=a.ec())&&(t.hDiscount=i.first),a.zc(i=a.ec())&&(t.hTaxCode=i.first),a.zc(i=a.ec())&&(t.hTax=i.first),a.zc(i=a.ec())&&(t.hTotal=i.first),a.zc(i=a.ec())&&(t.hDistRules=i.first),a.zc(i=a.ec())&&(t.hSerialNumber=i.first),a.zc(i=a.ec())&&(t.hExpiryDate=i.first),a.zc(i=a.ec())&&(t.hBpApproval=i.first),a.zc(i=a.ec())&&(t.hRemarks=i.first),a.zc(i=a.ec())&&(t.hDealerDiscountPercentage=i.first),a.zc(i=a.ec())&&(t.bActions=i.first),a.zc(i=a.ec())&&(t.bSno=i.first),a.zc(i=a.ec())&&(t.bWithoutQtyPosting=i.first),a.zc(i=a.ec())&&(t.bItemName=i.first),a.zc(i=a.ec())&&(t.bQuantity=i.first),a.zc(i=a.ec())&&(t.bOpenQty=i.first),a.zc(i=a.ec())&&(t.bUOM=i.first),a.zc(i=a.ec())&&(t.bUnitPrice=i.first),a.zc(i=a.ec())&&(t.bWarehouse=i.first),a.zc(i=a.ec())&&(t.bBin=i.first),a.zc(i=a.ec())&&(t.bAvailable=i.first),a.zc(i=a.ec())&&(t.bCommitted=i.first),a.zc(i=a.ec())&&(t.bOrdered=i.first),a.zc(i=a.ec())&&(t.bHSN=i.first),a.zc(i=a.ec())&&(t.bDiscount=i.first),a.zc(i=a.ec())&&(t.bTaxCode=i.first),a.zc(i=a.ec())&&(t.bTax=i.first),a.zc(i=a.ec())&&(t.bTotal=i.first),a.zc(i=a.ec())&&(t.bDistRules=i.first),a.zc(i=a.ec())&&(t.bSerialNumber=i.first),a.zc(i=a.ec())&&(t.bExpiryDate=i.first),a.zc(i=a.ec())&&(t.bBpApproval=i.first),a.zc(i=a.ec())&&(t.bRemarks=i.first),a.zc(i=a.ec())&&(t.bDealerDiscountPercentage=i.first))},hostBindings:function(e,t){1&e&&a.dc("keydown",(function(e){return t.onKeydownHandler(e)}),!1,a.Bc)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"page-title"],[1,"btn-group"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-arrow-left"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-columns"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"fa","fa-plus-square"],[1,"working-container","spi-txn-add",3,"formGroup"],[1,"box"],[1,"box-header"],[1,"fa","fa-angle-right"],[1,"box-body","box-form"],[1,"row"],[1,"form-group","col-sm-3"],[1,"form-label"],[1,"mandatory"],[1,"col-sm-6"],["formControlName","documentNumberingId","bindLabel","documentNumberingName","bindValue","id","placeholder","--SELECT--",3,"items","change"],["type","text","formControlName","documentNumber",1,"form-control","form-control-sm"],["class","validation-error",4,"ngIf"],[1,"action-control"],["formControlName","customerBpId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple","focus","change"],["ng-option-tmp",""],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["class","info-icon","container","body","tooltip","View Details",3,"click",4,"ngIf"],["formControlName","customerBpContactsId","bindLabel","contactName","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["formControlName","currencyId",1,"form-control","form-control-sm"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","referenceNumber",1,"form-control","form-control-sm"],["formControlName","postingDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["class","form-group col-sm-3",4,"ngIf"],["formControlName","documentDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],[1,"position-relative"],["formControlName","salesEmpId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--",3,"items","multiple"],["formControlName","status",1,"form-control","form-control-sm"],["formControlName","remarks","rows","2",1,"form-control","form-control-sm"],[1,"box-body","box-table"],[1,"table-responsive",3,"ngStyle"],[1,"table","table-striped","table-bordered"],[4,"ngFor","ngForOf"],["formArrayName","itemListArray"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-sm-7","text-center"],[1,"calc-img"],[1,"col-sm-5"],[1,"table","table-striped","table-bordered","calculation"],[2,"min-width","150px"],[2,"width","100px"],[1,"text-right",2,"min-width","150px"],[1,"text-right"],[1,"checkbox"],["type","checkbox","formControlName","roundingOffCheckbox",3,"ngModelChange"],[1,"checkmark"],["type","text","formControlName","rounding",1,"form-control","form-control-sm","text-right",3,"keyup"],[1,"net"],[1,"net","text-right"],["formControlName","customerShipToBpAddressId",1,"form-control","form-control-sm",3,"change"],["formControlName","customerShipToAddress",1,"form-control","form-control-sm"],["formControlName","customerBillToBpAddressId",1,"form-control","form-control-sm",3,"change"],["formControlName","customerBillToAddress",1,"form-control","form-control-sm"],["formControlName","paymentTermsId",1,"form-control","form-control-sm",3,"change"],["formControlName","paymentMethodId",1,"form-control","form-control-sm"],["type","text","formControlName","taxCode",1,"form-control","form-control-sm"],[3,"type"],[3,"type","doSuccess"],["class","box",4,"ngIf"],[1,"btn-group","text-right"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],["hActions",""],["hSno",""],["hWithoutQtyPosting",""],["hItemName",""],["hQuantity",""],["hOpenQty",""],["hUOM",""],["hUnitPrice",""],["hWarehouse",""],["hBin",""],["hAvailable",""],["hCommitted",""],["hOrdered",""],["hHSN",""],["hDiscount",""],["hTaxCode",""],["hTax",""],["hTotal",""],["hDistRules",""],["hSerialNumber",""],["hExpiryDate",""],["hBpApproval",""],["hRemarks",""],["hDealerDiscountPercentage",""],["bActions",""],["bSno",""],["bWithoutQtyPosting",""],["bItemName",""],["bQuantity",""],["bOpenQty",""],["bUOM",""],["bUnitPrice",""],["bWarehouse",""],["bBin",""],["bAvailable",""],["bCommitted",""],["bOrdered",""],["bHSN",""],["bDiscount",""],["bTaxCode",""],["bTax",""],["bTotal",""],["bDistRules",""],["bSerialNumber",""],["bExpiryDate",""],["bBpApproval",""],["bRemarks",""],["bDealerDiscountPercentage",""],[1,"fa","fa-print"],[1,"validation-error"],["target","_blank","routerLink","/branch/bp/biz-partner-add",3,"click"],[1,"fa","fa-plus"],[3,"click"],[1,"fa","fa-redo-alt"],["container","body","tooltip","View Details",1,"info-icon",3,"click"],[1,"fa","fa-info-circle"],[3,"value"],["formControlName","validUntil",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","deliveryDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","dueDate",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["type","text","formControlName","gatepassStatus",1,"form-control","form-control-sm"],["value","1"],["value","2"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"formGroupName"],["colspan","17"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],[1,"btn","btn-info","btn-sm",3,"disabled","click"],[1,"badge","badge-danger"],["type","text","formControlName","discountPercentage",1,"form-control","form-control-sm","text-right",3,"keyup"],["type","text","formControlName","dpmPercentage",1,"form-control","form-control-sm","text-right",3,"keyup"],["type","text","formControlName","dpmValue",1,"form-control","form-control-sm","text-right",3,"keyup"],["formControlName","salesArDpInvoiceId","bindLabel","documentNumber","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","change"],["type","text","formControlName","salesArDpInvoiceUsedAmount",1,"form-control","form-control-sm","text-right",3,"keyup"],["class","small-text",4,"ngIf"],[1,"small-text"],["type","text","formControlName","salesArDpInvoiceUsedTaxAmount",1,"form-control","form-control-sm","text-right"],["type","text","formControlName","courier",1,"form-control","form-control-sm"],["type","text","formControlName","trackingNumber",1,"form-control","form-control-sm"],["formControlName","deliveryStatus",1,"form-control","form-control-sm"],["type","text","formControlName","originalRefNumber",1,"form-control","form-control-sm"],["formControlName","originalRefDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["formControlName","issuingNoteId",1,"form-control","form-control-sm"],[2,"width","40px"],[2,"width","250px"],[1,"badge",3,"ngClass"],[1,"fa","fa-save"],[1,"fa","fa-broom"],[1,"fa","fa-times"],[1,"alert","alert-info","mt-3"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[2,"min-width","80px"],[2,"min-width","30px"],["style","min-width:100px",4,"ngIf"],[2,"min-width","100px"],[2,"min-width","200px"],["class","mandatory",4,"ngIf"],[2,"min-width","60px"],[2,"min-width","120px"],[2,"min-width","130px"],[3,"formGroup"],["placement","top","container","body","tooltip","Delete",1,"action","red",3,"click"],[1,"fa","fa-minus-circle"],[3,"formGroupName",4,"ngIf"],["type","checkbox","formControlName","withoutQtyPosting"],["formControlName","itemId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","virtualScroll","search","change"],["class","info-icon","dropdown","",4,"ngIf"],["dropdown","",1,"info-icon"],["dropdownToggle","",1,"fa","fa-info-circle"],["class","dropdown-menu",4,"dropdownMenu"],[1,"dropdown-menu"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],["type","text","formControlName","quantity",1,"form-control","form-control-sm","text-right",3,"keyup"],["class","info-icon","container","body","tooltip","Available-to-Promise",3,"click",4,"ngIf"],["container","body","tooltip","Available-to-Promise",1,"info-icon",3,"click"],["formControlName","uomId","bindLabel","uomName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["type","text","formControlName","unitPrice",1,"form-control","form-control-sm","text-right",3,"keyup"],["formControlName","warehouseId","bindLabel","searchText","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","change"],["formControlName","binId","bindLabel","binName","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["tooltip","Click to get stock details","container","body","placement","bottom",1,"info-icon",3,"click"],["popTemplate",""],["container","body","placement","bottom",3,"popover","outsideClick"],[1,"mb-1"],["formControlName","hsnId","bindLabel","hsnLabel","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple"],["formControlName","taxId","bindLabel","taxCode","bindValue","id","placeholder","--SELECT--","appendTo","body",3,"items","multiple","change"],[1,"text-right",3,"formGroupName"],["formControlName","distributionRulesId","bindLabel","distributionName","bindValue","id","placeholder","--SELECT--","appendTo","body","groupBy","dimensionDescription",3,"items","multiple","add"],["type","text","formControlName","serialNumber",1,"form-control","form-control-sm"],["formControlName","expiryDate","appendTo","body",3,"monthNavigator","yearNavigator","yearRange","dateFormat"],["type","checkbox","formControlName","bpApproval"],["type","text","formControlName","remarks",1,"form-control","form-control-sm"],["type","text","formControlName","dealerDiscountPercentage",1,"form-control","form-control-sm","text-right"]],template:function(e,t){1&e&&a.Jc(0,Hr,335,78,"ng-container",0),2&e&&a.oc("ngIf",t.screenAcl.view)},directives:[p.m,l.n,l.i,ve.a,l.m,l.g,l.b,ve.c,l.t,l.p,l.v,p.l,h.a,p.n,l.d,l.a,ne.a,re.a,fe.a,n.g,y.a,p.q,l.j,p.k,ye.a,ye.d,ye.b,ge.a],styles:[""]}),$r),Xr=n.h.forChild([{path:"sales-txn-list/:screenName",component:X},{path:"sales-txn-add/:screenName",component:Zr},{path:"sales-txn-edit/:screenName/:id",component:Zr},{path:"sales-txn-edit-draft/:screenName/:draftId",component:Zr},{path:"sales-txn-copy/:screenName/:copyScreenName/:copyId",component:Zr},{path:"sales-txn-duplicate/:screenName/:duplicateId",component:Zr}]),en=i("o+NB"),tn=i("7zUj"),rn=i("N5hj"),nn=i("dJ0z"),sn=((Yr=function e(){_classCallCheck(this,e)}).\u0275mod=a.Nb({type:Yr}),Yr.\u0275inj=a.Mb({factory:function(e){return new(e||Yr)},providers:[d],imports:[[Xr,en.BranchModule,tn.a,rn.a,nn.a]]}),Yr)}}]);